(self.webpackChunkproject2=self.webpackChunkproject2||[]).push([[179],{106:(go,ar,gt)=>{"use strict";var Ve=gt(367),Tt=gt(461),N=gt(582),oe=gt(492),Ct=gt(3);function ur(O){return O&&"object"==typeof O&&"default"in O?O:{default:O}}var rn,En=ur(Ve),Be=((rn={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",rn["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",rn["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",rn["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",rn["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",rn["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",rn["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",rn["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",rn["recaptcha-error"]="ReCAPTCHA error.",rn),ae=new oe.ErrorFactory("appCheck","AppCheck",Be),xe=new Map,Ie={activated:!1,tokenObservers:[]},ge={enabled:!1};function be(O){return xe.get(O)||Ie}function et(O,P){xe.set(O,P)}function St(){return ge}var Te="https://content-firebaseappcheck.googleapis.com/v1beta",Oe="exchangeRecaptchaToken",Ke="exchangeDebugToken",at={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4},rt=function(){function O(P,$,Q,ue,Ee){if(this.operation=P,this.retryPolicy=$,this.getWaitDuration=Q,this.lowerBound=ue,this.upperBound=Ee,this.pending=null,this.nextErrorWaitInterval=ue,ue>Ee)throw new Error("Proactive refresh lower bound greater than upper bound!")}return O.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(function(){})},O.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},O.prototype.isRunning=function(){return!!this.pending},O.prototype.process=function(P){return N.__awaiter(this,void 0,void 0,function(){var $;return N.__generator(this,function(Q){switch(Q.label){case 0:this.stop(),Q.label=1;case 1:return Q.trys.push([1,6,,7]),this.pending=new oe.Deferred,[4,He(this.getNextRun(P))];case 2:return Q.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return Q.sent(),this.pending=new oe.Deferred,[4,this.operation()];case 4:return Q.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return Q.sent(),this.process(!0).catch(function(){}),[3,7];case 6:return $=Q.sent(),this.retryPolicy($)?this.process(!1).catch(function(){}):this.stop(),[3,7];case 7:return[2]}})})},O.prototype.getNextRun=function(P){if(P)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var $=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),$},O}();function He(O){return new Promise(function(P){setTimeout(P,O)})}function on(){return self.grecaptcha}function cr(O){if(!be(O).activated)throw ae.create("use-before-activation",{appName:O.name})}function hn(O){return oe.base64.encodeString(JSON.stringify(O),!1)}function ji(O,P){var $=O.url,Q=O.body;return N.__awaiter(this,void 0,void 0,function(){var ue,Ee,$e,Ft,gn,it,er,qi,Vo,yt;return N.__generator(this,function(Gi){switch(Gi.label){case 0:ue={"Content-Type":"application/json"},(Ee=P.getImmediate({optional:!0}))&&(ue["X-Firebase-Client"]=Ee.getPlatformInfoString()),$e={method:"POST",body:JSON.stringify(Q),headers:ue},Gi.label=1;case 1:return Gi.trys.push([1,3,,4]),[4,fetch($,$e)];case 2:return Ft=Gi.sent(),[3,4];case 3:throw gn=Gi.sent(),ae.create("fetch-network-error",{originalErrorMessage:gn.message});case 4:if(200!==Ft.status)throw ae.create("fetch-status-error",{httpStatus:Ft.status});Gi.label=5;case 5:return Gi.trys.push([5,7,,8]),[4,Ft.json()];case 6:return it=Gi.sent(),[3,8];case 7:throw er=Gi.sent(),ae.create("fetch-parse-error",{originalErrorMessage:er.message});case 8:if(!(qi=it.ttl.match(/^([\d.]+)(s)$/))||!qi[2]||isNaN(Number(qi[1])))throw ae.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+it.ttl});return Vo=1e3*Number(qi[1]),yt=Date.now(),[2,{token:it.attestationToken,expireTimeMillis:yt+Vo,issuedAtTimeMillis:yt}]}})})}function Bi(O,P){var $=O.options;return{url:Te+"/projects/"+$.projectId+"/apps/"+$.appId+":"+Oe+"?key="+$.apiKey,body:{recaptcha_token:P}}}function Hi(O,P){var $=O.options;return{url:Te+"/projects/"+$.projectId+"/apps/"+$.appId+":"+Ke+"?key="+$.apiKey,body:{debug_token:P}}}var Cn="firebase-app-check-database",lr=1,Gn="firebase-app-check-store",Y="debug-token",Z=null;function se(){return Z||(Z=new Promise(function(O,P){try{var $=indexedDB.open(Cn,lr);$.onsuccess=function(Q){O(Q.target.result)},$.onerror=function(Q){var ue;P(ae.create("storage-open",{originalErrorMessage:null===(ue=Q.target.error)||void 0===ue?void 0:ue.message}))},$.onupgradeneeded=function(Q){0===Q.oldVersion&&Q.target.result.createObjectStore(Gn,{keyPath:"compositeKey"})}}catch(Q){P(ae.create("storage-open",{originalErrorMessage:Q.message}))}}))}function ce(O){return tt(Re(O))}function Le(O,P){return N.__awaiter(this,void 0,void 0,function(){var $,Q,ue,Ee;return N.__generator(this,function($e){switch($e.label){case 0:return[4,se()];case 1:return $=$e.sent(),Q=$.transaction(Gn,"readwrite"),ue=Q.objectStore(Gn),Ee=ue.put({compositeKey:O,value:P}),[2,new Promise(function(Ft,gn){Ee.onsuccess=function(it){Ft()},Q.onerror=function(it){var er;gn(ae.create("storage-set",{originalErrorMessage:null===(er=it.target.error)||void 0===er?void 0:er.message}))}})]}})})}function tt(O){return N.__awaiter(this,void 0,void 0,function(){var P,$,Q,ue;return N.__generator(this,function(Ee){switch(Ee.label){case 0:return[4,se()];case 1:return P=Ee.sent(),$=P.transaction(Gn,"readonly"),Q=$.objectStore(Gn),ue=Q.get(O),[2,new Promise(function($e,Ft){ue.onsuccess=function(gn){var it=gn.target.result;$e(it?it.value:void 0)},$.onerror=function(gn){var it;Ft(ae.create("storage-get",{originalErrorMessage:null===(it=gn.target.error)||void 0===it?void 0:it.message}))}})]}})})}function Re(O){return O.options.appId+"-"+O.name}var jt=new Ct.Logger("@firebase/app-check");function D(O,P){return oe.isIndexedDBAvailable()?function pe(O,P){return Le(Re(O),P)}(O,P).catch(function($){jt.warn("Failed to write token to indexeddb. Error: "+$)}):Promise.resolve()}function Vn(){return N.__awaiter(this,void 0,void 0,function(){var O;return N.__generator(this,function(P){if((O=St()).enabled&&O.token)return[2,O.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")})})}var At={error:"UNKNOWN_ERROR"};function Mt(O,P,$){return void 0===$&&($=!1),N.__awaiter(this,void 0,void 0,function(){var Q,ue,Ee,$e,Ft,gn,it,er,qi,Vo;return N.__generator(this,function(yt){switch(yt.label){case 0:return cr(O),Q=be(O),Ee=void 0,(ue=Q.token)?[3,2]:[4,Q.cachedTokenPromise];case 1:($e=yt.sent())&&Jt($e)&&(ue=$e,et(O,N.__assign(N.__assign({},Q),{token:ue})),Fr(O,{token:ue.token})),yt.label=2;case 2:return!$&&ue&&Jt(ue)?[2,{token:ue.token}]:function Cr(){return St().enabled}()?(gn=ji,it=Hi,er=[O],[4,Vn()]):[3,6];case 3:return[4,gn.apply(void 0,[it.apply(void 0,er.concat([yt.sent()])),P])];case 4:return Ft=yt.sent(),[4,D(O,Ft)];case 5:return yt.sent(),et(O,N.__assign(N.__assign({},Q),{token:Ft})),[2,{token:Ft.token}];case 6:return yt.trys.push([6,8,,9]),[4,Q.provider.getToken()];case 7:return ue=yt.sent(),[3,9];case 8:return qi=yt.sent(),jt.error(qi),Ee=qi,[3,9];case 9:return ue?[3,10]:(Vo=function Dr(O){return{token:hn(At),error:O}}(Ee),[3,12]);case 10:return Vo={token:ue.token},et(O,N.__assign(N.__assign({},Q),{token:ue})),[4,D(O,ue)];case 11:yt.sent(),yt.label=12;case 12:return Fr(O,Vo),[2,Vo]}})})}function Zn(O,P,$,Q,ue){var Ee=be(O),$e={next:Q,error:ue,type:$},Ft=N.__assign(N.__assign({},Ee),{tokenObservers:N.__spreadArray(N.__spreadArray([],Ee.tokenObservers),[$e])});if(!Ft.tokenRefresher){var gn=function Rn(O,P){var $=this;return new rt(function(){return N.__awaiter($,void 0,void 0,function(){var ue;return N.__generator(this,function(Ee){switch(Ee.label){case 0:return be(O).token?[3,2]:[4,Mt(O,P)];case 1:return ue=Ee.sent(),[3,4];case 2:return[4,Mt(O,P,!0)];case 3:ue=Ee.sent(),Ee.label=4;case 4:if(ue.error)throw ue.error;return[2]}})})},function(){return!0},function(){var Q=be(O);if(Q.token){var ue=Q.token.issuedAtTimeMillis+.5*(Q.token.expireTimeMillis-Q.token.issuedAtTimeMillis)+3e5;return ue=Math.min(ue,Q.token.expireTimeMillis-3e5),Math.max(0,ue-Date.now())}return 0},at.RETRIAL_MIN_WAIT,at.RETRIAL_MAX_WAIT)}(O,P);Ft.tokenRefresher=gn}if(!Ft.tokenRefresher.isRunning()&&Ee.isTokenAutoRefreshEnabled&&Ft.tokenRefresher.start(),Ee.token&&Jt(Ee.token)){var it=Ee.token;Promise.resolve().then(function(){return Q({token:it.token})}).catch(function(){})}else null==Ee.token&&Ee.cachedTokenPromise.then(function(er){er&&Jt(er)&&Q({token:er.token})}).catch(function(){});et(O,Ft)}function Un(O,P){var $=be(O),Q=$.tokenObservers.filter(function(ue){return ue.next!==P});0===Q.length&&$.tokenRefresher&&$.tokenRefresher.isRunning()&&$.tokenRefresher.stop(),et(O,N.__assign(N.__assign({},$),{tokenObservers:Q}))}function Fr(O,P){for(var Q=0,ue=be(O).tokenObservers;Q<ue.length;Q++){var Ee=ue[Q];try{"EXTERNAL"===Ee.type&&null!=P.error?Ee.error(P.error):Ee.next(P)}catch{}}}function Jt(O){return O.expireTimeMillis-Date.now()>0}var sa="https://www.google.com/recaptcha/api.js";function Qa(O){return N.__awaiter(this,void 0,void 0,function(){var $;return N.__generator(this,function(Q){switch(Q.label){case 0:return cr(O),[4,be(O).reCAPTCHAState.initialized.promise];case 1:return $=Q.sent(),[2,new Promise(function(ue,Ee){var $e=be(O).reCAPTCHAState;$.ready(function(){ue($.execute($e.widgetId,{action:"fire_app_check"}))})})]}})})}function ua(O,P,$,Q){var ue=$.render(Q,{sitekey:P,size:"invisible"}),Ee=be(O);et(O,N.__assign(N.__assign({},Ee),{reCAPTCHAState:N.__assign(N.__assign({},Ee.reCAPTCHAState),{widgetId:ue})}))}var As=function(){function O(P){this._siteKey=P}return O.prototype.getToken=function(){return N.__awaiter(this,void 0,void 0,function(){var P;return N.__generator(this,function($){switch($.label){case 0:if(!this._app||!this._platformLoggerProvider)throw ae.create("use-before-activation",{appName:""});$.label=1;case 1:return $.trys.push([1,3,,4]),[4,Qa(this._app)];case 2:return P=$.sent(),[3,4];case 3:throw $.sent(),ae.create("recaptcha-error");case 4:return[2,ji(Bi(this._app,P),this._platformLoggerProvider)]}})})},O.prototype.initialize=function(P,$){this._app=P,this._platformLoggerProvider=$,function aa(O,P){var $=be(O),Q=new oe.Deferred;et(O,N.__assign(N.__assign({},$),{reCAPTCHAState:{initialized:Q}}));var ue="fire_app_check_"+O.name,Ee=document.createElement("div");Ee.id=ue,Ee.style.display="none",document.body.appendChild(Ee);var $e=on();return $e?$e.ready(function(){ua(O,P,$e,ue),Q.resolve($e)}):function Xu(O){var P=document.createElement("script");P.src=""+sa,P.onload=O,document.head.appendChild(P)}(function(){var Ft=on();if(!Ft)throw new Error("no recaptcha");Ft.ready(function(){ua(O,P,Ft,ue),Q.resolve(Ft)})}),Q.promise}(P,this._siteKey).catch(function(){})},O}(),ci=function(){function O(P){this._customProviderOptions=P}return O.prototype.getToken=function(){return N.__awaiter(this,void 0,void 0,function(){var P,$,Q;return N.__generator(this,function(ue){switch(ue.label){case 0:if(!this._app)throw ae.create("use-before-activation",{appName:""});return[4,this._customProviderOptions.getToken()];case 1:return P=ue.sent(),$=oe.issuedAtTime(P.token),Q=null!==$&&$<Date.now()&&$>0?1e3*$:Date.now(),[2,N.__assign(N.__assign({},P),{issuedAtTimeMillis:Q})]}})})},O.prototype.initialize=function(P){this._app=P},O}();function Zu(O,P){return{app:O,activate:function($,Q){return function Ju(O,P,$,Q){var ue=be(O);if(ue.activated)throw ae.create("already-activated",{appName:O.name});var Ee=N.__assign(N.__assign({},ue),{activated:!0});Ee.cachedTokenPromise=function Ue(O){return N.__awaiter(this,void 0,void 0,function(){var P,$;return N.__generator(this,function(Q){switch(Q.label){case 0:if(!oe.isIndexedDBAvailable())return[3,5];P=void 0,Q.label=1;case 1:return Q.trys.push([1,3,,4]),[4,ce(O)];case 2:return P=Q.sent(),[3,4];case 3:return $=Q.sent(),jt.warn("Failed to read token from indexeddb. Error: "+$),[3,4];case 4:return[2,P];case 5:return[2,void 0]}})})}(O).then(function($e){return $e&&Jt($e)&&et(O,N.__assign(N.__assign({},be(O)),{token:$e})),$e}),Ee.provider="string"==typeof P?new As(P):P instanceof As||P instanceof ci?P:new ci({getToken:P.getToken}),Ee.isTokenAutoRefreshEnabled=void 0===Q?O.automaticDataCollectionEnabled:Q,et(O,Ee),Ee.provider.initialize(O,$)}(O,$,P,Q)},setTokenAutoRefreshEnabled:function($){return function zn(O,P){var $=be(O);$.tokenRefresher&&(!0===P?$.tokenRefresher.start():$.tokenRefresher.stop()),et(O,N.__assign(N.__assign({},$),{isTokenAutoRefreshEnabled:P}))}(O,$)},getToken:function($){return function $i(O,P,$){return N.__awaiter(this,void 0,void 0,function(){var Q;return N.__generator(this,function(ue){switch(ue.label){case 0:return[4,Mt(O,P,$)];case 1:if((Q=ue.sent()).error)throw Q.error;return[2,{token:Q.token}]}})})}(O,P,$)},onTokenChanged:function($,Q,ue){return function Lr(O,P,$,Q,ue){var Ee,$e=function(){};return Ee=null!=$.next?$.next.bind($):$,null!=$.error?$e=$.error.bind($):Q&&($e=Q),Zn(O,P,"EXTERNAL",Ee,$e),function(){return Un(O,Ee)}}(O,P,$,Q)},INTERNAL:{delete:function(){for(var Q=0,ue=be(O).tokenObservers;Q<ue.length;Q++)Un(O,ue[Q].next);return Promise.resolve()}}}}var j="app-check-internal";(function G(O){O.INTERNAL.registerComponent(new Tt.Component("appCheck",function(P){return Zu(P.getProvider("app").getImmediate(),P.getProvider("platform-logger"))},"PUBLIC").setServiceProps({ReCaptchaV3Provider:As,CustomProvider:ci}).setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(P,$,Q){P.getProvider(j).initialize()})),O.INTERNAL.registerComponent(new Tt.Component(j,function(P){return function bl(O,P){return{getToken:function($){return Mt(O,P,$)},addTokenListener:function($){return Zn(O,P,"INTERNAL",$)},removeTokenListener:function($){return Un(O,$)}}}(P.getProvider("app").getImmediate(),P.getProvider("platform-logger"))},"PUBLIC").setInstantiationMode("EXPLICIT")),O.registerVersion("@firebase/app-check","0.3.2")})(En.default),function Xr(){var O=oe.getGlobal();if("string"==typeof O.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===O.FIREBASE_APPCHECK_DEBUG_TOKEN){var P=St();P.enabled=!0;var $=new oe.Deferred;P.token=$,$.resolve("string"==typeof O.FIREBASE_APPCHECK_DEBUG_TOKEN?O.FIREBASE_APPCHECK_DEBUG_TOKEN:function Mn(){return N.__awaiter(this,void 0,void 0,function(){var O,P;return N.__generator(this,function($){switch($.label){case 0:O=void 0,$.label=1;case 1:return $.trys.push([1,3,,4]),[4,tt(Y)];case 2:return O=$.sent(),[3,4];case 3:return $.sent(),[3,4];case 4:return O?[2,O]:(P=function Pt(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(O){var P=16*Math.random()|0;return("x"===O?P:3&P|8).toString(16)})}(),function ee(O){return Le(Y,O)}(P).catch(function(Q){return jt.warn("Failed to persist debug token to indexeddb. Error: "+Q)}),console.log("AppCheck debug token: "+P+". You will need to whitelist it in the Firebase console for it to work"),[2,P])}})})}())}}()},367:(go,ar,gt)=>{"use strict";gt.r(ar),gt.d(ar,{default:()=>pe,firebase:()=>ce});var Ct,He,Ve=gt(582),Tt=gt(492),N=gt(461),oe=gt(3),ur=((Ct={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Ct["bad-app-name"]="Illegal App name: '{$appName}",Ct["duplicate-app"]="Firebase App named '{$appName}' already exists",Ct["app-deleted"]="Firebase App named '{$appName}' already deleted",Ct["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Ct["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Ct),En=new Tt.ErrorFactory("app","Firebase",ur),rn="@firebase/app",on="[DEFAULT]",cr=((He={})[rn]="fire-core",He["@firebase/analytics"]="fire-analytics",He["@firebase/app-check"]="fire-app-check",He["@firebase/auth"]="fire-auth",He["@firebase/database"]="fire-rtdb",He["@firebase/functions"]="fire-fn",He["@firebase/installations"]="fire-iid",He["@firebase/messaging"]="fire-fcm",He["@firebase/performance"]="fire-perf",He["@firebase/remote-config"]="fire-rc",He["@firebase/storage"]="fire-gcs",He["@firebase/firestore"]="fire-fst",He["fire-js"]="fire-js",He["firebase-wrapper"]="fire-js-all",He),Pt=new oe.Logger("@firebase/app"),hn=function(){function ee(ye,Le,tt){var Re=this;this.firebase_=tt,this.isDeleted_=!1,this.name_=Le.name,this.automaticDataCollectionEnabled_=Le.automaticDataCollectionEnabled||!1,this.options_=(0,Tt.deepCopy)(ye),this.container=new N.ComponentContainer(Le.name),this._addComponent(new N.Component("app",function(){return Re},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(jt){return Re._addComponent(jt)})}return Object.defineProperty(ee.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(ye){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=ye},enumerable:!1,configurable:!0}),Object.defineProperty(ee.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(ee.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),ee.prototype.delete=function(){var ye=this;return new Promise(function(Le){ye.checkDestroyed_(),Le()}).then(function(){return ye.firebase_.INTERNAL.removeApp(ye.name_),Promise.all(ye.container.getProviders().map(function(Le){return Le.delete()}))}).then(function(){ye.isDeleted_=!0})},ee.prototype._getService=function(ye,Le){var tt;void 0===Le&&(Le=on),this.checkDestroyed_();var Re=this.container.getProvider(ye);return!Re.isInitialized()&&"EXPLICIT"===(null===(tt=Re.getComponent())||void 0===tt?void 0:tt.instantiationMode)&&Re.initialize(),Re.getImmediate({identifier:Le})},ee.prototype._removeServiceInstance=function(ye,Le){void 0===Le&&(Le=on),this.container.getProvider(ye).clearInstance(Le)},ee.prototype._addComponent=function(ye){try{this.container.addComponent(ye)}catch(Le){Pt.debug("Component "+ye.name+" failed to register with FirebaseApp "+this.name,Le)}},ee.prototype._addOrOverwriteComponent=function(ye){this.container.addOrOverwriteComponent(ye)},ee.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},ee.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw En.create("app-deleted",{appName:this.name_})},ee}();hn.prototype.name&&hn.prototype.options||hn.prototype.delete||console.log("dc");var Cn=function Hi(){var ee=function Bi(ee){var ye={},Le=new Map,tt={__esModule:!0,initializeApp:function Ue(At,Mt){void 0===Mt&&(Mt={}),("object"!=typeof Mt||null===Mt)&&(Mt={name:Mt});var Un=Mt;void 0===Un.name&&(Un.name=on);var Rn=Un.name;if("string"!=typeof Rn||!Rn)throw En.create("bad-app-name",{appName:String(Rn)});if((0,Tt.contains)(ye,Rn))throw En.create("duplicate-app",{appName:Rn});var Fr=new ee(At,Un,tt);return ye[Rn]=Fr,Fr},app:jt,registerVersion:function Cr(At,Mt,Zn){var Un,Rn=null!==(Un=cr[At])&&void 0!==Un?Un:At;Zn&&(Rn+="-"+Zn);var Fr=Rn.match(/\s|\//),Jt=Mt.match(/\s|\//);if(Fr||Jt){var Dr=['Unable to register library "'+Rn+'" with version "'+Mt+'":'];return Fr&&Dr.push('library name "'+Rn+'" contains illegal characters (whitespace or "/")'),Fr&&Jt&&Dr.push("and"),Jt&&Dr.push('version name "'+Mt+'" contains illegal characters (whitespace or "/")'),void Pt.warn(Dr.join(" "))}Mn(new N.Component(Rn+"-version",function(){return{library:Rn,version:Mt}},"VERSION"))},setLogLevel:oe.setLogLevel,onLog:function Vn(At,Mt){if(null!==At&&"function"!=typeof At)throw En.create("invalid-log-argument");(0,oe.setUserLogHandler)(At,Mt)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:Mn,removeApp:function Re(At){delete ye[At]},components:Le,useAsService:function Xr(At,Mt){return"serverAuth"===Mt?null:Mt}}};function jt(At){if(!(0,Tt.contains)(ye,At=At||on))throw En.create("no-app",{appName:At});return ye[At]}function Mn(At){var Mt=At.name;if(Le.has(Mt))return Pt.debug("There were multiple attempts to register component "+Mt+"."),"PUBLIC"===At.type?tt[Mt]:null;if(Le.set(Mt,At),"PUBLIC"===At.type){var Zn=function(Jt){if(void 0===Jt&&(Jt=jt()),"function"!=typeof Jt[Mt])throw En.create("invalid-app-argument",{appName:Mt});return Jt[Mt]()};void 0!==At.serviceProps&&(0,Tt.deepExtend)(Zn,At.serviceProps),tt[Mt]=Zn,ee.prototype[Mt]=function(){for(var Jt=[],Dr=0;Dr<arguments.length;Dr++)Jt[Dr]=arguments[Dr];return this._getService.bind(this,Mt).apply(this,At.multipleInstances?Jt:[])}}for(var Un=0,Rn=Object.keys(ye);Un<Rn.length;Un++)ye[Rn[Un]]._addComponent(At);return"PUBLIC"===At.type?tt[Mt]:null}return tt.default=tt,Object.defineProperty(tt,"apps",{get:function D(){return Object.keys(ye).map(function(At){return ye[At]})}}),jt.App=ee,tt}(hn);return ee.INTERNAL=(0,Ve.__assign)((0,Ve.__assign)({},ee.INTERNAL),{createFirebaseNamespace:Hi,extendNamespace:function ye(Le){(0,Tt.deepExtend)(ee,Le)},createSubscribe:Tt.createSubscribe,ErrorFactory:Tt.ErrorFactory,deepExtend:Tt.deepExtend}),ee}(),lr=function(){function ee(ye){this.container=ye}return ee.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(Le){if(function Gn(ee){return"VERSION"===ee.getComponent()?.type}(Le)){var tt=Le.getImmediate();return tt.library+"/"+tt.version}return null}).filter(function(Le){return Le}).join(" ")},ee}();if((0,Tt.isBrowser)()&&void 0!==self.firebase){Pt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Z=self.firebase.SDK_VERSION;Z&&Z.indexOf("LITE")>=0&&Pt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var se=Cn.initializeApp;Cn.initializeApp=function(){for(var ee=[],ye=0;ye<arguments.length;ye++)ee[ye]=arguments[ye];return(0,Tt.isNode)()&&Pt.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),se.apply(void 0,ee)};var ce=Cn;!function Y(ee,ye){ee.INTERNAL.registerComponent(new N.Component("platform-logger",function(Le){return new lr(Le)},"PRIVATE")),ee.registerVersion(rn,"0.6.30",ye),ee.registerVersion("fire-js","")}(ce);const pe=ce},461:(go,ar,gt)=>{"use strict";gt.r(ar),gt.d(ar,{Component:()=>N,ComponentContainer:()=>rn,Provider:()=>Ct});var Ve=gt(582),Tt=gt(492),N=function(){function Be(ae,xe,Ie){this.name=ae,this.instanceFactory=xe,this.type=Ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Be.prototype.setInstantiationMode=function(ae){return this.instantiationMode=ae,this},Be.prototype.setMultipleInstances=function(ae){return this.multipleInstances=ae,this},Be.prototype.setServiceProps=function(ae){return this.serviceProps=ae,this},Be.prototype.setInstanceCreatedCallback=function(ae){return this.onInstanceCreated=ae,this},Be}(),oe="[DEFAULT]",Ct=function(){function Be(ae,xe){this.name=ae,this.container=xe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Be.prototype.get=function(ae){var xe=this.normalizeInstanceIdentifier(ae);if(!this.instancesDeferred.has(xe)){var Ie=new Tt.Deferred;if(this.instancesDeferred.set(xe,Ie),this.isInitialized(xe)||this.shouldAutoInitialize())try{var ge=this.getOrInitializeService({instanceIdentifier:xe});ge&&Ie.resolve(ge)}catch{}}return this.instancesDeferred.get(xe).promise},Be.prototype.getImmediate=function(ae){var xe,Ie=this.normalizeInstanceIdentifier(ae?.identifier),ge=null!==(xe=ae?.optional)&&void 0!==xe&&xe;if(!this.isInitialized(Ie)&&!this.shouldAutoInitialize()){if(ge)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:Ie})}catch(be){if(ge)return null;throw be}},Be.prototype.getComponent=function(){return this.component},Be.prototype.setComponent=function(ae){var xe,Ie;if(ae.name!==this.name)throw Error("Mismatching Component "+ae.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=ae,this.shouldAutoInitialize()){if(function En(Be){return"EAGER"===Be.instantiationMode}(ae))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}try{for(var ge=(0,Ve.__values)(this.instancesDeferred.entries()),be=ge.next();!be.done;be=ge.next()){var et=(0,Ve.__read)(be.value,2),Te=et[1],Oe=this.normalizeInstanceIdentifier(et[0]);try{var Ke=this.getOrInitializeService({instanceIdentifier:Oe});Te.resolve(Ke)}catch{}}}catch(at){xe={error:at}}finally{try{be&&!be.done&&(Ie=ge.return)&&Ie.call(ge)}finally{if(xe)throw xe.error}}}},Be.prototype.clearInstance=function(ae){void 0===ae&&(ae=oe),this.instancesDeferred.delete(ae),this.instancesOptions.delete(ae),this.instances.delete(ae)},Be.prototype.delete=function(){return(0,Ve.__awaiter)(this,void 0,void 0,function(){var ae;return(0,Ve.__generator)(this,function(xe){switch(xe.label){case 0:return ae=Array.from(this.instances.values()),[4,Promise.all((0,Ve.__spreadArray)((0,Ve.__spreadArray)([],(0,Ve.__read)(ae.filter(function(Ie){return"INTERNAL"in Ie}).map(function(Ie){return Ie.INTERNAL.delete()}))),(0,Ve.__read)(ae.filter(function(Ie){return"_delete"in Ie}).map(function(Ie){return Ie._delete()}))))];case 1:return xe.sent(),[2]}})})},Be.prototype.isComponentSet=function(){return null!=this.component},Be.prototype.isInitialized=function(ae){return void 0===ae&&(ae=oe),this.instances.has(ae)},Be.prototype.getOptions=function(ae){return void 0===ae&&(ae=oe),this.instancesOptions.get(ae)||{}},Be.prototype.initialize=function(ae){var xe,Ie;void 0===ae&&(ae={});var ge=ae.options,be=void 0===ge?{}:ge,et=this.normalizeInstanceIdentifier(ae.instanceIdentifier);if(this.isInitialized(et))throw Error(this.name+"("+et+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var St=this.getOrInitializeService({instanceIdentifier:et,options:be});try{for(var Te=(0,Ve.__values)(this.instancesDeferred.entries()),Oe=Te.next();!Oe.done;Oe=Te.next()){var Ke=(0,Ve.__read)(Oe.value,2),rt=Ke[1];et===this.normalizeInstanceIdentifier(Ke[0])&&rt.resolve(St)}}catch(on){xe={error:on}}finally{try{Oe&&!Oe.done&&(Ie=Te.return)&&Ie.call(Te)}finally{if(xe)throw xe.error}}return St},Be.prototype.onInit=function(ae,xe){var Ie,ge=this.normalizeInstanceIdentifier(xe),be=null!==(Ie=this.onInitCallbacks.get(ge))&&void 0!==Ie?Ie:new Set;be.add(ae),this.onInitCallbacks.set(ge,be);var et=this.instances.get(ge);return et&&ae(et,ge),function(){be.delete(ae)}},Be.prototype.invokeOnInitCallbacks=function(ae,xe){var Ie,ge,be=this.onInitCallbacks.get(xe);if(be)try{for(var et=(0,Ve.__values)(be),St=et.next();!St.done;St=et.next()){var Te=St.value;try{Te(ae,xe)}catch{}}}catch(Oe){Ie={error:Oe}}finally{try{St&&!St.done&&(ge=et.return)&&ge.call(et)}finally{if(Ie)throw Ie.error}}},Be.prototype.getOrInitializeService=function(ae){var xe=ae.instanceIdentifier,Ie=ae.options,ge=void 0===Ie?{}:Ie,be=this.instances.get(xe);if(!be&&this.component&&(be=this.component.instanceFactory(this.container,{instanceIdentifier:ur(xe),options:ge}),this.instances.set(xe,be),this.instancesOptions.set(xe,ge),this.invokeOnInitCallbacks(be,xe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,xe,be)}catch{}return be||null},Be.prototype.normalizeInstanceIdentifier=function(ae){return void 0===ae&&(ae=oe),this.component?this.component.multipleInstances?ae:oe:ae},Be.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},Be}();function ur(Be){return Be===oe?void 0:Be}var rn=function(){function Be(ae){this.name=ae,this.providers=new Map}return Be.prototype.addComponent=function(ae){var xe=this.getProvider(ae.name);if(xe.isComponentSet())throw new Error("Component "+ae.name+" has already been registered with "+this.name);xe.setComponent(ae)},Be.prototype.addOrOverwriteComponent=function(ae){this.getProvider(ae.name).isComponentSet()&&this.providers.delete(ae.name),this.addComponent(ae)},Be.prototype.getProvider=function(ae){if(this.providers.has(ae))return this.providers.get(ae);var xe=new Ct(ae,this);return this.providers.set(ae,xe),xe},Be.prototype.getProviders=function(){return Array.from(this.providers.values())},Be}()},89:(go,ar,gt)=>{"use strict";var Ve=gt(367),Tt=gt(461),N=gt(492),oe=gt(582),Ct=gt(3);go=gt.hmd(go);var rn="";function Be(f){rn=f}var f,ae=function(){function f(l){this.domStorage_=l,this.prefix_="firebase:"}return f.prototype.set=function(l,h){null==h?this.domStorage_.removeItem(this.prefixedName_(l)):this.domStorage_.setItem(this.prefixedName_(l),(0,N.stringify)(h))},f.prototype.get=function(l){var h=this.domStorage_.getItem(this.prefixedName_(l));return null==h?null:(0,N.jsonEval)(h)},f.prototype.remove=function(l){this.domStorage_.removeItem(this.prefixedName_(l))},f.prototype.prefixedName_=function(l){return this.prefix_+l},f.prototype.toString=function(){return this.domStorage_.toString()},f}(),xe=function(){function f(){this.cache_={},this.isInMemoryStorage=!0}return f.prototype.set=function(l,h){null==h?delete this.cache_[l]:this.cache_[l]=h},f.prototype.get=function(l){return(0,N.contains)(this.cache_,l)?this.cache_[l]:null},f.prototype.remove=function(l){delete this.cache_[l]},f}(),Ie=function(f){try{if(typeof window<"u"&&typeof window[f]<"u"){var l=window[f];return l.setItem("firebase:sentinel","cache"),l.removeItem("firebase:sentinel"),new ae(l)}}catch{}return new xe},ge=Ie("localStorage"),be=Ie("sessionStorage"),et=new Ct.Logger("@firebase/database"),St=(f=1,function(){return f++}),Te=function(f){var l=(0,N.stringToByteArray)(f),h=new N.Sha1;h.update(l);var g=h.digest();return N.base64.encodeByteArray(g)},Oe=function(){for(var f=[],l=0;l<arguments.length;l++)f[l]=arguments[l];for(var h="",g=0;g<f.length;g++){var _=f[g];Array.isArray(_)||_&&"object"==typeof _&&"number"==typeof _.length?h+=Oe.apply(null,_):h+="object"==typeof _?(0,N.stringify)(_):_,h+=" "}return h},Ke=null,at=!0,rt=function(f,l){(0,N.assert)(!l||!0===f||!1===f,"Can't turn on custom loggers persistently."),!0===f?(et.logLevel=Ct.LogLevel.VERBOSE,Ke=et.log.bind(et),l&&be.set("logging_enabled",!0)):"function"==typeof f?Ke=f:(Ke=null,be.remove("logging_enabled"))},He=function(){for(var f=[],l=0;l<arguments.length;l++)f[l]=arguments[l];if(!0===at&&(at=!1,null===Ke&&!0===be.get("logging_enabled")&&rt(!0)),Ke){var h=Oe.apply(null,f);Ke(h)}},on=function(f){return function(){for(var l=[],h=0;h<arguments.length;h++)l[h]=arguments[h];He.apply(void 0,(0,oe.__spreadArray)([f],(0,oe.__read)(l)))}},cr=function(){for(var f=[],l=0;l<arguments.length;l++)f[l]=arguments[l];var h="FIREBASE INTERNAL ERROR: "+Oe.apply(void 0,(0,oe.__spreadArray)([],(0,oe.__read)(f)));et.error(h)},Pt=function(){for(var f=[],l=0;l<arguments.length;l++)f[l]=arguments[l];var h="FIREBASE FATAL ERROR: "+Oe.apply(void 0,(0,oe.__spreadArray)([],(0,oe.__read)(f)));throw et.error(h),new Error(h)},hn=function(){for(var f=[],l=0;l<arguments.length;l++)f[l]=arguments[l];var h="FIREBASE WARNING: "+Oe.apply(void 0,(0,oe.__spreadArray)([],(0,oe.__read)(f)));et.warn(h)},Bi=function(f){return"number"==typeof f&&(f!=f||f===Number.POSITIVE_INFINITY||f===Number.NEGATIVE_INFINITY)},Cn="[MIN_NAME]",lr="[MAX_NAME]",Gn=function(f,l){if(f===l)return 0;if(f===Cn||l===lr)return-1;if(l===Cn||f===lr)return 1;var h=D(f),g=D(l);return null!==h?null!==g?h-g==0?f.length-l.length:h-g:-1:null!==g?1:f<l?-1:1},Y=function(f,l){return f===l?0:f<l?-1:1},Z=function(f,l){if(l&&f in l)return l[f];throw new Error("Missing required key ("+f+") in object: "+(0,N.stringify)(l))},se=function(f){if("object"!=typeof f||null===f)return(0,N.stringify)(f);var l=[];for(var h in f)l.push(h);l.sort();for(var g="{",_=0;_<l.length;_++)0!==_&&(g+=","),g+=(0,N.stringify)(l[_]),g+=":",g+=se(f[l[_]]);return g+"}"},ce=function(f,l){var h=f.length;if(h<=l)return[f];for(var g=[],_=0;_<h;_+=l)g.push(f.substring(_,_+l>h?h:_+l));return g};function pe(f,l){for(var h in f)f.hasOwnProperty(h)&&l(h,f[h])}var ee=function(f){(0,N.assert)(!Bi(f),"Invalid JSON number");var _,b,I,R,k,g=1023;0===f?(b=0,I=0,_=1/f==-1/0?1:0):(_=f<0,(f=Math.abs(f))>=Math.pow(2,1-g)?(b=(R=Math.min(Math.floor(Math.log(f)/Math.LN2),g))+g,I=Math.round(f*Math.pow(2,52-R)-Math.pow(2,52))):(b=0,I=Math.round(f/Math.pow(2,-1074))));var F=[];for(k=52;k;k-=1)F.push(I%2?1:0),I=Math.floor(I/2);for(k=11;k;k-=1)F.push(b%2?1:0),b=Math.floor(b/2);F.push(_?1:0),F.reverse();var U=F.join(""),W="";for(k=0;k<64;k+=8){var re=parseInt(U.substr(k,8),2).toString(16);1===re.length&&(re="0"+re),W+=re}return W.toLowerCase()},Re=new RegExp("^-?(0*)\\d{1,10}$"),jt=-2147483648,Ue=2147483647,D=function(f){if(Re.test(f)){var l=Number(f);if(l>=jt&&l<=Ue)return l}return null},Mn=function(f){try{f()}catch(l){setTimeout(function(){throw hn("Exception was thrown by user callback.",l.stack||""),l},Math.floor(0))}},Cr=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Vn=function(f,l){var h=setTimeout(f,l);return"object"==typeof h&&h.unref&&h.unref(),h},Xr=function(){function f(l,h){var g=this;this.appName_=l,this.appCheckProvider=h,this.appCheck=h?.getImmediate({optional:!0}),this.appCheck||h?.get().then(function(_){return g.appCheck=_})}return f.prototype.getToken=function(l){var h=this;return this.appCheck?this.appCheck.getToken(l):new Promise(function(g,_){setTimeout(function(){h.appCheck?h.getToken(l).then(g,_):g(null)},0)})},f.prototype.addTokenChangeListener=function(l){var h;null===(h=this.appCheckProvider)||void 0===h||h.get().then(function(g){return g.addTokenListener(l)})},f.prototype.notifyForInvalidToken=function(){hn('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},f}(),At=function(){function f(l,h,g){var _=this;this.appName_=l,this.firebaseOptions_=h,this.authProvider_=g,this.auth_=null,this.auth_=g.getImmediate({optional:!0}),this.auth_||g.onInit(function(b){return _.auth_=b})}return f.prototype.getToken=function(l){var h=this;return this.auth_?this.auth_.getToken(l).catch(function(g){return g&&"auth/token-not-initialized"===g.code?(He("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(g)}):new Promise(function(g,_){setTimeout(function(){h.auth_?h.getToken(l).then(g,_):g(null)},0)})},f.prototype.addTokenChangeListener=function(l){this.auth_?this.auth_.addAuthTokenListener(l):this.authProvider_.get().then(function(h){return h.addAuthTokenListener(l)})},f.prototype.removeTokenChangeListener=function(l){this.authProvider_.get().then(function(h){return h.removeAuthTokenListener(l)})},f.prototype.notifyForInvalidToken=function(){var l='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';hn(l+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},f}(),Mt=function(){function f(l){this.accessToken=l}return f.prototype.getToken=function(l){return Promise.resolve({accessToken:this.accessToken})},f.prototype.addTokenChangeListener=function(l){l(this.accessToken)},f.prototype.removeTokenChangeListener=function(l){},f.prototype.notifyForInvalidToken=function(){},f.OWNER="owner",f}(),Dr=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Qa="ac",ua="websocket",Xu="long_polling",As=function(){function f(l,h,g,_,b,I,R){void 0===b&&(b=!1),void 0===I&&(I=""),void 0===R&&(R=!1),this.secure=h,this.namespace=g,this.webSocketOnly=_,this.nodeAdmin=b,this.persistenceKey=I,this.includeNamespaceInQueryParams=R,this._host=l.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ge.get("host:"+l)||this._host}return f.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},f.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(f.prototype,"host",{get:function(){return this._host},set:function(l){l!==this.internalHost&&(this.internalHost=l,this.isCacheableHost()&&ge.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),f.prototype.toString=function(){var l=this.toURLString();return this.persistenceKey&&(l+="<"+this.persistenceKey+">"),l},f.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},f}();function Ju(f,l,h){var g;if((0,N.assert)("string"==typeof l,"typeof type must == string"),(0,N.assert)("object"==typeof h,"typeof params must == object"),l===ua)g=(f.secure?"wss://":"ws://")+f.internalHost+"/.ws?";else{if(l!==Xu)throw new Error("Unknown connection type: "+l);g=(f.secure?"https://":"http://")+f.internalHost+"/.lp?"}(function ci(f){return f.host!==f.internalHost||f.isCustomHost()||f.includeNamespaceInQueryParams})(f)&&(h.ns=f.namespace);var _=[];return pe(h,function(b,I){_.push(b+"="+I)}),g+_.join("&")}var zn=function(){function f(){this.counters_={}}return f.prototype.incrementCounter=function(l,h){void 0===h&&(h=1),(0,N.contains)(this.counters_,l)||(this.counters_[l]=0),this.counters_[l]+=h},f.prototype.get=function(){return(0,N.deepCopy)(this.counters_)},f}(),$i={},Lr={};function Zu(f){var l=f.toString();return $i[l]||($i[l]=new zn),$i[l]}var El=function(){function f(l){this.onMessage_=l,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return f.prototype.closeAfter=function(l,h){this.closeAfterResponse=l,this.onClose=h,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},f.prototype.handleResponse=function(l,h){var g=this;this.pendingResponses[l]=h;for(var _=function(){var R=b.pendingResponses[b.currentResponseNum];delete b.pendingResponses[b.currentResponseNum];for(var k=function(U){R[U]&&Mn(function(){g.onMessage_(R[U])})},F=0;F<R.length;++F)k(F);if(b.currentResponseNum===b.closeAfterResponse)return b.onClose&&(b.onClose(),b.onClose=null),"break";b.currentResponseNum++},b=this;this.pendingResponses[this.currentResponseNum]&&"break"!==_(););},f}(),ca="start",B="close",j="pLPCommand",G="pRTLPCB",yt=function(){function f(l,h,g,_,b,I,R){var k=this;this.connId=l,this.repoInfo=h,this.applicationId=g,this.appCheckToken=_,this.authToken=b,this.transportSessionId=I,this.lastSessionId=R,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=on(l),this.stats_=Zu(h),this.urlFn=function(F){return k.appCheckToken&&(F[Qa]=k.appCheckToken),Ju(h,Xu,F)}}return f.prototype.open=function(l,h){var g=this;this.curSegmentNum=0,this.onDisconnect_=h,this.myPacketOrderer=new El(l),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){g.log_("Timed out trying to connect."),g.onClosed_(),g.connectTimeoutTimer_=null},Math.floor(3e4)),function(f){if((0,N.isNodeSdk)()||"complete"===document.readyState)f();else{var l=!1,h=function(){document.body?l||(l=!0,f()):setTimeout(h,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",h,!1),window.addEventListener("load",h,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&h()}),window.attachEvent("onload",h))}}(function(){if(!g.isClosed_){g.scriptTagHolder=new Gi(function(){for(var I=[],R=0;R<arguments.length;R++)I[R]=arguments[R];var k=(0,oe.__read)(I,5),F=k[0],U=k[1],W=k[2];if(g.incrementIncomingBytes_(I),g.scriptTagHolder)if(g.connectTimeoutTimer_&&(clearTimeout(g.connectTimeoutTimer_),g.connectTimeoutTimer_=null),g.everConnected_=!0,F===ca)g.id=U,g.password=W;else{if(F!==B)throw new Error("Unrecognized command received: "+F);U?(g.scriptTagHolder.sendNewPolls=!1,g.myPacketOrderer.closeAfter(U,function(){g.onClosed_()})):g.onClosed_()}},function(){for(var I=[],R=0;R<arguments.length;R++)I[R]=arguments[R];var k=(0,oe.__read)(I,2),F=k[0],U=k[1];g.incrementIncomingBytes_(I),g.myPacketOrderer.handleResponse(F,U)},function(){g.onClosed_()},g.urlFn);var _={};_[ca]="t",_.ser=Math.floor(1e8*Math.random()),g.scriptTagHolder.uniqueCallbackIdentifier&&(_.cb=g.scriptTagHolder.uniqueCallbackIdentifier),_.v="5",g.transportSessionId&&(_.s=g.transportSessionId),g.lastSessionId&&(_.ls=g.lastSessionId),g.applicationId&&(_.p=g.applicationId),g.appCheckToken&&(_[Qa]=g.appCheckToken),typeof location<"u"&&location.hostname&&Dr.test(location.hostname)&&(_.r="f");var b=g.urlFn(_);g.log_("Connecting via long-poll to "+b),g.scriptTagHolder.addTag(b,function(){})}})},f.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},f.forceAllow=function(){f.forceAllow_=!0},f.forceDisallow=function(){f.forceDisallow_=!0},f.isAvailable=function(){return!((0,N.isNodeSdk)()||!f.forceAllow_&&(f.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},f.prototype.markConnectionHealthy=function(){},f.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},f.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},f.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},f.prototype.send=function(l){var h=(0,N.stringify)(l);this.bytesSent+=h.length,this.stats_.incrementCounter("bytes_sent",h.length);for(var g=(0,N.base64Encode)(h),_=ce(g,1840),b=0;b<_.length;b++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,_.length,_[b]),this.curSegmentNum++},f.prototype.addDisconnectPingFrame=function(l,h){if(!(0,N.isNodeSdk)()){this.myDisconnFrame=document.createElement("iframe");var g={dframe:"t"};g.id=l,g.pw=h,this.myDisconnFrame.src=this.urlFn(g),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},f.prototype.incrementIncomingBytes_=function(l){var h=(0,N.stringify)(l).length;this.bytesReceived+=h,this.stats_.incrementCounter("bytes_received",h)},f}(),Gi=function(){function f(l,h,g,_){if(this.onDisconnect=g,this.urlFn=_,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,N.isNodeSdk)())this.commandCB=l,this.onMessageCB=h;else{this.uniqueCallbackIdentifier=St(),window[j+this.uniqueCallbackIdentifier]=l,window[G+this.uniqueCallbackIdentifier]=h,this.myIFrame=f.createIFrame_();var b="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(b='<script>document.domain="'+document.domain+'";<\/script>');var R="<html><body>"+b+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(R),this.myIFrame.doc.close()}catch(k){He("frame writing exception"),k.stack&&He(k.stack),He(k)}}}return f.createIFrame_=function(){var l=document.createElement("iframe");if(l.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(l);try{l.contentWindow.document||He("No IE domain setting required")}catch{var g=document.domain;l.src="javascript:void((function(){document.open();document.domain='"+g+"';document.close();})())"}return l.contentDocument?l.doc=l.contentDocument:l.contentWindow?l.doc=l.contentWindow.document:l.document&&(l.doc=l.document),l},f.prototype.close=function(){var l=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==l.myIFrame&&(document.body.removeChild(l.myIFrame),l.myIFrame=null)},Math.floor(0)));var h=this.onDisconnect;h&&(this.onDisconnect=null,h())},f.prototype.startLongPoll=function(l,h){for(this.myID=l,this.myPW=h,this.alive=!0;this.newRequest_(););},f.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var l={};l.id=this.myID,l.pw=this.myPW,l.ser=this.currentSerial;for(var h=this.urlFn(l),g="",_=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+g.length<=1870;){var I=this.pendingSegs.shift();g=g+"&seg"+_+"="+I.seg+"&ts"+_+"="+I.ts+"&d"+_+"="+I.d,_++}return this.addLongPollTag_(h+=g,this.currentSerial),!0}return!1},f.prototype.enqueueSegment=function(l,h,g){this.pendingSegs.push({seg:l,ts:h,d:g}),this.alive&&this.newRequest_()},f.prototype.addLongPollTag_=function(l,h){var g=this;this.outstandingRequests.add(h);var _=function(){g.outstandingRequests.delete(h),g.newRequest_()},b=setTimeout(_,Math.floor(25e3));this.addTag(l,function(){clearTimeout(b),_()})},f.prototype.addTag=function(l,h){var g=this;(0,N.isNodeSdk)()?this.doNodeLongPoll(l,h):setTimeout(function(){try{if(!g.sendNewPolls)return;var _=g.myIFrame.doc.createElement("script");_.type="text/javascript",_.async=!0,_.src=l,_.onload=_.onreadystatechange=function(){var b=_.readyState;(!b||"loaded"===b||"complete"===b)&&(_.onload=_.onreadystatechange=null,_.parentNode&&_.parentNode.removeChild(_),h())},_.onerror=function(){He("Long-poll script failed to load: "+l),g.sendNewPolls=!1,g.close()},g.myIFrame.doc.body.appendChild(_)}catch{}},Math.floor(1))},f}(),Cl=null;typeof MozWebSocket<"u"?Cl=MozWebSocket:typeof WebSocket<"u"&&(Cl=WebSocket);var Zt=function(){function f(l,h,g,_,b,I,R){this.connId=l,this.applicationId=g,this.appCheckToken=_,this.authToken=b,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=on(this.connId),this.stats_=Zu(h),this.connURL=f.connectionURL_(h,I,R,_),this.nodeAdmin=h.nodeAdmin}return f.connectionURL_=function(l,h,g,_){var b={v:"5"};return!(0,N.isNodeSdk)()&&typeof location<"u"&&location.hostname&&Dr.test(location.hostname)&&(b.r="f"),h&&(b.s=h),g&&(b.ls=g),_&&(b[Qa]=_),Ju(l,ua,b)},f.prototype.open=function(l,h){var g=this;this.onDisconnect=h,this.onMessage=l,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ge.set("previous_websocket_failure",!0);try{if((0,N.isNodeSdk)()){var b={headers:{"User-Agent":"Firebase/5/"+rn+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(b.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(b.headers["X-Firebase-AppCheck"]=this.appCheckToken);var I=process.env,R=0===this.connURL.indexOf("wss://")?I.HTTPS_PROXY||I.https_proxy:I.HTTP_PROXY||I.http_proxy;R&&(b.proxy={origin:R}),this.mySock=new Cl(this.connURL,[],b)}else this.mySock=new Cl(this.connURL,[],b={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(F){this.log_("Error instantiating WebSocket.");var k=F.message||F.data;return k&&this.log_(k),void this.onClosed_()}this.mySock.onopen=function(){g.log_("Websocket connected."),g.everConnected_=!0},this.mySock.onclose=function(){g.log_("Websocket connection was disconnected."),g.mySock=null,g.onClosed_()},this.mySock.onmessage=function(F){g.handleIncomingFrame(F)},this.mySock.onerror=function(F){g.log_("WebSocket error.  Closing connection.");var U=F.message||F.data;U&&g.log_(U),g.onClosed_()}},f.prototype.start=function(){},f.forceDisallow=function(){f.forceDisallow_=!0},f.isAvailable=function(){var l=!1;if(typeof navigator<"u"&&navigator.userAgent){var g=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);g&&g.length>1&&parseFloat(g[1])<4.4&&(l=!0)}return!l&&null!==Cl&&!f.forceDisallow_},f.previouslyFailed=function(){return ge.isInMemoryStorage||!0===ge.get("previous_websocket_failure")},f.prototype.markConnectionHealthy=function(){ge.remove("previous_websocket_failure")},f.prototype.appendFrame_=function(l){if(this.frames.push(l),this.frames.length===this.totalFrames){var h=this.frames.join("");this.frames=null;var g=(0,N.jsonEval)(h);this.onMessage(g)}},f.prototype.handleNewFrameCount_=function(l){this.totalFrames=l,this.frames=[]},f.prototype.extractFrameCount_=function(l){if((0,N.assert)(null===this.frames,"We already have a frame buffer"),l.length<=6){var h=Number(l);if(!isNaN(h))return this.handleNewFrameCount_(h),null}return this.handleNewFrameCount_(1),l},f.prototype.handleIncomingFrame=function(l){if(null!==this.mySock){var h=l.data;if(this.bytesReceived+=h.length,this.stats_.incrementCounter("bytes_received",h.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(h);else{var g=this.extractFrameCount_(h);null!==g&&this.appendFrame_(g)}}},f.prototype.send=function(l){this.resetKeepAlive();var h=(0,N.stringify)(l);this.bytesSent+=h.length,this.stats_.incrementCounter("bytes_sent",h.length);var g=ce(h,16384);g.length>1&&this.sendString_(String(g.length));for(var _=0;_<g.length;_++)this.sendString_(g[_])},f.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},f.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},f.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},f.prototype.resetKeepAlive=function(){var l=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){l.mySock&&l.sendString_("0"),l.resetKeepAlive()},Math.floor(45e3))},f.prototype.sendString_=function(l){try{this.mySock.send(l)}catch(h){this.log_("Exception thrown from WebSocket.send():",h.message||h.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},f.responsesRequiredToBeHealthy=2,f.healthyTimeout=3e4,f}(),ut=function(){function f(l){this.initTransports_(l)}return Object.defineProperty(f,"ALL_TRANSPORTS",{get:function(){return[yt,Zt]},enumerable:!1,configurable:!0}),f.prototype.initTransports_=function(l){var h,g,_=Zt&&Zt.isAvailable(),b=_&&!Zt.previouslyFailed();if(l.webSocketOnly&&(_||hn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),b=!0),b)this.transports_=[Zt];else{var I=this.transports_=[];try{for(var R=(0,oe.__values)(f.ALL_TRANSPORTS),k=R.next();!k.done;k=R.next()){var F=k.value;F&&F.isAvailable()&&I.push(F)}}catch(U){h={error:U}}finally{try{k&&!k.done&&(g=R.return)&&g.call(R)}finally{if(h)throw h.error}}}},f.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},f.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},f}(),Ty=function(){function f(l,h,g,_,b,I,R,k,F,U){this.id=l,this.repoInfo_=h,this.applicationId_=g,this.appCheckToken_=_,this.authToken_=b,this.onMessage_=I,this.onReady_=R,this.onDisconnect_=k,this.onKill_=F,this.lastSessionId=U,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=on("c:"+this.id+":"),this.transportManager_=new ut(h),this.log_("Connection created"),this.start_()}return f.prototype.start_=function(){var l=this,h=this.transportManager_.initialTransport();this.conn_=new h(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=h.responsesRequiredToBeHealthy||0;var g=this.connReceiver_(this.conn_),_=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){l.conn_&&l.conn_.open(g,_)},Math.floor(0));var b=h.healthyTimeout||0;b>0&&(this.healthyTimeout_=Vn(function(){l.healthyTimeout_=null,l.isHealthy_||(l.conn_&&l.conn_.bytesReceived>102400?(l.log_("Connection exceeded healthy timeout but has received "+l.conn_.bytesReceived+" bytes.  Marking connection healthy."),l.isHealthy_=!0,l.conn_.markConnectionHealthy()):l.conn_&&l.conn_.bytesSent>10240?l.log_("Connection exceeded healthy timeout but has sent "+l.conn_.bytesSent+" bytes.  Leaving connection alive."):(l.log_("Closing unhealthy connection after timeout."),l.close()))},Math.floor(b)))},f.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},f.prototype.disconnReceiver_=function(l){var h=this;return function(g){l===h.conn_?h.onConnectionLost_(g):l===h.secondaryConn_?(h.log_("Secondary connection lost."),h.onSecondaryConnectionLost_()):h.log_("closing an old connection")}},f.prototype.connReceiver_=function(l){var h=this;return function(g){2!==h.state_&&(l===h.rx_?h.onPrimaryMessageReceived_(g):l===h.secondaryConn_?h.onSecondaryMessageReceived_(g):h.log_("message on old connection"))}},f.prototype.sendRequest=function(l){this.sendData_({t:"d",d:l})},f.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},f.prototype.onSecondaryControl_=function(l){if("t"in l){var h=l.t;"a"===h?this.upgradeIfSecondaryHealthy_():"r"===h?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===h&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},f.prototype.onSecondaryMessageReceived_=function(l){var h=Z("t",l),g=Z("d",l);if("c"===h)this.onSecondaryControl_(g);else{if("d"!==h)throw new Error("Unknown protocol layer: "+h);this.pendingDataMessages.push(g)}},f.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},f.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},f.prototype.onPrimaryMessageReceived_=function(l){var h=Z("t",l),g=Z("d",l);"c"===h?this.onControl_(g):"d"===h&&this.onDataMessage_(g)},f.prototype.onDataMessage_=function(l){this.onPrimaryResponse_(),this.onMessage_(l)},f.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},f.prototype.onControl_=function(l){var h=Z("t",l);if("d"in l){var g=l.d;if("h"===h)this.onHandshake_(g);else if("n"===h){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var _=0;_<this.pendingDataMessages.length;++_)this.onDataMessage_(this.pendingDataMessages[_]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===h?this.onConnectionShutdown_(g):"r"===h?this.onReset_(g):"e"===h?cr("Server Error: "+g):"o"===h?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):cr("Unknown control packet command: "+h)}},f.prototype.onHandshake_=function(l){var h=l.ts,g=l.v,_=l.h;this.sessionId=l.s,this.repoInfo_.host=_,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,h),"5"!==g&&hn("Protocol version mismatch detected"),this.tryStartUpgrade_())},f.prototype.tryStartUpgrade_=function(){var l=this.transportManager_.upgradeTransport();l&&this.startUpgrade_(l)},f.prototype.startUpgrade_=function(l){var h=this;this.secondaryConn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;var g=this.connReceiver_(this.secondaryConn_),_=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(g,_),Vn(function(){h.secondaryConn_&&(h.log_("Timed out trying to upgrade."),h.secondaryConn_.close())},Math.floor(6e4))},f.prototype.onReset_=function(l){this.log_("Reset packet received.  New host: "+l),this.repoInfo_.host=l,1===this.state_?this.close():(this.closeConnections_(),this.start_())},f.prototype.onConnectionEstablished_=function(l,h){var g=this;this.log_("Realtime connection established."),this.conn_=l,this.state_=1,this.onReady_&&(this.onReady_(h,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Vn(function(){g.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},f.prototype.sendPingOnPrimaryIfNecessary_=function(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},f.prototype.onSecondaryConnectionLost_=function(){var l=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===l||this.rx_===l)&&this.close()},f.prototype.onConnectionLost_=function(l){this.conn_=null,l||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ge.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},f.prototype.onConnectionShutdown_=function(l){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(l),this.onKill_=null),this.onDisconnect_=null,this.close()},f.prototype.sendData_=function(l){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(l)},f.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},f.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},f}(),aC=function(){function f(){}return f.prototype.put=function(l,h,g,_){},f.prototype.merge=function(l,h,g,_){},f.prototype.refreshAuthToken=function(l){},f.prototype.refreshAppCheckToken=function(l){},f.prototype.onDisconnectPut=function(l,h,g){},f.prototype.onDisconnectMerge=function(l,h,g){},f.prototype.onDisconnectCancel=function(l,h){},f.prototype.reportStats=function(l){},f}(),Ms=function(){function f(l){this.allowedEvents_=l,this.listeners_={},(0,N.assert)(Array.isArray(l)&&l.length>0,"Requires a non-empty array")}return f.prototype.trigger=function(l){for(var h=[],g=1;g<arguments.length;g++)h[g-1]=arguments[g];if(Array.isArray(this.listeners_[l]))for(var _=(0,oe.__spreadArray)([],(0,oe.__read)(this.listeners_[l])),b=0;b<_.length;b++)_[b].callback.apply(_[b].context,h)},f.prototype.on=function(l,h,g){this.validateEventType_(l),this.listeners_[l]=this.listeners_[l]||[],this.listeners_[l].push({callback:h,context:g});var _=this.getInitialEvent(l);_&&h.apply(g,_)},f.prototype.off=function(l,h,g){this.validateEventType_(l);for(var _=this.listeners_[l]||[],b=0;b<_.length;b++)if(_[b].callback===h&&(!g||g===_[b].context))return void _.splice(b,1)},f.prototype.validateEventType_=function(l){(0,N.assert)(this.allowedEvents_.find(function(h){return h===l}),"Unknown event: "+l)},f}(),uC=function(f){function l(){var h=f.call(this,["online"])||this;return h.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,N.isMobileCordova)()&&(window.addEventListener("online",function(){h.online_||(h.online_=!0,h.trigger("online",!0))},!1),window.addEventListener("offline",function(){h.online_&&(h.online_=!1,h.trigger("online",!1))},!1)),h}return(0,oe.__extends)(l,f),l.getInstance=function(){return new l},l.prototype.getInitialEvent=function(h){return(0,N.assert)("online"===h,"Unknown event type: "+h),[this.online_]},l.prototype.currentlyOnline=function(){return this.online_},l}(Ms),cC=32,lC=768,dn=function(){function f(l,h){if(void 0===h){this.pieces_=l.split("/");for(var g=0,_=0;_<this.pieces_.length;_++)this.pieces_[_].length>0&&(this.pieces_[g]=this.pieces_[_],g++);this.pieces_.length=g,this.pieceNum_=0}else this.pieces_=l,this.pieceNum_=h}return f.prototype.toString=function(){for(var l="",h=this.pieceNum_;h<this.pieces_.length;h++)""!==this.pieces_[h]&&(l+="/"+this.pieces_[h]);return l||"/"},f}();function en(){return new dn("")}function Ut(f){return f.pieceNum_>=f.pieces_.length?null:f.pieces_[f.pieceNum_]}function la(f){return f.pieces_.length-f.pieceNum_}function In(f){var l=f.pieceNum_;return l<f.pieces_.length&&l++,new dn(f.pieces_,l)}function Ti(f){return f.pieceNum_<f.pieces_.length?f.pieces_[f.pieces_.length-1]:null}function ch(f,l){return void 0===l&&(l=0),f.pieces_.slice(f.pieceNum_+l)}function fC(f){if(f.pieceNum_>=f.pieces_.length)return null;for(var l=[],h=f.pieceNum_;h<f.pieces_.length-1;h++)l.push(f.pieces_[h]);return new dn(l,0)}function xn(f,l){for(var h=[],g=f.pieceNum_;g<f.pieces_.length;g++)h.push(f.pieces_[g]);if(l instanceof dn)for(g=l.pieceNum_;g<l.pieces_.length;g++)h.push(l.pieces_[g]);else{var _=l.split("/");for(g=0;g<_.length;g++)_[g].length>0&&h.push(_[g])}return new dn(h,0)}function we(f){return f.pieceNum_>=f.pieces_.length}function Si(f,l){var h=Ut(f),g=Ut(l);if(null===h)return l;if(h===g)return Si(In(f),In(l));throw new Error("INTERNAL ERROR: innerPath ("+l+") is not within outerPath ("+f+")")}function mo(f,l){for(var h=ch(f,0),g=ch(l,0),_=0;_<h.length&&_<g.length;_++){var b=Gn(h[_],g[_]);if(0!==b)return b}return h.length===g.length?0:h.length<g.length?-1:1}function ec(f,l){if(la(f)!==la(l))return!1;for(var h=f.pieceNum_,g=l.pieceNum_;h<=f.pieces_.length;h++,g++)if(f.pieces_[h]!==l.pieces_[g])return!1;return!0}function vo(f,l){var h=f.pieceNum_,g=l.pieceNum_;if(la(f)>la(l))return!1;for(;h<f.pieces_.length;){if(f.pieces_[h]!==l.pieces_[g])return!1;++h,++g}return!0}var Sy=function f(l,h){this.errorPrefix_=h,this.parts_=ch(l,0),this.byteLength_=Math.max(1,this.parts_.length);for(var g=0;g<this.parts_.length;g++)this.byteLength_+=(0,N.stringLength)(this.parts_[g]);Tl(this)};function Tl(f){if(f.byteLength_>lC)throw new Error(f.errorPrefix_+"has a key path longer than "+lC+" bytes ("+f.byteLength_+").");if(f.parts_.length>cC)throw new Error(f.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+cC+") or object contains a cycle "+Rs(f))}function Rs(f){return 0===f.parts_.length?"":"in property '"+f.parts_.join(".")+"'"}var fa,Xp,My=function(f){function l(){var g,_,h=f.call(this,["visible"])||this;return typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(_="visibilitychange",g="hidden"):typeof document.mozHidden<"u"?(_="mozvisibilitychange",g="mozHidden"):typeof document.msHidden<"u"?(_="msvisibilitychange",g="msHidden"):typeof document.webkitHidden<"u"&&(_="webkitvisibilitychange",g="webkitHidden")),h.visible_=!0,_&&document.addEventListener(_,function(){var b=!document[g];b!==h.visible_&&(h.visible_=b,h.trigger("visible",b))},!1),h}return(0,oe.__extends)(l,f),l.getInstance=function(){return new l},l.prototype.getInitialEvent=function(h){return(0,N.assert)("visible"===h,"Unknown event type: "+h),[this.visible_]},l}(Ms),Sl=1e3,ct=3e5,tc=function(f){function l(h,g,_,b,I,R,k,F){var U=f.call(this)||this;if(U.repoInfo_=h,U.applicationId_=g,U.onDataUpdate_=_,U.onConnectStatus_=b,U.onServerInfoUpdate_=I,U.authTokenProvider_=R,U.appCheckTokenProvider_=k,U.authOverride_=F,U.id=l.nextPersistentConnectionId_++,U.log_=on("p:"+U.id+":"),U.interruptReasons_={},U.listens=new Map,U.outstandingPuts_=[],U.outstandingGets_=[],U.outstandingPutCount_=0,U.outstandingGetCount_=0,U.onDisconnectRequestQueue_=[],U.connected_=!1,U.reconnectDelay_=Sl,U.maxReconnectDelay_=ct,U.securityDebugCallback_=null,U.lastSessionId=null,U.establishConnectionTimer_=null,U.visible_=!1,U.requestCBHash_={},U.requestNumber_=0,U.realtime_=null,U.authToken_=null,U.appCheckToken_=null,U.forceTokenRefresh_=!1,U.invalidAuthTokenCount_=0,U.invalidAppCheckTokenCount_=0,U.firstConnection_=!0,U.lastConnectionAttemptTime_=null,U.lastConnectionEstablishedTime_=null,F&&!(0,N.isNodeSdk)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return My.getInstance().on("visible",U.onVisible_,U),-1===h.host.indexOf("fblocal")&&uC.getInstance().on("online",U.onOnline_,U),U}return(0,oe.__extends)(l,f),l.prototype.sendRequest=function(h,g,_){var b=++this.requestNumber_,I={r:b,a:h,b:g};this.log_((0,N.stringify)(I)),(0,N.assert)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(I),_&&(this.requestCBHash_[b]=_)},l.prototype.get=function(h){var g=this;this.initConnection_();var _=new N.Deferred,b={p:h._path.toString(),q:h._queryObject},I={action:"g",request:b,onComplete:function(k){var F=k.d;"ok"===k.s?(g.onDataUpdate_(b.p,F,!1,null),_.resolve(F)):_.reject(F)}};this.outstandingGets_.push(I),this.outstandingGetCount_++;var R=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var k=g.outstandingGets_[R];void 0===k||I!==k||(delete g.outstandingGets_[R],g.outstandingGetCount_--,0===g.outstandingGetCount_&&(g.outstandingGets_=[]),g.log_("get "+R+" timed out on connection"),_.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(R),_.promise},l.prototype.listen=function(h,g,_,b){this.initConnection_();var I=h._queryIdentifier,R=h._path.toString();this.log_("Listen called for "+R+" "+I),this.listens.has(R)||this.listens.set(R,new Map),(0,N.assert)(h._queryParams.isDefault()||!h._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,N.assert)(!this.listens.get(R).has(I),"listen() called twice for same path/queryId.");var k={onComplete:b,hashFn:g,query:h,tag:_};this.listens.get(R).set(I,k),this.connected_&&this.sendListen_(k)},l.prototype.sendGet_=function(h){var g=this,_=this.outstandingGets_[h];this.sendRequest("g",_.request,function(b){delete g.outstandingGets_[h],g.outstandingGetCount_--,0===g.outstandingGetCount_&&(g.outstandingGets_=[]),_.onComplete&&_.onComplete(b)})},l.prototype.sendListen_=function(h){var g=this,_=h.query,b=_._path.toString(),I=_._queryIdentifier;this.log_("Listen on "+b+" for "+I);var R={p:b};h.tag&&(R.q=_._queryObject,R.t=h.tag),R.h=h.hashFn(),this.sendRequest("q",R,function(F){var U=F.d,W=F.s;l.warnOnListenWarnings_(U,_),(g.listens.get(b)&&g.listens.get(b).get(I))===h&&(g.log_("listen response",F),"ok"!==W&&g.removeListen_(b,I),h.onComplete&&h.onComplete(W,U))})},l.warnOnListenWarnings_=function(h,g){if(h&&"object"==typeof h&&(0,N.contains)(h,"w")){var _=(0,N.safeGet)(h,"w");if(Array.isArray(_)&&~_.indexOf("no_index")){var b='".indexOn": "'+g._queryParams.getIndex().toString()+'"',I=g._path.toString();hn("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+b+" at "+I+" to your security rules for better performance.")}}},l.prototype.refreshAuthToken=function(h){this.authToken_=h,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(h)},l.prototype.reduceReconnectDelayIfAdminCredential_=function(h){(h&&40===h.length||(0,N.isAdmin)(h))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},l.prototype.refreshAppCheckToken=function(h){this.appCheckToken_=h,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},l.prototype.tryAuth=function(){var h=this;if(this.connected_&&this.authToken_){var g=this.authToken_,_=(0,N.isValidFormat)(g)?"auth":"gauth",b={cred:g};null===this.authOverride_?b.noauth=!0:"object"==typeof this.authOverride_&&(b.authvar=this.authOverride_),this.sendRequest(_,b,function(I){var R=I.s,k=I.d||"error";h.authToken_===g&&("ok"===R?h.invalidAuthTokenCount_=0:h.onAuthRevoked_(R,k))})}},l.prototype.tryAppCheck=function(){var h=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(g){var _=g.s,b=g.d||"error";"ok"===_?h.invalidAppCheckTokenCount_=0:h.onAppCheckRevoked_(_,b)})},l.prototype.unlisten=function(h,g){var _=h._path.toString(),b=h._queryIdentifier;this.log_("Unlisten called for "+_+" "+b),(0,N.assert)(h._queryParams.isDefault()||!h._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(_,b)&&this.connected_&&this.sendUnlisten_(_,b,h._queryObject,g)},l.prototype.sendUnlisten_=function(h,g,_,b){this.log_("Unlisten on "+h+" for "+g);var I={p:h};b&&(I.q=_,I.t=b),this.sendRequest("n",I)},l.prototype.onDisconnectPut=function(h,g,_){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",h,g,_):this.onDisconnectRequestQueue_.push({pathString:h,action:"o",data:g,onComplete:_})},l.prototype.onDisconnectMerge=function(h,g,_){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",h,g,_):this.onDisconnectRequestQueue_.push({pathString:h,action:"om",data:g,onComplete:_})},l.prototype.onDisconnectCancel=function(h,g){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",h,null,g):this.onDisconnectRequestQueue_.push({pathString:h,action:"oc",data:null,onComplete:g})},l.prototype.sendOnDisconnect_=function(h,g,_,b){var I={p:g,d:_};this.log_("onDisconnect "+h,I),this.sendRequest(h,I,function(R){b&&setTimeout(function(){b(R.s,R.d)},Math.floor(0))})},l.prototype.put=function(h,g,_,b){this.putInternal("p",h,g,_,b)},l.prototype.merge=function(h,g,_,b){this.putInternal("m",h,g,_,b)},l.prototype.putInternal=function(h,g,_,b,I){this.initConnection_();var R={p:g,d:_};void 0!==I&&(R.h=I),this.outstandingPuts_.push({action:h,request:R,onComplete:b}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+g)},l.prototype.sendPut_=function(h){var g=this,_=this.outstandingPuts_[h].action,b=this.outstandingPuts_[h].request,I=this.outstandingPuts_[h].onComplete;this.outstandingPuts_[h].queued=this.connected_,this.sendRequest(_,b,function(R){g.log_(_+" response",R),delete g.outstandingPuts_[h],g.outstandingPutCount_--,0===g.outstandingPutCount_&&(g.outstandingPuts_=[]),I&&I(R.s,R.d)})},l.prototype.reportStats=function(h){var g=this;if(this.connected_){var _={c:h};this.log_("reportStats",_),this.sendRequest("s",_,function(b){"ok"!==b.s&&g.log_("reportStats","Error sending stats: "+b.d)})}},l.prototype.onDataMessage_=function(h){if("r"in h){this.log_("from server: "+(0,N.stringify)(h));var g=h.r,_=this.requestCBHash_[g];_&&(delete this.requestCBHash_[g],_(h.b))}else{if("error"in h)throw"A server-side error has occurred: "+h.error;"a"in h&&this.onDataPush_(h.a,h.b)}},l.prototype.onDataPush_=function(h,g){this.log_("handleServerMessage",h,g),"d"===h?this.onDataUpdate_(g.p,g.d,!1,g.t):"m"===h?this.onDataUpdate_(g.p,g.d,!0,g.t):"c"===h?this.onListenRevoked_(g.p,g.q):"ac"===h?this.onAuthRevoked_(g.s,g.d):"apc"===h?this.onAppCheckRevoked_(g.s,g.d):"sd"===h?this.onSecurityDebugPacket_(g):cr("Unrecognized action received from server: "+(0,N.stringify)(h)+"\nAre you using the latest client?")},l.prototype.onReady_=function(h,g){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(h),this.lastSessionId=g,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},l.prototype.scheduleConnect_=function(h){var g=this;(0,N.assert)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){g.establishConnectionTimer_=null,g.establishConnection_()},Math.floor(h))},l.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},l.prototype.onVisible_=function(h){h&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Sl,this.realtime_||this.scheduleConnect_(0)),this.visible_=h},l.prototype.onOnline_=function(h){h?(this.log_("Browser went online."),this.reconnectDelay_=Sl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},l.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Sl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var g=(new Date).getTime()-this.lastConnectionAttemptTime_,_=Math.max(0,this.reconnectDelay_-g);_=Math.random()*_,this.log_("Trying to reconnect in "+_+"ms"),this.scheduleConnect_(_),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},l.prototype.establishConnection_=function(){return(0,oe.__awaiter)(this,void 0,void 0,function(){var h,g,_,b,I,R,k,F,W,re,me,Me,lt,Qe=this;return(0,oe.__generator)(this,function(xt){switch(xt.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,h=this.onDataMessage_.bind(this),g=this.onReady_.bind(this),_=this.onRealtimeDisconnect_.bind(this),b=this.id+":"+l.nextConnectionId_++,I=this.lastSessionId,R=!1,k=null,this.realtime_={close:F=function(){k?k.close():(R=!0,_())},sendRequest:function(tr){(0,N.assert)(k,"sendRequest call when we're not connected not allowed."),k.sendRequest(tr)}},W=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,xt.label=1;case 1:return xt.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(W),this.appCheckTokenProvider_.getToken(W)])];case 2:return re=oe.__read.apply(void 0,[xt.sent(),2]),me=re[0],Me=re[1],R?He("getToken() completed but was canceled"):(He("getToken() completed. Creating connection."),this.authToken_=me&&me.accessToken,this.appCheckToken_=Me&&Me.token,k=new Ty(b,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,h,g,_,function(tr){hn(tr+" ("+Qe.repoInfo_.toString()+")"),Qe.interrupt("server_kill")},I)),[3,4];case 3:return lt=xt.sent(),this.log_("Failed to get token: "+lt),R||(this.repoInfo_.nodeAdmin&&hn(lt),F()),[3,4];case 4:return[2]}})})},l.prototype.interrupt=function(h){He("Interrupting connection for reason: "+h),this.interruptReasons_[h]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},l.prototype.resume=function(h){He("Resuming connection for reason: "+h),delete this.interruptReasons_[h],(0,N.isEmpty)(this.interruptReasons_)&&(this.reconnectDelay_=Sl,this.realtime_||this.scheduleConnect_(0))},l.prototype.handleTimestamp_=function(h){var g=h-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:g})},l.prototype.cancelSentTransactions_=function(){for(var h=0;h<this.outstandingPuts_.length;h++){var g=this.outstandingPuts_[h];g&&"h"in g.request&&g.queued&&(g.onComplete&&g.onComplete("disconnect"),delete this.outstandingPuts_[h],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},l.prototype.onListenRevoked_=function(h,g){var _;_=g?g.map(function(I){return se(I)}).join("$"):"default";var b=this.removeListen_(h,_);b&&b.onComplete&&b.onComplete("permission_denied")},l.prototype.removeListen_=function(h,g){var b,_=new dn(h).toString();if(this.listens.has(_)){var I=this.listens.get(_);b=I.get(g),I.delete(g),0===I.size&&this.listens.delete(_)}else b=void 0;return b},l.prototype.onAuthRevoked_=function(h,g){He("Auth token revoked: "+h+"/"+g),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===h||"permission_denied"===h)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},l.prototype.onAppCheckRevoked_=function(h,g){He("App check token revoked: "+h+"/"+g),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===h||"permission_denied"===h)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},l.prototype.onSecurityDebugPacket_=function(h){this.securityDebugCallback_?this.securityDebugCallback_(h):"msg"in h&&console.log("FIREBASE: "+h.msg.replace("\n","\nFIREBASE: "))},l.prototype.restoreState_=function(){var h,g,_,b;this.tryAuth(),this.tryAppCheck();try{for(var I=(0,oe.__values)(this.listens.values()),R=I.next();!R.done;R=I.next()){var k=R.value;try{for(var F=(_=void 0,(0,oe.__values)(k.values())),U=F.next();!U.done;U=F.next())this.sendListen_(U.value)}catch(Me){_={error:Me}}finally{try{U&&!U.done&&(b=F.return)&&b.call(F)}finally{if(_)throw _.error}}}}catch(Me){h={error:Me}}finally{try{R&&!R.done&&(g=I.return)&&g.call(I)}finally{if(h)throw h.error}}for(var re=0;re<this.outstandingPuts_.length;re++)this.outstandingPuts_[re]&&this.sendPut_(re);for(;this.onDisconnectRequestQueue_.length;){var me=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(me.action,me.pathString,me.data,me.onComplete)}for(re=0;re<this.outstandingGets_.length;re++)this.outstandingGets_[re]&&this.sendGet_(re)},l.prototype.sendConnectStats_=function(){var h={},g="js";(0,N.isNodeSdk)()&&(g=this.repoInfo_.nodeAdmin?"admin_node":"node"),h["sdk."+g+"."+rn.replace(/\./g,"-")]=1,(0,N.isMobileCordova)()?h["framework.cordova"]=1:(0,N.isReactNative)()&&(h["framework.reactnative"]=1),this.reportStats(h)},l.prototype.shouldReconnect_=function(){var h=uC.getInstance().currentlyOnline();return(0,N.isEmpty)(this.interruptReasons_)&&h},l.nextPersistentConnectionId_=0,l.nextConnectionId_=0,l}(aC),qt=function(){function f(l,h){this.name=l,this.node=h}return f.Wrap=function(l,h){return new f(l,h)},f}(),Yp=function(){function f(){}return f.prototype.getCompare=function(){return this.compare.bind(this)},f.prototype.indexedValueChanged=function(l,h){var g=new qt(Cn,l),_=new qt(Cn,h);return 0!==this.compare(g,_)},f.prototype.minPost=function(){return qt.MIN},f}(),lh=function(f){function l(){return null!==f&&f.apply(this,arguments)||this}return(0,oe.__extends)(l,f),Object.defineProperty(l,"__EMPTY_NODE",{get:function(){return fa},set:function(h){fa=h},enumerable:!1,configurable:!0}),l.prototype.compare=function(h,g){return Gn(h.name,g.name)},l.prototype.isDefinedOn=function(h){throw(0,N.assertionError)("KeyIndex.isDefinedOn not expected to be called.")},l.prototype.indexedValueChanged=function(h,g){return!1},l.prototype.minPost=function(){return qt.MIN},l.prototype.maxPost=function(){return new qt(lr,fa)},l.prototype.makePost=function(h,g){return(0,N.assert)("string"==typeof h,"KeyIndex indexValue must always be a string."),new qt(h,fa)},l.prototype.toString=function(){return".key"},l}(Yp),zi=new lh,fh=function(){function f(l,h,g,_,b){void 0===b&&(b=null),this.isReverse_=_,this.resultGenerator_=b,this.nodeStack_=[];for(var I=1;!l.isEmpty();)if(I=h?g(l.key,h):1,_&&(I*=-1),I<0)l=this.isReverse_?l.left:l.right;else{if(0===I){this.nodeStack_.push(l);break}this.nodeStack_.push(l),l=this.isReverse_?l.right:l.left}}return f.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var h,l=this.nodeStack_.pop();if(h=this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value},this.isReverse_)for(l=l.left;!l.isEmpty();)this.nodeStack_.push(l),l=l.right;else for(l=l.right;!l.isEmpty();)this.nodeStack_.push(l),l=l.left;return h},f.prototype.hasNext=function(){return this.nodeStack_.length>0},f.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var l=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value}},f}(),Uo=function(){function f(l,h,g,_,b){this.key=l,this.value=h,this.color=g??f.RED,this.left=_??os.EMPTY_NODE,this.right=b??os.EMPTY_NODE}return f.prototype.copy=function(l,h,g,_,b){return new f(l??this.key,h??this.value,g??this.color,_??this.left,b??this.right)},f.prototype.count=function(){return this.left.count()+1+this.right.count()},f.prototype.isEmpty=function(){return!1},f.prototype.inorderTraversal=function(l){return this.left.inorderTraversal(l)||!!l(this.key,this.value)||this.right.inorderTraversal(l)},f.prototype.reverseTraversal=function(l){return this.right.reverseTraversal(l)||l(this.key,this.value)||this.left.reverseTraversal(l)},f.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},f.prototype.minKey=function(){return this.min_().key},f.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},f.prototype.insert=function(l,h,g){var _=this,b=g(l,_.key);return(_=b<0?_.copy(null,null,null,_.left.insert(l,h,g),null):0===b?_.copy(null,h,null,null,null):_.copy(null,null,null,null,_.right.insert(l,h,g))).fixUp_()},f.prototype.removeMin_=function(){if(this.left.isEmpty())return os.EMPTY_NODE;var l=this;return!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),(l=l.copy(null,null,null,l.left.removeMin_(),null)).fixUp_()},f.prototype.remove=function(l,h){var g,_;if(h(l,(g=this).key)<0)!g.left.isEmpty()&&!g.left.isRed_()&&!g.left.left.isRed_()&&(g=g.moveRedLeft_()),g=g.copy(null,null,null,g.left.remove(l,h),null);else{if(g.left.isRed_()&&(g=g.rotateRight_()),!g.right.isEmpty()&&!g.right.isRed_()&&!g.right.left.isRed_()&&(g=g.moveRedRight_()),0===h(l,g.key)){if(g.right.isEmpty())return os.EMPTY_NODE;_=g.right.min_(),g=g.copy(_.key,_.value,null,null,g.right.removeMin_())}g=g.copy(null,null,null,null,g.right.remove(l,h))}return g.fixUp_()},f.prototype.isRed_=function(){return this.color},f.prototype.fixUp_=function(){var l=this;return l.right.isRed_()&&!l.left.isRed_()&&(l=l.rotateLeft_()),l.left.isRed_()&&l.left.left.isRed_()&&(l=l.rotateRight_()),l.left.isRed_()&&l.right.isRed_()&&(l=l.colorFlip_()),l},f.prototype.moveRedLeft_=function(){var l=this.colorFlip_();return l.right.left.isRed_()&&(l=(l=(l=l.copy(null,null,null,null,l.right.rotateRight_())).rotateLeft_()).colorFlip_()),l},f.prototype.moveRedRight_=function(){var l=this.colorFlip_();return l.left.left.isRed_()&&(l=(l=l.rotateRight_()).colorFlip_()),l},f.prototype.rotateLeft_=function(){var l=this.copy(null,null,f.RED,null,this.right.left);return this.right.copy(null,null,this.color,l,null)},f.prototype.rotateRight_=function(){var l=this.copy(null,null,f.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,l)},f.prototype.colorFlip_=function(){var l=this.left.copy(null,null,!this.left.color,null,null),h=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,l,h)},f.prototype.checkMaxDepth_=function(){var l=this.check_();return Math.pow(2,l)<=this.count()+1},f.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var l=this.left.check_();if(l!==this.right.check_())throw new Error("Black depths differ");return l+(this.isRed_()?0:1)},f.RED=!0,f.BLACK=!1,f}(),dC=function(){function f(){}return f.prototype.copy=function(l,h,g,_,b){return this},f.prototype.insert=function(l,h,g){return new Uo(l,h,null)},f.prototype.remove=function(l,h){return this},f.prototype.count=function(){return 0},f.prototype.isEmpty=function(){return!0},f.prototype.inorderTraversal=function(l){return!1},f.prototype.reverseTraversal=function(l){return!1},f.prototype.minKey=function(){return null},f.prototype.maxKey=function(){return null},f.prototype.check_=function(){return 0},f.prototype.isRed_=function(){return!1},f}(),os=function(){function f(l,h){void 0===h&&(h=f.EMPTY_NODE),this.comparator_=l,this.root_=h}return f.prototype.insert=function(l,h){return new f(this.comparator_,this.root_.insert(l,h,this.comparator_).copy(null,null,Uo.BLACK,null,null))},f.prototype.remove=function(l){return new f(this.comparator_,this.root_.remove(l,this.comparator_).copy(null,null,Uo.BLACK,null,null))},f.prototype.get=function(l){for(var h,g=this.root_;!g.isEmpty();){if(0===(h=this.comparator_(l,g.key)))return g.value;h<0?g=g.left:h>0&&(g=g.right)}return null},f.prototype.getPredecessorKey=function(l){for(var h,g=this.root_,_=null;!g.isEmpty();){if(0===(h=this.comparator_(l,g.key))){if(g.left.isEmpty())return _?_.key:null;for(g=g.left;!g.right.isEmpty();)g=g.right;return g.key}h<0?g=g.left:h>0&&(_=g,g=g.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},f.prototype.isEmpty=function(){return this.root_.isEmpty()},f.prototype.count=function(){return this.root_.count()},f.prototype.minKey=function(){return this.root_.minKey()},f.prototype.maxKey=function(){return this.root_.maxKey()},f.prototype.inorderTraversal=function(l){return this.root_.inorderTraversal(l)},f.prototype.reverseTraversal=function(l){return this.root_.reverseTraversal(l)},f.prototype.getIterator=function(l){return new fh(this.root_,null,this.comparator_,!1,l)},f.prototype.getIteratorFrom=function(l,h){return new fh(this.root_,l,this.comparator_,!1,h)},f.prototype.getReverseIteratorFrom=function(l,h){return new fh(this.root_,l,this.comparator_,!0,h)},f.prototype.getReverseIterator=function(l){return new fh(this.root_,null,this.comparator_,!0,l)},f.EMPTY_NODE=new dC,f}();function Al(f,l){return Gn(f.name,l.name)}function ha(f,l){return Gn(f,l)}var Ml,nc,ky,rc,oc,Jp=function(f){return"number"==typeof f?"number:"+ee(f):"string:"+f},Nt=function(f){if(f.isLeafNode()){var l=f.val();(0,N.assert)("string"==typeof l||"number"==typeof l||"object"==typeof l&&(0,N.contains)(l,".sv"),"Priority must be a string or number.")}else(0,N.assert)(f===Xp||f.isEmpty(),"priority of unexpected type.");(0,N.assert)(f===Xp||f.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},da=function(){function f(l,h){void 0===h&&(h=f.__childrenNodeConstructor.EMPTY_NODE),this.value_=l,this.priorityNode_=h,this.lazyHash_=null,(0,N.assert)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Nt(this.priorityNode_)}return Object.defineProperty(f,"__childrenNodeConstructor",{get:function(){return Ml},set:function(l){Ml=l},enumerable:!1,configurable:!0}),f.prototype.isLeafNode=function(){return!0},f.prototype.getPriority=function(){return this.priorityNode_},f.prototype.updatePriority=function(l){return new f(this.value_,l)},f.prototype.getImmediateChild=function(l){return".priority"===l?this.priorityNode_:f.__childrenNodeConstructor.EMPTY_NODE},f.prototype.getChild=function(l){return we(l)?this:".priority"===Ut(l)?this.priorityNode_:f.__childrenNodeConstructor.EMPTY_NODE},f.prototype.hasChild=function(){return!1},f.prototype.getPredecessorChildName=function(l,h){return null},f.prototype.updateImmediateChild=function(l,h){return".priority"===l?this.updatePriority(h):h.isEmpty()&&".priority"!==l?this:f.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(l,h).updatePriority(this.priorityNode_)},f.prototype.updateChild=function(l,h){var g=Ut(l);return null===g?h:h.isEmpty()&&".priority"!==g?this:((0,N.assert)(".priority"!==g||1===la(l),".priority must be the last token in a path"),this.updateImmediateChild(g,f.__childrenNodeConstructor.EMPTY_NODE.updateChild(In(l),h)))},f.prototype.isEmpty=function(){return!1},f.prototype.numChildren=function(){return 0},f.prototype.forEachChild=function(l,h){return!1},f.prototype.val=function(l){return l&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},f.prototype.hash=function(){if(null===this.lazyHash_){var l="";this.priorityNode_.isEmpty()||(l+="priority:"+Jp(this.priorityNode_.val())+":");var h=typeof this.value_;l+=h+":",l+="number"===h?ee(this.value_):this.value_,this.lazyHash_=Te(l)}return this.lazyHash_},f.prototype.getValue=function(){return this.value_},f.prototype.compareTo=function(l){return l===f.__childrenNodeConstructor.EMPTY_NODE?1:l instanceof f.__childrenNodeConstructor?-1:((0,N.assert)(l.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(l))},f.prototype.compareToLeafNode_=function(l){var h=typeof l.value_,g=typeof this.value_,_=f.VALUE_TYPE_ORDER.indexOf(h),b=f.VALUE_TYPE_ORDER.indexOf(g);return(0,N.assert)(_>=0,"Unknown leaf type: "+h),(0,N.assert)(b>=0,"Unknown leaf type: "+g),_===b?"object"===g?0:this.value_<l.value_?-1:this.value_===l.value_?0:1:b-_},f.prototype.withIndex=function(){return this},f.prototype.isIndexed=function(){return!0},f.prototype.equals=function(l){return l===this||!!l.isLeafNode()&&(this.value_===l.value_&&this.priorityNode_.equals(l.priorityNode_))},f.VALUE_TYPE_ORDER=["object","boolean","number","string"],f}(),Ns=function(f){function l(){return null!==f&&f.apply(this,arguments)||this}return(0,oe.__extends)(l,f),l.prototype.compare=function(h,g){var _=h.node.getPriority(),b=g.node.getPriority(),I=_.compareTo(b);return 0===I?Gn(h.name,g.name):I},l.prototype.isDefinedOn=function(h){return!h.getPriority().isEmpty()},l.prototype.indexedValueChanged=function(h,g){return!h.getPriority().equals(g.getPriority())},l.prototype.minPost=function(){return qt.MIN},l.prototype.maxPost=function(){return new qt(lr,new da("[PRIORITY-POST]",ky))},l.prototype.makePost=function(h,g){var _=nc(h);return new qt(g,new da("[PRIORITY-POST]",_))},l.prototype.toString=function(){return".priority"},l}(Yp),Gt=new Ns,ss=Math.log(2),ks=function(){function f(l){this.count=parseInt(Math.log(l+1)/ss,10),this.current_=this.count-1;var _=parseInt(Array(this.count+1).join("1"),2);this.bits_=l+1&_}return f.prototype.nextBitIsOne=function(){var l=!(this.bits_&1<<this.current_);return this.current_--,l},f}(),Kt=function(f,l,h,g){f.sort(l);var _=function(k,F){var W,re,U=F-k;if(0===U)return null;if(1===U)return W=f[k],re=h?h(W):W,new Uo(re,W.node,Uo.BLACK,null,null);var me=parseInt(U/2,10)+k,Me=_(k,me),lt=_(me+1,F);return W=f[me],re=h?h(W):W,new Uo(re,W.node,Uo.BLACK,Me,lt)},R=function(k){for(var F=null,U=null,W=f.length,re=function(xt,tr){var hs=W-xt,Wh=W;W-=xt;var Bg=_(hs+1,Wh),Kh=f[hs],G_=h?h(Kh):Kh;me(new Uo(G_,Kh.node,tr,null,Bg))},me=function(xt){F?(F.left=xt,F=xt):(U=xt,F=xt)},Me=0;Me<k.count;++Me){var lt=k.nextBitIsOne(),Qe=Math.pow(2,k.count-(Me+1));lt?re(Qe,Uo.BLACK):(re(Qe,Uo.BLACK),re(Qe,Uo.RED))}return U}(new ks(f.length));return new os(g||l,R)},pa={},ic=function(){function f(l,h){this.indexes_=l,this.indexSet_=h}return Object.defineProperty(f,"Default",{get:function(){return(0,N.assert)(pa&&Gt,"ChildrenNode.ts has not been loaded"),rc=rc||new f({".priority":pa},{".priority":Gt})},enumerable:!1,configurable:!0}),f.prototype.get=function(l){var h=(0,N.safeGet)(this.indexes_,l);if(!h)throw new Error("No index defined for "+l);return h instanceof os?h:null},f.prototype.hasIndex=function(l){return(0,N.contains)(this.indexSet_,l.toString())},f.prototype.addIndex=function(l,h){(0,N.assert)(l!==zi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var g=[],_=!1,b=h.getIterator(qt.Wrap),I=b.getNext();I;)_=_||l.isDefinedOn(I.node),g.push(I),I=b.getNext();var R;R=_?Kt(g,l.getCompare()):pa;var k=l.toString(),F=(0,oe.__assign)({},this.indexSet_);F[k]=l;var U=(0,oe.__assign)({},this.indexes_);return U[k]=R,new f(U,F)},f.prototype.addToIndexes=function(l,h){var g=this;return new f((0,N.map)(this.indexes_,function(b,I){var R=(0,N.safeGet)(g.indexSet_,I);if((0,N.assert)(R,"Missing index implementation for "+I),b===pa){if(R.isDefinedOn(l.node)){for(var k=[],F=h.getIterator(qt.Wrap),U=F.getNext();U;)U.name!==l.name&&k.push(U),U=F.getNext();return k.push(l),Kt(k,R.getCompare())}return pa}var W=h.get(l.name),re=b;return W&&(re=re.remove(new qt(l.name,W))),re.insert(l,l.node)}),this.indexSet_)},f.prototype.removeFromIndexes=function(l,h){return new f((0,N.map)(this.indexes_,function(_){if(_===pa)return _;var b=h.get(l.name);return b?_.remove(new qt(l.name,b)):_}),this.indexSet_)},f}(),st=function(){function f(l,h,g){this.children_=l,this.priorityNode_=h,this.indexMap_=g,this.lazyHash_=null,this.priorityNode_&&Nt(this.priorityNode_),this.children_.isEmpty()&&(0,N.assert)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(f,"EMPTY_NODE",{get:function(){return oc||(oc=new f(new os(ha),null,ic.Default))},enumerable:!1,configurable:!0}),f.prototype.isLeafNode=function(){return!1},f.prototype.getPriority=function(){return this.priorityNode_||oc},f.prototype.updatePriority=function(l){return this.children_.isEmpty()?this:new f(this.children_,l,this.indexMap_)},f.prototype.getImmediateChild=function(l){if(".priority"===l)return this.getPriority();var h=this.children_.get(l);return null===h?oc:h},f.prototype.getChild=function(l){var h=Ut(l);return null===h?this:this.getImmediateChild(h).getChild(In(l))},f.prototype.hasChild=function(l){return null!==this.children_.get(l)},f.prototype.updateImmediateChild=function(l,h){if((0,N.assert)(h,"We should always be passing snapshot nodes"),".priority"===l)return this.updatePriority(h);var g=new qt(l,h),_=void 0,b=void 0;h.isEmpty()?(_=this.children_.remove(l),b=this.indexMap_.removeFromIndexes(g,this.children_)):(_=this.children_.insert(l,h),b=this.indexMap_.addToIndexes(g,this.children_));var I=_.isEmpty()?oc:this.priorityNode_;return new f(_,I,b)},f.prototype.updateChild=function(l,h){var g=Ut(l);if(null===g)return h;(0,N.assert)(".priority"!==Ut(l)||1===la(l),".priority must be the last token in a path");var _=this.getImmediateChild(g).updateChild(In(l),h);return this.updateImmediateChild(g,_)},f.prototype.isEmpty=function(){return this.children_.isEmpty()},f.prototype.numChildren=function(){return this.children_.count()},f.prototype.val=function(l){if(this.isEmpty())return null;var h={},g=0,_=0,b=!0;if(this.forEachChild(Gt,function(k,F){h[k]=F.val(l),g++,b&&f.INTEGER_REGEXP_.test(k)?_=Math.max(_,Number(k)):b=!1}),!l&&b&&_<2*g){var I=[];for(var R in h)I[R]=h[R];return I}return l&&!this.getPriority().isEmpty()&&(h[".priority"]=this.getPriority().val()),h},f.prototype.hash=function(){if(null===this.lazyHash_){var l="";this.getPriority().isEmpty()||(l+="priority:"+Jp(this.getPriority().val())+":"),this.forEachChild(Gt,function(h,g){var _=g.hash();""!==_&&(l+=":"+h+":"+_)}),this.lazyHash_=""===l?"":Te(l)}return this.lazyHash_},f.prototype.getPredecessorChildName=function(l,h,g){var _=this.resolveIndex_(g);if(_){var b=_.getPredecessorKey(new qt(l,h));return b?b.name:null}return this.children_.getPredecessorKey(l)},f.prototype.getFirstChildName=function(l){var h=this.resolveIndex_(l);if(h){var g=h.minKey();return g&&g.name}return this.children_.minKey()},f.prototype.getFirstChild=function(l){var h=this.getFirstChildName(l);return h?new qt(h,this.children_.get(h)):null},f.prototype.getLastChildName=function(l){var h=this.resolveIndex_(l);if(h){var g=h.maxKey();return g&&g.name}return this.children_.maxKey()},f.prototype.getLastChild=function(l){var h=this.getLastChildName(l);return h?new qt(h,this.children_.get(h)):null},f.prototype.forEachChild=function(l,h){var g=this.resolveIndex_(l);return g?g.inorderTraversal(function(_){return h(_.name,_.node)}):this.children_.inorderTraversal(h)},f.prototype.getIterator=function(l){return this.getIteratorFrom(l.minPost(),l)},f.prototype.getIteratorFrom=function(l,h){var g=this.resolveIndex_(h);if(g)return g.getIteratorFrom(l,function(I){return I});for(var _=this.children_.getIteratorFrom(l.name,qt.Wrap),b=_.peek();null!=b&&h.compare(b,l)<0;)_.getNext(),b=_.peek();return _},f.prototype.getReverseIterator=function(l){return this.getReverseIteratorFrom(l.maxPost(),l)},f.prototype.getReverseIteratorFrom=function(l,h){var g=this.resolveIndex_(h);if(g)return g.getReverseIteratorFrom(l,function(I){return I});for(var _=this.children_.getReverseIteratorFrom(l.name,qt.Wrap),b=_.peek();null!=b&&h.compare(b,l)>0;)_.getNext(),b=_.peek();return _},f.prototype.compareTo=function(l){return this.isEmpty()?l.isEmpty()?0:-1:l.isLeafNode()||l.isEmpty()?1:l===Nl?-1:0},f.prototype.withIndex=function(l){if(l===zi||this.indexMap_.hasIndex(l))return this;var h=this.indexMap_.addIndex(l,this.children_);return new f(this.children_,this.priorityNode_,h)},f.prototype.isIndexed=function(l){return l===zi||this.indexMap_.hasIndex(l)},f.prototype.equals=function(l){if(l===this)return!0;if(l.isLeafNode())return!1;var h=l;if(this.getPriority().equals(h.getPriority())){if(this.children_.count()===h.children_.count()){for(var g=this.getIterator(Gt),_=h.getIterator(Gt),b=g.getNext(),I=_.getNext();b&&I;){if(b.name!==I.name||!b.node.equals(I.node))return!1;b=g.getNext(),I=_.getNext()}return null===b&&null===I}return!1}return!1},f.prototype.resolveIndex_=function(l){return l===zi?null:this.indexMap_.get(l.toString())},f.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,f}(),Rl=function(f){function l(){return f.call(this,new os(ha),st.EMPTY_NODE,ic.Default)||this}return(0,oe.__extends)(l,f),l.prototype.compareTo=function(h){return h===this?0:1},l.prototype.equals=function(h){return h===this},l.prototype.getPriority=function(){return this},l.prototype.getImmediateChild=function(h){return st.EMPTY_NODE},l.prototype.isEmpty=function(){return!1},l}(st),Nl=new Rl;Object.defineProperties(qt,{MIN:{value:new qt(Cn,st.EMPTY_NODE)},MAX:{value:new qt(lr,Nl)}}),lh.__EMPTY_NODE=st.EMPTY_NODE,da.__childrenNodeConstructor=st,function Ye(f){Xp=f}(Nl),function gC(f){ky=f}(Nl);var Jr=!0;function On(f,l){if(void 0===l&&(l=null),null===f)return st.EMPTY_NODE;if("object"==typeof f&&".priority"in f&&(l=f[".priority"]),(0,N.assert)(null===l||"string"==typeof l||"number"==typeof l||"object"==typeof l&&".sv"in l,"Invalid priority type found: "+typeof l),"object"==typeof f&&".value"in f&&null!==f[".value"]&&(f=f[".value"]),"object"!=typeof f||".sv"in f)return new da(f,On(l));if(f instanceof Array||!Jr){var k=st.EMPTY_NODE;return pe(f,function(F,U){if((0,N.contains)(f,F)&&"."!==F.substring(0,1)){var W=On(U);(W.isLeafNode()||!W.isEmpty())&&(k=k.updateImmediateChild(F,W))}}),k.updatePriority(On(l))}var g=[],_=!1;if(pe(f,function(F,U){if("."!==F.substring(0,1)){var W=On(U);W.isEmpty()||(_=_||!W.getPriority().isEmpty(),g.push(new qt(F,W)))}}),0===g.length)return st.EMPTY_NODE;var I=Kt(g,Al,function(F){return F.name},ha);if(_){var R=Kt(g,Gt.getCompare());return new st(I,On(l),new ic({".priority":R},{".priority":Gt}))}return new st(I,On(l),ic.Default)}!function pC(f){nc=f}(On);var Zp=function(f){function l(h){var g=f.call(this)||this;return g.indexPath_=h,(0,N.assert)(!we(h)&&".priority"!==Ut(h),"Can't create PathIndex with empty path or .priority key"),g}return(0,oe.__extends)(l,f),l.prototype.extractChild=function(h){return h.getChild(this.indexPath_)},l.prototype.isDefinedOn=function(h){return!h.getChild(this.indexPath_).isEmpty()},l.prototype.compare=function(h,g){var _=this.extractChild(h.node),b=this.extractChild(g.node),I=_.compareTo(b);return 0===I?Gn(h.name,g.name):I},l.prototype.makePost=function(h,g){var _=On(h),b=st.EMPTY_NODE.updateChild(this.indexPath_,_);return new qt(g,b)},l.prototype.maxPost=function(){var h=st.EMPTY_NODE.updateChild(this.indexPath_,Nl);return new qt(lr,h)},l.prototype.toString=function(){return ch(this.indexPath_,0).join("/")},l}(Yp),mC=function(f){function l(){return null!==f&&f.apply(this,arguments)||this}return(0,oe.__extends)(l,f),l.prototype.compare=function(h,g){var _=h.node.compareTo(g.node);return 0===_?Gn(h.name,g.name):_},l.prototype.isDefinedOn=function(h){return!0},l.prototype.indexedValueChanged=function(h,g){return!h.equals(g)},l.prototype.minPost=function(){return qt.MIN},l.prototype.maxPost=function(){return qt.MAX},l.prototype.makePost=function(h,g){var _=On(h);return new qt(g,_)},l.prototype.toString=function(){return".value"},l}(Yp),Wi=new mC,sc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",un=function(){var f=0,l=[];return function(h){var g=h===f;f=h;var _,b=new Array(8);for(_=7;_>=0;_--)b[_]=sc.charAt(h%64),h=Math.floor(h/64);(0,N.assert)(0===h,"Cannot push at time == 0");var I=b.join("");if(g){for(_=11;_>=0&&63===l[_];_--)l[_]=0;l[_]++}else for(_=0;_<12;_++)l[_]=Math.floor(64*Math.random());for(_=0;_<12;_++)I+=sc.charAt(l[_]);return(0,N.assert)(20===I.length,"nextPushId: Length should be 20."),I}}(),Vr=function(f){if(f===""+Ue)return"-";var l=D(f);if(null!=l)return""+(l+1);for(var h=new Array(f.length),g=0;g<h.length;g++)h[g]=f.charAt(g);if(h.length<786)return h.push("-"),h.join("");for(var _=h.length-1;_>=0&&"z"===h[_];)_--;if(-1===_)return lr;var I=sc.charAt(sc.indexOf(h[_])+1);return h[_]=I,h.slice(0,_+1).join("")},fi=function(f){if(f===""+jt)return Cn;var l=D(f);if(null!=l)return""+(l-1);for(var h=new Array(f.length),g=0;g<h.length;g++)h[g]=f.charAt(g);return"-"===h[h.length-1]?1===h.length?""+Ue:(delete h[h.length-1],h.join("")):(h[h.length-1]=sc.charAt(sc.indexOf(h[h.length-1])-1),h.join("")+"z".repeat(786-h.length))};function Ya(f){return{type:"value",snapshotNode:f}}function Ir(f,l){return{type:"child_added",snapshotNode:l,childName:f}}function ac(f,l){return{type:"child_removed",snapshotNode:l,childName:f}}function uc(f,l,h){return{type:"child_changed",snapshotNode:l,childName:f,oldSnap:h}}var jo=function(){function f(l){this.index_=l}return f.prototype.updateChild=function(l,h,g,_,b,I){(0,N.assert)(l.isIndexed(this.index_),"A node must be indexed if only a child is updated");var R=l.getImmediateChild(h);return R.getChild(_).equals(g.getChild(_))&&R.isEmpty()===g.isEmpty()||(null!=I&&(g.isEmpty()?l.hasChild(h)?I.trackChildChange(ac(h,R)):(0,N.assert)(l.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):R.isEmpty()?I.trackChildChange(Ir(h,g)):I.trackChildChange(uc(h,g,R))),l.isLeafNode()&&g.isEmpty())?l:l.updateImmediateChild(h,g).withIndex(this.index_)},f.prototype.updateFullNode=function(l,h,g){return null!=g&&(l.isLeafNode()||l.forEachChild(Gt,function(_,b){h.hasChild(_)||g.trackChildChange(ac(_,b))}),h.isLeafNode()||h.forEachChild(Gt,function(_,b){if(l.hasChild(_)){var I=l.getImmediateChild(_);I.equals(b)||g.trackChildChange(uc(_,b,I))}else g.trackChildChange(Ir(_,b))})),h.withIndex(this.index_)},f.prototype.updatePriority=function(l,h){return l.isEmpty()?st.EMPTY_NODE:l.updatePriority(h)},f.prototype.filtersNodes=function(){return!1},f.prototype.getIndexedFilter=function(){return this},f.prototype.getIndex=function(){return this.index_},f}(),Fe=function(){function f(l){this.indexedFilter_=new jo(l.getIndex()),this.index_=l.getIndex(),this.startPost_=f.getStartPost_(l),this.endPost_=f.getEndPost_(l)}return f.prototype.getStartPost=function(){return this.startPost_},f.prototype.getEndPost=function(){return this.endPost_},f.prototype.matches=function(l){return this.index_.compare(this.getStartPost(),l)<=0&&this.index_.compare(l,this.getEndPost())<=0},f.prototype.updateChild=function(l,h,g,_,b,I){return this.matches(new qt(h,g))||(g=st.EMPTY_NODE),this.indexedFilter_.updateChild(l,h,g,_,b,I)},f.prototype.updateFullNode=function(l,h,g){h.isLeafNode()&&(h=st.EMPTY_NODE);var _=h.withIndex(this.index_);_=_.updatePriority(st.EMPTY_NODE);var b=this;return h.forEachChild(Gt,function(I,R){b.matches(new qt(I,R))||(_=_.updateImmediateChild(I,st.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(l,_,g)},f.prototype.updatePriority=function(l,h){return l},f.prototype.filtersNodes=function(){return!0},f.prototype.getIndexedFilter=function(){return this.indexedFilter_},f.prototype.getIndex=function(){return this.index_},f.getStartPost_=function(l){if(l.hasStart()){var h=l.getIndexStartName();return l.getIndex().makePost(l.getIndexStartValue(),h)}return l.getIndex().minPost()},f.getEndPost_=function(l){if(l.hasEnd()){var h=l.getIndexEndName();return l.getIndex().makePost(l.getIndexEndValue(),h)}return l.getIndex().maxPost()},f}(),kt=function(){function f(l){this.rangedFilter_=new Fe(l),this.index_=l.getIndex(),this.limit_=l.getLimit(),this.reverse_=!l.isViewFromLeft()}return f.prototype.updateChild=function(l,h,g,_,b,I){return this.rangedFilter_.matches(new qt(h,g))||(g=st.EMPTY_NODE),l.getImmediateChild(h).equals(g)?l:l.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(l,h,g,_,b,I):this.fullLimitUpdateChild_(l,h,g,b,I)},f.prototype.updateFullNode=function(l,h,g){var _;if(h.isLeafNode()||h.isEmpty())_=st.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<h.numChildren()&&h.isIndexed(this.index_)){_=st.EMPTY_NODE.withIndex(this.index_);var b=void 0;b=this.reverse_?h.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):h.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var I=0;b.hasNext()&&I<this.limit_;){var R=b.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),R)<=0:this.index_.compare(R,this.rangedFilter_.getEndPost())<=0))break;_=_.updateImmediateChild(R.name,R.node),I++}}else{_=(_=h.withIndex(this.index_)).updatePriority(st.EMPTY_NODE);var F=void 0,U=void 0,W=void 0;if(b=void 0,this.reverse_){b=_.getReverseIterator(this.index_),F=this.rangedFilter_.getEndPost(),U=this.rangedFilter_.getStartPost();var re=this.index_.getCompare();W=function(Qe,xt){return re(xt,Qe)}}else b=_.getIterator(this.index_),F=this.rangedFilter_.getStartPost(),U=this.rangedFilter_.getEndPost(),W=this.index_.getCompare();I=0;for(var me=!1;b.hasNext();)R=b.getNext(),!me&&W(F,R)<=0&&(me=!0),me&&I<this.limit_&&W(R,U)<=0?I++:_=_.updateImmediateChild(R.name,st.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(l,_,g)},f.prototype.updatePriority=function(l,h){return l},f.prototype.filtersNodes=function(){return!0},f.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},f.prototype.getIndex=function(){return this.index_},f.prototype.fullLimitUpdateChild_=function(l,h,g,_,b){var I;if(this.reverse_){var R=this.index_.getCompare();I=function(tr,hs){return R(hs,tr)}}else I=this.index_.getCompare();var k=l;(0,N.assert)(k.numChildren()===this.limit_,"");var F=new qt(h,g),U=this.reverse_?k.getFirstChild(this.index_):k.getLastChild(this.index_),W=this.rangedFilter_.matches(F);if(k.hasChild(h)){for(var re=k.getImmediateChild(h),me=_.getChildAfterChild(this.index_,U,this.reverse_);null!=me&&(me.name===h||k.hasChild(me.name));)me=_.getChildAfterChild(this.index_,me,this.reverse_);var Me=null==me?1:I(me,F);if(W&&!g.isEmpty()&&Me>=0)return b?.trackChildChange(uc(h,g,re)),k.updateImmediateChild(h,g);b?.trackChildChange(ac(h,re));var Qe=k.updateImmediateChild(h,st.EMPTY_NODE);return null!=me&&this.rangedFilter_.matches(me)?(b?.trackChildChange(Ir(me.name,me.node)),Qe.updateImmediateChild(me.name,me.node)):Qe}return g.isEmpty()?l:W&&I(U,F)>=0?(null!=b&&(b.trackChildChange(ac(U.name,U.node)),b.trackChildChange(Ir(h,g))),k.updateImmediateChild(h,g).updateImmediateChild(U.name,st.EMPTY_NODE)):l},f}(),Pn=function(){function f(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Gt}return f.prototype.hasStart=function(){return this.startSet_},f.prototype.hasStartAfter=function(){return this.startAfterSet_},f.prototype.hasEndBefore=function(){return this.endBeforeSet_},f.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},f.prototype.getIndexStartValue=function(){return(0,N.assert)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},f.prototype.getIndexStartName=function(){return(0,N.assert)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Cn},f.prototype.hasEnd=function(){return this.endSet_},f.prototype.getIndexEndValue=function(){return(0,N.assert)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},f.prototype.getIndexEndName=function(){return(0,N.assert)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:lr},f.prototype.hasLimit=function(){return this.limitSet_},f.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},f.prototype.getLimit=function(){return(0,N.assert)(this.limitSet_,"Only valid if limit has been set"),this.limit_},f.prototype.getIndex=function(){return this.index_},f.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},f.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Gt},f.prototype.copy=function(){var l=new f;return l.limitSet_=this.limitSet_,l.limit_=this.limit_,l.startSet_=this.startSet_,l.indexStartValue_=this.indexStartValue_,l.startNameSet_=this.startNameSet_,l.indexStartName_=this.indexStartName_,l.endSet_=this.endSet_,l.indexEndValue_=this.indexEndValue_,l.endNameSet_=this.endNameSet_,l.indexEndName_=this.indexEndName_,l.index_=this.index_,l.viewFrom_=this.viewFrom_,l},f}();function ga(f,l,h){var g=f.copy();return g.startSet_=!0,void 0===l&&(l=null),g.indexStartValue_=l,null!=h?(g.startNameSet_=!0,g.indexStartName_=h):(g.startNameSet_=!1,g.indexStartName_=""),g}function cc(f,l,h){var g=f.copy();return g.endSet_=!0,void 0===l&&(l=null),g.indexEndValue_=l,void 0!==h?(g.endNameSet_=!0,g.indexEndName_=h):(g.endNameSet_=!1,g.indexEndName_=""),g}function Dt(f,l){var h=f.copy();return h.index_=l,h}function gh(f){var h,l={};return f.isDefault()||(f.index_===Gt?h="$priority":f.index_===Wi?h="$value":f.index_===zi?h="$key":((0,N.assert)(f.index_ instanceof Zp,"Unrecognized index type!"),h=f.index_.toString()),l.orderBy=(0,N.stringify)(h),f.startSet_&&(l.startAt=(0,N.stringify)(f.indexStartValue_),f.startNameSet_&&(l.startAt+=","+(0,N.stringify)(f.indexStartName_))),f.endSet_&&(l.endAt=(0,N.stringify)(f.indexEndValue_),f.endNameSet_&&(l.endAt+=","+(0,N.stringify)(f.indexEndName_))),f.limitSet_&&(f.isViewFromLeft()?l.limitToFirst=f.limit_:l.limitToLast=f.limit_)),l}function lc(f){var l={};if(f.startSet_&&(l.sp=f.indexStartValue_,f.startNameSet_&&(l.sn=f.indexStartName_)),f.endSet_&&(l.ep=f.indexEndValue_,f.endNameSet_&&(l.en=f.indexEndName_)),f.limitSet_){l.l=f.limit_;var h=f.viewFrom_;""===h&&(h=f.isViewFromLeft()?"l":"r"),l.vf=h}return f.index_!==Gt&&(l.i=f.index_.toString()),l}var xy=function(f){function l(h,g,_,b){var I=f.call(this)||this;return I.repoInfo_=h,I.onDataUpdate_=g,I.authTokenProvider_=_,I.appCheckTokenProvider_=b,I.log_=on("p:rest:"),I.listens_={},I}return(0,oe.__extends)(l,f),l.prototype.reportStats=function(h){throw new Error("Method not implemented.")},l.getListenId_=function(h,g){return void 0!==g?"tag$"+g:((0,N.assert)(h._queryParams.isDefault(),"should have a tag if it's not a default query."),h._path.toString())},l.prototype.listen=function(h,g,_,b){var I=this,R=h._path.toString();this.log_("Listen called for "+R+" "+h._queryIdentifier);var k=l.getListenId_(h,_),F={};this.listens_[k]=F;var U=gh(h._queryParams);this.restRequest_(R+".json",U,function(W,re){var me=re;404===W&&(me=null,W=null),null===W&&I.onDataUpdate_(R,me,!1,_),(0,N.safeGet)(I.listens_,k)===F&&b(W?401===W?"permission_denied":"rest_error:"+W:"ok",null)})},l.prototype.unlisten=function(h,g){var _=l.getListenId_(h,g);delete this.listens_[_]},l.prototype.get=function(h){var g=this,_=gh(h._queryParams),b=h._path.toString(),I=new N.Deferred;return this.restRequest_(b+".json",_,function(R,k){var F=k;404===R&&(F=null,R=null),null===R?(g.onDataUpdate_(b,F,!1,null),I.resolve(F)):I.reject(new Error(F))}),I.promise},l.prototype.refreshAuthToken=function(h){},l.prototype.restRequest_=function(h,g,_){var b=this;return void 0===g&&(g={}),g.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(I){var R=(0,oe.__read)(I,2),k=R[0],F=R[1];k&&k.accessToken&&(g.auth=k.accessToken),F&&F.token&&(g.ac=F.token);var U=(b.repoInfo_.secure?"https://":"http://")+b.repoInfo_.host+h+"?ns="+b.repoInfo_.namespace+(0,N.querystring)(g);b.log_("Sending REST request for "+U);var W=new XMLHttpRequest;W.onreadystatechange=function(){if(_&&4===W.readyState){b.log_("REST Response for "+U+" received. status:",W.status,"response:",W.responseText);var re=null;if(W.status>=200&&W.status<300){try{re=(0,N.jsonEval)(W.responseText)}catch{hn("Failed to parse JSON response for "+U+": "+W.responseText)}_(null,re)}else 401!==W.status&&404!==W.status&&hn("Got unsuccessful REST response for "+U+" Status: "+W.status),_(W.status);_=null}},W.open("GET",U,!0),W.send()})},l}(aC),fc=function(){function f(){this.rootNode_=st.EMPTY_NODE}return f.prototype.getNode=function(l){return this.rootNode_.getChild(l)},f.prototype.updateSnapshot=function(l,h){this.rootNode_=this.rootNode_.updateChild(l,h)},f}();function fr(){return{value:null,children:new Map}}function as(f,l,h){if(we(l))f.value=h,f.children.clear();else if(null!==f.value)f.value=f.value.updateChild(l,h);else{var g=Ut(l);f.children.has(g)||f.children.set(g,fr()),as(f.children.get(g),l=In(l),h)}}function ma(f,l){if(we(l))return f.value=null,f.children.clear(),!0;if(null!==f.value){if(f.value.isLeafNode())return!1;var h=f.value;return f.value=null,h.forEachChild(Gt,function(b,I){as(f,new dn(b),I)}),ma(f,l)}if(f.children.size>0){var g=Ut(l);return l=In(l),f.children.has(g)&&ma(f.children.get(g),l)&&f.children.delete(g),0===f.children.size}return!0}function _o(f,l,h){null!==f.value?h(l,f.value):function kl(f,l){f.children.forEach(function(h,g){l(g,h)})}(f,function(g,_){_o(_,new dn(l.toString()+"/"+g),h)})}var eg=function(){function f(l){this.collection_=l,this.last_=null}return f.prototype.get=function(){var l=this.collection_.get(),h=(0,oe.__assign)({},l);return this.last_&&pe(this.last_,function(g,_){h[g]=h[g]-_}),this.last_=l,h},f}(),Sn=1e4,JN=3e4,Oy=function(){function f(l,h){this.server_=h,this.statsToReport_={},this.statsListener_=new eg(l);var g=Sn+(JN-Sn)*Math.random();Vn(this.reportStats_.bind(this),Math.floor(g))}return f.prototype.reportStats_=function(){var l=this,h=this.statsListener_.get(),g={},_=!1;pe(h,function(b,I){I>0&&(0,N.contains)(l.statsToReport_,b)&&(g[b]=I,_=!0)}),_&&this.server_.reportStats(g),Vn(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},f}(),hi=(()=>(function(f){f[f.OVERWRITE=0]="OVERWRITE",f[f.MERGE=1]="MERGE",f[f.ACK_USER_WRITE=2]="ACK_USER_WRITE",f[f.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(hi||(hi={})),hi))();function Py(f){return{fromUser:!1,fromServer:!0,queryId:f,tagged:!0}}var Ki=function(){function f(l,h,g){this.path=l,this.affectedTree=h,this.revert=g,this.type=hi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return f.prototype.operationForChild=function(l){if(we(this.path)){if(null!=this.affectedTree.value)return(0,N.assert)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var h=this.affectedTree.subtree(new dn(l));return new f(en(),h,this.revert)}return(0,N.assert)(Ut(this.path)===l,"operationForChild called for unrelated child."),new f(In(this.path),this.affectedTree,this.revert)},f}(),wo=function(){function f(l,h){this.source=l,this.path=h,this.type=hi.LISTEN_COMPLETE}return f.prototype.operationForChild=function(l){return we(this.path)?new f(this.source,en()):new f(this.source,In(this.path))},f}(),hc=function(){function f(l,h,g){this.source=l,this.path=h,this.snap=g,this.type=hi.OVERWRITE}return f.prototype.operationForChild=function(l){return we(this.path)?new f(this.source,en(),this.snap.getImmediateChild(l)):new f(this.source,In(this.path),this.snap)},f}(),Ja=function(){function f(l,h,g){this.source=l,this.path=h,this.children=g,this.type=hi.MERGE}return f.prototype.operationForChild=function(l){if(we(this.path)){var h=this.children.subtree(new dn(l));return h.isEmpty()?null:h.value?new hc(this.source,en(),h.value):new f(this.source,en(),h)}return(0,N.assert)(Ut(this.path)===l,"Can't get a merge for a child not on the path of the operation"),new f(this.source,In(this.path),this.children)},f.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},f}(),Ho=function(){function f(l,h,g){this.node_=l,this.fullyInitialized_=h,this.filtered_=g}return f.prototype.isFullyInitialized=function(){return this.fullyInitialized_},f.prototype.isFiltered=function(){return this.filtered_},f.prototype.isCompleteForPath=function(l){if(we(l))return this.isFullyInitialized()&&!this.filtered_;var h=Ut(l);return this.isCompleteForChild(h)},f.prototype.isCompleteForChild=function(l){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(l)},f.prototype.getNode=function(){return this.node_},f}(),$o=function f(l){this.query_=l,this.index_=this.query_._queryParams.getIndex()};function vh(f,l,h,g,_,b){var I=g.filter(function(R){return R.type===h});I.sort(function(R,k){return function _C(f,l,h){if(null==l.childName||null==h.childName)throw(0,N.assertionError)("Should only compare child_ events.");var g=new qt(l.childName,l.snapshotNode),_=new qt(h.childName,h.snapshotNode);return f.index_.compare(g,_)}(f,R,k)}),I.forEach(function(R){var k=function yC(f,l,h){return"value"===l.type||"child_removed"===l.type||(l.prevName=h.getPredecessorChildName(l.childName,l.snapshotNode,f.index_)),l}(f,R,b);_.forEach(function(F){F.respondsTo(R.type)&&l.push(F.createEvent(k,f.query_))})})}function ng(f,l){return{eventCache:f,serverCache:l}}function yh(f,l,h,g){return ng(new Ho(l,h,g),f.serverCache)}function wC(f,l,h,g){return ng(f.eventCache,new Ho(l,h,g))}function rg(f){return f.eventCache.isFullyInitialized()?f.eventCache.getNode():null}function dc(f){return f.serverCache.isFullyInitialized()?f.serverCache.getNode():null}var Fy,ZN=function(){return Fy||(Fy=new os(Y)),Fy},bo=function(){function f(l,h){void 0===h&&(h=ZN()),this.value=l,this.children=h}return f.fromObject=function(l){var h=new f(null);return pe(l,function(g,_){h=h.set(new dn(g),_)}),h},f.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},f.prototype.findRootMostMatchingPathAndValue=function(l,h){if(null!=this.value&&h(this.value))return{path:en(),value:this.value};if(we(l))return null;var g=Ut(l),_=this.children.get(g);if(null!==_){var b=_.findRootMostMatchingPathAndValue(In(l),h);return null!=b?{path:xn(new dn(g),b.path),value:b.value}:null}return null},f.prototype.findRootMostValueAndPath=function(l){return this.findRootMostMatchingPathAndValue(l,function(){return!0})},f.prototype.subtree=function(l){if(we(l))return this;var h=Ut(l),g=this.children.get(h);return null!==g?g.subtree(In(l)):new f(null)},f.prototype.set=function(l,h){if(we(l))return new f(h,this.children);var g=Ut(l),b=(this.children.get(g)||new f(null)).set(In(l),h),I=this.children.insert(g,b);return new f(this.value,I)},f.prototype.remove=function(l){if(we(l))return this.children.isEmpty()?new f(null):new f(null,this.children);var h=Ut(l),g=this.children.get(h);if(g){var _=g.remove(In(l)),b=void 0;return b=_.isEmpty()?this.children.remove(h):this.children.insert(h,_),null===this.value&&b.isEmpty()?new f(null):new f(this.value,b)}return this},f.prototype.get=function(l){if(we(l))return this.value;var h=Ut(l),g=this.children.get(h);return g?g.get(In(l)):null},f.prototype.setTree=function(l,h){if(we(l))return h;var I,g=Ut(l),b=(this.children.get(g)||new f(null)).setTree(In(l),h);return I=b.isEmpty()?this.children.remove(g):this.children.insert(g,b),new f(this.value,I)},f.prototype.fold=function(l){return this.fold_(en(),l)},f.prototype.fold_=function(l,h){var g={};return this.children.inorderTraversal(function(_,b){g[_]=b.fold_(xn(l,_),h)}),h(l,this.value,g)},f.prototype.findOnPath=function(l,h){return this.findOnPath_(l,en(),h)},f.prototype.findOnPath_=function(l,h,g){var _=!!this.value&&g(h,this.value);if(_)return _;if(we(l))return null;var b=Ut(l),I=this.children.get(b);return I?I.findOnPath_(In(l),xn(h,b),g):null},f.prototype.foreachOnPath=function(l,h){return this.foreachOnPath_(l,en(),h)},f.prototype.foreachOnPath_=function(l,h,g){if(we(l))return this;this.value&&g(h,this.value);var _=Ut(l),b=this.children.get(_);return b?b.foreachOnPath_(In(l),xn(h,_),g):new f(null)},f.prototype.foreach=function(l){this.foreach_(en(),l)},f.prototype.foreach_=function(l,h){this.children.inorderTraversal(function(g,_){_.foreach_(xn(l,g),h)}),this.value&&h(l,this.value)},f.prototype.foreachChild=function(l){this.children.inorderTraversal(function(h,g){g.value&&l(h,g.value)})},f}(),ya=function(){function f(l){this.writeTree_=l}return f.empty=function(){return new f(new bo(null))},f}();function _h(f,l,h){if(we(l))return new ya(new bo(h));var g=f.writeTree_.findRootMostValueAndPath(l);if(null!=g){var _=g.path,b=g.value,I=Si(_,l);return b=b.updateChild(I,h),new ya(f.writeTree_.set(_,b))}var R=new bo(h),k=f.writeTree_.setTree(l,R);return new ya(k)}function Ly(f,l,h){var g=f;return pe(h,function(_,b){g=_h(g,xn(l,_),b)}),g}function bC(f,l){if(we(l))return ya.empty();var h=f.writeTree_.setTree(l,new bo(null));return new ya(h)}function wh(f,l){return null!=_a(f,l)}function _a(f,l){var h=f.writeTree_.findRootMostValueAndPath(l);return null!=h?f.writeTree_.get(h.path).getChild(Si(h.path,l)):null}function EC(f){var l=[],h=f.writeTree_.value;return null!=h?h.isLeafNode()||h.forEachChild(Gt,function(g,_){l.push(new qt(g,_))}):f.writeTree_.children.inorderTraversal(function(g,_){null!=_.value&&l.push(new qt(g,_.value))}),l}function Za(f,l){if(we(l))return f;var h=_a(f,l);return new ya(null!=h?new bo(h):f.writeTree_.subtree(l))}function Vy(f){return f.writeTree_.isEmpty()}function Eo(f,l){return Uy(en(),f.writeTree_,l)}function Uy(f,l,h){if(null!=l.value)return h.updateChild(f,l.value);var g=null;return l.children.inorderTraversal(function(_,b){".priority"===_?((0,N.assert)(null!==b.value,"Priority writes must always be leaf nodes"),g=b.value):h=Uy(xn(f,_),b,h)}),!h.getChild(f).isEmpty()&&null!==g&&(h=h.updateChild(xn(f,".priority"),g)),h}function di(f,l){return xs(l,f)}function Hy(f,l){if(f.snap)return vo(f.path,l);for(var h in f.children)if(f.children.hasOwnProperty(h)&&vo(xn(f.path,h),l))return!0;return!1}function ig(f){return f.visible}function $y(f,l,h){for(var g=ya.empty(),_=0;_<f.length;++_){var b=f[_];if(l(b)){var I=b.path,R=void 0;if(b.snap)vo(h,I)?g=_h(g,R=Si(h,I),b.snap):vo(I,h)&&(R=Si(I,h),g=_h(g,en(),b.snap.getChild(R)));else{if(!b.children)throw(0,N.assertionError)("WriteRecord should have .snap or .children");if(vo(h,I))g=Ly(g,R=Si(h,I),b.children);else if(vo(I,h))if(we(R=Si(I,h)))g=Ly(g,en(),b.children);else{var k=(0,N.safeGet)(b.children,Ut(R));if(k){var F=k.getChild(In(R));g=_h(g,en(),F)}}}}}return g}function Qi(f,l,h,g,_){if(g||_){var k=Za(f.visibleWrites,l);return!_&&Vy(k)?h:_||null!=h||wh(k,en())?Eo($y(f.allWrites,function(re){return(re.visible||_)&&(!g||!~g.indexOf(re.writeId))&&(vo(re.path,l)||vo(l,re.path))},l),h||st.EMPTY_NODE):null}var b=_a(f.visibleWrites,l);if(null!=b)return b;var I=Za(f.visibleWrites,l);return Vy(I)?h:null!=h||wh(I,en())?Eo(I,h||st.EMPTY_NODE):null}function Eh(f,l,h,g){return Qi(f.writeTree,f.treePath,l,h,g)}function Ch(f,l){return function qy(f,l,h){var g=st.EMPTY_NODE,_=_a(f.visibleWrites,l);if(_)return _.isLeafNode()||_.forEachChild(Gt,function(R,k){g=g.updateImmediateChild(R,k)}),g;if(h){var b=Za(f.visibleWrites,l);return h.forEachChild(Gt,function(R,k){var F=Eo(Za(b,new dn(R)),k);g=g.updateImmediateChild(R,F)}),EC(b).forEach(function(R){g=g.updateImmediateChild(R.name,R.node)}),g}return EC(Za(f.visibleWrites,l)).forEach(function(R){g=g.updateImmediateChild(R.name,R.node)}),g}(f.writeTree,f.treePath,l)}function eu(f,l,h,g){return function Gy(f,l,h,g,_){(0,N.assert)(g||_,"Either existingEventSnap or existingServerSnap must exist");var b=xn(l,h);if(wh(f.visibleWrites,b))return null;var I=Za(f.visibleWrites,b);return Vy(I)?_.getChild(h):Eo(I,_.getChild(h))}(f.writeTree,f.treePath,l,h,g)}function Br(f,l){return function TC(f,l){return _a(f.visibleWrites,l)}(f.writeTree,xn(f.treePath,l))}function pc(f,l,h){return function jr(f,l,h,g){var _=xn(l,h),b=_a(f.visibleWrites,_);return null!=b?b:g.isCompleteForChild(h)?Eo(Za(f.visibleWrites,_),g.getNode().getImmediateChild(h)):null}(f.writeTree,f.treePath,l,h)}function zy(f,l){return xs(xn(f.treePath,l),f.writeTree)}function xs(f,l){return{treePath:f,writeTree:l}}var Wy=function(){function f(){this.changeMap=new Map}return f.prototype.trackChildChange=function(l){var h=l.type,g=l.childName;(0,N.assert)("child_added"===h||"child_changed"===h||"child_removed"===h,"Only child changes supported for tracking"),(0,N.assert)(".priority"!==g,"Only non-priority child changes can be tracked.");var _=this.changeMap.get(g);if(_){var b=_.type;if("child_added"===h&&"child_removed"===b)this.changeMap.set(g,uc(g,l.snapshotNode,_.snapshotNode));else if("child_removed"===h&&"child_added"===b)this.changeMap.delete(g);else if("child_removed"===h&&"child_changed"===b)this.changeMap.set(g,ac(g,_.oldSnap));else if("child_changed"===h&&"child_added"===b)this.changeMap.set(g,Ir(g,l.snapshotNode));else{if("child_changed"!==h||"child_changed"!==b)throw(0,N.assertionError)("Illegal combination of changes: "+l+" occurred after "+_);this.changeMap.set(g,uc(g,l.snapshotNode,_.oldSnap))}}else this.changeMap.set(g,l)},f.prototype.getChanges=function(){return Array.from(this.changeMap.values())},f}(),og=function(){function f(){}return f.prototype.getCompleteChild=function(l){return null},f.prototype.getChildAfterChild=function(l,h,g){return null},f}(),_t=new og,Dh=function(){function f(l,h,g){void 0===g&&(g=null),this.writes_=l,this.viewCache_=h,this.optCompleteServerCache_=g}return f.prototype.getCompleteChild=function(l){var h=this.viewCache_.eventCache;if(h.isCompleteForChild(l))return h.getNode().getImmediateChild(l);var g=null!=this.optCompleteServerCache_?new Ho(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return pc(this.writes_,l,g)},f.prototype.getChildAfterChild=function(l,h,g){var _=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:dc(this.viewCache_),b=function SC(f,l,h,g,_,b){return function bh(f,l,h,g,_,b,I){var R,k=Za(f.visibleWrites,l),F=_a(k,en());if(null!=F)R=F;else{if(null==h)return[];R=Eo(k,h)}if((R=R.withIndex(I)).isEmpty()||R.isLeafNode())return[];for(var U=[],W=I.getCompare(),re=b?R.getReverseIteratorFrom(g,I):R.getIteratorFrom(g,I),me=re.getNext();me&&U.length<_;)0!==W(me,g)&&U.push(me),me=re.getNext();return U}(f.writeTree,f.treePath,l,h,g,_,b)}(this.writes_,_,h,1,g,l);return 0===b.length?null:b[0]},f}();function sg(f,l,h,g,_,b){var I=l.eventCache;if(null!=Br(g,h))return l;var R=void 0,k=void 0;if(we(h))if((0,N.assert)(l.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),l.serverCache.isFiltered()){var F=dc(l),W=Ch(g,F instanceof st?F:st.EMPTY_NODE);R=f.filter.updateFullNode(l.eventCache.getNode(),W,b)}else{var re=Eh(g,dc(l));R=f.filter.updateFullNode(l.eventCache.getNode(),re,b)}else{var me=Ut(h);if(".priority"===me){(0,N.assert)(1===la(h),"Can't have a priority with additional path components");var Me=I.getNode(),lt=eu(g,h,Me,k=l.serverCache.getNode());R=null!=lt?f.filter.updatePriority(Me,lt):I.getNode()}else{var Qe=In(h),xt=void 0;if(I.isCompleteForChild(me)){k=l.serverCache.getNode();var tr=eu(g,h,I.getNode(),k);xt=null!=tr?I.getNode().getImmediateChild(me).updateChild(Qe,tr):I.getNode().getImmediateChild(me)}else xt=pc(g,me,l.serverCache);R=null!=xt?f.filter.updateChild(I.getNode(),me,xt,Qe,_,b):I.getNode()}}return yh(l,R,I.isFullyInitialized()||we(h),f.filter.filtersNodes())}function Ih(f,l,h,g,_,b,I,R){var F,k=l.serverCache,U=I?f.filter:f.filter.getIndexedFilter();if(we(h))F=U.updateFullNode(k.getNode(),g,null);else if(U.filtersNodes()&&!k.isFiltered()){var W=k.getNode().updateChild(h,g);F=U.updateFullNode(k.getNode(),W,null)}else{var re=Ut(h);if(!k.isCompleteForPath(h)&&la(h)>1)return l;var me=In(h),lt=k.getNode().getImmediateChild(re).updateChild(me,g);F=".priority"===re?U.updatePriority(k.getNode(),lt):U.updateChild(k.getNode(),re,lt,me,_t,null)}var Qe=wC(l,F,k.isFullyInitialized()||we(h),U.filtersNodes());return sg(f,Qe,h,_,new Dh(_,Qe,b),R)}function ag(f,l,h,g,_,b,I){var k,F,R=l.eventCache,U=new Dh(_,l,b);if(we(h))F=f.filter.updateFullNode(l.eventCache.getNode(),g,I),k=yh(l,F,!0,f.filter.filtersNodes());else{var W=Ut(h);if(".priority"===W)F=f.filter.updatePriority(l.eventCache.getNode(),g),k=yh(l,F,R.isFullyInitialized(),R.isFiltered());else{var re=In(h),me=R.getNode().getImmediateChild(W),Me=void 0;if(we(re))Me=g;else{var lt=U.getCompleteChild(W);Me=null!=lt?".priority"===Ti(re)&&lt.getChild(fC(re)).isEmpty()?lt:lt.updateChild(re,g):st.EMPTY_NODE}k=me.equals(Me)?l:yh(l,f.filter.updateChild(R.getNode(),W,Me,re,U,I),R.isFullyInitialized(),f.filter.filtersNodes())}}return k}function le(f,l){return f.eventCache.isCompleteForChild(l)}function vn(f,l,h){return h.foreach(function(g,_){l=l.updateChild(g,_)}),l}function mn(f,l,h,g,_,b,I,R){if(l.serverCache.getNode().isEmpty()&&!l.serverCache.isFullyInitialized())return l;var F,k=l;F=we(h)?g:new bo(null).setTree(h,g);var U=l.serverCache.getNode();return F.children.inorderTraversal(function(W,re){if(U.hasChild(W)){var Me=vn(0,l.serverCache.getNode().getImmediateChild(W),re);k=Ih(f,k,new dn(W),Me,_,b,I,R)}}),F.children.inorderTraversal(function(W,re){var me=!l.serverCache.isCompleteForChild(W)&&void 0===re.value;if(!U.hasChild(W)&&!me){var lt=vn(0,l.serverCache.getNode().getImmediateChild(W),re);k=Ih(f,k,new dn(W),lt,_,b,I,R)}}),k}var us=function(){function f(l,h){this.query_=l,this.eventRegistrations_=[];var g=this.query_._queryParams,_=new jo(g.getIndex()),b=function Bo(f){return f.loadsAllData()?new jo(f.getIndex()):f.hasLimit()?new kt(f):new Fe(f)}(g);this.processor_=function ek(f){return{filter:f}}(b);var I=h.serverCache,R=h.eventCache,k=_.updateFullNode(st.EMPTY_NODE,I.getNode(),null),F=b.updateFullNode(st.EMPTY_NODE,R.getNode(),null),U=new Ho(k,I.isFullyInitialized(),_.filtersNodes()),W=new Ho(F,R.isFullyInitialized(),b.filtersNodes());this.viewCache_=ng(W,U),this.eventGenerator_=new $o(this.query_)}return Object.defineProperty(f.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),f}();function NC(f,l){var h=dc(f.viewCache_);return h&&(f.query._queryParams.loadsAllData()||!we(l)&&!h.getImmediateChild(Ut(l)).isEmpty())?h.getChild(l):null}function kC(f){return 0===f.eventRegistrations_.length}function ei(f,l,h){var g=[];if(h){(0,N.assert)(null==l,"A cancel should cancel all event registrations.");var _=f.query._path;f.eventRegistrations_.forEach(function(k){var F=k.createCancelEvent(h,_);F&&g.push(F)})}if(l){for(var b=[],I=0;I<f.eventRegistrations_.length;++I){var R=f.eventRegistrations_[I];if(R.matches(l)){if(l.hasAnyCallback()){b=b.concat(f.eventRegistrations_.slice(I+1));break}}else b.push(R)}f.eventRegistrations_=b}else f.eventRegistrations_=[];return g}function cs(f,l,h,g){l.type===hi.MERGE&&null!==l.source.queryId&&((0,N.assert)(dc(f.viewCache_),"We should always have a full cache before handling merges"),(0,N.assert)(rg(f.viewCache_),"Missing event cache, even though we have a server cache"));var _=f.viewCache_,b=function MC(f,l,h,g,_){var I,R,b=new Wy;if(h.type===hi.OVERWRITE){var k=h;k.source.fromUser?I=ag(f,l,k.path,k.snap,g,_,b):((0,N.assert)(k.source.fromServer,"Unknown source."),R=k.source.tagged||l.serverCache.isFiltered()&&!we(k.path),I=Ih(f,l,k.path,k.snap,g,_,R,b))}else if(h.type===hi.MERGE){var F=h;F.source.fromUser?I=function Qt(f,l,h,g,_,b,I){var R=l;return g.foreach(function(k,F){var U=xn(h,k);le(l,Ut(U))&&(R=ag(f,R,U,F,_,b,I))}),g.foreach(function(k,F){var U=xn(h,k);le(l,Ut(U))||(R=ag(f,R,U,F,_,b,I))}),R}(f,l,F.path,F.children,g,_,b):((0,N.assert)(F.source.fromServer,"Unknown source."),R=F.source.tagged||l.serverCache.isFiltered(),I=mn(f,l,F.path,F.children,g,_,R,b))}else if(h.type===hi.ACK_USER_WRITE){var U=h;I=U.revert?function xl(f,l,h,g,_,b){var I;if(null!=Br(g,h))return l;var R=new Dh(g,l,_),k=l.eventCache.getNode(),F=void 0;if(we(h)||".priority"===Ut(h)){var U=void 0;if(l.serverCache.isFullyInitialized())U=Eh(g,dc(l));else{var W=l.serverCache.getNode();(0,N.assert)(W instanceof st,"serverChildren would be complete if leaf node"),U=Ch(g,W)}F=f.filter.updateFullNode(k,U,b)}else{var re=Ut(h),me=pc(g,re,l.serverCache);null==me&&l.serverCache.isCompleteForChild(re)&&(me=k.getImmediateChild(re)),(F=null!=me?f.filter.updateChild(k,re,me,In(h),R,b):l.eventCache.getNode().hasChild(re)?f.filter.updateChild(k,re,st.EMPTY_NODE,In(h),R,b):k).isEmpty()&&l.serverCache.isFullyInitialized()&&(I=Eh(g,dc(l))).isLeafNode()&&(F=f.filter.updateFullNode(F,I,b))}return I=l.serverCache.isFullyInitialized()||null!=Br(g,en()),yh(l,F,I,f.filter.filtersNodes())}(f,l,U.path,g,_,b):function Hr(f,l,h,g,_,b,I){if(null!=Br(_,h))return l;var R=l.serverCache.isFiltered(),k=l.serverCache;if(null!=g.value){if(we(h)&&k.isFullyInitialized()||k.isCompleteForPath(h))return Ih(f,l,h,k.getNode().getChild(h),_,b,R,I);if(we(h)){var F=new bo(null);return k.getNode().forEachChild(zi,function(W,re){F=F.set(new dn(W),re)}),mn(f,l,h,F,_,b,R,I)}return l}var U=new bo(null);return g.foreach(function(W,re){var me=xn(h,W);k.isCompleteForPath(me)&&(U=U.set(W,k.getNode().getChild(me)))}),mn(f,l,h,U,_,b,R,I)}(f,l,U.path,U.affectedTree,g,_,b)}else{if(h.type!==hi.LISTEN_COMPLETE)throw(0,N.assertionError)("Unknown operation type: "+h.type);I=function Ky(f,l,h,g,_){var b=l.serverCache;return sg(f,wC(l,b.getNode(),b.isFullyInitialized()||we(h),b.isFiltered()),h,g,_t,_)}(f,l,h.path,g,b)}var W=b.getChanges();return function RC(f,l,h){var g=l.eventCache;if(g.isFullyInitialized()){var _=g.getNode().isLeafNode()||g.getNode().isEmpty(),b=rg(f);(h.length>0||!f.eventCache.isFullyInitialized()||_&&!g.getNode().equals(b)||!g.getNode().getPriority().equals(b.getPriority()))&&h.push(Ya(rg(l)))}}(l,I,W),{viewCache:I,changes:W}}(f.processor_,_,l,h,g);return function AC(f,l){(0,N.assert)(l.eventCache.getNode().isIndexed(f.filter.getIndex()),"Event snap not indexed"),(0,N.assert)(l.serverCache.getNode().isIndexed(f.filter.getIndex()),"Server snap not indexed")}(f.processor_,b.viewCache),(0,N.assert)(b.viewCache.serverCache.isFullyInitialized()||!_.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),f.viewCache_=b.viewCache,tu(f,b.changes,b.viewCache.eventCache.getNode(),null)}function tu(f,l,h,g){return function vC(f,l,h,g){var _=[],b=[];return l.forEach(function(I){"child_changed"===I.type&&f.index_.indexedValueChanged(I.oldSnap,I.snapshotNode)&&b.push(function dh(f,l){return{type:"child_moved",snapshotNode:l,childName:f}}(I.childName,I.snapshotNode))}),vh(f,_,"child_removed",l,g,h),vh(f,_,"child_added",l,g,h),vh(f,_,"child_moved",b,g,h),vh(f,_,"child_changed",l,g,h),vh(f,_,"value",l,g,h),_}(f.eventGenerator_,l,h,g?[g]:f.eventRegistrations_)}var Co,Fl,Xy=function f(){this.views=new Map};function Ol(f,l,h,g){var _,b,I=l.source.queryId;if(null!==I){var R=f.views.get(I);return(0,N.assert)(null!=R,"SyncTree gave us an op for an invalid query."),cs(R,l,h,g)}var k=[];try{for(var F=(0,oe.__values)(f.views.values()),U=F.next();!U.done;U=F.next())k=k.concat(cs(R=U.value,l,h,g))}catch(W){_={error:W}}finally{try{U&&!U.done&&(b=F.return)&&b.call(F)}finally{if(_)throw _.error}}return k}function Th(f,l,h,g,_){var I=f.views.get(l._queryIdentifier);if(!I){var R=Eh(h,_?g:null),k=!1;R?k=!0:g instanceof st?(R=Ch(h,g),k=!1):(R=st.EMPTY_NODE,k=!1);var F=ng(new Ho(R,k,!1),new Ho(g,_,!1));return new us(l,F)}return I}function e_(f){var l,h,g=[];try{for(var _=(0,oe.__values)(f.views.values()),b=_.next();!b.done;b=_.next()){var I=b.value;I.query._queryParams.loadsAllData()||g.push(I)}}catch(R){l={error:R}}finally{try{b&&!b.done&&(h=_.return)&&h.call(_)}finally{if(l)throw l.error}}return g}function Os(f,l){var h,g,_=null;try{for(var b=(0,oe.__values)(f.views.values()),I=b.next();!I.done;I=b.next())_=_||NC(I.value,l)}catch(k){h={error:k}}finally{try{I&&!I.done&&(g=b.return)&&g.call(b)}finally{if(h)throw h.error}}return _}function Sh(f,l){return l._queryParams.loadsAllData()?Pl(f):f.views.get(l._queryIdentifier)}function fg(f,l){return null!=Sh(f,l)}function Ps(f){return null!=Pl(f)}function Pl(f){var l,h;try{for(var g=(0,oe.__values)(f.views.values()),_=g.next();!_.done;_=g.next()){var b=_.value;if(b.query._queryParams.loadsAllData())return b}}catch(I){l={error:I}}finally{try{_&&!_.done&&(h=g.return)&&h.call(g)}finally{if(l)throw l.error}}return null}var FC=1,ti=function f(l){this.listenProvider_=l,this.syncPointTree_=new bo(null),this.pendingWriteTree_=function Yi(){return{visibleWrites:ya.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function Fs(f,l,h,g,_){return function jy(f,l,h,g,_){(0,N.assert)(g>f.lastWriteId,"Stacking an older write on top of newer ones"),void 0===_&&(_=!0),f.allWrites.push({path:l,snap:h,writeId:g,visible:_}),_&&(f.visibleWrites=_h(f.visibleWrites,l,h)),f.lastWriteId=g}(f.pendingWriteTree_,l,h,g,_),_?mc(f,new hc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},l,h)):[]}function wa(f,l,h){void 0===h&&(h=!1);var g=function DC(f,l){for(var h=0;h<f.allWrites.length;h++){var g=f.allWrites[h];if(g.writeId===l)return g}return null}(f.pendingWriteTree_,l);if(function By(f,l){var h=f.allWrites.findIndex(function(F){return F.writeId===l});(0,N.assert)(h>=0,"removeWrite called with nonexistent writeId.");var g=f.allWrites[h];f.allWrites.splice(h,1);for(var _=g.visible,b=!1,I=f.allWrites.length-1;_&&I>=0;){var R=f.allWrites[I];R.visible&&(I>=h&&Hy(R,g.path)?_=!1:vo(g.path,R.path)&&(b=!0)),I--}return!!_&&(b?(function IC(f){f.visibleWrites=$y(f.allWrites,ig,en()),f.lastWriteId=f.allWrites.length>0?f.allWrites[f.allWrites.length-1].writeId:-1}(f),!0):(g.snap?f.visibleWrites=bC(f.visibleWrites,g.path):pe(g.children,function(F){f.visibleWrites=bC(f.visibleWrites,xn(g.path,F))}),!0))}(f.pendingWriteTree_,l)){var b=new bo(null);return null!=g.snap?b=b.set(en(),!0):pe(g.children,function(I){b=b.set(new dn(I),!0)}),mc(f,new Ki(g.path,b,h))}return[]}function Ll(f,l,h){return mc(f,new hc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l,h))}function dg(f,l,h,g){var _=l._path,b=f.syncPointTree_.get(_),I=[];if(b&&("default"===l._queryIdentifier||fg(b,l))){var R=function lg(f,l,h,g){var _,b,I=l._queryIdentifier,R=[],k=[],F=Ps(f);if("default"===I)try{for(var U=(0,oe.__values)(f.views.entries()),W=U.next();!W.done;W=U.next()){var Me,re=(0,oe.__read)(W.value,2),me=re[0];k=k.concat(ei(Me=re[1],h,g)),kC(Me)&&(f.views.delete(me),Me.query._queryParams.loadsAllData()||R.push(Me.query))}}catch(lt){_={error:lt}}finally{try{W&&!W.done&&(b=U.return)&&b.call(U)}finally{if(_)throw _.error}}else(Me=f.views.get(I))&&(k=k.concat(ei(Me,h,g)),kC(Me)&&(f.views.delete(I),Me.query._queryParams.loadsAllData()||R.push(Me.query)));return F&&!Ps(f)&&R.push(new(function xC(){return(0,N.assert)(Co,"Reference.ts has not been loaded"),Co}())(l._repo,l._path)),{removed:R,events:k}}(b,l,h,g);(function OC(f){return 0===f.views.size})(b)&&(f.syncPointTree_=f.syncPointTree_.remove(_));var k=R.removed;I=R.events;var F=-1!==k.findIndex(function(tr){return tr._queryParams.loadsAllData()}),U=f.syncPointTree_.findOnPath(_,function(tr,hs){return Ps(hs)});if(F&&!U){var W=f.syncPointTree_.subtree(_);if(!W.isEmpty())for(var re=function tk(f){return f.fold(function(l,h,g){if(h&&Ps(h))return[Pl(h)];var b=[];return h&&(b=e_(h)),pe(g,function(I,R){b=b.concat(R)}),b})}(W),me=0;me<re.length;++me){var Me=re[me],lt=Me.query,Qe=n_(f,Me);f.listenProvider_.startListening(Rh(lt),pg(f,lt),Qe.hashFn,Qe.onComplete)}}!U&&k.length>0&&!g&&(F?f.listenProvider_.stopListening(Rh(l),null):k.forEach(function(tr){var hs=f.queryToTagMap.get(yc(tr));f.listenProvider_.stopListening(Rh(tr),hs)})),function vg(f,l){for(var h=0;h<l.length;++h){var g=l[h];if(!g._queryParams.loadsAllData()){var _=yc(g),b=f.queryToTagMap.get(_);f.queryToTagMap.delete(_),f.tagToQueryMap.delete(b)}}}(f,k)}return I}function Vl(f,l,h){var g=l._path,_=null,b=!1;f.syncPointTree_.foreachOnPath(g,function(lt,Qe){var xt=Si(lt,g);_=_||Os(Qe,xt),b=b||Ps(Qe)});var R,I=f.syncPointTree_.get(g);I?(b=b||Ps(I),_=_||Os(I,en())):(I=new Xy,f.syncPointTree_=f.syncPointTree_.set(g,I)),null!=_?R=!0:(R=!1,_=st.EMPTY_NODE,f.syncPointTree_.subtree(g).foreachChild(function(lt,Qe){var xt=Os(Qe,en());xt&&(_=_.updateImmediateChild(lt,xt))}));var F=fg(I,l);if(!F&&!l._queryParams.loadsAllData()){var U=yc(l);(0,N.assert)(!f.queryToTagMap.has(U),"View does not exist, but we have a tag");var W=function i_(){return FC++}();f.queryToTagMap.set(U,W),f.tagToQueryMap.set(W,U)}var me=function Zy(f,l,h,g,_,b){var I=Th(f,l,g,_,b);return f.views.has(l._queryIdentifier)||f.views.set(l._queryIdentifier,I),function Qy(f,l){f.eventRegistrations_.push(l)}(I,h),function Yy(f,l){var h=f.viewCache_.eventCache,g=[];return h.getNode().isLeafNode()||h.getNode().forEachChild(Gt,function(b,I){g.push(Ir(b,I))}),h.isFullyInitialized()&&g.push(Ya(h.getNode())),tu(f,g,h.getNode(),l)}(I,h)}(I,l,h,di(f.pendingWriteTree_,g),_,R);if(!F&&!b){var Me=Sh(I,l);me=me.concat(function o_(f,l,h){var g=l._path,_=pg(f,l),b=n_(f,h),I=f.listenProvider_.startListening(Rh(l),_,b.hashFn,b.onComplete),R=f.syncPointTree_.subtree(g);if(_)(0,N.assert)(!Ps(R.value),"If we're adding a query, it shouldn't be shadowed");else for(var k=R.fold(function(W,re,me){if(!we(W)&&re&&Ps(re))return[Pl(re).query];var Me=[];return re&&(Me=Me.concat(e_(re).map(function(lt){return lt.query}))),pe(me,function(lt,Qe){Me=Me.concat(Qe)}),Me}),F=0;F<k.length;++F){var U=k[F];f.listenProvider_.stopListening(Rh(U),pg(f,U))}return I}(f,l,Me))}return me}function gc(f,l,h){var _=f.pendingWriteTree_,b=f.syncPointTree_.findOnPath(l,function(I,R){var F=Os(R,Si(I,l));if(F)return F});return Qi(_,l,b,h,!0)}function mc(f,l){return nu(l,f.syncPointTree_,null,di(f.pendingWriteTree_,en()))}function nu(f,l,h,g){if(we(f.path))return vc(f,l,h,g);var _=l.get(en());null==h&&null!=_&&(h=Os(_,en()));var b=[],I=Ut(f.path),R=f.operationForChild(I),k=l.children.get(I);if(k&&R){var F=h?h.getImmediateChild(I):null,U=zy(g,I);b=b.concat(nu(R,k,F,U))}return _&&(b=b.concat(Ol(_,f,g,h))),b}function vc(f,l,h,g){var _=l.get(en());null==h&&null!=_&&(h=Os(_,en()));var b=[];return l.children.inorderTraversal(function(I,R){var k=h?h.getImmediateChild(I):null,F=zy(g,I),U=f.operationForChild(I);U&&(b=b.concat(vc(U,R,k,F)))}),_&&(b=b.concat(Ol(_,f,g,h))),b}function n_(f,l){var h=l.query,g=pg(f,h);return{hashFn:function(){var _=function ug(f){return f.viewCache_.serverCache.getNode()}(l)||st.EMPTY_NODE;return _.hash()},onComplete:function(_){if("ok"===_)return g?function UC(f,l,h){var g=r_(f,h);if(g){var _=gg(g),b=_.path,I=_.queryId,R=Si(b,l);return mg(f,b,new wo(Py(I),R))}return[]}(f,h._path,g):function VC(f,l){return mc(f,new wo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l))}(f,h._path);var b=function tt(f,l){var h="Unknown Error";"too_big"===f?h="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===f?h="Client doesn't have permission to access the desired data.":"unavailable"===f&&(h="The service is unavailable");var g=new Error(f+" at "+l._path.toString()+": "+h);return g.code=f.toUpperCase(),g}(_,h);return dg(f,h,null,b)}}}function pg(f,l){var h=yc(l);return f.queryToTagMap.get(h)}function yc(f){return f._path.toString()+"$"+f._queryIdentifier}function r_(f,l){return f.tagToQueryMap.get(l)}function gg(f){var l=f.indexOf("$");return(0,N.assert)(-1!==l&&l<f.length-1,"Bad queryKey."),{queryId:f.substr(l+1),path:new dn(f.substr(0,l))}}function mg(f,l,h){var g=f.syncPointTree_.get(l);return(0,N.assert)(g,"Missing sync point for query tag that we're tracking"),Ol(g,h,di(f.pendingWriteTree_,l),null)}function Rh(f){return f._queryParams.loadsAllData()&&!f._queryParams.isDefault()?new(function PC(){return(0,N.assert)(Fl,"Reference.ts has not been loaded"),Fl}())(f._repo,f._path):f}var Ul=function(){function f(l){this.node_=l}return f.prototype.getImmediateChild=function(l){return new f(this.node_.getImmediateChild(l))},f.prototype.node=function(){return this.node_},f}(),s_=function(){function f(l,h){this.syncTree_=l,this.path_=h}return f.prototype.getImmediateChild=function(l){var h=xn(this.path_,l);return new f(this.syncTree_,h)},f.prototype.node=function(){return gc(this.syncTree_,this.path_)},f}(),a_=function(f){return(f=f||{}).timestamp=f.timestamp||(new Date).getTime(),f},jl=function(f,l,h){return f&&"object"==typeof f?((0,N.assert)(".sv"in f,"Unexpected leaf node or priority contents"),"string"==typeof f[".sv"]?jC(f[".sv"],l,h):"object"==typeof f[".sv"]?Nh(f[".sv"],l):void(0,N.assert)(!1,"Unexpected server value: "+JSON.stringify(f,null,2))):f},jC=function(f,l,h){if("timestamp"===f)return h.timestamp;(0,N.assert)(!1,"Unexpected server value: "+f)},Nh=function(f,l,h){f.hasOwnProperty("increment")||(0,N.assert)(!1,"Unexpected server value: "+JSON.stringify(f,null,2));var g=f.increment;"number"!=typeof g&&(0,N.assert)(!1,"Unexpected increment value: "+g);var _=l.node();if((0,N.assert)(null!==_&&typeof _<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!_.isLeafNode())return g;var I=_.getValue();return"number"!=typeof I?g:I+g},kh=function(f,l,h,g){return u_(l,new s_(h,f),g)},_c=function(f,l,h){return u_(f,new Ul(l),h)};function u_(f,l,h){var b,g=f.getPriority().val(),_=jl(g,l.getImmediateChild(".priority"),h);if(f.isLeafNode()){var I=f,R=jl(I.getValue(),l,h);return R!==I.getValue()||_!==I.getPriority().val()?new da(R,On(_)):f}var k=f;return b=k,_!==k.getPriority().val()&&(b=b.updatePriority(new da(_))),k.forEachChild(Gt,function(F,U){var W=u_(U,l.getImmediateChild(F),h);W!==U&&(b=b.updateImmediateChild(F,W))}),b}var xh=function f(l,h,g){void 0===l&&(l=""),void 0===h&&(h=null),void 0===g&&(g={children:{},childCount:0}),this.name=l,this.parent=h,this.node=g};function Bl(f,l){for(var h=l instanceof dn?l:new dn(l),g=f,_=Ut(h);null!==_;){var b=(0,N.safeGet)(g.node.children,_)||{children:{},childCount:0};g=new xh(_,g,b),_=Ut(h=In(h))}return g}function ru(f){return f.node.value}function Do(f,l){f.node.value=l,wg(f)}function c_(f){return f.node.childCount>0}function wc(f,l){pe(f.node.children,function(h,g){l(new xh(h,f,g))})}function yg(f,l,h,g){h&&!g&&l(f),wc(f,function(_){yg(_,l,!0,g)}),h&&g&&l(f)}function iu(f){return new dn(null===f.parent?f.name:iu(f.parent)+"/"+f.name)}function wg(f){null!==f.parent&&function l_(f,l,h){var g=function Oh(f){return void 0===ru(f)&&!c_(f)}(h),_=(0,N.contains)(f.node.children,l);g&&_?(delete f.node.children[l],f.node.childCount--,wg(f)):!g&&!_&&(f.node.children[l]=h.node,f.node.childCount++,wg(f))}(f.parent,f.name,f)}var f_=/[\[\].#$\/\u0000-\u001F\u007F]/,h_=/[\[\].#$\u0000-\u001F\u007F]/,Ph=10485760,Fh=function(f){return"string"==typeof f&&0!==f.length&&!f_.test(f)},Hl=function(f){return"string"==typeof f&&0!==f.length&&!h_.test(f)},$l=function(f){return null===f||"string"==typeof f||"number"==typeof f&&!Bi(f)||f&&"object"==typeof f&&(0,N.contains)(f,".sv")},qo=function(f,l,h,g){g&&void 0===l||bc((0,N.errorPrefix)(f,"value"),l,h)},bc=function(f,l,h){var g=h instanceof dn?new Sy(h,f):h;if(void 0===l)throw new Error(f+"contains undefined "+Rs(g));if("function"==typeof l)throw new Error(f+"contains a function "+Rs(g)+" with contents = "+l.toString());if(Bi(l))throw new Error(f+"contains "+l.toString()+" "+Rs(g));if("string"==typeof l&&l.length>Ph/3&&(0,N.stringLength)(l)>Ph)throw new Error(f+"contains a string greater than "+Ph+" utf8 bytes "+Rs(g)+" ('"+l.substring(0,50)+"...')");if(l&&"object"==typeof l){var _=!1,b=!1;if(pe(l,function(I,R){if(".value"===I)_=!0;else if(".priority"!==I&&".sv"!==I&&(b=!0,!Fh(I)))throw new Error(f+" contains an invalid key ("+I+") "+Rs(g)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function hC(f,l){f.parts_.length>0&&(f.byteLength_+=1),f.parts_.push(l),f.byteLength_+=(0,N.stringLength)(l),Tl(f)})(g,I),bc(f,R,g),function Ay(f){var l=f.parts_.pop();f.byteLength_-=(0,N.stringLength)(l),f.parts_.length>0&&(f.byteLength_-=1)}(g)}),_&&b)throw new Error(f+' contains ".value" child '+Rs(g)+" in addition to actual children.")}},d_=function(f,l,h,g){if(!g||void 0!==l){var _=(0,N.errorPrefix)(f,"values");if(!l||"object"!=typeof l||Array.isArray(l))throw new Error(_+" must be an object containing the children to replace.");var b=[];pe(l,function(I,R){var k=new dn(I);if(bc(_,R,xn(h,k)),".priority"===Ti(k)&&!$l(R))throw new Error(_+"contains an invalid value for '"+k.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");b.push(k)}),function(f,l){var h,g;for(h=0;h<l.length;h++)for(var _=ch(g=l[h]),b=0;b<_.length;b++)if((".priority"!==_[b]||b!==_.length-1)&&!Fh(_[b]))throw new Error(f+"contains an invalid key ("+_[b]+") in path "+g.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');l.sort(mo);var I=null;for(h=0;h<l.length;h++){if(g=l[h],null!==I&&vo(I,g))throw new Error(f+"contains a path "+I.toString()+" that is ancestor of another path "+g.toString());I=g}}(_,b)}},hr=function(f,l,h){if(!h||void 0!==l){if(Bi(l))throw new Error((0,N.errorPrefix)(f,"priority")+"is "+l.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!$l(l))throw new Error((0,N.errorPrefix)(f,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},bg=function(f,l,h){if(!h||void 0!==l)switch(l){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,N.errorPrefix)(f,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},ql=function(f,l,h,g){if(!(g&&void 0===h||Fh(h)))throw new Error((0,N.errorPrefix)(f,l)+'was an invalid key = "'+h+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Cc=function(f,l,h,g){if(!(g&&void 0===h||Hl(h)))throw new Error((0,N.errorPrefix)(f,l)+'was an invalid path = "'+h+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Lh=function(f,l,h,g){h&&(h=h.replace(/^\/*\.info(\/|$)/,"/")),Cc(f,l,h,g)},$r=function(f,l){if(".info"===Ut(l))throw new Error(f+" failed = Can't modify data under /.info/")},su=function(f,l){var h=l.path.toString();if("string"!=typeof l.repoInfo.host||0===l.repoInfo.host.length||!Fh(l.repoInfo.namespace)&&"localhost"!==l.repoInfo.host.split(":")[0]||0!==h.length&&!function(f){return f&&(f=f.replace(/^\/*\.info(\/|$)/,"/")),Hl(f)}(h))throw new Error((0,N.errorPrefix)(f,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Dc=function(f,l,h,g){if((!g||void 0!==h)&&"boolean"!=typeof h)throw new Error((0,N.errorPrefix)(f,l)+"must be a boolean.")},p_=function f(){this.eventLists_=[],this.recursionDepth_=0};function Ic(f,l){for(var h=null,g=0;g<l.length;g++){var _=l[g],b=_.getPath();null!==h&&!ec(b,h.path)&&(f.eventLists_.push(h),h=null),null===h&&(h={events:[],path:b}),h.events.push(_)}h&&f.eventLists_.push(h)}function ba(f,l,h){Ic(f,h),g_(f,function(g){return ec(g,l)})}function Go(f,l,h){Ic(f,h),g_(f,function(g){return vo(g,l)||vo(l,g)})}function g_(f,l){f.recursionDepth_++;for(var h=!0,g=0;g<f.eventLists_.length;g++){var _=f.eventLists_[g];_&&(l(_.path)?(Ge(f.eventLists_[g]),f.eventLists_[g]=null):h=!1)}h&&(f.eventLists_=[]),f.recursionDepth_--}function Ge(f){for(var l=0;l<f.events.length;l++){var h=f.events[l];if(null!==h){f.events[l]=null;var g=h.getEventRunner();Ke&&He("event: "+h.toString()),Mn(g)}}}var BC="repo_interrupt",nk=25,rk=function(){function f(l,h,g,_){this.repoInfo_=l,this.forceRestClient_=h,this.authTokenProvider_=g,this.appCheckProvider_=_,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new p_,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=fr(),this.transactionQueueTree_=new xh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return f.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},f}();function HC(f){var h=f.infoData_.getNode(new dn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+h}function Vh(f){return a_({timestamp:HC(f)})}function $C(f,l,h,g,_){f.dataUpdateCount++;var b=new dn(l);h=f.interceptServerDataCallback_?f.interceptServerDataCallback_(l,h):h;var I=[];if(_)if(g){var R=(0,N.map)(h,function(re){return On(re)});I=function Mh(f,l,h,g){var _=r_(f,g);if(_){var b=gg(_),I=b.path,R=b.queryId,k=Si(I,l),F=bo.fromObject(h);return mg(f,I,new Ja(Py(R),k,F))}return[]}(f.serverSyncTree_,b,R,_)}else{var k=On(h);I=function Ah(f,l,h,g){var _=r_(f,g);if(null!=_){var b=gg(_),I=b.path,R=b.queryId,k=Si(I,l);return mg(f,I,new hc(Py(R),k,h))}return[]}(f.serverSyncTree_,b,k,_)}else if(g){var F=(0,N.map)(h,function(re){return On(re)});I=function LC(f,l,h){var g=bo.fromObject(h);return mc(f,new Ja({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l,g))}(f.serverSyncTree_,b,F)}else{var U=On(h);I=Ll(f.serverSyncTree_,b,U)}var W=b;I.length>0&&(W=Ac(f,b)),Go(f.eventQueue_,W,I)}function qC(f,l){Kn(f,"connected",l),!1===l&&function au(f){Ql(f,"onDisconnectEvents");var l=Vh(f),h=fr();_o(f.onDisconnect_,en(),function(_,b){var I=kh(_,b,f.serverSyncTree_,l);as(h,_,I)});var g=[];_o(h,en(),function(_,b){g=g.concat(Ll(f.serverSyncTree_,_,b));var I=Hh(f,_);Ac(f,I)}),f.onDisconnect_=fr(),Go(f.eventQueue_,en(),g)}(f)}function Kn(f,l,h){var g=new dn("/.info/"+l),_=On(h);f.infoData_.updateSnapshot(g,_);var b=Ll(f.infoSyncTree_,g,_);Go(f.eventQueue_,g,b)}function Tc(f){return f.nextWriteId_++}function Eg(f,l,h,g,_){Ql(f,"set",{path:l.toString(),value:h,priority:g});var b=Vh(f),I=On(h,g),R=gc(f.serverSyncTree_,l),k=_c(I,R,b),F=Tc(f),U=Fs(f.serverSyncTree_,l,k,F,!0);Ic(f.eventQueue_,U),f.server_.put(l.toString(),I.val(!0),function(re,me){var Me="ok"===re;Me||hn("set at "+l+" failed: "+re);var lt=wa(f.serverSyncTree_,F,!Me);Go(f.eventQueue_,l,lt),Ls(0,_,re,me)});var W=Hh(f,l);Ac(f,W),Go(f.eventQueue_,W,[])}function m_(f,l,h){f.server_.onDisconnectCancel(l.toString(),function(g,_){"ok"===g&&ma(f.onDisconnect_,l),Ls(0,h,g,_)})}function Wl(f,l,h,g){var _=On(h);f.server_.onDisconnectPut(l.toString(),_.val(!0),function(b,I){"ok"===b&&as(f.onDisconnect_,l,_),Ls(0,g,b,I)})}function Cg(f,l,h){var g;g=".info"===Ut(l._path)?dg(f.infoSyncTree_,l,h):dg(f.serverSyncTree_,l,h),ba(f.eventQueue_,l._path,g)}function zC(f){f.persistentConnection_&&f.persistentConnection_.interrupt(BC)}function Ql(f){for(var l=[],h=1;h<arguments.length;h++)l[h-1]=arguments[h];var g="";f.persistentConnection_&&(g=f.persistentConnection_.id+":"),He.apply(void 0,(0,oe.__spreadArray)([g],(0,oe.__read)(l)))}function Ls(f,l,h,g){l&&Mn(function(){if("ok"===h)l(null);else{var _=(h||"error").toUpperCase(),b=_;g&&(b+=": "+g);var I=new Error(b);I.code=_,l(I)}})}function Ig(f,l,h){return gc(f.serverSyncTree_,l,h)||st.EMPTY_NODE}function Uh(f,l){if(void 0===l&&(l=f.transactionQueueTree_),l||Ea(f,l),ru(l)){var h=Yl(f,l);(0,N.assert)(h.length>0,"Sending zero length transaction queue"),h.every(function(_){return 0===_.status})&&function KC(f,l,h){for(var g=h.map(function(re){return re.currentWriteId}),_=Ig(f,l,g),b=_,I=_.hash(),R=0;R<h.length;R++){var k=h[R];(0,N.assert)(0===k.status,"tryToSendTransactionQueue_: items in queue should all be run."),k.status=1,k.retryCount++;var F=Si(l,k.path);b=b.updateChild(F,k.currentOutputSnapshotRaw)}var U=b.val(!0),W=l;f.server_.put(W.toString(),U,function(re){Ql(f,"transaction put response",{path:W.toString(),status:re});var me=[];if("ok"===re){for(var Me=[],lt=function(xt){h[xt].status=2,me=me.concat(wa(f.serverSyncTree_,h[xt].currentWriteId)),h[xt].onComplete&&Me.push(function(){return h[xt].onComplete(null,!0,h[xt].currentOutputSnapshotResolved)}),h[xt].unwatcher()},Qe=0;Qe<h.length;Qe++)lt(Qe);for(Ea(f,Bl(f.transactionQueueTree_,l)),Uh(f,f.transactionQueueTree_),Go(f.eventQueue_,l,me),Qe=0;Qe<Me.length;Qe++)Mn(Me[Qe])}else{if("datastale"===re)for(Qe=0;Qe<h.length;Qe++)h[Qe].status=3===h[Qe].status?4:0;else for(hn("transaction at "+W.toString()+" failed: "+re),Qe=0;Qe<h.length;Qe++)h[Qe].status=4,h[Qe].abortReason=re;Ac(f,l)}},I)}(f,iu(l),h)}else c_(l)&&wc(l,function(_){Uh(f,_)})}function Ac(f,l){var h=jh(f,l),g=iu(h);return function QC(f,l,h){if(0!==l.length){for(var g=[],_=[],I=l.filter(function(F){return 0===F.status}).map(function(F){return F.currentWriteId}),R=function(F){var me,U=l[F],W=Si(h,U.path),re=!1;if((0,N.assert)(null!==W,"rerunTransactionsUnderNode_: relativePath should not be null."),4===U.status)re=!0,me=U.abortReason,_=_.concat(wa(f.serverSyncTree_,U.currentWriteId,!0));else if(0===U.status)if(U.retryCount>=nk)re=!0,me="maxretry",_=_.concat(wa(f.serverSyncTree_,U.currentWriteId,!0));else{var Me=Ig(f,U.path,I);U.currentInputSnapshot=Me;var lt=l[F].update(Me.val());if(void 0!==lt){bc("transaction failed: Data returned ",lt,U.path);var Qe=On(lt);"object"==typeof lt&&null!=lt&&(0,N.contains)(lt,".priority")||(Qe=Qe.updatePriority(Me.getPriority()));var tr=U.currentWriteId,hs=Vh(f),Wh=_c(Qe,Me,hs);U.currentOutputSnapshotRaw=Qe,U.currentOutputSnapshotResolved=Wh,U.currentWriteId=Tc(f),I.splice(I.indexOf(tr),1),_=(_=_.concat(Fs(f.serverSyncTree_,U.path,Wh,U.currentWriteId,U.applyLocally))).concat(wa(f.serverSyncTree_,tr,!0))}else re=!0,me="nodata",_=_.concat(wa(f.serverSyncTree_,U.currentWriteId,!0))}Go(f.eventQueue_,h,_),_=[],re&&(l[F].status=2,setTimeout(l[F].unwatcher,Math.floor(0)),l[F].onComplete&&g.push("nodata"===me?function(){return l[F].onComplete(null,!1,l[F].currentInputSnapshot)}:function(){return l[F].onComplete(new Error(me),!1,null)}))},k=0;k<l.length;k++)R(k);for(Ea(f,f.transactionQueueTree_),k=0;k<g.length;k++)Mn(g[k]);Uh(f,f.transactionQueueTree_)}}(f,Yl(f,h),g),g}function jh(f,l){var h,g=f.transactionQueueTree_;for(h=Ut(l);null!==h&&void 0===ru(g);)g=Bl(g,h),h=Ut(l=In(l));return g}function Yl(f,l){var h=[];return Bh(f,l,h),h.sort(function(g,_){return g.order-_.order}),h}function Bh(f,l,h){var g=ru(l);if(g)for(var _=0;_<g.length;_++)h.push(g[_]);wc(l,function(b){Bh(f,b,h)})}function Ea(f,l){var h=ru(l);if(h){for(var g=0,_=0;_<h.length;_++)2!==h[_].status&&(h[g]=h[_],g++);h.length=g,Do(l,h.length>0?h:void 0)}wc(l,function(b){Ea(f,b)})}function Hh(f,l){var h=iu(jh(f,l)),g=Bl(f.transactionQueueTree_,l);return function _g(f,l,h){for(var g=h?f:f.parent;null!==g;){if(l(g))return!0;g=g.parent}}(g,function(_){uu(f,_)}),uu(f,g),yg(g,function(_){uu(f,_)}),h}function uu(f,l){var h=ru(l);if(h){for(var g=[],_=[],b=-1,I=0;I<h.length;I++)3===h[I].status||(1===h[I].status?((0,N.assert)(b===I-1,"All SENT items should be at beginning of queue."),b=I,h[I].status=3,h[I].abortReason="set"):((0,N.assert)(0===h[I].status,"Unexpected transaction status in abort"),h[I].unwatcher(),_=_.concat(wa(f.serverSyncTree_,h[I].currentWriteId,!0)),h[I].onComplete&&g.push(h[I].onComplete.bind(null,new Error("set"),!1,null))));for(-1===b?Do(l,void 0):h.length=b+1,Go(f.eventQueue_,iu(l),_),I=0;I<g.length;I++)Mn(g[I])}}var cu=function(f,l){var h=$h(f),g=h.namespace;return"firebase.com"===h.domain&&Pt(h.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!g||"undefined"===g)&&"localhost"!==h.domain&&Pt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),h.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&hn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new As(h.host,h.secure,g,l,"ws"===h.scheme||"wss"===h.scheme,"",g!==h.subdomain),path:new dn(h.pathString)}},$h=function(f){var l="",h="",g="",_="",b="",I=!0,R="https",k=443;if("string"==typeof f){var F=f.indexOf("//");F>=0&&(R=f.substring(0,F-1),f=f.substring(F+2));var U=f.indexOf("/");-1===U&&(U=f.length);var W=f.indexOf("?");-1===W&&(W=f.length),l=f.substring(0,Math.min(U,W)),U<W&&(_=function YC(f){for(var l="",h=f.split("/"),g=0;g<h.length;g++)if(h[g].length>0){var _=h[g];try{_=decodeURIComponent(_.replace(/\+/g," "))}catch{}l+="/"+_}return l}(f.substring(U,W)));var re=function v_(f){var l,h,g={};"?"===f.charAt(0)&&(f=f.substring(1));try{for(var _=(0,oe.__values)(f.split("&")),b=_.next();!b.done;b=_.next()){var I=b.value;if(0!==I.length){var R=I.split("=");2===R.length?g[decodeURIComponent(R[0])]=decodeURIComponent(R[1]):hn("Invalid query segment '"+I+"' in query '"+f+"'")}}}catch(k){l={error:k}}finally{try{b&&!b.done&&(h=_.return)&&h.call(_)}finally{if(l)throw l.error}}return g}(f.substring(Math.min(f.length,W)));(F=l.indexOf(":"))>=0?(I="https"===R||"wss"===R,k=parseInt(l.substring(F+1),10)):F=l.length;var me=l.slice(0,F);if("localhost"===me.toLowerCase())h="localhost";else if(me.split(".").length<=2)h=me;else{var Me=l.indexOf(".");g=l.substring(0,Me).toLowerCase(),h=l.substring(Me+1),b=g}"ns"in re&&(b=re.ns)}return{host:l,port:k,domain:h,subdomain:g,secure:I,scheme:R,pathString:_,namespace:b}},Tg=function(){function f(l,h,g,_){this.eventType=l,this.eventRegistration=h,this.snapshot=g,this.prevName=_}return f.prototype.getPath=function(){var l=this.snapshot.ref;return"value"===this.eventType?l._path:l.parent._path},f.prototype.getEventType=function(){return this.eventType},f.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},f.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,N.stringify)(this.snapshot.exportVal())},f}(),y_=function(){function f(l,h,g){this.eventRegistration=l,this.error=h,this.path=g}return f.prototype.getPath=function(){return this.path},f.prototype.getEventType=function(){return"cancel"},f.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},f.prototype.toString=function(){return this.path.toString()+":cancel"},f}(),__=function(){function f(l,h){this.snapshotCallback=l,this.cancelCallback=h}return f.prototype.onValue=function(l,h){this.snapshotCallback.call(null,l,h)},f.prototype.onCancel=function(l){return(0,N.assert)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,l)},Object.defineProperty(f.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),f.prototype.matches=function(l){return this.snapshotCallback===l.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===l.snapshotCallback.userCallback&&this.snapshotCallback.context===l.snapshotCallback.context},f}(),Mc=function(){function f(l,h){this._repo=l,this._path=h}return f.prototype.cancel=function(){var l=new N.Deferred;return m_(this._repo,this._path,l.wrapCallback(function(){})),l.promise},f.prototype.remove=function(){$r("OnDisconnect.remove",this._path);var l=new N.Deferred;return Wl(this._repo,this._path,null,l.wrapCallback(function(){})),l.promise},f.prototype.set=function(l){$r("OnDisconnect.set",this._path),qo("OnDisconnect.set",l,this._path,!1);var h=new N.Deferred;return Wl(this._repo,this._path,l,h.wrapCallback(function(){})),h.promise},f.prototype.setWithPriority=function(l,h){$r("OnDisconnect.setWithPriority",this._path),qo("OnDisconnect.setWithPriority",l,this._path,!1),hr("OnDisconnect.setWithPriority",h,!1);var g=new N.Deferred;return function Kl(f,l,h,g,_){var b=On(h,g);f.server_.onDisconnectPut(l.toString(),b.val(!0),function(I,R){"ok"===I&&as(f.onDisconnect_,l,b),Ls(0,_,I,R)})}(this._repo,this._path,l,h,g.wrapCallback(function(){})),g.promise},f.prototype.update=function(l){$r("OnDisconnect.update",this._path),d_("OnDisconnect.update",l,this._path,!1);var h=new N.Deferred;return function GC(f,l,h,g){if((0,N.isEmpty)(h))return He("onDisconnect().update() called with empty data.  Don't do anything."),void Ls(0,g,"ok",void 0);f.server_.onDisconnectMerge(l.toString(),h,function(_,b){"ok"===_&&pe(h,function(I,R){var k=On(R);as(f.onDisconnect_,xn(l,I),k)}),Ls(0,g,_,b)})}(this._repo,this._path,l,h.wrapCallback(function(){})),h.promise},f}(),ni=function(){function f(l,h,g,_){this._repo=l,this._path=h,this._queryParams=g,this._orderByCalled=_}return Object.defineProperty(f.prototype,"key",{get:function(){return we(this._path)?null:Ti(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"ref",{get:function(){return new ls(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"_queryIdentifier",{get:function(){var l=lc(this._queryParams),h=se(l);return"{}"===h?"default":h},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"_queryObject",{get:function(){return lc(this._queryParams)},enumerable:!1,configurable:!0}),f.prototype.isEqual=function(l){if(!((l=(0,N.getModularInstance)(l))instanceof f))return!1;var h=this._repo===l._repo,g=ec(this._path,l._path);return h&&g&&this._queryIdentifier===l._queryIdentifier},f.prototype.toJSON=function(){return this.toString()},f.prototype.toString=function(){return this._repo.toString()+function an(f){for(var l="",h=f.pieceNum_;h<f.pieces_.length;h++)""!==f.pieces_[h]&&(l+="/"+encodeURIComponent(String(f.pieces_[h])));return l||"/"}(this._path)},f}();function qh(f,l){if(!0===f._orderByCalled)throw new Error(l+": You can't combine multiple orderBy calls.")}function lu(f){var l=null,h=null;if(f.hasStart()&&(l=f.getIndexStartValue()),f.hasEnd()&&(h=f.getIndexEndValue()),f.getIndex()===zi){var g="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",_="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(f.hasStart()){if(f.getIndexStartName()!==Cn)throw new Error(g);if("string"!=typeof l)throw new Error(_)}if(f.hasEnd()){if(f.getIndexEndName()!==lr)throw new Error(g);if("string"!=typeof h)throw new Error(_)}}else if(f.getIndex()===Gt){if(null!=l&&!$l(l)||null!=h&&!$l(h))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,N.assert)(f.getIndex()instanceof Zp||f.getIndex()===Wi,"unknown index type."),null!=l&&"object"==typeof l||null!=h&&"object"==typeof h)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Xl(f){if(f.hasStart()&&f.hasEnd()&&f.hasLimit()&&!f.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var ls=function(f){function l(h,g){return f.call(this,h,g,new Pn,!1)||this}return(0,oe.__extends)(l,f),Object.defineProperty(l.prototype,"parent",{get:function(){var h=fC(this._path);return null===h?null:new l(this._repo,h)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"root",{get:function(){for(var h=this;null!==h.parent;)h=h.parent;return h},enumerable:!1,configurable:!0}),l}(ni),Sg=function(){function f(l,h,g){this._node=l,this.ref=h,this._index=g}return Object.defineProperty(f.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),f.prototype.child=function(l){var h=new dn(l),g=fu(this.ref,l);return new f(this._node.getChild(h),g,Gt)},f.prototype.exists=function(){return!this._node.isEmpty()},f.prototype.exportVal=function(){return this._node.val(!0)},f.prototype.forEach=function(l){var h=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(_,b){return l(new f(b,fu(h.ref,_),Gt))})},f.prototype.hasChild=function(l){var h=new dn(l);return!this._node.getChild(h).isEmpty()},f.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},f.prototype.toJSON=function(){return this.exportVal()},f.prototype.val=function(){return this._node.val()},f}();function w_(f,l){return(f=(0,N.getModularInstance)(f))._checkNotDeleted("ref"),void 0!==l?fu(f._root,l):f._root}function b_(f,l){(f=(0,N.getModularInstance)(f))._checkNotDeleted("refFromURL");var h=cu(l,f._repo.repoInfo_.nodeAdmin);su("refFromURL",h);var g=h.repoInfo;return!f._repo.repoInfo_.isCustomHost()&&g.host!==f._repo.repoInfo_.host&&Pt("refFromURL: Host name does not match the current database: (found "+g.host+" but expected "+f._repo.repoInfo_.host+")"),w_(f,h.path.toString())}function fu(f,l){return null===Ut((f=(0,N.getModularInstance)(f))._path)?Lh("child","path",l,!1):Cc("child","path",l,!1),new ls(f._repo,xn(f._path,l))}function Ag(f,l){f=(0,N.getModularInstance)(f),$r("set",f._path),qo("set",l,f._path,!1);var h=new N.Deferred;return Eg(f._repo,f._path,l,null,h.wrapCallback(function(){})),h.promise}function D_(f,l){d_("update",l,f._path,!1);var h=new N.Deferred;return function Io(f,l,h,g){Ql(f,"update",{path:l.toString(),value:h});var _=!0,b=Vh(f),I={};if(pe(h,function(F,U){_=!1,I[F]=kh(xn(l,F),On(U),f.serverSyncTree_,b)}),_)He("update() called with empty data.  Don't do anything."),Ls(0,g,"ok",void 0);else{var R=Tc(f),k=function Fn(f,l,h,g){!function CC(f,l,h,g){(0,N.assert)(g>f.lastWriteId,"Stacking an older merge on top of newer ones"),f.allWrites.push({path:l,children:h,writeId:g,visible:!0}),f.visibleWrites=Ly(f.visibleWrites,l,h),f.lastWriteId=g}(f.pendingWriteTree_,l,h,g);var _=bo.fromObject(h);return mc(f,new Ja({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},l,_))}(f.serverSyncTree_,l,I,R);Ic(f.eventQueue_,k),f.server_.merge(l.toString(),h,function(F,U){var W="ok"===F;W||hn("update at "+l+" failed: "+F);var re=wa(f.serverSyncTree_,R,!W),me=re.length>0?Ac(f,l):l;Go(f.eventQueue_,me,re),Ls(0,g,F,U)}),pe(h,function(F){var U=Hh(f,xn(l,F));Ac(f,U)}),Go(f.eventQueue_,l,[])}}(f._repo,f._path,l,h.wrapCallback(function(){})),h.promise}function uk(f){return function zl(f,l){var h=function t_(f,l){var h=l._path,g=null;f.syncPointTree_.foreachOnPath(h,function(F,U){var W=Si(F,h);g=g||Os(U,W)});var _=f.syncPointTree_.get(h);_?g=g||Os(_,en()):(_=new Xy,f.syncPointTree_=f.syncPointTree_.set(h,_));var b=null!=g,I=b?new Ho(g,!0,!1):null;return function cg(f){return rg(f.viewCache_)}(Th(_,l,di(f.pendingWriteTree_,l._path),b?I.getNode():st.EMPTY_NODE,b))}(f.serverSyncTree_,l);return null!=h?Promise.resolve(h):f.server_.get(l).then(function(g){var _=On(g).withIndex(l._queryParams.getIndex()),b=Ll(f.serverSyncTree_,l._path,_);return ba(f.eventQueue_,l._path,b),Promise.resolve(_)},function(g){return Ql(f,"get for query "+(0,N.stringify)(l)+" failed: "+g),Promise.reject(new Error(g))})}((f=(0,N.getModularInstance)(f))._repo,f).then(function(l){return new Sg(l,new ls(f._repo,f._path),f._queryParams.getIndex())})}var I_=function(){function f(l){this.callbackContext=l}return f.prototype.respondsTo=function(l){return"value"===l},f.prototype.createEvent=function(l,h){var g=h._queryParams.getIndex();return new Tg("value",this,new Sg(l.snapshotNode,new ls(h._repo,h._path),g))},f.prototype.getEventRunner=function(l){var h=this;return"cancel"===l.getEventType()?function(){return h.callbackContext.onCancel(l.error)}:function(){return h.callbackContext.onValue(l.snapshot,null)}},f.prototype.createCancelEvent=function(l,h){return this.callbackContext.hasCancelCallback?new y_(this,l,h):null},f.prototype.matches=function(l){return l instanceof f&&(!l.callbackContext||!this.callbackContext||l.callbackContext.matches(this.callbackContext))},f.prototype.hasAnyCallback=function(){return null!==this.callbackContext},f}(),T_=function(){function f(l,h){this.eventType=l,this.callbackContext=h}return f.prototype.respondsTo=function(l){var h="children_added"===l?"child_added":l;return this.eventType===("children_removed"===h?"child_removed":h)},f.prototype.createCancelEvent=function(l,h){return this.callbackContext.hasCancelCallback?new y_(this,l,h):null},f.prototype.createEvent=function(l,h){(0,N.assert)(null!=l.childName,"Child events should have a childName.");var g=fu(new ls(h._repo,h._path),l.childName),_=h._queryParams.getIndex();return new Tg(l.type,this,new Sg(l.snapshotNode,g,_),l.prevName)},f.prototype.getEventRunner=function(l){var h=this;return"cancel"===l.getEventType()?function(){return h.callbackContext.onCancel(l.error)}:function(){return h.callbackContext.onValue(l.snapshot,l.prevName)}},f.prototype.matches=function(l){return l instanceof f&&this.eventType===l.eventType&&(!this.callbackContext||!l.callbackContext||this.callbackContext.matches(l.callbackContext))},f.prototype.hasAnyCallback=function(){return!!this.callbackContext},f}();function hu(f,l,h,g,_){var b;if("object"==typeof g&&(b=void 0,_=g),"function"==typeof g&&(b=g),_&&_.onlyOnce){var I=h,R=function(U,W){Cg(f._repo,f,F),I(U,W)};R.userCallback=h.userCallback,R.context=h.context,h=R}var k=new __(h,b||void 0),F="value"===l?new I_(k):new T_(l,k);return function sk(f,l,h){var g;g=".info"===Ut(l._path)?Vl(f.infoSyncTree_,l,h):Vl(f.serverSyncTree_,l,h),ba(f.eventQueue_,l._path,g)}(f._repo,f,F),function(){return Cg(f._repo,f,F)}}function S_(f,l,h,g){return hu(f,"value",l,h,g)}function XC(f,l,h,g){return hu(f,"child_added",l,h,g)}function zh(f,l,h,g){return hu(f,"child_changed",l,h,g)}function JC(f,l,h,g){return hu(f,"child_moved",l,h,g)}function ZC(f,l,h,g){return hu(f,"child_removed",l,h,g)}function eD(f,l,h){var g=null,_=h?new __(h):null;"value"===l?g=new I_(_):l&&(g=new T_(l,_)),Cg(f._repo,f,g)}var fs=function f(){},tD=function(f){function l(h,g){var _=f.call(this)||this;return _._value=h,_._key=g,_}return(0,oe.__extends)(l,f),l.prototype._apply=function(h){qo("endAt",this._value,h._path,!0);var g=cc(h._queryParams,this._value,this._key);if(Xl(g),lu(g),h._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ni(h._repo,h._path,g,h._orderByCalled)},l}(fs),A_=function(f){function l(h,g){var _=f.call(this)||this;return _._value=h,_._key=g,_}return(0,oe.__extends)(l,f),l.prototype._apply=function(h){qo("endBefore",this._value,h._path,!1);var g=function ph(f,l,h){var _;return f.index_===zi?("string"==typeof l&&(l=fi(l)),_=cc(f,l,h)):_=cc(f,l,null==h?Cn:fi(h)),_.endBeforeSet_=!0,_}(h._queryParams,this._value,this._key);if(Xl(g),lu(g),h._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ni(h._repo,h._path,g,h._orderByCalled)},l}(fs),Rg=function(f){function l(h,g){var _=f.call(this)||this;return _._value=h,_._key=g,_}return(0,oe.__extends)(l,f),l.prototype._apply=function(h){qo("startAt",this._value,h._path,!0);var g=ga(h._queryParams,this._value,this._key);if(Xl(g),lu(g),h._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ni(h._repo,h._path,g,h._orderByCalled)},l}(fs),R_=function(f){function l(h,g){var _=f.call(this)||this;return _._value=h,_._key=g,_}return(0,oe.__extends)(l,f),l.prototype._apply=function(h){qo("startAfter",this._value,h._path,!1);var g=function Wn(f,l,h){var g;return f.index_===zi?("string"==typeof l&&(l=Vr(l)),g=ga(f,l,h)):g=ga(f,l,null==h?lr:Vr(h)),g.startAfterSet_=!0,g}(h._queryParams,this._value,this._key);if(Xl(g),lu(g),h._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ni(h._repo,h._path,g,h._orderByCalled)},l}(fs),rD=function(f){function l(h){var g=f.call(this)||this;return g._limit=h,g}return(0,oe.__extends)(l,f),l.prototype._apply=function(h){if(h._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ni(h._repo,h._path,function Xa(f,l){var h=f.copy();return h.limitSet_=!0,h.limit_=l,h.viewFrom_="l",h}(h._queryParams,this._limit),h._orderByCalled)},l}(fs),oD=function(f){function l(h){var g=f.call(this)||this;return g._limit=h,g}return(0,oe.__extends)(l,f),l.prototype._apply=function(h){if(h._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ni(h._repo,h._path,function Zr(f,l){var h=f.copy();return h.limitSet_=!0,h.limit_=l,h.viewFrom_="r",h}(h._queryParams,this._limit),h._orderByCalled)},l}(fs),Ng=function(f){function l(h){var g=f.call(this)||this;return g._path=h,g}return(0,oe.__extends)(l,f),l.prototype._apply=function(h){qh(h,"orderByChild");var g=new dn(this._path);if(we(g))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var _=new Zp(g),b=Dt(h._queryParams,_);return lu(b),new ni(h._repo,h._path,b,!0)},l}(fs),aD=function(f){function l(){return null!==f&&f.apply(this,arguments)||this}return(0,oe.__extends)(l,f),l.prototype._apply=function(h){qh(h,"orderByKey");var g=Dt(h._queryParams,zi);return lu(g),new ni(h._repo,h._path,g,!0)},l}(fs),k_=function(f){function l(){return null!==f&&f.apply(this,arguments)||this}return(0,oe.__extends)(l,f),l.prototype._apply=function(h){qh(h,"orderByPriority");var g=Dt(h._queryParams,Gt);return lu(g),new ni(h._repo,h._path,g,!0)},l}(fs),lD=function(f){function l(){return null!==f&&f.apply(this,arguments)||this}return(0,oe.__extends)(l,f),l.prototype._apply=function(h){qh(h,"orderByValue");var g=Dt(h._queryParams,Wi);return lu(g),new ni(h._repo,h._path,g,!0)},l}(fs),kg=function(f){function l(h,g){var _=f.call(this)||this;return _._value=h,_._key=g,_}return(0,oe.__extends)(l,f),l.prototype._apply=function(h){if(qo("equalTo",this._value,h._path,!1),h._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(h._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new tD(this._value,this._key)._apply(new Rg(this._value,this._key)._apply(h))},l}(fs);function Ji(f){for(var l,h,g=[],_=1;_<arguments.length;_++)g[_-1]=arguments[_];var b=(0,N.getModularInstance)(f);try{for(var I=(0,oe.__values)(g),R=I.next();!R.done;R=I.next())b=R.value._apply(b)}catch(F){l={error:F}}finally{try{R&&!R.done&&(h=I.return)&&h.call(I)}finally{if(l)throw l.error}}return b}(function Jy(f){(0,N.assert)(!Co,"__referenceConstructor has already been defined"),Co=f})(ls),function hg(f){(0,N.assert)(!Fl,"__referenceConstructor has already been defined"),Fl=f}(ls);var ri="FIREBASE_DATABASE_EMULATOR_HOST",du={},xg=!1;function P_(f,l,h,g,_){var b=g||f.options.databaseURL;void 0===b&&(f.options.projectId||Pt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),He("Using default host for project ",f.options.projectId),b=f.options.projectId+"-default-rtdb.firebaseio.com");var k,I=cu(b,_),R=I.repoInfo,F=void 0;typeof process<"u"&&(F=process.env[ri]),F?(k=!0,R=(I=cu(b="http://"+F+"?ns="+R.namespace,_)).repoInfo):k=!I.repoInfo.secure;var U=_&&k?new Mt(Mt.OWNER):new At(f.name,f.options,l);su("Invalid Firebase Database URL",I),we(I.path)||Pt("Database URL must point to the root of a Firebase Database (not including a child path).");var W=function fD(f,l,h,g){var _=du[l.name];_||(du[l.name]=_={});var b=_[f.toURLString()];return b&&Pt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),b=new rk(f,xg,h,g),_[f.toURLString()]=b,b}(R,f,U,new Xr(f.name,h));return new hD(W,f)}var hD=function(){function f(l,h){this._repoInternal=l,this.app=h,this.type="database",this._instanceStarted=!1}return Object.defineProperty(f.prototype,"_repo",{get:function(){return this._instanceStarted||(function ik(f,l,h){if(f.stats_=Zu(f.repoInfo_),f.forceRestClient_||Cr())f.server_=new xy(f.repoInfo_,function(g,_,b,I){$C(f,g,_,b,I)},f.authTokenProvider_,f.appCheckProvider_),setTimeout(function(){return qC(f,!0)},0);else{if(typeof h<"u"&&null!==h){if("object"!=typeof h)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,N.stringify)(h)}catch(g){throw new Error("Invalid authOverride provided: "+g)}}f.persistentConnection_=new tc(f.repoInfo_,l,function(g,_,b,I){$C(f,g,_,b,I)},function(g){qC(f,g)},function(g){!function ok(f,l){pe(l,function(h,g){Kn(f,h,g)})}(f,g)},f.authTokenProvider_,f.appCheckProvider_,h),f.server_=f.persistentConnection_}f.authTokenProvider_.addTokenChangeListener(function(g){f.server_.refreshAuthToken(g)}),f.appCheckProvider_.addTokenChangeListener(function(g){f.server_.refreshAppCheckToken(g.token)}),f.statsReporter_=function bl(f,l){var h=f.toString();return Lr[h]||(Lr[h]=l()),Lr[h]}(f.repoInfo_,function(){return new Oy(f.stats_,f.server_)}),f.infoData_=new fc,f.infoSyncTree_=new ti({startListening:function(g,_,b,I){var R=[],k=f.infoData_.getNode(g._path);return k.isEmpty()||(R=Ll(f.infoSyncTree_,g._path,k),setTimeout(function(){I("ok")},0)),R},stopListening:function(){}}),Kn(f,"connected",!1),f.serverSyncTree_=new ti({startListening:function(g,_,b,I){return f.server_.listen(g,b,_,function(R,k){var F=I(R,k);Go(f.eventQueue_,g._path,F)}),[]},stopListening:function(g,_){f.server_.unlisten(g,_)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new ls(this._repo,en())),this._rootInternal},enumerable:!1,configurable:!0}),f.prototype._delete=function(){return null!==this._rootInternal&&(function F_(f,l){var h=du[l];(!h||h[f.key]!==f)&&Pt("Database "+l+"("+f.repoInfo_+") has already been deleted."),zC(f),delete h[f.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()},f.prototype._checkNotDeleted=function(l){null===this._rootInternal&&Pt("Cannot call "+l+" on a deleted database.")},f}();var Og={".sv":"timestamp"},Jl=function(){function f(l,h){this.committed=l,this.snapshot=h}return f.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},f}();var vD=function(){function f(l){this._delegate=l}return f.prototype.cancel=function(l){(0,N.validateArgCount)("OnDisconnect.cancel",0,1,arguments.length),(0,N.validateCallback)("OnDisconnect.cancel","onComplete",l,!0);var h=this._delegate.cancel();return l&&h.then(function(){return l(null)},function(g){return l(g)}),h},f.prototype.remove=function(l){(0,N.validateArgCount)("OnDisconnect.remove",0,1,arguments.length),(0,N.validateCallback)("OnDisconnect.remove","onComplete",l,!0);var h=this._delegate.remove();return l&&h.then(function(){return l(null)},function(g){return l(g)}),h},f.prototype.set=function(l,h){(0,N.validateArgCount)("OnDisconnect.set",1,2,arguments.length),(0,N.validateCallback)("OnDisconnect.set","onComplete",h,!0);var g=this._delegate.set(l);return h&&g.then(function(){return h(null)},function(_){return h(_)}),g},f.prototype.setWithPriority=function(l,h,g){(0,N.validateArgCount)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,N.validateCallback)("OnDisconnect.setWithPriority","onComplete",g,!0);var _=this._delegate.setWithPriority(l,h);return g&&_.then(function(){return g(null)},function(b){return g(b)}),_},f.prototype.update=function(l,h){if((0,N.validateArgCount)("OnDisconnect.update",1,2,arguments.length),Array.isArray(l)){for(var g={},_=0;_<l.length;++_)g[""+_]=l[_];l=g,hn("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,N.validateCallback)("OnDisconnect.update","onComplete",h,!0);var b=this._delegate.update(l);return h&&b.then(function(){return h(null)},function(I){return h(I)}),b},f}(),Fg=function(){function f(l,h){this.committed=l,this.snapshot=h}return f.prototype.toJSON=function(){return(0,N.validateArgCount)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},f}(),pu=function(){function f(l,h){this._database=l,this._delegate=h}return f.prototype.val=function(){return(0,N.validateArgCount)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},f.prototype.exportVal=function(){return(0,N.validateArgCount)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},f.prototype.toJSON=function(){return(0,N.validateArgCount)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},f.prototype.exists=function(){return(0,N.validateArgCount)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},f.prototype.child=function(l){return(0,N.validateArgCount)("DataSnapshot.child",0,1,arguments.length),l=String(l),Cc("DataSnapshot.child","path",l,!1),new f(this._database,this._delegate.child(l))},f.prototype.hasChild=function(l){return(0,N.validateArgCount)("DataSnapshot.hasChild",1,1,arguments.length),Cc("DataSnapshot.hasChild","path",l,!1),this._delegate.hasChild(l)},f.prototype.getPriority=function(){return(0,N.validateArgCount)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},f.prototype.forEach=function(l){var h=this;return(0,N.validateArgCount)("DataSnapshot.forEach",1,1,arguments.length),(0,N.validateCallback)("DataSnapshot.forEach","action",l,!1),this._delegate.forEach(function(g){return l(new f(h._database,g))})},f.prototype.hasChildren=function(){return(0,N.validateArgCount)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(f.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),f.prototype.numChildren=function(){return(0,N.validateArgCount)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},f.prototype.getRef=function(){return(0,N.validateArgCount)("DataSnapshot.ref",0,0,arguments.length),new To(this._database,this._delegate.ref)},Object.defineProperty(f.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),f}(),Lg=function(){function f(l,h){this.database=l,this._delegate=h}return f.prototype.on=function(l,h,g,_){var I,b=this;(0,N.validateArgCount)("Query.on",2,4,arguments.length),(0,N.validateCallback)("Query.on","callback",h,!1);var R=f.getCancelAndContextArgs_("Query.on",g,_),k=function(U,W){h.call(R.context,new pu(b.database,U),W)};k.userCallback=h,k.context=R.context;var F=null===(I=R.cancel)||void 0===I?void 0:I.bind(R.context);switch(l){case"value":return S_(this._delegate,k,F),h;case"child_added":return XC(this._delegate,k,F),h;case"child_removed":return ZC(this._delegate,k,F),h;case"child_changed":return zh(this._delegate,k,F),h;case"child_moved":return JC(this._delegate,k,F),h;default:throw new Error((0,N.errorPrefix)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},f.prototype.off=function(l,h,g){if((0,N.validateArgCount)("Query.off",0,3,arguments.length),bg("Query.off",l,!0),(0,N.validateCallback)("Query.off","callback",h,!0),(0,N.validateContextObject)("Query.off","context",g,!0),h){var _=function(){};_.userCallback=h,_.context=g,eD(this._delegate,l,_)}else eD(this._delegate,l)},f.prototype.get=function(){var l=this;return uk(this._delegate).then(function(h){return new pu(l.database,h)})},f.prototype.once=function(l,h,g,_){var b=this;(0,N.validateArgCount)("Query.once",1,4,arguments.length),(0,N.validateCallback)("Query.once","callback",h,!0);var I=f.getCancelAndContextArgs_("Query.once",g,_),R=new N.Deferred,k=function(U,W){var re=new pu(b.database,U);h&&h.call(I.context,re,W),R.resolve(re)};k.userCallback=h,k.context=I.context;var F=function(U){I.cancel&&I.cancel.call(I.context,U),R.reject(U)};switch(l){case"value":S_(this._delegate,k,F,{onlyOnce:!0});break;case"child_added":XC(this._delegate,k,F,{onlyOnce:!0});break;case"child_removed":ZC(this._delegate,k,F,{onlyOnce:!0});break;case"child_changed":zh(this._delegate,k,F,{onlyOnce:!0});break;case"child_moved":JC(this._delegate,k,F,{onlyOnce:!0});break;default:throw new Error((0,N.errorPrefix)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return R.promise},f.prototype.limitToFirst=function(l){return(0,N.validateArgCount)("Query.limitToFirst",1,1,arguments.length),new f(this.database,Ji(this._delegate,function iD(f){if("number"!=typeof f||Math.floor(f)!==f||f<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new rD(f)}(l)))},f.prototype.limitToLast=function(l){return(0,N.validateArgCount)("Query.limitToLast",1,1,arguments.length),new f(this.database,Ji(this._delegate,function N_(f){if("number"!=typeof f||Math.floor(f)!==f||f<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new oD(f)}(l)))},f.prototype.orderByChild=function(l){return(0,N.validateArgCount)("Query.orderByChild",1,1,arguments.length),new f(this.database,Ji(this._delegate,function sD(f){if("$key"===f)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===f)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===f)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Cc("orderByChild","path",f,!1),new Ng(f)}(l)))},f.prototype.orderByKey=function(){return(0,N.validateArgCount)("Query.orderByKey",0,0,arguments.length),new f(this.database,Ji(this._delegate,function uD(){return new aD}()))},f.prototype.orderByPriority=function(){return(0,N.validateArgCount)("Query.orderByPriority",0,0,arguments.length),new f(this.database,Ji(this._delegate,function cD(){return new k_}()))},f.prototype.orderByValue=function(){return(0,N.validateArgCount)("Query.orderByValue",0,0,arguments.length),new f(this.database,Ji(this._delegate,function Mi(){return new lD}()))},f.prototype.startAt=function(l,h){return void 0===l&&(l=null),(0,N.validateArgCount)("Query.startAt",0,2,arguments.length),new f(this.database,Ji(this._delegate,function M_(f,l){return void 0===f&&(f=null),ql("startAt","key",l,!0),new Rg(f,l)}(l,h)))},f.prototype.startAfter=function(l,h){return void 0===l&&(l=null),(0,N.validateArgCount)("Query.startAfter",0,2,arguments.length),new f(this.database,Ji(this._delegate,function Ai(f,l){return ql("startAfter","key",l,!0),new R_(f,l)}(l,h)))},f.prototype.endAt=function(l,h){return void 0===l&&(l=null),(0,N.validateArgCount)("Query.endAt",0,2,arguments.length),new f(this.database,Ji(this._delegate,function nD(f,l){return ql("endAt","key",l,!0),new tD(f,l)}(l,h)))},f.prototype.endBefore=function(l,h){return void 0===l&&(l=null),(0,N.validateArgCount)("Query.endBefore",0,2,arguments.length),new f(this.database,Ji(this._delegate,function Mg(f,l){return ql("endBefore","key",l,!0),new A_(f,l)}(l,h)))},f.prototype.equalTo=function(l,h){return(0,N.validateArgCount)("Query.equalTo",1,2,arguments.length),new f(this.database,Ji(this._delegate,function x_(f,l){return ql("equalTo","key",l,!0),new kg(f,l)}(l,h)))},f.prototype.toString=function(){return(0,N.validateArgCount)("Query.toString",0,0,arguments.length),this._delegate.toString()},f.prototype.toJSON=function(){return(0,N.validateArgCount)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},f.prototype.isEqual=function(l){if((0,N.validateArgCount)("Query.isEqual",1,1,arguments.length),!(l instanceof f))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(l._delegate)},f.getCancelAndContextArgs_=function(l,h,g){var _={cancel:void 0,context:void 0};if(h&&g)_.cancel=h,(0,N.validateCallback)(l,"cancel",_.cancel,!0),_.context=g,(0,N.validateContextObject)(l,"context",_.context,!0);else if(h)if("object"==typeof h&&null!==h)_.context=h;else{if("function"!=typeof h)throw new Error((0,N.errorPrefix)(l,"cancelOrContext")+" must either be a cancel callback or a context object.");_.cancel=h}return _},Object.defineProperty(f.prototype,"ref",{get:function(){return new To(this.database,new ls(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),f}(),To=function(f){function l(h,g){var _=f.call(this,h,new ni(g._repo,g._path,new Pn,!1))||this;return _.database=h,_._delegate=g,_}return(0,oe.__extends)(l,f),l.prototype.getKey=function(){return(0,N.validateArgCount)("Reference.key",0,0,arguments.length),this._delegate.key},l.prototype.child=function(h){return(0,N.validateArgCount)("Reference.child",1,1,arguments.length),"number"==typeof h&&(h=String(h)),new l(this.database,fu(this._delegate,h))},l.prototype.getParent=function(){(0,N.validateArgCount)("Reference.parent",0,0,arguments.length);var h=this._delegate.parent;return h?new l(this.database,h):null},l.prototype.getRoot=function(){return(0,N.validateArgCount)("Reference.root",0,0,arguments.length),new l(this.database,this._delegate.root)},l.prototype.set=function(h,g){(0,N.validateArgCount)("Reference.set",1,2,arguments.length),(0,N.validateCallback)("Reference.set","onComplete",g,!0);var _=Ag(this._delegate,h);return g&&_.then(function(){return g(null)},function(b){return g(b)}),_},l.prototype.update=function(h,g){if((0,N.validateArgCount)("Reference.update",1,2,arguments.length),Array.isArray(h)){for(var _={},b=0;b<h.length;++b)_[""+b]=h[b];h=_,hn("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}$r("Reference.update",this._delegate._path),(0,N.validateCallback)("Reference.update","onComplete",g,!0);var I=D_(this._delegate,h);return g&&I.then(function(){return g(null)},function(R){return g(R)}),I},l.prototype.setWithPriority=function(h,g,_){(0,N.validateArgCount)("Reference.setWithPriority",2,3,arguments.length),(0,N.validateCallback)("Reference.setWithPriority","onComplete",_,!0);var b=function ak(f,l,h){if($r("setWithPriority",f._path),qo("setWithPriority",l,f._path,!1),hr("setWithPriority",h,!1),".length"===f.key||".keys"===f.key)throw"setWithPriority failed: "+f.key+" is a read-only object.";var g=new N.Deferred;return Eg(f._repo,f._path,l,h,g.wrapCallback(function(){})),g.promise}(this._delegate,h,g);return _&&b.then(function(){return _(null)},function(I){return _(I)}),b},l.prototype.remove=function(h){(0,N.validateArgCount)("Reference.remove",0,1,arguments.length),(0,N.validateCallback)("Reference.remove","onComplete",h,!0);var g=function E_(f){return $r("remove",f._path),Ag(f,null)}(this._delegate);return h&&g.then(function(){return h(null)},function(_){return h(_)}),g},l.prototype.transaction=function(h,g,_){var b=this;(0,N.validateArgCount)("Reference.transaction",1,3,arguments.length),(0,N.validateCallback)("Reference.transaction","transactionUpdate",h,!1),(0,N.validateCallback)("Reference.transaction","onComplete",g,!0),Dc("Reference.transaction","applyLocally",_,!0);var I=function mD(f,l,h){var g;if(f=(0,N.getModularInstance)(f),$r("Reference.transaction",f._path),".length"===f.key||".keys"===f.key)throw"Reference.transaction failed: "+f.key+" is a read-only object.";var _=null===(g=h?.applyLocally)||void 0===g||g,b=new N.Deferred,R=S_(f,function(){});return function WC(f,l,h,g,_,b){Ql(f,"transaction on "+l);var I={path:l,update:h,onComplete:g,status:null,order:St(),applyLocally:b,retryCount:0,unwatcher:_,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},R=Ig(f,l,void 0);I.currentInputSnapshot=R;var k=I.update(R.val());if(void 0===k)I.unwatcher(),I.currentOutputSnapshotRaw=null,I.currentOutputSnapshotResolved=null,I.onComplete&&I.onComplete(null,!1,I.currentInputSnapshot);else{bc("transaction failed: Data returned ",k,I.path),I.status=0;var F=Bl(f.transactionQueueTree_,l),U=ru(F)||[];U.push(I),Do(F,U);var W=void 0;"object"==typeof k&&null!==k&&(0,N.contains)(k,".priority")?(W=(0,N.safeGet)(k,".priority"),(0,N.assert)($l(W),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):W=(gc(f.serverSyncTree_,l)||st.EMPTY_NODE).getPriority().val();var me=Vh(f),Me=On(k,W),lt=_c(Me,R,me);I.currentOutputSnapshotRaw=Me,I.currentOutputSnapshotResolved=lt,I.currentWriteId=Tc(f);var Qe=Fs(f.serverSyncTree_,l,lt,I.currentWriteId,I.applyLocally);Go(f.eventQueue_,l,Qe),Uh(f,f.transactionQueueTree_)}}(f._repo,f._path,l,function(k,F,U){var W=null;k?b.reject(k):(W=new Sg(U,new ls(f._repo,f._path),Gt),b.resolve(new Jl(F,W)))},R,_),b.promise}(this._delegate,h,{applyLocally:_}).then(function(R){return new Fg(R.committed,new pu(b.database,R.snapshot))});return g&&I.then(function(R){return g(null,R.committed,R.snapshot)},function(R){return g(R,!1,null)}),I},l.prototype.setPriority=function(h,g){(0,N.validateArgCount)("Reference.setPriority",1,2,arguments.length),(0,N.validateCallback)("Reference.setPriority","onComplete",g,!0);var _=function C_(f,l){f=(0,N.getModularInstance)(f),$r("setPriority",f._path),hr("setPriority",l,!1);var h=new N.Deferred;return Eg(f._repo,xn(f._path,".priority"),l,null,h.wrapCallback(function(){})),h.promise}(this._delegate,h);return g&&_.then(function(){return g(null)},function(b){return g(b)}),_},l.prototype.push=function(h,g){var _=this;(0,N.validateArgCount)("Reference.push",0,2,arguments.length),(0,N.validateCallback)("Reference.push","onComplete",g,!0);var b=function Gh(f,l){f=(0,N.getModularInstance)(f),$r("push",f._path),qo("push",l,f._path,!0);var I,h=HC(f._repo),g=un(h),_=fu(f,g),b=fu(f,g);return I=null!=l?Ag(b,l).then(function(){return b}):Promise.resolve(b),_.then=I.then.bind(I),_.catch=I.then.bind(I,void 0),_}(this._delegate,h),I=b.then(function(k){return new l(_.database,k)});g&&I.then(function(){return g(null)},function(k){return g(k)});var R=new l(this.database,b);return R.then=I.then.bind(I),R.catch=I.catch.bind(I,void 0),R},l.prototype.onDisconnect=function(){return $r("Reference.onDisconnect",this._delegate._path),new vD(new Mc(this._delegate._repo,this._delegate._path))},Object.defineProperty(l.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),l}(Lg),Rc=function(){function f(l,h){var g=this;this._delegate=l,this.app=h,this.INTERNAL={delete:function(){return g._delegate._delete()}}}return f.prototype.useEmulator=function(l,h,g){void 0===g&&(g={}),function V_(f,l,h,g){void 0===g&&(g={}),(f=(0,N.getModularInstance)(f))._checkNotDeleted("useEmulator"),f._instanceStarted&&Pt("Cannot call useEmulator() after instance has already been initialized.");var _=f._repoInternal,b=void 0;if(_.repoInfo_.nodeAdmin)g.mockUserToken&&Pt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),b=new Mt(Mt.OWNER);else if(g.mockUserToken){var I="string"==typeof g.mockUserToken?g.mockUserToken:(0,N.createMockUserToken)(g.mockUserToken,f.app.options.projectId);b=new Mt(I)}!function O_(f,l,h,g){f.repoInfo_=new As(l+":"+h,!1,f.repoInfo_.namespace,f.repoInfo_.webSocketOnly,f.repoInfo_.nodeAdmin,f.repoInfo_.persistenceKey,f.repoInfo_.includeNamespaceInQueryParams),g&&(f.authTokenProvider_=g)}(_,l,h,b)}(this._delegate,l,h,g)},f.prototype.ref=function(l){if((0,N.validateArgCount)("database.ref",0,1,arguments.length),l instanceof To){var h=b_(this._delegate,l.toString());return new To(this,h)}return h=w_(this._delegate,l),new To(this,h)},f.prototype.refFromURL=function(l){(0,N.validateArgCount)("database.refFromURL",1,1,arguments.length);var g=b_(this._delegate,l);return new To(this,g)},f.prototype.goOffline=function(){return(0,N.validateArgCount)("database.goOffline",0,0,arguments.length),function dD(f){(f=(0,N.getModularInstance)(f))._checkNotDeleted("goOffline"),zC(f._repo)}(this._delegate)},f.prototype.goOnline=function(){return(0,N.validateArgCount)("database.goOnline",0,0,arguments.length),function pD(f){(f=(0,N.getModularInstance)(f))._checkNotDeleted("goOnline"),function Xi(f){f.persistentConnection_&&f.persistentConnection_.resume(BC)}(f._repo)}(this._delegate)},f.ServerValue={TIMESTAMP:Og,increment:function(l){return function gD(f){return{".sv":{increment:f}}}(l)}},f}(),j_=Object.freeze({__proto__:null,forceLongPolling:function(){Zt.forceDisallow(),yt.forceAllow()},forceWebSockets:function(){yt.forceDisallow()},isWebSocketsAvailable:function(){return Zt.isAvailable()},setSecurityDebugCallback:function(f,l){f._delegate._repo.persistentConnection_.securityDebugCallback_=l},stats:function(f,l){!function Dg(f,l){if(void 0===l&&(l=!1),!(typeof console>"u")){var h;l?(f.statsListener_||(f.statsListener_=new eg(f.stats_)),h=f.statsListener_.get()):h=f.stats_.get();var g=Object.keys(h).reduce(function(_,b){return Math.max(b.length,_)},0);pe(h,function(_,b){for(var I=_,R=_.length;R<g+2;R++)I+=" ";console.log(I+b)})}}(f._delegate._repo,l)},statsIncrementCounter:function(f,l){!function Sc(f,l){f.stats_.incrementCounter(l),function mh(f,l){f.statsToReport_[l]=!0}(f.statsReporter_,l)}(f._delegate._repo,l)},dataUpdateCount:function(f){return f._delegate._repo.dataUpdateCount},interceptServerData:function(f,l){return function Gl(f,l){f.interceptServerDataCallback_=l}(f._delegate._repo,l)},initStandalone:function DD(f){var l=f.app,h=f.url,_=f.customAuthImpl,b=f.namespace,I=f.nodeAdmin,R=void 0!==I&&I;Be(f.version);var k=new Tt.Provider("auth-internal",new Tt.ComponentContainer("database-standalone"));return k.setComponent(new Tt.Component("auth-internal",function(){return _},"PRIVATE")),{instance:new Rc(P_(l,k,void 0,h,R),l),namespace:b}}}),Ug=tc;tc.prototype.simpleListen=function(f,l){this.sendRequest("q",{p:f},l)},tc.prototype.echo=function(f,l){this.sendRequest("echo",{d:f},l)};var $_=Object.freeze({__proto__:null,DataConnection:Ug,RealTimeConnection:Ty,hijackHash:function(f){var l=tc.prototype.put;return tc.prototype.put=function(h,g,_,b){void 0!==b&&(b=f()),l.call(this,h,g,_,b)},function(){tc.prototype.put=l}},ConnectionTarget:As,queryIdentifier:function(f){return f._delegate._queryIdentifier},forceRestClient:function(f){!function L_(f){xg=f}(f)}}),gu=Rc.ServerValue;!function q_(f){Be(f.SDK_VERSION);var l=f.INTERNAL.registerComponent(new Tt.Component("database",function(h,g){var _=g.instanceIdentifier,b=h.getProvider("app").getImmediate(),I=h.getProvider("auth-internal"),R=h.getProvider("app-check-internal");return new Rc(P_(b,I,R,_),b)},"PUBLIC").setServiceProps({Reference:To,Query:Lg,Database:Rc,DataSnapshot:pu,enableLogging:rt,INTERNAL:j_,ServerValue:gu,TEST_ACCESS:$_}).setMultipleInstances(!0));f.registerVersion("@firebase/database","0.11.0"),(0,N.isNodeSdk)()&&(go.exports=l)}(Ve.default)},3:(go,ar,gt)=>{"use strict";function Ve(){for(var Ie=0,ge=0,be=arguments.length;ge<be;ge++)Ie+=arguments[ge].length;var et=Array(Ie),St=0;for(ge=0;ge<be;ge++)for(var Te=arguments[ge],Oe=0,Ke=Te.length;Oe<Ke;Oe++,St++)et[St]=Te[Oe];return et}gt.r(ar),gt.d(ar,{LogLevel:()=>oe,Logger:()=>Be,setLogLevel:()=>ae,setUserLogHandler:()=>xe});var Tt,N=[],oe=(()=>{return(Ie=oe||(oe={}))[Ie.DEBUG=0]="DEBUG",Ie[Ie.VERBOSE=1]="VERBOSE",Ie[Ie.INFO=2]="INFO",Ie[Ie.WARN=3]="WARN",Ie[Ie.ERROR=4]="ERROR",Ie[Ie.SILENT=5]="SILENT",oe;var Ie})(),Ct={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},ur=oe.INFO,En=((Tt={})[oe.DEBUG]="log",Tt[oe.VERBOSE]="log",Tt[oe.INFO]="info",Tt[oe.WARN]="warn",Tt[oe.ERROR]="error",Tt),rn=function(Ie,ge){for(var be=[],et=2;et<arguments.length;et++)be[et-2]=arguments[et];if(!(ge<Ie.logLevel)){var St=(new Date).toISOString(),Te=En[ge];if(!Te)throw new Error("Attempted to log a message with an invalid logType (value: "+ge+")");console[Te].apply(console,Ve(["["+St+"]  "+Ie.name+":"],be))}},Be=function(){function Ie(ge){this.name=ge,this._logLevel=ur,this._logHandler=rn,this._userLogHandler=null,N.push(this)}return Object.defineProperty(Ie.prototype,"logLevel",{get:function(){return this._logLevel},set:function(ge){if(!(ge in oe))throw new TypeError('Invalid value "'+ge+'" assigned to `logLevel`');this._logLevel=ge},enumerable:!1,configurable:!0}),Ie.prototype.setLogLevel=function(ge){this._logLevel="string"==typeof ge?Ct[ge]:ge},Object.defineProperty(Ie.prototype,"logHandler",{get:function(){return this._logHandler},set:function(ge){if("function"!=typeof ge)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ge},enumerable:!1,configurable:!0}),Object.defineProperty(Ie.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(ge){this._userLogHandler=ge},enumerable:!1,configurable:!0}),Ie.prototype.debug=function(){for(var ge=[],be=0;be<arguments.length;be++)ge[be]=arguments[be];this._userLogHandler&&this._userLogHandler.apply(this,Ve([this,oe.DEBUG],ge)),this._logHandler.apply(this,Ve([this,oe.DEBUG],ge))},Ie.prototype.log=function(){for(var ge=[],be=0;be<arguments.length;be++)ge[be]=arguments[be];this._userLogHandler&&this._userLogHandler.apply(this,Ve([this,oe.VERBOSE],ge)),this._logHandler.apply(this,Ve([this,oe.VERBOSE],ge))},Ie.prototype.info=function(){for(var ge=[],be=0;be<arguments.length;be++)ge[be]=arguments[be];this._userLogHandler&&this._userLogHandler.apply(this,Ve([this,oe.INFO],ge)),this._logHandler.apply(this,Ve([this,oe.INFO],ge))},Ie.prototype.warn=function(){for(var ge=[],be=0;be<arguments.length;be++)ge[be]=arguments[be];this._userLogHandler&&this._userLogHandler.apply(this,Ve([this,oe.WARN],ge)),this._logHandler.apply(this,Ve([this,oe.WARN],ge))},Ie.prototype.error=function(){for(var ge=[],be=0;be<arguments.length;be++)ge[be]=arguments[be];this._userLogHandler&&this._userLogHandler.apply(this,Ve([this,oe.ERROR],ge)),this._logHandler.apply(this,Ve([this,oe.ERROR],ge))},Ie}();function ae(Ie){N.forEach(function(ge){ge.setLogLevel(Ie)})}function xe(Ie,ge){for(var be=function(Oe){var Ke=null;ge&&ge.level&&(Ke=Ct[ge.level]),Oe.userLogHandler=null===Ie?null:function(at,rt){for(var He=[],on=2;on<arguments.length;on++)He[on-2]=arguments[on];var cr=He.map(function(Pt){if(null==Pt)return null;if("string"==typeof Pt)return Pt;if("number"==typeof Pt||"boolean"==typeof Pt)return Pt.toString();if(Pt instanceof Error)return Pt.message;try{return JSON.stringify(Pt)}catch{return null}}).filter(function(Pt){return Pt}).join(" ");rt>=(Ke??at.logLevel)&&Ie({level:oe[rt].toLowerCase(),message:cr,args:He,type:at.name})}},et=0,St=N;et<St.length;et++)be(St[et])}},492:(go,ar,gt)=>{"use strict";gt.r(ar),gt.d(ar,{CONSTANTS:()=>Tt,Deferred:()=>be,ErrorFactory:()=>Y,FirebaseError:()=>Gn,MAX_VALUE_MILLIS:()=>$i,RANDOM_FACTOR:()=>Lr,Sha1:()=>Zn,areCookiesEnabled:()=>Hi,assert:()=>N,assertionError:()=>oe,async:()=>Fr,base64:()=>En,base64Decode:()=>ae,base64Encode:()=>rn,base64urlEncodeWithoutPadding:()=>Be,calculateBackoffMillis:()=>Zu,contains:()=>jt,createMockUserToken:()=>et,createSubscribe:()=>Un,decode:()=>ee,deepCopy:()=>xe,deepEqual:()=>Cr,deepExtend:()=>Ie,errorPrefix:()=>aa,extractQuerystring:()=>Mt,getGlobal:()=>Cn,getModularInstance:()=>ca,getUA:()=>St,isAdmin:()=>Re,isBrowser:()=>Ke,isBrowserExtension:()=>at,isElectron:()=>He,isEmpty:()=>D,isIE:()=>on,isIndexedDBAvailable:()=>ji,isMobileCordova:()=>Te,isNode:()=>Oe,isNodeSdk:()=>Pt,isReactNative:()=>rt,isSafari:()=>hn,isUWP:()=>cr,isValidFormat:()=>tt,isValidTimestamp:()=>ye,issuedAtTime:()=>Le,jsonEval:()=>ce,map:()=>Mn,ordinal:()=>bl,querystring:()=>Xr,querystringDecode:()=>At,safeGet:()=>Ue,stringLength:()=>ci,stringToByteArray:()=>As,stringify:()=>pe,validateArgCount:()=>sa,validateCallback:()=>ua,validateContextObject:()=>Xu,validateIndexedDBOpenable:()=>Bi,validateNamespace:()=>Qa});var Ve=gt(582),Tt={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},N=function(B,j){if(!B)throw oe(j)},oe=function(B){return new Error("Firebase Database ("+Tt.SDK_VERSION+") INTERNAL ASSERT FAILED: "+B)},Ct=function(B){for(var j=[],G=0,O=0;O<B.length;O++){var P=B.charCodeAt(O);P<128?j[G++]=P:P<2048?(j[G++]=P>>6|192,j[G++]=63&P|128):55296==(64512&P)&&O+1<B.length&&56320==(64512&B.charCodeAt(O+1))?(P=65536+((1023&P)<<10)+(1023&B.charCodeAt(++O)),j[G++]=P>>18|240,j[G++]=P>>12&63|128,j[G++]=P>>6&63|128,j[G++]=63&P|128):(j[G++]=P>>12|224,j[G++]=P>>6&63|128,j[G++]=63&P|128)}return j},En={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(B,j){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var G=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,O=[],P=0;P<B.length;P+=3){var $=B[P],Q=P+1<B.length,ue=Q?B[P+1]:0,Ee=P+2<B.length,$e=Ee?B[P+2]:0,it=(15&ue)<<2|$e>>6,er=63&$e;Ee||(er=64,Q||(it=64)),O.push(G[$>>2],G[(3&$)<<4|ue>>4],G[it],G[er])}return O.join("")},encodeString:function(B,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(B):this.encodeByteArray(Ct(B),j)},decodeString:function(B,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(B):function(B){for(var j=[],G=0,O=0;G<B.length;){var P=B[G++];if(P<128)j[O++]=String.fromCharCode(P);else if(P>191&&P<224){var $=B[G++];j[O++]=String.fromCharCode((31&P)<<6|63&$)}else if(P>239&&P<365){var Ee=((7&P)<<18|(63&($=B[G++]))<<12|(63&(Q=B[G++]))<<6|63&B[G++])-65536;j[O++]=String.fromCharCode(55296+(Ee>>10)),j[O++]=String.fromCharCode(56320+(1023&Ee))}else{$=B[G++];var Q=B[G++];j[O++]=String.fromCharCode((15&P)<<12|(63&$)<<6|63&Q)}}return j.join("")}(this.decodeStringToByteArray(B,j))},decodeStringToByteArray:function(B,j){this.init_();for(var G=j?this.charToByteMapWebSafe_:this.charToByteMap_,O=[],P=0;P<B.length;){var $=G[B.charAt(P++)],ue=P<B.length?G[B.charAt(P)]:0,$e=++P<B.length?G[B.charAt(P)]:64,gn=++P<B.length?G[B.charAt(P)]:64;if(++P,null==$||null==ue||null==$e||null==gn)throw Error();O.push($<<2|ue>>4),64!==$e&&(O.push(ue<<4&240|$e>>2),64!==gn&&O.push($e<<6&192|gn))}return O},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}},rn=function(B){var j=Ct(B);return En.encodeByteArray(j,!0)},Be=function(B){return rn(B).replace(/\./g,"")},ae=function(B){try{return En.decodeString(B,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function xe(B){return Ie(void 0,B)}function Ie(B,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return j}for(var O in j)!j.hasOwnProperty(O)||!ge(O)||(B[O]=Ie(B[O],j[O]));return B}function ge(B){return"__proto__"!==B}var be=function(){function B(){var j=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(G,O){j.resolve=G,j.reject=O})}return B.prototype.wrapCallback=function(j){var G=this;return function(O,P){O?G.reject(O):G.resolve(P),"function"==typeof j&&(G.promise.catch(function(){}),1===j.length?j(O):j(O,P))}},B}();function et(B,j){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var O=j||"demo-project",P=B.iat||0,$=B.sub||B.user_id;if(!$)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var Q=(0,Ve.__assign)({iss:"https://securetoken.google.com/"+O,aud:O,iat:P,exp:P+3600,auth_time:P,sub:$,user_id:$,firebase:{sign_in_provider:"custom",identities:{}}},B);return[Be(JSON.stringify({alg:"none",type:"JWT"})),Be(JSON.stringify(Q)),""].join(".")}function St(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Te(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())}function Oe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ke(){return"object"==typeof self&&self.self===self}function at(){var B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function rt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function He(){return St().indexOf("Electron/")>=0}function on(){var B=St();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function cr(){return St().indexOf("MSAppHost/")>=0}function Pt(){return!0===Tt.NODE_CLIENT||!0===Tt.NODE_ADMIN}function hn(){return!Oe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ji(){return"indexedDB"in self&&null!=indexedDB}function Bi(){return new Promise(function(B,j){try{var G=!0,O="validate-browser-context-for-indexeddb-analytics-module",P=self.indexedDB.open(O);P.onsuccess=function(){P.result.close(),G||self.indexedDB.deleteDatabase(O),B(!0)},P.onupgradeneeded=function(){G=!1},P.onerror=function(){var $;j((null===($=P.error)||void 0===$?void 0:$.message)||"")}}catch($){j($)}})}function Hi(){return!(!navigator||!navigator.cookieEnabled)}function Cn(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var lr="FirebaseError",Gn=function(B){function j(G,O,P){var $=B.call(this,O)||this;return $.code=G,$.customData=P,$.name=lr,Object.setPrototypeOf($,j.prototype),Error.captureStackTrace&&Error.captureStackTrace($,Y.prototype.create),$}return(0,Ve.__extends)(j,B),j}(Error),Y=function(){function B(j,G,O){this.service=j,this.serviceName=G,this.errors=O}return B.prototype.create=function(j){for(var G=[],O=1;O<arguments.length;O++)G[O-1]=arguments[O];var P=G[0]||{},$=this.service+"/"+j,Q=this.errors[j],ue=Q?function Z(B,j){return B.replace(se,function(G,O){var P=j[O];return null!=P?String(P):"<"+O+"?>"})}(Q,P):"Error";return new Gn($,this.serviceName+": "+ue+" ("+$+").",P)},B}(),se=/\{\$([^}]+)}/g;function ce(B){return JSON.parse(B)}function pe(B){return JSON.stringify(B)}var ee=function(B){var j={},G={},O={},P="";try{var $=B.split(".");j=ce(ae($[0])||""),G=ce(ae($[1])||""),P=$[2],O=G.d||{},delete G.d}catch{}return{header:j,claims:G,data:O,signature:P}},ye=function(B){var j=ee(B).claims,G=Math.floor((new Date).getTime()/1e3),O=0,P=0;return"object"==typeof j&&(j.hasOwnProperty("nbf")?O=j.nbf:j.hasOwnProperty("iat")&&(O=j.iat),P=j.hasOwnProperty("exp")?j.exp:O+86400),!!G&&!!O&&!!P&&G>=O&&G<=P},Le=function(B){var j=ee(B).claims;return"object"==typeof j&&j.hasOwnProperty("iat")?j.iat:null},tt=function(B){var G=ee(B).claims;return!!G&&"object"==typeof G&&G.hasOwnProperty("iat")},Re=function(B){var j=ee(B).claims;return"object"==typeof j&&!0===j.admin};function jt(B,j){return Object.prototype.hasOwnProperty.call(B,j)}function Ue(B,j){if(Object.prototype.hasOwnProperty.call(B,j))return B[j]}function D(B){for(var j in B)if(Object.prototype.hasOwnProperty.call(B,j))return!1;return!0}function Mn(B,j,G){var O={};for(var P in B)Object.prototype.hasOwnProperty.call(B,P)&&(O[P]=j.call(G,B[P],P,B));return O}function Cr(B,j){if(B===j)return!0;for(var G=Object.keys(B),O=Object.keys(j),P=0,$=G;P<$.length;P++){if(!O.includes(Q=$[P]))return!1;var ue=B[Q],Ee=j[Q];if(Vn(ue)&&Vn(Ee)){if(!Cr(ue,Ee))return!1}else if(ue!==Ee)return!1}for(var $e=0,Ft=O;$e<Ft.length;$e++){var Q;if(!G.includes(Q=Ft[$e]))return!1}return!0}function Vn(B){return null!==B&&"object"==typeof B}function Xr(B){for(var j=[],G=function(Ee,$e){Array.isArray($e)?$e.forEach(function(Ft){j.push(encodeURIComponent(Ee)+"="+encodeURIComponent(Ft))}):j.push(encodeURIComponent(Ee)+"="+encodeURIComponent($e))},O=0,P=Object.entries(B);O<P.length;O++){var $=P[O];G($[0],$[1])}return j.length?"&"+j.join("&"):""}function At(B){var j={};return B.replace(/^\?/,"").split("&").forEach(function(O){if(O){var P=O.split("="),Q=P[1];j[decodeURIComponent(P[0])]=decodeURIComponent(Q)}}),j}function Mt(B){var j=B.indexOf("?");if(!j)return"";var G=B.indexOf("#",j);return B.substring(j,G>0?G:void 0)}var Zn=function(){function B(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var j=1;j<this.blockSize;++j)this.pad_[j]=0;this.reset()}return B.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},B.prototype.compress_=function(j,G){G||(G=0);var O=this.W_;if("string"==typeof j)for(var P=0;P<16;P++)O[P]=j.charCodeAt(G)<<24|j.charCodeAt(G+1)<<16|j.charCodeAt(G+2)<<8|j.charCodeAt(G+3),G+=4;else for(P=0;P<16;P++)O[P]=j[G]<<24|j[G+1]<<16|j[G+2]<<8|j[G+3],G+=4;for(P=16;P<80;P++)O[P]=4294967295&(($=O[P-3]^O[P-8]^O[P-14]^O[P-16])<<1|$>>>31);var gn,it,Q=this.chain_[0],ue=this.chain_[1],Ee=this.chain_[2],$e=this.chain_[3],Ft=this.chain_[4];for(P=0;P<80;P++){P<40?P<20?(gn=$e^ue&(Ee^$e),it=1518500249):(gn=ue^Ee^$e,it=1859775393):P<60?(gn=ue&Ee|$e&(ue|Ee),it=2400959708):(gn=ue^Ee^$e,it=3395469782);var $=(Q<<5|Q>>>27)+gn+Ft+it+O[P]&4294967295;Ft=$e,$e=Ee,Ee=4294967295&(ue<<30|ue>>>2),ue=Q,Q=$}this.chain_[0]=this.chain_[0]+Q&4294967295,this.chain_[1]=this.chain_[1]+ue&4294967295,this.chain_[2]=this.chain_[2]+Ee&4294967295,this.chain_[3]=this.chain_[3]+$e&4294967295,this.chain_[4]=this.chain_[4]+Ft&4294967295},B.prototype.update=function(j,G){if(null!=j){void 0===G&&(G=j.length);for(var O=G-this.blockSize,P=0,$=this.buf_,Q=this.inbuf_;P<G;){if(0===Q)for(;P<=O;)this.compress_(j,P),P+=this.blockSize;if("string"==typeof j){for(;P<G;)if($[Q]=j.charCodeAt(P),++P,++Q===this.blockSize){this.compress_($),Q=0;break}}else for(;P<G;)if($[Q]=j[P],++P,++Q===this.blockSize){this.compress_($),Q=0;break}}this.inbuf_=Q,this.total_+=G}},B.prototype.digest=function(){var j=[],G=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var O=this.blockSize-1;O>=56;O--)this.buf_[O]=255&G,G/=256;this.compress_(this.buf_);var P=0;for(O=0;O<5;O++)for(var $=24;$>=0;$-=8)j[P]=this.chain_[O]>>$&255,++P;return j},B}();function Un(B,j){var G=new Rn(B,j);return G.subscribe.bind(G)}var Rn=function(){function B(j,G){var O=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(function(){j(O)}).catch(function(P){O.error(P)})}return B.prototype.next=function(j){this.forEachObserver(function(G){G.next(j)})},B.prototype.error=function(j){this.forEachObserver(function(G){G.error(j)}),this.close(j)},B.prototype.complete=function(){this.forEachObserver(function(j){j.complete()}),this.close()},B.prototype.subscribe=function(j,G,O){var $,P=this;if(void 0===j&&void 0===G&&void 0===O)throw new Error("Missing Observer.");$=function Jt(B,j){if("object"!=typeof B||null===B)return!1;for(var G=0,O=j;G<O.length;G++){var P=O[G];if(P in B&&"function"==typeof B[P])return!0}return!1}(j,["next","error","complete"])?j:{next:j,error:G,complete:O},void 0===$.next&&($.next=Dr),void 0===$.error&&($.error=Dr),void 0===$.complete&&($.complete=Dr);var Q=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{P.finalError?$.error(P.finalError):$.complete()}catch{}}),this.observers.push($),Q},B.prototype.unsubscribeOne=function(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},B.prototype.forEachObserver=function(j){if(!this.finalized)for(var G=0;G<this.observers.length;G++)this.sendOne(G,j)},B.prototype.sendOne=function(j,G){var O=this;this.task.then(function(){if(void 0!==O.observers&&void 0!==O.observers[j])try{G(O.observers[j])}catch(P){typeof console<"u"&&console.error&&console.error(P)}})},B.prototype.close=function(j){var G=this;this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(function(){G.observers=void 0,G.onNoObservers=void 0}))},B}();function Fr(B,j){return function(){for(var G=[],O=0;O<arguments.length;O++)G[O]=arguments[O];Promise.resolve(!0).then(function(){B.apply(void 0,G)}).catch(function(P){j&&j(P)})}}function Dr(){}var sa=function(B,j,G,O){var P;if(O<j?P="at least "+j:O>G&&(P=0===G?"none":"no more than "+G),P)throw new Error(B+" failed: Was called with "+O+(1===O?" argument.":" arguments.")+" Expects "+P+".")};function aa(B,j){return B+" failed: "+j+" argument "}function Qa(B,j,G){if((!G||j)&&"string"!=typeof j)throw new Error(aa(B,"namespace")+"must be a valid firebase namespace.")}function ua(B,j,G,O){if((!O||G)&&"function"!=typeof G)throw new Error(aa(B,j)+"must be a valid function.")}function Xu(B,j,G,O){if((!O||G)&&("object"!=typeof G||null===G))throw new Error(aa(B,j)+"must be a valid context object.")}var As=function(B){for(var j=[],G=0,O=0;O<B.length;O++){var P=B.charCodeAt(O);if(P>=55296&&P<=56319){var $=P-55296;O++,N(O<B.length,"Surrogate pair missing trail surrogate."),P=65536+($<<10)+(B.charCodeAt(O)-56320)}P<128?j[G++]=P:P<2048?(j[G++]=P>>6|192,j[G++]=63&P|128):P<65536?(j[G++]=P>>12|224,j[G++]=P>>6&63|128,j[G++]=63&P|128):(j[G++]=P>>18|240,j[G++]=P>>12&63|128,j[G++]=P>>6&63|128,j[G++]=63&P|128)}return j},ci=function(B){for(var j=0,G=0;G<B.length;G++){var O=B.charCodeAt(G);O<128?j++:O<2048?j+=2:O>=55296&&O<=56319?(j+=4,G++):j+=3}return j},Ju=1e3,zn=2,$i=144e5,Lr=.5;function Zu(B,j,G){void 0===j&&(j=Ju),void 0===G&&(G=zn);var O=j*Math.pow(G,B),P=Math.round(Lr*O*(Math.random()-.5)*2);return Math.min($i,O+P)}function bl(B){return Number.isFinite(B)?B+function El(B){var j=(B=Math.abs(B))%100;if(j>=10&&j<=20)return"th";var G=B%10;return 1===G?"st":2===G?"nd":3===G?"rd":"th"}(B):""+B}function ca(B){return B&&B._delegate?B._delegate:B}},571:(go,ar,gt)=>{"use strict";function Ve(e){return"function"==typeof e}function Tt(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const N=Tt(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function oe(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class Ct{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(Ve(r))try{r()}catch(o){t=o instanceof N?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{rn(o)}catch(a){t=t??[],a instanceof N?t=[...t,...a.errors]:t.push(a)}}if(t)throw new N(t)}}add(t){var n;if(t&&t!==this)if(this.closed)rn(t);else{if(t instanceof Ct){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&oe(n,t)}remove(t){const{_finalizers:n}=this;n&&oe(n,t),t instanceof Ct&&t._removeParent(this)}}Ct.EMPTY=(()=>{const e=new Ct;return e.closed=!0,e})();const ur=Ct.EMPTY;function En(e){return e instanceof Ct||e&&"closed"in e&&Ve(e.remove)&&Ve(e.add)&&Ve(e.unsubscribe)}function rn(e){Ve(e)?e():e.unsubscribe()}const Be={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ae={setTimeout(e,t,...n){const{delegate:r}=ae;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=ae;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function xe(e){ae.setTimeout(()=>{const{onUnhandledError:t}=Be;if(!t)throw e;t(e)})}function Ie(){}const ge=St("C",void 0,void 0);function St(e,t,n){return{kind:e,value:t,error:n}}let Te=null;function Oe(e){if(Be.useDeprecatedSynchronousErrorHandling){const t=!Te;if(t&&(Te={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=Te;if(Te=null,n)throw r}}else e()}class at extends Ct{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,En(t)&&t.add(this)):this.destination=Bi}static create(t,n,r){return new cr(t,n,r)}next(t){this.isStopped?ji(function et(e){return St("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?ji(function be(e){return St("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?ji(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const rt=Function.prototype.bind;function He(e,t){return rt.call(e,t)}class on{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Pt(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Pt(r)}else Pt(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Pt(n)}}}class cr extends at{constructor(t,n,r){let i;if(super(),Ve(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Be.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&He(t.next,o),error:t.error&&He(t.error,o),complete:t.complete&&He(t.complete,o)}):i=t}this.destination=new on(i)}}function Pt(e){Be.useDeprecatedSynchronousErrorHandling?function Ke(e){Be.useDeprecatedSynchronousErrorHandling&&Te&&(Te.errorThrown=!0,Te.error=e)}(e):xe(e)}function ji(e,t){const{onStoppedNotification:n}=Be;n&&ae.setTimeout(()=>n(e,t))}const Bi={closed:!0,next:Ie,error:function hn(e){throw e},complete:Ie},Hi="function"==typeof Symbol&&Symbol.observable||"@@observable";function Cn(e){return e}function Gn(e){return 0===e.length?Cn:1===e.length?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}let Y=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function ce(e){return e&&e instanceof at||function se(e){return e&&Ve(e.next)&&Ve(e.error)&&Ve(e.complete)}(e)&&En(e)}(n)?n:new cr(n,r,i);return Oe(()=>{const{operator:a,source:c}=this;o.add(a?a.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Z(r))((i,o)=>{const a=new cr({next:c=>{try{n(c)}catch(d){o(d),a.unsubscribe()}},error:o,complete:i});this.subscribe(a)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Hi](){return this}pipe(...n){return Gn(n)(this)}toPromise(n){return new(n=Z(n))((r,i)=>{let o;this.subscribe(a=>o=a,a=>i(a),()=>r(o))})}}return e.create=t=>new e(t),e})();function Z(e){var t;return null!==(t=e??Be.Promise)&&void 0!==t?t:Promise}const pe=Tt(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ee=(()=>{class e extends Y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new ye(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new pe}next(n){Oe(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Oe(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Oe(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?ur:(this.currentObservers=null,o.push(n),new Ct(()=>{this.currentObservers=null,oe(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new Y;return n.source=this,n}}return e.create=(t,n)=>new ye(t,n),e})();class ye extends ee{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:ur}}function Le(e){return Ve(e?.lift)}function tt(e){return t=>{if(Le(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Re(e,t,n,r,i){return new jt(e,t,n,r,i)}class jt extends at{constructor(t,n,r,i,o,a){super(t),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=n?function(c){try{n(c)}catch(d){t.error(d)}}:super._next,this._error=i?function(c){try{i(c)}catch(d){t.error(d)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Ue(e,t){return tt((n,r)=>{let i=0;n.subscribe(Re(r,o=>{r.next(e.call(t,o,i++))}))})}var D=gt(582);const Mn=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function Cr(e){return Ve(e?.then)}function Vn(e){return Ve(e[Hi])}function Xr(e){return Symbol.asyncIterator&&Ve(e?.[Symbol.asyncIterator])}function At(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Zn=function Mt(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Un(e){return Ve(e?.[Zn])}function Rn(e){return(0,D.__asyncGenerator)(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:i}=yield(0,D.__await)(n.read());if(i)return yield(0,D.__await)(void 0);yield yield(0,D.__await)(r)}}finally{n.releaseLock()}})}function Fr(e){return Ve(e?.getReader)}function Jt(e){if(e instanceof Y)return e;if(null!=e){if(Vn(e))return function Dr(e){return new Y(t=>{const n=e[Hi]();if(Ve(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Mn(e))return function sa(e){return new Y(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(Cr(e))return function aa(e){return new Y(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,xe)})}(e);if(Xr(e))return ua(e);if(Un(e))return function Qa(e){return new Y(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(Fr(e))return function Xu(e){return ua(Rn(e))}(e)}throw At(e)}function ua(e){return new Y(t=>{(function As(e,t){var n,r,i,o;return(0,D.__awaiter)(this,void 0,void 0,function*(){try{for(n=(0,D.__asyncValues)(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(a){i={error:a}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function ci(e,t,n,r=0,i=!1){const o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function zn(e,t,n=1/0){return Ve(t)?zn((r,i)=>Ue((o,a)=>t(r,o,i,a))(Jt(e(r,i))),n):("number"==typeof t&&(n=t),tt((r,i)=>function Ju(e,t,n,r,i,o,a,c){const d=[];let m=0,v=0,w=!1;const C=()=>{w&&!d.length&&!m&&t.complete()},S=x=>m<r?A(x):d.push(x),A=x=>{o&&t.next(x),m++;let V=!1;Jt(n(x,v++)).subscribe(Re(t,H=>{i?.(H),o?S(H):t.next(H)},()=>{V=!0},void 0,()=>{if(V)try{for(m--;d.length&&m<r;){const H=d.shift();a?ci(t,a,()=>A(H)):A(H)}C()}catch(H){t.error(H)}}))};return e.subscribe(Re(t,S,()=>{w=!0,C()})),()=>{c?.()}}(r,i,e,n)))}function $i(e=1/0){return zn(Cn,e)}const Lr=new Y(e=>e.complete());function ca(e){return e[e.length-1]}function B(e){return Ve(ca(e))?e.pop():void 0}function j(e){return function El(e){return e&&Ve(e.schedule)}(ca(e))?e.pop():void 0}function O(e,t=0){return tt((n,r)=>{n.subscribe(Re(r,i=>ci(r,e,()=>r.next(i),t),()=>ci(r,e,()=>r.complete(),t),i=>ci(r,e,()=>r.error(i),t)))})}function P(e,t=0){return tt((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function $e(e,t){if(!e)throw new Error("Iterable cannot be null");return new Y(n=>{ci(n,t,()=>{const r=e[Symbol.asyncIterator]();ci(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function it(e,t){return t?function gn(e,t){if(null!=e){if(Vn(e))return function $(e,t){return Jt(e).pipe(P(t),O(t))}(e,t);if(Mn(e))return function ue(e,t){return new Y(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(Cr(e))return function Q(e,t){return Jt(e).pipe(P(t),O(t))}(e,t);if(Xr(e))return $e(e,t);if(Un(e))return function Ee(e,t){return new Y(n=>{let r;return ci(n,t,()=>{r=e[Zn](),ci(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(a){return void n.error(a)}o?n.complete():n.next(i)},0,!0)}),()=>Ve(r?.return)&&r.return()})}(e,t);if(Fr(e))return function Ft(e,t){return $e(Rn(e),t)}(e,t)}throw At(e)}(e,t):Jt(e)}function Vo(e,t,...n){if(!0===t)return void e();if(!1===t)return;const r=new cr({next:()=>{r.unsubscribe(),e()}});return Jt(t(...n)).subscribe(r)}function yt(e){for(let t in e)if(e[t]===yt)return t;throw Error("Could not find renamed property on target object.")}function Gi(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Dn(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Dn).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function zp(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const Cl=yt({__forward_ref__:yt});function Zt(e){return e.__forward_ref__=Zt,e.toString=function(){return Dn(this())},e}function ut(e){return Wp(e)?e():e}function Wp(e){return"function"==typeof e&&e.hasOwnProperty(Cl)&&e.__forward_ref__===Zt}function Kp(e){return e&&!!e.\u0275providers}const Dy="https://g.co/ng/security#xss";class _e extends Error{constructor(t,n){super(Dl(t,n)),this.code=t}}function Dl(e,t){return`NG0${Math.abs(e)}${t?": "+t.trim():""}`}function bt(e){return"string"==typeof e?e:null==e?"":String(e)}function Il(e,t){throw new _e(-201,!1)}function Ti(e,t){null==e&&function an(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function we(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function mo(e){return{providers:e.providers||[],imports:e.imports||[]}}function ec(e){return Sy(e,Tl)||Sy(e,My)}function Sy(e,t){return e.hasOwnProperty(t)?e[t]:null}function Ay(e){return e&&(e.hasOwnProperty(Rs)||e.hasOwnProperty(Sl))?e[Rs]:null}const Tl=yt({\u0275prov:yt}),Rs=yt({\u0275inj:yt}),My=yt({ngInjectableDef:yt}),Sl=yt({ngInjectorDef:yt});var ct=(()=>((ct=ct||{})[ct.Default=0]="Default",ct[ct.Host=1]="Host",ct[ct.Self=2]="Self",ct[ct.SkipSelf=4]="SkipSelf",ct[ct.Optional=8]="Optional",ct))();let Qp;function yo(e){const t=Qp;return Qp=e,t}function Ny(e,t,n){const r=ec(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&ct.Optional?null:void 0!==t?t:void Il(Dn(e))}const Tn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),fa={},lh="__NG_DI_FLAG__",zi="ngTempTokenPath",fh="ngTokenPath",Uo=/\n/gm,dC="\u0275",os="__source";let Al;function ha(e){const t=Al;return Al=e,t}function Xp(e,t=ct.Default){if(void 0===Al)throw new _e(-203,!1);return null===Al?Ny(e,void 0,t):Al.get(e,t&ct.Optional?null:void 0,t)}function Ye(e,t=ct.Default){return(function Ry(){return Qp}()||Xp)(ut(e),t)}function Nt(e,t=ct.Default){return Ye(e,Ml(t))}function Ml(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function da(e){const t=[];for(let n=0;n<e.length;n++){const r=ut(e[n]);if(Array.isArray(r)){if(0===r.length)throw new _e(900,!1);let i,o=ct.Default;for(let a=0;a<r.length;a++){const c=r[a],d=ky(c);"number"==typeof d?-1===d?i=c.token:o|=d:i=c}t.push(Ye(i,o))}else t.push(Ye(r))}return t}function nc(e,t){return e[lh]=t,e.prototype[lh]=t,e}function ky(e){return e[lh]}function Ns(e){return{toString:e}.toString()}var Gt=(()=>((Gt=Gt||{})[Gt.OnPush=0]="OnPush",Gt[Gt.Default=1]="Default",Gt))(),ss=(()=>{return(e=ss||(ss={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",ss;var e})();const ks={},Kt=[],rc=yt({\u0275cmp:yt}),pa=yt({\u0275dir:yt}),ic=yt({\u0275pipe:yt}),oc=yt({\u0275mod:yt}),st=yt({\u0275fac:yt}),Rl=yt({__NG_ELEMENT_ID__:yt});let Nl=0;function Jr(e){return Ns(()=>{const t=ac(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Gt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,data:e.data||{},encapsulation:e.encapsulation||ss.Emulated,id:"c"+Nl++,styles:e.styles||Kt,_:null,schemas:e.schemas||null,tView:null};uc(n);const r=e.dependencies;return n.directiveDefs=dh(r,!1),n.pipeDefs=dh(r,!0),n})}function Zp(e){return un(e)||Vr(e)}function mC(e){return null!==e}function Wi(e){return Ns(()=>({type:e.type,bootstrap:e.bootstrap||Kt,declarations:e.declarations||Kt,imports:e.imports||Kt,exports:e.exports||Kt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function hh(e,t){if(null==e)return ks;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}function pt(e){return Ns(()=>{const t=ac(e);return uc(t),t})}function un(e){return e[rc]||null}function Vr(e){return e[pa]||null}function fi(e){return e[ic]||null}function Ir(e,t){const n=e[oc]||null;if(!n&&!0===t)throw new Error(`Type ${Dn(e)} does not have '\u0275mod' property.`);return n}function ac(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,exportAs:e.exportAs||null,standalone:!0===e.standalone,selectors:e.selectors||Kt,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:hh(e.inputs,t),outputs:hh(e.outputs)}}function uc(e){e.features?.forEach(t=>t(e))}function dh(e,t){if(!e)return null;const n=t?fi:Zp;return()=>("function"==typeof e?e():e).map(r=>n(r)).filter(mC)}const jo=0,Fe=1,kt=2,Pn=3,Bo=4,Xa=5,Zr=6,ga=7,Wn=8,cc=9,ph=10,Dt=11,gh=12,lc=13,xy=14,fc=15,fr=16,as=17,ma=18,_o=19,kl=20,eg=21,Sn=22,tg=1,Oy=2,mh=7,hi=8,va=9,Ur=10;function Ki(e){return Array.isArray(e)&&"object"==typeof e[tg]}function wo(e){return Array.isArray(e)&&!0===e[tg]}function hc(e){return 0!=(4&e.flags)}function Ja(e){return e.componentOffset>-1}function Ho(e){return 1==(1&e.flags)}function $o(e){return!!e.template}function vC(e){return 0!=(256&e[kt])}function Eo(e,t){return e.hasOwnProperty(st)?e[st]:null}class Uy{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function di(){return jy}function jy(e){return e.type.prototype.ngOnChanges&&(e.setInput=DC),CC}function CC(){const e=Hy(this),t=e?.current;if(t){const n=e.previous;if(n===ks)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function DC(e,t,n,r){const i=this.declaredInputs[n],o=Hy(e)||function IC(e,t){return e[By]=t}(e,{previous:ks,current:null}),a=o.current||(o.current={}),c=o.previous,d=c[i];a[i]=new Uy(d&&d.currentValue,t,c===ks),e[r]=t}di.ngInherit=!0;const By="__ngSimpleChanges__";function Hy(e){return e[By]||null}const Qi=function(e,t,n){};function jr(e){for(;Array.isArray(e);)e=e[jo];return e}function bh(e,t){return jr(t[e])}function Yi(e,t){return jr(t[e.index])}function Ch(e,t){return e.data[t]}function Br(e,t){const n=t[e];return Ki(n)?n:n[jo]}function pc(e){return 64==(64&e[kt])}function xs(e,t){return null==t?null:e[t]}function Wy(e){e[ma]=0}function og(e,t){e[Xa]+=t;let n=e,r=e[Pn];for(;null!==r&&(1===t&&1===n[Xa]||-1===t&&0===n[Xa]);)r[Xa]+=t,n=r,r=r[Pn]}const _t={lFrame:Ps(null),bindingsEnabled:!0};function sg(){return _t.bindingsEnabled}function le(){return _t.lFrame.lView}function Qt(){return _t.lFrame.tView}function vn(e){return _t.lFrame.contextLView=e,e[Wn]}function mn(e){return _t.lFrame.contextLView=null,e}function Hr(){let e=Ky();for(;null!==e&&64===e.type;)e=e.parent;return e}function Ky(){return _t.lFrame.currentTNode}function us(e,t){const n=_t.lFrame;n.currentTNode=e,n.isParent=t}function ug(){return _t.lFrame.isParent}function cg(){_t.lFrame.isParent=!1}function tu(){return _t.lFrame.bindingIndex++}function xC(e,t){const n=_t.lFrame;n.bindingIndex=n.bindingRootIndex=e,Ol(t)}function Ol(e){_t.lFrame.currentDirectiveIndex=e}function lg(e){_t.lFrame.currentQueryIndex=e}function e_(e){const t=e[Fe];return 2===t.type?t.declTNode:1===t.type?e[Zr]:null}function Os(e,t,n){if(n&ct.SkipSelf){let i=t,o=e;for(;!(i=i.parent,null!==i||n&ct.Host||(i=e_(o),null===i||(o=o[fc],10&i.type))););if(null===i)return!1;t=i,e=o}const r=_t.lFrame=fg();return r.currentTNode=t,r.lView=e,!0}function Sh(e){const t=fg(),n=e[Fe];_t.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function fg(){const e=_t.lFrame,t=null===e?null:e.child;return null===t?Ps(e):t}function Ps(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function Pl(){const e=_t.lFrame;return _t.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Fl=Pl;function hg(){const e=Pl();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function ti(){return _t.lFrame.selectedIndex}function Fs(e){_t.lFrame.selectedIndex=e}function Fn(){const e=_t.lFrame;return Ch(e.tView,e.selectedIndex)}function Ah(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const o=e.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:c,ngAfterViewInit:d,ngAfterViewChecked:m,ngOnDestroy:v}=o;a&&(e.contentHooks??(e.contentHooks=[])).push(-n,a),c&&((e.contentHooks??(e.contentHooks=[])).push(n,c),(e.contentCheckHooks??(e.contentCheckHooks=[])).push(n,c)),d&&(e.viewHooks??(e.viewHooks=[])).push(-n,d),m&&((e.viewHooks??(e.viewHooks=[])).push(n,m),(e.viewCheckHooks??(e.viewCheckHooks=[])).push(n,m)),null!=v&&(e.destroyHooks??(e.destroyHooks=[])).push(n,v)}}function Mh(e,t,n){t_(e,t,3,n)}function Vl(e,t,n,r){(3&e[kt])===n&&t_(e,t,n,r)}function gc(e,t){let n=e[kt];(3&n)===t&&(n&=2047,n+=1,e[kt]=n)}function t_(e,t,n,r){const o=r??-1,a=t.length-1;let c=0;for(let d=void 0!==r?65535&e[ma]:0;d<a;d++)if("number"==typeof t[d+1]){if(c=t[d],null!=r&&c>=r)break}else t[d]<0&&(e[ma]+=65536),(c<o||-1==o)&&(mc(e,n,t,d),e[ma]=(4294901760&e[ma])+d+2),d++}function mc(e,t,n,r){const i=n[r]<0,o=n[r+1],c=e[i?-n[r]:n[r]];if(i){if(e[kt]>>11<e[ma]>>16&&(3&e[kt])===t){e[kt]+=2048,Qi(4,c,o);try{o.call(c)}finally{Qi(5,c,o)}}}else{Qi(4,c,o);try{o.call(c)}finally{Qi(5,c,o)}}}const nu=-1;class vc{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function vg(e,t,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],a=n[r++],c=n[r++];e.setAttribute(t,a,c,o)}else{const o=i,a=n[++r];o_(o)?e.setProperty(t,o,a):e.setAttribute(t,o,a),r++}}return r}function i_(e){return 3===e||4===e||6===e}function o_(e){return 64===e.charCodeAt(0)}function Ul(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||s_(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function s_(e,t,n,r,i){let o=0,a=e.length;if(-1===t)a=-1;else for(;o<e.length;){const c=e[o++];if("number"==typeof c){if(c===t){a=-1;break}if(c>t){a=o-1;break}}}for(;o<e.length;){const c=e[o];if("number"==typeof c)break;if(c===n){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==a&&(e.splice(a,0,t),o=a+1),e.splice(o++,0,n),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}function a_(e){return e!==nu}function jl(e){return 32767&e}function Nh(e,t){let n=function jC(e){return e>>16}(e),r=t;for(;n>0;)r=r[fc],n--;return r}let kh=!0;function _c(e){const t=kh;return kh=e,t}const xh=255,Bl=5;let ru=0;const Do={};function Oh(e,t){const n=yg(e,t);if(-1!==n)return n;const r=t[Fe];r.firstCreatePass&&(e.injectorIndex=t.length,wc(r.data,e),wc(t,null),wc(r.blueprint,null));const i=_g(e,t),o=e.injectorIndex;if(a_(i)){const a=jl(i),c=Nh(i,t),d=c[Fe].data;for(let m=0;m<8;m++)t[o+m]=c[a+m]|d[a+m]}return t[o+8]=i,o}function wc(e,t){e.push(0,0,0,0,0,0,0,0,t)}function yg(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function _g(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){if(r=Cc(i),null===r)return nu;if(n++,i=i[fc],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return nu}function iu(e,t,n){!function c_(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Rl)&&(r=n[Rl]),null==r&&(r=n[Rl]=ru++);const i=r&xh;t.data[e+(i>>Bl)]|=1<<i}(e,t,n)}function l_(e,t,n){if(n&ct.Optional||void 0!==e)return e;Il()}function f_(e,t,n,r){if(n&ct.Optional&&void 0===r&&(r=null),!(n&(ct.Self|ct.Host))){const i=e[cc],o=yo(void 0);try{return i?i.get(t,r,n&ct.Optional):Ny(t,r,n&ct.Optional)}finally{yo(o)}}return l_(r,0,n)}function h_(e,t,n,r=ct.Default,i){if(null!==e){if(1024&t[kt]){const a=function ql(e,t,n,r,i){let o=e,a=t;for(;null!==o&&null!==a&&1024&a[kt]&&!(256&a[kt]);){const c=Ph(o,a,n,r|ct.Self,Do);if(c!==Do)return c;let d=o.parent;if(!d){const m=a[eg];if(m){const v=m.get(n,Do,r);if(v!==Do)return v}d=Cc(a),a=a[fc]}o=d}return i}(e,t,n,r,Do);if(a!==Do)return a}const o=Ph(e,t,n,r,Do);if(o!==Do)return o}return f_(t,n,r,i)}function Ph(e,t,n,r,i){const o=function $l(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Rl)?e[Rl]:void 0;return"number"==typeof t?t>=0?t&xh:d_:t}(n);if("function"==typeof o){if(!Os(t,e,r))return r&ct.Host?l_(i,0,r):f_(t,n,r,i);try{const a=o(r);if(null!=a||r&ct.Optional)return a;Il()}finally{Fl()}}else if("number"==typeof o){let a=null,c=yg(e,t),d=nu,m=r&ct.Host?t[fr][Zr]:null;for((-1===c||r&ct.SkipSelf)&&(d=-1===c?_g(e,t):t[c+8],d!==nu&&bc(r,!1)?(a=t[Fe],c=jl(d),t=Nh(d,t)):c=-1);-1!==c;){const v=t[Fe];if(qo(o,c,v.data)){const w=Fh(c,t,n,a,r,m);if(w!==Do)return w}d=t[c+8],d!==nu&&bc(r,t[Fe].data[c+8]===m)&&qo(o,c,t)?(a=v,c=jl(d),t=Nh(d,t)):c=-1}}return i}function Fh(e,t,n,r,i,o){const a=t[Fe],c=a.data[e+8],v=function Hl(e,t,n,r,i){const o=e.providerIndexes,a=t.data,c=1048575&o,d=e.directiveStart,v=o>>20,C=i?c+v:e.directiveEnd;for(let S=r?c:c+v;S<C;S++){const A=a[S];if(S<d&&n===A||S>=d&&A.type===n)return S}if(i){const S=a[d];if(S&&$o(S)&&S.type===n)return d}return null}(c,a,n,null==r?Ja(c)&&kh:r!=a&&0!=(3&c.type),i&ct.Host&&o===c);return null!==v?ou(t,a,v,c):Do}function ou(e,t,n,r){let i=e[n];const o=t.data;if(function n_(e){return e instanceof vc}(i)){const a=i;a.resolving&&function oC(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new _e(-200,`Circular dependency in DI detected for ${e}${n}`)}(function sn(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():bt(e)}(o[n]));const c=_c(a.canSeeViewProviders);a.resolving=!0;const d=a.injectImpl?yo(a.injectImpl):null;Os(e,r,ct.Default);try{i=e[n]=a.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&function dg(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){const a=jy(t);(n.preOrderHooks??(n.preOrderHooks=[])).push(e,a),(n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(e,a)}i&&(n.preOrderHooks??(n.preOrderHooks=[])).push(0-e,i),o&&((n.preOrderHooks??(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(e,o))}(n,o[n],t)}finally{null!==d&&yo(d),_c(c),a.resolving=!1,Fl()}}return i}function qo(e,t,n){return!!(n[t+(e>>Bl)]&1<<e)}function bc(e,t){return!(e&ct.Self||e&ct.Host&&t)}class Ec{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return h_(this._tNode,this._lView,t,Ml(r),n)}}function d_(){return new Ec(Hr(),le())}function hr(e){return Ns(()=>{const t=e.prototype.constructor,n=t[st]||bg(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const o=i[st]||bg(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function bg(e){return Wp(e)?()=>{const t=bg(ut(e));return t&&t()}:Eo(e)}function Cc(e){const t=e[Fe],n=t.type;return 2===n?t.declTNode:1===n?e[Zr]:null}const su="__parameters__";function ba(e,t,n){return Ns(()=>{const r=function Ic(e){return function(...n){if(e){const r=e(...n);for(const i in r)this[i]=r[i]}}}(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;const a=new i(...o);return c.annotation=a,c;function c(d,m,v){const w=d.hasOwnProperty(su)?d[su]:Object.defineProperty(d,su,{value:[]})[su];for(;w.length<=v;)w.push(null);return(w[v]=w[v]||[]).push(a),d}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class Ge{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=we({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function au(e,t){e.forEach(n=>Array.isArray(n)?au(n,t):t(n))}function m_(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Wl(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Xi(e,t,n){let r=Sc(e,t);return r>=0?e[1|r]=n:(r=~r,function Cg(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function Dg(e,t){const n=Sc(e,t);if(n>=0)return e[1|n]}function Sc(e,t){return function Ls(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){const o=r+(i-r>>1),a=e[o<<n];if(t===a)return o<<n;a>t?i=o:r=o+1}return~(i<<n)}(e,t,1)}const Ea=nc(ba("Optional"),8),uu=nc(ba("SkipSelf"),4);var Ai=(()=>((Ai=Ai||{})[Ai.Important=1]="Important",Ai[Ai.DashCase=2]="DashCase",Ai))();const Ng=new Map;let sD=0;const Ji="__ngContext__";function ri(e,t){Ki(t)?(e[Ji]=t[kl],function uD(e){Ng.set(e[kl],e)}(t)):e[Ji]=t}let Og;function Pg(e,t){return Og(e,t)}function Jl(e){const t=e[Pn];return wo(t)?t[Pn]:t}function Fg(e){return Lg(e[lc])}function pu(e){return Lg(e[Bo])}function Lg(e){for(;null!==e&&!wo(e);)e=e[Bo];return e}function To(e,t,n,r,i){if(null!=r){let o,a=!1;wo(r)?o=r:Ki(r)&&(a=!0,r=r[jo]);const c=jr(r);0===e&&null!==n?null==i?q_(t,n,c):gu(t,n,c,i||null,!0):1===e&&null!==n?gu(t,n,c,i||null,!0):2===e?function Me(e,t,n){const r=g(e,t);r&&function l(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}(t,c,a):3===e&&t.destroyNode(c),null!=o&&function hs(e,t,n,r,i){const o=n[mh];o!==jr(n)&&To(t,e,r,o,i);for(let c=Ur;c<n.length;c++){const d=n[c];Qe(d[Fe],d,e,t,r,o)}}(t,e,o,n,i)}}function Vg(e,t,n){return e.createElement(t,n)}function j_(e,t){const n=e[va],r=n.indexOf(t),i=t[Pn];512&t[kt]&&(t[kt]&=-513,og(i,-1)),n.splice(r,1)}function Ug(e,t){if(e.length<=Ur)return;const n=Ur+t,r=e[n];if(r){const i=r[as];null!==i&&i!==e&&j_(i,r),t>0&&(e[n-1][Bo]=r[Bo]);const o=Wl(e,Ur+t);!function _D(e,t){Qe(e,t,t[Dt],2,null,null),t[jo]=null,t[Zr]=null}(r[Fe],r);const a=o[_o];null!==a&&a.detachView(o[Fe]),r[Pn]=null,r[Bo]=null,r[kt]&=-65}return r}function B_(e,t){if(!(128&t[kt])){const n=t[Dt];n.destroyNode&&Qe(e,t,n,3,null,null),function ED(e){let t=e[lc];if(!t)return jg(e[Fe],e);for(;t;){let n=null;if(Ki(t))n=t[lc];else{const r=t[Ur];r&&(n=r)}if(!n){for(;t&&!t[Bo]&&t!==e;)Ki(t)&&jg(t[Fe],t),t=t[Pn];null===t&&(t=e),Ki(t)&&jg(t[Fe],t),n=t&&t[Bo]}t=n}}(t)}}function jg(e,t){if(!(128&t[kt])){t[kt]&=-65,t[kt]|=128,function TD(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof vc)){const o=n[r+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){const c=i[o[a]],d=o[a+1];Qi(4,c,d);try{d.call(c)}finally{Qi(5,c,d)}}else{Qi(4,i,o);try{o.call(i)}finally{Qi(5,i,o)}}}}}(e,t),function ID(e,t){const n=e.cleanup,r=t[ga];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const a=n[o+3];a>=0?r[i=a]():r[i=-a].unsubscribe(),o+=2}else{const a=r[i=n[o+1]];n[o].call(a)}if(null!==r){for(let o=i+1;o<r.length;o++)(0,r[o])();t[ga]=null}}(e,t),1===t[Fe].type&&t[Dt].destroy();const n=t[as];if(null!==n&&wo(t[Pn])){n!==t[Pn]&&j_(n,t);const r=t[_o];null!==r&&r.detachView(e)}!function cD(e){Ng.delete(e[kl])}(t)}}function H_(e,t,n){return function $_(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[jo];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=e.data[r.directiveStart+i];if(o===ss.None||o===ss.Emulated)return null}return Yi(r,n)}}(e,t.parent,n)}function gu(e,t,n,r,i){e.insertBefore(t,n,r,i)}function q_(e,t,n){e.appendChild(t,n)}function f(e,t,n,r,i){null!==r?gu(e,t,n,r,i):q_(e,t,n)}function g(e,t){return e.parentNode(t)}let k,AD,W_,R=function I(e,t,n){return 40&e.type?Yi(e,n):null};function U(e,t,n,r){const i=H_(e,r,t),o=t[Dt],c=function b(e,t,n){return R(e,t,n)}(r.parent||t[Zr],r,t);if(null!=i)if(Array.isArray(n))for(let d=0;d<n.length;d++)f(o,i,n[d],c,!1);else f(o,i,n,c,!1);void 0!==k&&k(o,r,t,n,i)}function W(e,t){if(null!==t){const n=t.type;if(3&n)return Yi(t,e);if(4&n)return me(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return W(e,r);{const i=e[t.index];return wo(i)?me(-1,i):jr(i)}}if(32&n)return Pg(t,e)()||jr(e[t.index]);{const r=re(e,t);return null!==r?Array.isArray(r)?r[0]:W(Jl(e[fr]),r):W(e,t.next)}}return null}function re(e,t){return null!==t?e[fr][Zr].projection[t.projection]:null}function me(e,t){const n=Ur+e+1;if(n<t.length){const r=t[n],i=r[Fe].firstChild;if(null!==i)return W(r,i)}return t[mh]}function lt(e,t,n,r,i,o,a){for(;null!=n;){const c=r[n.index],d=n.type;if(a&&0===t&&(c&&ri(jr(c),r),n.flags|=2),32!=(32&n.flags))if(8&d)lt(e,t,n.child,r,i,o,!1),To(t,e,i,c,o);else if(32&d){const m=Pg(n,r);let v;for(;v=m();)To(t,e,i,v,o);To(t,e,i,c,o)}else 16&d?tr(e,t,r,n,i,o):To(t,e,i,c,o);n=a?n.projectionNext:n.next}}function Qe(e,t,n,r,i,o){lt(n,r,e.firstChild,t,i,o,!1)}function tr(e,t,n,r,i,o){const a=n[fr],d=a[Zr].projection[r.projection];if(Array.isArray(d))for(let m=0;m<d.length;m++)To(t,e,i,d[m],o);else lt(e,t,d,a[Pn],i,o,!0)}function Kh(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function G_(e,t,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&vg(e,t,r),null!==i&&Kh(e,t,i),null!==o&&function Bg(e,t,n){e.setAttribute(t,"style",n)}(e,t,o)}function hk(e){return function MD(){if(void 0===W_&&(W_=null,Tn.trustedTypes))try{W_=Tn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return W_}()?.createScriptURL(e)||e}class dk{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Dy})`}}function Nc(e){return e instanceof dk?e.changingThisBreaksApplicationSecurity:e}function Hg(e,t){const n=function Gq(e){return e instanceof dk&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${Dy})`)}return n===t}const Qq=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Tr=(()=>((Tr=Tr||{})[Tr.NONE=0]="NONE",Tr[Tr.HTML=1]="HTML",Tr[Tr.STYLE=2]="STYLE",Tr[Tr.SCRIPT=3]="SCRIPT",Tr[Tr.URL=4]="URL",Tr[Tr.RESOURCE_URL=5]="RESOURCE_URL",Tr))();function ds(e){const t=qg();return t?t.sanitize(Tr.URL,e)||"":Hg(e,"URL")?Nc(e):function RD(e){return(e=String(e)).match(Qq)?e:"unsafe:"+e}(bt(e))}function wk(e){const t=qg();if(t)return hk(t.sanitize(Tr.RESOURCE_URL,e)||"");if(Hg(e,"ResourceURL"))return hk(Nc(e));throw new _e(904,!1)}function qg(){const e=le();return e&&e[gh]}const Q_=new Ge("ENVIRONMENT_INITIALIZER"),Ek=new Ge("INJECTOR",-1),Ck=new Ge("INJECTOR_DEF_TYPES");class Dk{get(t,n=fa){if(n===fa){const r=new Error(`NullInjectorError: No provider for ${Dn(t)}!`);throw r.name="NullInjectorError",r}return n}}function cG(...e){return{\u0275providers:Ik(0,e),\u0275fromNgModule:!0}}function Ik(e,...t){const n=[],r=new Set;let i;return au(t,o=>{const a=o;OD(a,n,[],r)&&(i||(i=[]),i.push(a))}),void 0!==i&&Tk(i,n),n}function Tk(e,t){for(let n=0;n<e.length;n++){const{providers:i}=e[n];PD(i,o=>{t.push(o)})}}function OD(e,t,n,r){if(!(e=ut(e)))return!1;let i=null,o=Ay(e);const a=!o&&un(e);if(o||a){if(a&&!a.standalone)return!1;i=e}else{const d=e.ngModule;if(o=Ay(d),!o)return!1;i=d}const c=r.has(i);if(a){if(c)return!1;if(r.add(i),a.dependencies){const d="function"==typeof a.dependencies?a.dependencies():a.dependencies;for(const m of d)OD(m,t,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!c){let m;r.add(i);try{au(o.imports,v=>{OD(v,t,n,r)&&(m||(m=[]),m.push(v))})}finally{}void 0!==m&&Tk(m,t)}if(!c){const m=Eo(i)||(()=>new i);t.push({provide:i,useFactory:m,deps:Kt},{provide:Ck,useValue:i,multi:!0},{provide:Q_,useValue:()=>Ye(i),multi:!0})}const d=o.providers;null==d||c||PD(d,v=>{t.push(v)})}}return i!==e&&void 0!==e.providers}function PD(e,t){for(let n of e)Kp(n)&&(n=n.\u0275providers),Array.isArray(n)?PD(n,t):t(n)}const lG=yt({provide:String,useValue:yt});function FD(e){return null!==e&&"object"==typeof e&&lG in e}function Zl(e){return"function"==typeof e}const LD=new Ge("Set Injector scope."),Y_={},hG={};let VD;function X_(){return void 0===VD&&(VD=new Dk),VD}class Ca{}class Mk extends Ca{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,jD(t,a=>this.processProvider(a)),this.records.set(Ek,Yh(void 0,this)),i.has("environment")&&this.records.set(Ca,Yh(void 0,this));const o=this.records.get(LD);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Ck.multi,Kt,ct.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const n=ha(this),r=yo(void 0);try{return t()}finally{ha(n),yo(r)}}get(t,n=fa,r=ct.Default){this.assertNotDestroyed(),r=Ml(r);const i=ha(this),o=yo(void 0);try{if(!(r&ct.SkipSelf)){let c=this.records.get(t);if(void 0===c){const d=function vG(e){return"function"==typeof e||"object"==typeof e&&e instanceof Ge}(t)&&ec(t);c=d&&this.injectableDefInScope(d)?Yh(UD(t),Y_):null,this.records.set(t,c)}if(null!=c)return this.hydrate(t,c)}return(r&ct.Self?X_():this.parent).get(t,n=r&ct.Optional&&n===fa?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[zi]=a[zi]||[]).unshift(Dn(t)),i)throw a;return function pC(e,t,n,r){const i=e[zi];throw t[os]&&i.unshift(t[os]),e.message=function gC(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&e.charAt(1)==dC?e.slice(2):e;let i=Dn(t);if(Array.isArray(t))i=t.map(Dn).join(" -> ");else if("object"==typeof t){let o=[];for(let a in t)if(t.hasOwnProperty(a)){let c=t[a];o.push(a+":"+("string"==typeof c?JSON.stringify(c):Dn(c)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(Uo,"\n  ")}`}("\n"+e.message,i,n,r),e[fh]=i,e[zi]=null,e}(a,t,"R3InjectorError",this.source)}throw a}finally{yo(o),ha(i)}}resolveInjectorInitializers(){const t=ha(this),n=yo(void 0);try{const r=this.get(Q_.multi,Kt,ct.Self);for(const i of r)i()}finally{ha(t),yo(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(Dn(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _e(205,!1)}processProvider(t){let n=Zl(t=ut(t))?t:ut(t&&t.provide);const r=function pG(e){return FD(e)?Yh(void 0,e.useValue):Yh(Rk(e),Y_)}(t);if(Zl(t)||!0!==t.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Yh(void 0,Y_,!0),i.factory=()=>da(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===Y_&&(n.value=hG,n.value=n.factory()),"object"==typeof n.value&&n.value&&function mG(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=ut(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function UD(e){const t=ec(e),n=null!==t?t.factory:Eo(e);if(null!==n)return n;if(e instanceof Ge)throw new _e(204,!1);if(e instanceof Function)return function dG(e){const t=e.length;if(t>0)throw function Kl(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new _e(204,!1);const n=function hC(e){return e&&(e[Tl]||e[My])||null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new _e(204,!1)}function Rk(e,t,n){let r;if(Zl(e)){const i=ut(e);return Eo(i)||UD(i)}if(FD(e))r=()=>ut(e.useValue);else if(function Ak(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...da(e.deps||[]));else if(function Sk(e){return!(!e||!e.useExisting)}(e))r=()=>Ye(ut(e.useExisting));else{const i=ut(e&&(e.useClass||e.provide));if(!function gG(e){return!!e.deps}(e))return Eo(i)||UD(i);r=()=>new i(...da(e.deps))}return r}function Yh(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function jD(e,t){for(const n of e)Array.isArray(n)?jD(n,t):n&&Kp(n)?jD(n.\u0275providers,t):t(n)}class yG{}class Nk{}class wG{resolveComponentFactory(t){throw function _G(e){const t=Error(`No component factory found for ${Dn(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(t)}}let Gg=(()=>{class e{}return e.NULL=new wG,e})();function bG(){return Xh(Hr(),le())}function Xh(e,t){return new zo(Yi(e,t))}let zo=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=bG,e})();class xk{}let vu=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>function CG(){const e=le(),n=Br(Hr().index,e);return(Ki(n)?n:e)[Dt]}(),e})(),DG=(()=>{class e{}return e.\u0275prov=we({token:e,providedIn:"root",factory:()=>null}),e})();class zg{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const IG=new zg("15.2.9"),BD={},HD="ngOriginalError";function $D(e){return e[HD]}class Jh{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&$D(t);for(;n&&$D(n);)n=$D(n);return n||null}}function yu(e){return e instanceof Function?e():e}function Pk(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}const Fk="ng-template";function FG(e,t,n){let r=0,i=!0;for(;r<e.length;){let o=e[r++];if("string"==typeof o&&i){const a=e[r++];if(n&&"class"===o&&-1!==Pk(a.toLowerCase(),t,0))return!0}else{if(1===o){for(;r<e.length&&"string"==typeof(o=e[r++]);)if(o.toLowerCase()===t)return!0;return!1}"number"==typeof o&&(i=!1)}}return!1}function Lk(e){return 4===e.type&&e.value!==Fk}function LG(e,t,n){return t===(4!==e.type||n?e.value:Fk)}function VG(e,t,n){let r=4;const i=e.attrs||[],o=function BG(e){for(let t=0;t<e.length;t++)if(i_(e[t]))return t;return e.length}(i);let a=!1;for(let c=0;c<t.length;c++){const d=t[c];if("number"!=typeof d){if(!a)if(4&r){if(r=2|1&r,""!==d&&!LG(e,d,n)||""===d&&1===t.length){if(Vs(r))return!1;a=!0}}else{const m=8&r?d:t[++c];if(8&r&&null!==e.attrs){if(!FG(e.attrs,m,n)){if(Vs(r))return!1;a=!0}continue}const w=UG(8&r?"class":d,i,Lk(e),n);if(-1===w){if(Vs(r))return!1;a=!0;continue}if(""!==m){let C;C=w>o?"":i[w+1].toLowerCase();const S=8&r?C:null;if(S&&-1!==Pk(S,m,0)||2&r&&m!==C){if(Vs(r))return!1;a=!0}}}}else{if(!a&&!Vs(r)&&!Vs(d))return!1;if(a&&Vs(d))continue;a=!1,r=d|1&r}}return Vs(r)||a}function Vs(e){return 0==(1&e)}function UG(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){const a=t[i];if(a===e)return i;if(3===a||6===a)o=!0;else{if(1===a||2===a){let c=t[++i];for(;"string"==typeof c;)c=t[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=o?1:2}return-1}return function HG(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Vk(e,t,n=!1){for(let r=0;r<t.length;r++)if(VG(e,t[r],n))return!0;return!1}function Uk(e,t){return e?":not("+t.trim()+")":t}function qG(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let a=e[n];if("string"==typeof a)if(2&r){const c=e[++n];i+="["+a+(c.length>0?'="'+c+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""!==i&&!Vs(a)&&(t+=Uk(o,i),i=""),r=a,o=o||!Vs(r);n++}return""!==i&&(t+=Uk(o,i)),t}const Rt={};function ke(e){jk(Qt(),le(),ti()+e,!1)}function jk(e,t,n,r){if(!r)if(3==(3&t[kt])){const o=e.preOrderCheckHooks;null!==o&&Mh(t,o,n)}else{const o=e.preOrderHooks;null!==o&&Vl(t,o,0,n)}Fs(n)}function qk(e,t=null,n=null,r){const i=Gk(e,t,n,r);return i.resolveInjectorInitializers(),i}function Gk(e,t=null,n=null,r,i=new Set){const o=[n||Kt,cG(e)];return r=r||("object"==typeof e?void 0:Dn(e)),new Mk(o,t||X_(),r||null,i)}let Da=(()=>{class e{static create(n,r){if(Array.isArray(n))return qk({name:""},r,n,"");{const i=n.name??"";return qk({name:i},n.parent,n.providers,i)}}}return e.THROW_IF_NOT_FOUND=fa,e.NULL=new Dk,e.\u0275prov=we({token:e,providedIn:"any",factory:()=>Ye(Ek)}),e.__NG_ELEMENT_ID__=-1,e})();function ie(e,t=ct.Default){const n=le();return null===n?Ye(e,t):h_(Hr(),n,ut(e),t)}function Zk(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const o=n[r+1];if(-1!==o){const a=e.data[o];lg(n[r]),a.contentQueries(2,t[o],o)}}}function Z_(e,t,n,r,i,o,a,c,d,m,v){const w=t.blueprint.slice();return w[jo]=i,w[kt]=76|r,(null!==v||e&&1024&e[kt])&&(w[kt]|=1024),Wy(w),w[Pn]=w[fc]=e,w[Wn]=n,w[ph]=a||e&&e[ph],w[Dt]=c||e&&e[Dt],w[gh]=d||e&&e[gh]||null,w[cc]=m||e&&e[cc]||null,w[Zr]=o,w[kl]=function aD(){return sD++}(),w[eg]=v,w[fr]=2==t.type?e[fr]:w,w}function td(e,t,n,r,i){let o=e.data[t];if(null===o)o=function KD(e,t,n,r,i){const o=Ky(),a=ug(),d=e.data[t]=function m8(e,t,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?o:o&&o.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=d),null!==o&&(a?null==o.child&&null!==d.parent&&(o.child=d):null===o.next&&(o.next=d,d.prev=o)),d}(e,t,n,r,i),function Xy(){return _t.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const a=function xl(){const e=_t.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();o.injectorIndex=null===a?-1:a.injectorIndex}return us(o,!0),o}function Wg(e,t,n,r){if(0===n)return-1;const i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function QD(e,t,n){Sh(t);try{const r=e.viewQuery;null!==r&&iI(1,r,n);const i=e.template;null!==i&&ex(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Zk(e,t),e.staticViewQueries&&iI(2,e.viewQuery,n);const o=e.components;null!==o&&function d8(e,t){for(let n=0;n<t.length;n++)F8(e,t[n])}(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[kt]&=-5,hg()}}function e0(e,t,n,r){const i=t[kt];if(128!=(128&i)){Sh(t);try{Wy(t),function Yy(e){return _t.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&ex(e,t,n,2,r);const a=3==(3&i);if(a){const m=e.preOrderCheckHooks;null!==m&&Mh(t,m,null)}else{const m=e.preOrderHooks;null!==m&&Vl(t,m,0,null),gc(t,0)}if(function O8(e){for(let t=Fg(e);null!==t;t=pu(t)){if(!t[Oy])continue;const n=t[va];for(let r=0;r<n.length;r++){const i=n[r];512&i[kt]||og(i[Pn],1),i[kt]|=512}}}(t),function x8(e){for(let t=Fg(e);null!==t;t=pu(t))for(let n=Ur;n<t.length;n++){const r=t[n],i=r[Fe];pc(r)&&e0(i,r,i.template,r[Wn])}}(t),null!==e.contentQueries&&Zk(e,t),a){const m=e.contentCheckHooks;null!==m&&Mh(t,m)}else{const m=e.contentHooks;null!==m&&Vl(t,m,1),gc(t,1)}!function f8(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)Fs(~i);else{const o=i,a=n[++r],c=n[++r];xC(a,o),c(2,t[o])}}}finally{Fs(-1)}}(e,t);const c=e.components;null!==c&&function h8(e,t){for(let n=0;n<t.length;n++)P8(e,t[n])}(t,c);const d=e.viewQuery;if(null!==d&&iI(2,d,r),a){const m=e.viewCheckHooks;null!==m&&Mh(t,m)}else{const m=e.viewHooks;null!==m&&Vl(t,m,2),gc(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[kt]&=-41,512&t[kt]&&(t[kt]&=-513,og(t[Pn],-1))}finally{hg()}}}function ex(e,t,n,r,i){const o=ti(),a=2&r;try{Fs(-1),a&&t.length>Sn&&jk(e,t,Sn,!1),Qi(a?2:0,i),n(r,i)}finally{Fs(o),Qi(a?3:1,i)}}function YD(e,t,n){if(hc(t)){const i=t.directiveEnd;for(let o=t.directiveStart;o<i;o++){const a=e.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}}function XD(e,t,n){sg()&&(function C8(e,t,n,r){const i=n.directiveStart,o=n.directiveEnd;Ja(n)&&function R8(e,t,n){const r=Yi(t,e),i=tx(n),o=e[ph],a=t0(e,Z_(e,i,null,n.onPush?32:16,r,t,o,o.createRenderer(r,n),null,null,null));e[t.index]=a}(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||Oh(n,t),ri(r,t);const a=n.initialInputs;for(let c=i;c<o;c++){const d=e.data[c],m=ou(t,e,c,n);ri(m,t),null!==a&&N8(0,c-i,m,d,0,a),$o(d)&&(Br(n.index,t)[Wn]=ou(t,e,c,n))}}(e,t,n,Yi(n,t)),64==(64&n.flags)&&sx(e,t,n))}function JD(e,t,n=Yi){const r=t.localNames;if(null!==r){let i=t.index+1;for(let o=0;o<r.length;o+=2){const a=r[o+1],c=-1===a?n(t,e):e[a];e[i++]=c}}}function tx(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=ZD(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function ZD(e,t,n,r,i,o,a,c,d,m){const v=Sn+r,w=v+i,C=function p8(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:Rt);return n}(v,w),S="function"==typeof m?m():m;return C[Fe]={type:e,blueprint:C,template:n,queries:null,viewQuery:c,declTNode:t,data:C.slice().fill(null,v),bindingStartIndex:v,expandoStartIndex:w,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:d,consts:S,incompleteFirstPass:!1}}function rx(e,t,n,r){for(let i in e)if(e.hasOwnProperty(i)){n=null===n?{}:n;const o=e[i];null===r?ix(n,t,i,o):r.hasOwnProperty(i)&&ix(n,t,r[i],o)}return n}function ix(e,t,n,r){e.hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}function eI(e,t,n,r){if(sg()){const i=null===r?null:{"":-1},o=function I8(e,t){const n=e.directiveRegistry;let r=null,i=null;if(n)for(let o=0;o<n.length;o++){const a=n[o];if(Vk(t,a.selectors,!1))if(r||(r=[]),$o(a))if(null!==a.findHostDirectiveDefs){const c=[];i=i||new Map,a.findHostDirectiveDefs(a,c,i),r.unshift(...c,a),tI(e,t,c.length)}else r.unshift(a),tI(e,t,0);else i=i||new Map,a.findHostDirectiveDefs?.(a,r,i),r.push(a)}return null===r?null:[r,i]}(e,n);let a,c;null===o?a=c=null:[a,c]=o,null!==a&&ox(e,t,n,a,i,c),i&&function T8(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const o=n[t[i+1]];if(null==o)throw new _e(-301,!1);r.push(t[i],o)}}}(n,r,i)}n.mergedAttrs=Ul(n.mergedAttrs,n.attrs)}function ox(e,t,n,r,i,o){for(let m=0;m<r.length;m++)iu(Oh(n,t),e,r[m].type);!function A8(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,r.length);for(let m=0;m<r.length;m++){const v=r[m];v.providersResolver&&v.providersResolver(v)}let a=!1,c=!1,d=Wg(e,t,r.length,null);for(let m=0;m<r.length;m++){const v=r[m];n.mergedAttrs=Ul(n.mergedAttrs,v.hostAttrs),M8(e,n,t,d,v),S8(d,v,i),null!==v.contentQueries&&(n.flags|=4),(null!==v.hostBindings||null!==v.hostAttrs||0!==v.hostVars)&&(n.flags|=64);const w=v.type.prototype;!a&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((e.preOrderHooks??(e.preOrderHooks=[])).push(n.index),a=!0),!c&&(w.ngOnChanges||w.ngDoCheck)&&((e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(n.index),c=!0),d++}!function v8(e,t,n){const i=t.directiveEnd,o=e.data,a=t.attrs,c=[];let d=null,m=null;for(let v=t.directiveStart;v<i;v++){const w=o[v],C=n?n.get(w):null,A=C?C.outputs:null;d=rx(w.inputs,v,d,C?C.inputs:null),m=rx(w.outputs,v,m,A);const x=null===d||null===a||Lk(t)?null:k8(d,v,a);c.push(x)}null!==d&&(d.hasOwnProperty("class")&&(t.flags|=8),d.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=c,t.inputs=d,t.outputs=m}(e,n,o)}function sx(e,t,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,a=function OC(){return _t.lFrame.currentDirectiveIndex}();try{Fs(o);for(let c=r;c<i;c++){const d=e.data[c],m=t[c];Ol(c),(null!==d.hostBindings||0!==d.hostVars||null!==d.hostAttrs)&&D8(d,m)}}finally{Fs(-1),Ol(a)}}function D8(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function tI(e,t,n){t.componentOffset=n,(e.components??(e.components=[])).push(t.index)}function S8(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;$o(t)&&(n[""]=e)}}function M8(e,t,n,r,i){e.data[r]=i;const o=i.factory||(i.factory=Eo(i.type)),a=new vc(o,$o(i),ie);e.blueprint[r]=a,n[r]=a,function b8(e,t,n,r,i){const o=i.hostBindings;if(o){let a=e.hostBindingOpCodes;null===a&&(a=e.hostBindingOpCodes=[]);const c=~t.index;(function E8(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(a)!=c&&a.push(c),a.push(n,r,o)}}(e,t,r,Wg(e,n,i.hostVars,Rt),i)}function Ia(e,t,n,r,i,o){const a=Yi(e,t);!function nI(e,t,n,r,i,o,a){if(null==o)e.removeAttribute(t,i,n);else{const c=null==a?bt(o):a(o,r||"",i);e.setAttribute(t,i,c,n)}}(t[Dt],a,o,e.value,n,r,i)}function N8(e,t,n,r,i,o){const a=o[t];if(null!==a){const c=r.setInput;for(let d=0;d<a.length;){const m=a[d++],v=a[d++],w=a[d++];null!==c?r.setInput(n,w,m,v):n[v]=w}}}function k8(e,t,n){let r=null,i=0;for(;i<n.length;){const o=n[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(e.hasOwnProperty(o)){null===r&&(r=[]);const a=e[o];for(let c=0;c<a.length;c+=2)if(a[c]===t){r.push(o,a[c+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function ax(e,t,n,r){return[e,!0,!1,t,null,0,r,n,null,null]}function P8(e,t){const n=Br(t,e);if(pc(n)){const r=n[Fe];48&n[kt]?e0(r,n,r.template,n[Wn]):n[Xa]>0&&rI(n)}}function rI(e){for(let r=Fg(e);null!==r;r=pu(r))for(let i=Ur;i<r.length;i++){const o=r[i];if(pc(o))if(512&o[kt]){const a=o[Fe];e0(a,o,a.template,o[Wn])}else o[Xa]>0&&rI(o)}const n=e[Fe].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Br(n[r],e);pc(i)&&i[Xa]>0&&rI(i)}}function F8(e,t){const n=Br(t,e),r=n[Fe];(function L8(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(r,n),QD(r,n,n[Wn])}function t0(e,t){return e[lc]?e[xy][Bo]=t:e[lc]=t,e[xy]=t,t}function n0(e){for(;e;){e[kt]|=32;const t=Jl(e);if(vC(e)&&!t)return e;e=t}return null}function r0(e,t,n,r=!0){const i=t[ph];i.begin&&i.begin();try{e0(e,t,e.template,n)}catch(a){throw r&&fx(t,a),a}finally{i.end&&i.end()}}function iI(e,t,n){lg(0),t(e,n)}function ux(e){return e[ga]||(e[ga]=[])}function cx(e){return e.cleanup||(e.cleanup=[])}function fx(e,t){const n=e[cc],r=n?n.get(Jh,null):null;r&&r.handleError(t)}function oI(e,t,n,r,i){for(let o=0;o<n.length;){const a=n[o++],c=n[o++],d=t[a],m=e.data[a];null!==m.setInput?m.setInput(d,i,r,c):d[c]=i}}function o0(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(null!==t)for(let a=0;a<t.length;a++){const c=t[a];"number"==typeof c?o=c:1==o?i=zp(i,c):2==o&&(r=zp(r,c+": "+t[++a]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function s0(e,t,n,r,i=!1){for(;null!==n;){const o=t[n.index];if(null!==o&&r.push(jr(o)),wo(o))for(let c=Ur;c<o.length;c++){const d=o[c],m=d[Fe].firstChild;null!==m&&s0(d[Fe],d,m,r)}const a=n.type;if(8&a)s0(e,t,n.child,r);else if(32&a){const c=Pg(n,t);let d;for(;d=c();)r.push(d)}else if(16&a){const c=re(t,n);if(Array.isArray(c))r.push(...c);else{const d=Jl(t[fr]);s0(d[Fe],d,c,r,!0)}}n=i?n.projectionNext:n.next}return r}class Kg{get rootNodes(){const t=this._lView,n=t[Fe];return s0(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Wn]}set context(t){this._lView[Wn]=t}get destroyed(){return 128==(128&this._lView[kt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[Pn];if(wo(t)){const n=t[hi],r=n?n.indexOf(this):-1;r>-1&&(Ug(t,r),Wl(n,r))}this._attachedToViewContainer=!1}B_(this._lView[Fe],this._lView)}onDestroy(t){!function nx(e,t,n,r){const i=ux(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&cx(e).push(r,i.length-1))}(this._lView[Fe],this._lView,null,t)}markForCheck(){n0(this._cdRefInjectingView||this._lView)}detach(){this._lView[kt]&=-65}reattach(){this._lView[kt]|=64}detectChanges(){r0(this._lView[Fe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function bD(e,t){Qe(e,t,t[Dt],2,null,null)}(this._lView[Fe],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new _e(902,!1);this._appRef=t}}class V8 extends Kg{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;r0(t[Fe],t,t[Wn],!1)}checkNoChanges(){}get context(){return null}}class hx extends Gg{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=un(t);return new Qg(n,this.ngModule)}}function dx(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class j8{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Ml(r);const i=this.injector.get(t,BD,r);return i!==BD||n===BD?i:this.parentInjector.get(t,n,r)}}class Qg extends Nk{get inputs(){return dx(this.componentDef.inputs)}get outputs(){return dx(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function GG(e){return e.map(qG).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let o=(i=i||this.ngModule)instanceof Ca?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new j8(t,o):t,c=a.get(xk,null);if(null===c)throw new _e(407,!1);const d=a.get(DG,null),m=c.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",w=r?function g8(e,t,n){return e.selectRootElement(t,n===ss.ShadowDom)}(m,r,this.componentDef.encapsulation):Vg(m,v,function U8(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(v)),C=this.componentDef.onPush?288:272,S=ZD(0,null,null,1,0,null,null,null,null,null),A=Z_(null,S,null,C,null,null,c,m,d,a,null);let x,V;Sh(A);try{const H=this.componentDef;let K,q=null;H.findHostDirectiveDefs?(K=[],q=new Map,H.findHostDirectiveDefs(H,K,q),K.push(H)):K=[H];const fe=function H8(e,t){const n=e[Fe],r=Sn;return e[r]=t,td(n,r,2,"#host",null)}(A,w),Se=function $8(e,t,n,r,i,o,a,c){const d=i[Fe];!function q8(e,t,n,r){for(const i of e)t.mergedAttrs=Ul(t.mergedAttrs,i.hostAttrs);null!==t.mergedAttrs&&(o0(t,t.mergedAttrs,!0),null!==n&&G_(r,n,t))}(r,e,t,a);const m=o.createRenderer(t,n),v=Z_(i,tx(n),null,n.onPush?32:16,i[e.index],e,o,m,c||null,null,null);return d.firstCreatePass&&tI(d,e,r.length-1),t0(i,v),i[e.index]=v}(fe,w,H,K,A,c,m);V=Ch(S,Sn),w&&function z8(e,t,n,r){if(r)vg(e,n,["ng-version",IG.full]);else{const{attrs:i,classes:o}=function zG(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&t.push(o,e[++r]):8===i&&n.push(o);else{if(!Vs(i))break;i=o}r++}return{attrs:t,classes:n}}(t.selectors[0]);i&&vg(e,n,i),o&&o.length>0&&Kh(e,n,o.join(" "))}}(m,H,w,r),void 0!==n&&function W8(e,t,n){const r=e.projection=[];for(let i=0;i<t.length;i++){const o=n[i];r.push(null!=o?Array.from(o):null)}}(V,this.ngContentSelectors,n),x=function G8(e,t,n,r,i,o){const a=Hr(),c=i[Fe],d=Yi(a,i);ox(c,i,a,n,null,r);for(let v=0;v<n.length;v++)ri(ou(i,c,a.directiveStart+v,a),i);sx(c,i,a),d&&ri(d,i);const m=ou(i,c,a.directiveStart+a.componentOffset,a);if(e[Wn]=i[Wn]=m,null!==o)for(const v of o)v(m,t);return YD(c,a,e),m}(Se,H,K,q,A,[K8]),QD(S,A,null)}finally{hg()}return new B8(this.componentType,x,Xh(V,A),A,V)}}class B8 extends yG{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=n,this.hostView=this.changeDetectorRef=new V8(i),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[t])){const o=this._rootLView;oI(o[Fe],o,i,t,n),n0(Br(this._tNode.index,o))}}get injector(){return new Ec(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function K8(){const e=Hr();Ah(le()[Fe],e)}function yn(e){let t=function px(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0;const r=[e];for(;t;){let i;if($o(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new _e(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);const a=e;a.inputs=sI(e.inputs),a.declaredInputs=sI(e.declaredInputs),a.outputs=sI(e.outputs);const c=i.hostBindings;c&&J8(e,c);const d=i.viewQuery,m=i.contentQueries;if(d&&Y8(e,d),m&&X8(e,m),Gi(e.inputs,i.inputs),Gi(e.declaredInputs,i.declaredInputs),Gi(e.outputs,i.outputs),$o(i)&&i.data.animation){const v=e.data;v.animation=(v.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let a=0;a<o.length;a++){const c=o[a];c&&c.ngInherit&&c(e),c===yn&&(n=!1)}}t=Object.getPrototypeOf(t)}!function Q8(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Ul(i.hostAttrs,n=Ul(n,i.hostAttrs))}}(r)}function sI(e){return e===ks?{}:e===Kt?[]:e}function Y8(e,t){const n=e.viewQuery;e.viewQuery=n?(r,i)=>{t(r,i),n(r,i)}:t}function X8(e,t){const n=e.contentQueries;e.contentQueries=n?(r,i,o)=>{t(r,i,o),n(r,i,o)}:t}function J8(e,t){const n=e.hostBindings;e.hostBindings=n?(r,i)=>{t(r,i),n(r,i)}:t}function a0(e){return!!function aI(e){return null!==e&&("function"==typeof e||"object"==typeof e)}(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function Ri(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Sa(e,t,n,r){const i=le();return Ri(i,tu(),t)&&(Qt(),Ia(Fn(),i,e,t,n,r)),Sa}function jn(e,t,n,r,i,o,a,c){const d=le(),m=Qt(),v=e+Sn,w=m.firstCreatePass?function uz(e,t,n,r,i,o,a,c,d){const m=t.consts,v=td(t,e,4,a||null,xs(m,c));eI(t,n,v,xs(m,d)),Ah(t,v);const w=v.tView=ZD(2,v,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,m);return null!==t.queries&&(t.queries.template(t,v),w.queries=t.queries.embeddedTView(v)),v}(v,m,d,t,n,r,i,o,a):m.data[v];us(w,!1);const C=d[Dt].createComment("");U(m,d,C,w),ri(C,d),t0(d,d[v]=ax(C,d,C,w)),Ho(w)&&XD(m,d,w),null!=a&&JD(d,w,c)}function wt(e,t,n){const r=le();return Ri(r,tu(),t)&&function Wo(e,t,n,r,i,o,a,c){const d=Yi(t,n);let v,m=t.inputs;!c&&null!=m&&(v=m[r])?(oI(e,n,v,r,i),Ja(t)&&function _8(e,t){const n=Br(t,e);16&n[kt]||(n[kt]|=32)}(n,t.index)):3&t.type&&(r=function y8(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=a?a(i,t.value||"",r):i,o.setProperty(d,r,i))}(Qt(),Fn(),r,e,t,r[Dt],n,!1),wt}function uI(e,t,n,r,i){const a=i?"class":"style";oI(e,n,t.inputs[a],a,r)}function J(e,t,n,r){const i=le(),o=Qt(),a=Sn+e,c=i[Dt],d=o.firstCreatePass?function fz(e,t,n,r,i,o){const a=t.consts,d=td(t,e,2,r,xs(a,i));return eI(t,n,d,xs(a,o)),null!==d.attrs&&o0(d,d.attrs,!1),null!==d.mergedAttrs&&o0(d,d.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,d),d}(a,o,i,t,n,r):o.data[a],m=i[a]=Vg(c,t,function UC(){return _t.lFrame.currentNamespace}()),v=Ho(d);return us(d,!0),G_(c,m,d),32!=(32&d.flags)&&U(o,i,m,d),0===function AC(){return _t.lFrame.elementDepthCount}()&&ri(m,i),function MC(){_t.lFrame.elementDepthCount++}(),v&&(XD(o,i,d),YD(o,d,i)),null!==r&&JD(i,d),J}function te(){let e=Hr();ug()?cg():(e=e.parent,us(e,!1));const t=e;!function RC(){_t.lFrame.elementDepthCount--}();const n=Qt();return n.firstCreatePass&&(Ah(n,e),hc(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function gg(e){return 0!=(8&e.flags)}(t)&&uI(n,t,le(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function mg(e){return 0!=(16&e.flags)}(t)&&uI(n,t,le(),t.stylesWithoutHost,!1),te}function tn(e,t,n,r){return J(e,t,n,r),te(),tn}function Xg(e,t,n){const r=le(),i=Qt(),o=e+Sn,a=i.firstCreatePass?function hz(e,t,n,r,i){const o=t.consts,a=xs(o,r),c=td(t,e,8,"ng-container",a);return null!==a&&o0(c,a,!0),eI(t,n,c,xs(o,i)),null!==t.queries&&t.queries.elementStart(t,c),c}(o,i,r,t,n):i.data[o];us(a,!0);const c=r[o]=r[Dt].createComment("");return U(i,r,c,a),ri(c,r),Ho(a)&&(XD(i,r,a),YD(i,a,r)),null!=n&&JD(r,a),Xg}function Jg(){let e=Hr();const t=Qt();return ug()?cg():(e=e.parent,us(e,!1)),t.firstCreatePass&&(Ah(t,e),hc(e)&&t.queries.elementEnd(e)),Jg}function dr(){return le()}function Zg(e){return!!e&&"function"==typeof e.then}const cI=function Ax(e){return!!e&&"function"==typeof e.subscribe};function ft(e,t,n,r){const i=le(),o=Qt(),a=Hr();return function Rx(e,t,n,r,i,o,a){const c=Ho(r),m=e.firstCreatePass&&cx(e),v=t[Wn],w=ux(t);let C=!0;if(3&r.type||a){const x=Yi(r,t),V=a?a(x):x,H=w.length,K=a?fe=>a(jr(fe[r.index])):r.index;let q=null;if(!a&&c&&(q=function dz(e,t,n,r){const i=e.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const a=i[o];if(a===n&&i[o+1]===r){const c=t[ga],d=i[o+2];return c.length>d?c[d]:null}"string"==typeof a&&(o+=2)}return null}(e,t,i,r.index)),null!==q)(q.__ngLastListenerFn__||q).__ngNextListenerFn__=o,q.__ngLastListenerFn__=o,C=!1;else{o=kx(r,t,v,o,!1);const fe=n.listen(V,i,o);w.push(o,fe),m&&m.push(i,K,H,H+1)}}else o=kx(r,t,v,o,!1);const S=r.outputs;let A;if(C&&null!==S&&(A=S[i])){const x=A.length;if(x)for(let V=0;V<x;V+=2){const Se=t[A[V]][A[V+1]].subscribe(o),he=w.length;w.push(o,Se),m&&m.push(i,r.index,he,-(he+1))}}}(o,i,i[Dt],a,e,t,r),ft}function Nx(e,t,n,r){try{return Qi(6,t,n),!1!==n(r)}catch(i){return fx(e,i),!1}finally{Qi(7,t,n)}}function kx(e,t,n,r,i){return function o(a){if(a===Function)return r;n0(e.componentOffset>-1?Br(e.index,t):t);let d=Nx(t,n,r,a),m=o.__ngNextListenerFn__;for(;m;)d=Nx(t,n,m,a)&&d,m=m.__ngNextListenerFn__;return i&&!1===d&&(a.preventDefault(),a.returnValue=!1),d}}function $t(e=1){return function PC(e){return(_t.lFrame.contextLView=function FC(e,t){for(;e>0;)t=t[fc],e--;return t}(e,_t.lFrame.contextLView))[Wn]}(e)}function c0(e,t){return e<<17|t<<2}function kc(e){return e>>17&32767}function fI(e){return 2|e}function tf(e){return(131068&e)>>2}function hI(e,t){return-131069&e|t<<2}function dI(e){return 1|e}function Hx(e,t,n,r,i){const o=e[n+1],a=null===t;let c=r?kc(o):tf(o),d=!1;for(;0!==c&&(!1===d||a);){const v=e[c+1];Ez(e[c],t)&&(d=!0,e[c+1]=r?dI(v):fI(v)),c=r?kc(v):tf(v)}d&&(e[n+1]=r?fI(o):dI(o))}function Ez(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&Sc(e,t)>=0}function l0(e,t){return function Us(e,t,n,r){const i=le(),o=Qt(),a=function Co(e){const t=_t.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}(2);o.firstUpdatePass&&function Xx(e,t,n,r){const i=e.data;if(null===i[n+1]){const o=i[ti()],a=function Yx(e,t){return t>=e.expandoStartIndex}(e,n);(function tO(e,t){return 0!=(e.flags&(t?8:16))})(o,r)&&null===t&&!a&&(t=!1),t=function Nz(e,t,n,r){const i=function Th(e){const t=_t.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let o=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=em(n=pI(null,e,t,n,r),t.attrs,r),o=null);else{const a=t.directiveStylingLast;if(-1===a||e[a]!==i)if(n=pI(i,e,t,n,r),null===o){let d=function kz(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==tf(r))return e[kc(r)]}(e,t,r);void 0!==d&&Array.isArray(d)&&(d=pI(null,e,t,d[1],r),d=em(d,t.attrs,r),function xz(e,t,n,r){e[kc(n?t.classBindings:t.styleBindings)]=r}(e,t,r,d))}else o=function Oz(e,t,n){let r;const i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++)r=em(r,e[o].hostAttrs,n);return em(r,t.attrs,n)}(e,t,r)}return void 0!==o&&(r?t.residualClasses=o:t.residualStyles=o),n}(i,o,t,r),function wz(e,t,n,r,i,o){let a=o?t.classBindings:t.styleBindings,c=kc(a),d=tf(a);e[r]=n;let v,m=!1;if(Array.isArray(n)?(v=n[1],(null===v||Sc(n,v)>0)&&(m=!0)):v=n,i)if(0!==d){const C=kc(e[c+1]);e[r+1]=c0(C,c),0!==C&&(e[C+1]=hI(e[C+1],r)),e[c+1]=function yz(e,t){return 131071&e|t<<17}(e[c+1],r)}else e[r+1]=c0(c,0),0!==c&&(e[c+1]=hI(e[c+1],r)),c=r;else e[r+1]=c0(d,0),0===c?c=r:e[d+1]=hI(e[d+1],r),d=r;m&&(e[r+1]=fI(e[r+1])),Hx(e,v,r,!0),Hx(e,v,r,!1),function bz(e,t,n,r,i){const o=i?e.residualClasses:e.residualStyles;null!=o&&"string"==typeof t&&Sc(o,t)>=0&&(n[r+1]=dI(n[r+1]))}(t,v,e,r,o),a=c0(c,d),o?t.classBindings=a:t.styleBindings=a}(i,o,t,n,a,r)}}(o,e,a,r),t!==Rt&&Ri(i,a,t)&&function Zx(e,t,n,r,i,o,a,c){if(!(3&t.type))return;const d=e.data,m=d[c+1],v=function _z(e){return 1==(1&e)}(m)?eO(d,t,n,i,tf(m),a):void 0;f0(v)||(f0(o)||function vz(e){return 2==(2&e)}(m)&&(o=eO(d,null,n,i,c,a)),function Wh(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=-1===r.indexOf("-")?void 0:Ai.DashCase;null==i?e.removeStyle(n,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ai.Important),e.setStyle(n,r,i,o))}}(r,a,bh(ti(),n),i,o))}(o,o.data[ti()],i,i[Dt],e,i[a+1]=function Vz(e,t){return null==e||""===e||("string"==typeof t?e+=t:"object"==typeof e&&(e=Dn(Nc(e)))),e}(t,n),r,a)}(e,t,null,!0),l0}function pI(e,t,n,r,i){let o=null;const a=n.directiveEnd;let c=n.directiveStylingLast;for(-1===c?c=n.directiveStart:c++;c<a&&(o=t[c],r=em(r,o.hostAttrs,i),o!==e);)c++;return null!==e&&(n.directiveStylingLast=c),r}function em(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?i=a:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Xi(e,a,!!n||t[++o]))}return void 0===e?null:e}function eO(e,t,n,r,i,o){const a=null===t;let c;for(;i>0;){const d=e[i],m=Array.isArray(d),v=m?d[1]:d,w=null===v;let C=n[i+1];C===Rt&&(C=w?Kt:void 0);let S=w?Dg(C,r):v===r?C:void 0;if(m&&!f0(S)&&(S=Dg(d,r)),f0(S)&&(c=S,a))return c;const A=e[i+1];i=a?kc(A):tf(A)}if(null!==t){let d=o?t.residualClasses:t.residualStyles;null!=d&&(c=Dg(d,r))}return c}function f0(e){return void 0!==e}function Ce(e,t=""){const n=le(),r=Qt(),i=e+Sn,o=r.firstCreatePass?td(r,i,1,t,null):r.data[i],a=n[i]=function Rc(e,t){return e.createText(t)}(n[Dt],t);U(r,n,a,o),us(o,!1)}function Bs(e){return nr("",e,""),Bs}function nr(e,t,n){const r=le(),i=function rd(e,t,n,r){return Ri(e,tu(),n)?t+bt(n)+r:Rt}(r,e,t,n);return i!==Rt&&function _u(e,t,n){const r=bh(t,e);!function U_(e,t,n){e.setValue(t,n)}(e[Dt],r,n)}(r,ti(),i),nr}const dd="en-US";let CO=dd;function vI(e,t,n,r,i){if(e=ut(e),Array.isArray(e))for(let o=0;o<e.length;o++)vI(e[o],t,n,r,i);else{const o=Qt(),a=le();let c=Zl(e)?e:ut(e.provide),d=Rk(e);const m=Hr(),v=1048575&m.providerIndexes,w=m.directiveStart,C=m.providerIndexes>>20;if(Zl(e)||!e.multi){const S=new vc(d,i,ie),A=_I(c,t,i?v:v+C,w);-1===A?(iu(Oh(m,a),o,c),yI(o,e,t.length),t.push(c),m.directiveStart++,m.directiveEnd++,i&&(m.providerIndexes+=1048576),n.push(S),a.push(S)):(n[A]=S,a[A]=S)}else{const S=_I(c,t,v+C,w),A=_I(c,t,v,v+C),V=A>=0&&n[A];if(i&&!V||!i&&!(S>=0&&n[S])){iu(Oh(m,a),o,c);const H=function nK(e,t,n,r,i){const o=new vc(e,n,ie);return o.multi=[],o.index=t,o.componentProviders=0,KO(o,i,r&&!n),o}(i?tK:eK,n.length,i,r,d);!i&&V&&(n[A].providerFactory=H),yI(o,e,t.length,0),t.push(c),m.directiveStart++,m.directiveEnd++,i&&(m.providerIndexes+=1048576),n.push(H),a.push(H)}else yI(o,e,S>-1?S:A,KO(n[i?A:S],d,!i&&r));!i&&r&&V&&n[A].componentProviders++}}}function yI(e,t,n,r){const i=Zl(t),o=function fG(e){return!!e.useClass}(t);if(i||o){const d=(o?ut(t.useClass):t).prototype.ngOnDestroy;if(d){const m=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){const v=m.indexOf(n);-1===v?m.push(n,[r,d]):m[v+1].push(r,d)}else m.push(n,d)}}}function KO(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function _I(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function eK(e,t,n,r){return wI(this.multi,[])}function tK(e,t,n,r){const i=this.multi;let o;if(this.providerFactory){const a=this.providerFactory.componentProviders,c=ou(n,n[Fe],this.providerFactory.index,r);o=c.slice(0,a),wI(i,o);for(let d=a;d<c.length;d++)o.push(c[d])}else o=[],wI(i,o);return o}function wI(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function Bn(e,t=[]){return n=>{n.providersResolver=(r,i)=>function ZW(e,t,n){const r=Qt();if(r.firstCreatePass){const i=$o(e);vI(n,r.data,r.blueprint,i,!0),vI(t,r.data,r.blueprint,i,!1)}}(r,i?i(e):e,t)}}class pd{}class QO{}class YO extends pd{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new hx(this);const r=Ir(t);this._bootstrapComponents=yu(r.bootstrap),this._r3Injector=Gk(t,n,[{provide:pd,useValue:this},{provide:Gg,useValue:this.componentFactoryResolver}],Dn(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class bI extends QO{constructor(t){super(),this.moduleType=t}create(t){return new YO(this.moduleType,t)}}class iK extends pd{constructor(t,n,r){super(),this.componentFactoryResolver=new hx(this),this.instance=null;const i=new Mk([...t,{provide:pd,useValue:this},{provide:Gg,useValue:this.componentFactoryResolver}],n||X_(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function m0(e,t,n=null){return new iK(e,t,n).injector}let oK=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n.id)){const r=Ik(0,n.type),i=r.length>0?m0([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n.id,i)}return this.cachedInjectors.get(n.id)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}}return e.\u0275prov=we({token:e,providedIn:"environment",factory:()=>new e(Ye(Ca))}),e})();function XO(e){e.getStandaloneInjector=t=>t.get(oK).getOrCreateStandaloneInjector(e)}function CI(e){return t=>{setTimeout(e,void 0,t)}}const ir=class NK extends ee{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,o=n||(()=>null),a=r;if(t&&"object"==typeof t){const d=t;i=d.next?.bind(d),o=d.error?.bind(d),a=d.complete?.bind(d)}this.__isAsync&&(o=CI(o),i&&(i=CI(i)),a&&(a=CI(a)));const c=super.subscribe({next:i,error:o,complete:a});return t instanceof Ct&&t.add(c),c}};let wu=(()=>{class e{}return e.__NG_ELEMENT_ID__=PK,e})();const xK=wu,OK=class extends xK{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(t,n){const r=this._declarationTContainer.tView,i=Z_(this._declarationLView,r,t,16,null,r.declTNode,null,null,null,null,n||null);i[as]=this._declarationLView[this._declarationTContainer.index];const a=this._declarationLView[_o];return null!==a&&(i[_o]=a.createEmbeddedView(r)),QD(r,i,t),new Kg(i)}};function PK(){return function v0(e,t){return 4&e.type?new OK(t,e,Xh(e,t)):null}(Hr(),le())}let Hs=(()=>{class e{}return e.__NG_ELEMENT_ID__=FK,e})();function FK(){return function fP(e,t){let n;const r=t[e.index];if(wo(r))n=r;else{let i;if(8&e.type)i=jr(r);else{const o=t[Dt];i=o.createComment("");const a=Yi(e,t);gu(o,g(o,a),i,function _(e,t){return e.nextSibling(t)}(o,a),!1)}t[e.index]=n=ax(r,t,i,e),t0(t,n)}return new cP(n,e,t)}(Hr(),le())}const LK=Hs,cP=class extends LK{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Xh(this._hostTNode,this._hostLView)}get injector(){return new Ec(this._hostTNode,this._hostLView)}get parentInjector(){const t=_g(this._hostTNode,this._hostLView);if(a_(t)){const n=Nh(t,this._hostLView),r=jl(t);return new Ec(n[Fe].data[r+8],n)}return new Ec(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=lP(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-Ur}createEmbeddedView(t,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=t.createEmbeddedView(n||{},o);return this.insert(a,i),a}createComponent(t,n,r,i,o){const a=t&&!function zl(e){return"function"==typeof e}(t);let c;if(a)c=n;else{const w=n||{};c=w.index,r=w.injector,i=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef}const d=a?t:new Qg(un(t)),m=r||this.parentInjector;if(!o&&null==d.ngModule){const C=(a?m:this.parentInjector).get(Ca,null);C&&(o=C)}const v=d.create(m,i,void 0,o);return this.insert(v.hostView,c),v}insert(t,n){const r=t._lView,i=r[Fe];if(function zy(e){return wo(e[Pn])}(r)){const v=this.indexOf(t);if(-1!==v)this.detach(v);else{const w=r[Pn],C=new cP(w,w[Zr],w[Pn]);C.detach(C.indexOf(t))}}const o=this._adjustIndex(n),a=this._lContainer;!function CD(e,t,n,r){const i=Ur+r,o=n.length;r>0&&(n[i-1][Bo]=t),r<o-Ur?(t[Bo]=n[i],m_(n,Ur+r,t)):(n.push(t),t[Bo]=null),t[Pn]=n;const a=t[as];null!==a&&n!==a&&function DD(e,t){const n=e[va];t[fr]!==t[Pn][Pn][fr]&&(e[Oy]=!0),null===n?e[va]=[t]:n.push(t)}(a,t);const c=t[_o];null!==c&&c.insertView(e),t[kt]|=64}(i,r,a,o);const c=me(o,a),d=r[Dt],m=g(d,a[mh]);return null!==m&&function wD(e,t,n,r,i,o){r[jo]=i,r[Zr]=t,Qe(e,r,n,1,i,o)}(i,a[Zr],d,r,m,c),t.attachToViewContainerRef(),m_(II(a),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=lP(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=Ug(this._lContainer,n);r&&(Wl(II(this._lContainer),n),B_(r[Fe],r))}detach(t){const n=this._adjustIndex(t,-1),r=Ug(this._lContainer,n);return r&&null!=Wl(II(this._lContainer),n)?new Kg(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function lP(e){return e[hi]}function II(e){return e[hi]||(e[hi]=[])}function _0(...e){}const w0=new Ge("Application Initializer");let b0=(()=>{class e{constructor(n){this.appInits=n,this.resolve=_0,this.reject=_0,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(Zg(o))n.push(o);else if(cI(o)){const a=new Promise((c,d)=>{o.subscribe({complete:c,error:d})});n.push(a)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(Ye(w0,8))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const cm=new Ge("AppId",{providedIn:"root",factory:function LP(){return`${FI()}${FI()}${FI()}`}});function FI(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const VP=new Ge("Platform Initializer"),LI=new Ge("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let f9=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const bu=new Ge("LocaleId",{providedIn:"root",factory:()=>Nt(bu,ct.Optional|ct.SkipSelf)||function h9(){return typeof $localize<"u"&&$localize.locale||dd}()});class p9{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let UP=(()=>{class e{compileModuleSync(n){return new bI(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),o=yu(Ir(n).declarations).reduce((a,c)=>{const d=un(c);return d&&a.push(new Qg(d)),a},[]);return new p9(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const v9=(()=>Promise.resolve(0))();function VI(e){typeof Zone>"u"?v9.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class pr{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ir(!1),this.onMicrotaskEmpty=new ir(!1),this.onStable=new ir(!1),this.onError=new ir(!1),typeof Zone>"u")throw new _e(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function y9(){let e=Tn.requestAnimationFrame,t=Tn.cancelAnimationFrame;if(typeof Zone<"u"&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function b9(e){const t=()=>{!function w9(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Tn,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,jI(e),e.isCheckStableRunning=!0,UI(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),jI(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,a,c)=>{try{return HP(e),n.invokeTask(i,o,a,c)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),$P(e)}},onInvoke:(n,r,i,o,a,c,d)=>{try{return HP(e),n.invoke(i,o,a,c,d)}finally{e.shouldCoalesceRunChangeDetection&&t(),$P(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,jI(e),UI(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!pr.isInAngularZone())throw new _e(909,!1)}static assertNotInAngularZone(){if(pr.isInAngularZone())throw new _e(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+i,t,_9,_0,_0);try{return o.runTask(a,n,r)}finally{o.cancelTask(a)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const _9={};function UI(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function jI(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function HP(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function $P(e){e._nesting--,UI(e)}class E9{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ir,this.onMicrotaskEmpty=new ir,this.onStable=new ir,this.onError=new ir}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}const qP=new Ge(""),E0=new Ge("");let $I,BI=(()=>{class e{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,$I||(function C9(e){$I=e}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pr.assertNotInAngularZone(),VI(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())VI(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return e.\u0275fac=function(n){return new(n||e)(Ye(pr),Ye(HI),Ye(E0))},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})(),HI=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return $I?.findTestabilityInTree(this,n,r)??null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const Eu=!1;let xc=null;const GP=new Ge("AllowMultipleToken"),qI=new Ge("PlatformDestroyListeners"),zP=new Ge("appBootstrapListener");class WP{constructor(t,n){this.name=t,this.token=n}}function QP(e,t,n=[]){const r=`Platform: ${t}`,i=new Ge(r);return(o=[])=>{let a=GI();if(!a||a.injector.get(GP,!1)){const c=[...n,...o,{provide:i,useValue:!0}];e?e(c):function T9(e){if(xc&&!xc.get(GP,!1))throw new _e(400,!1);xc=e;const t=e.get(XP);(function KP(e){const t=e.get(VP,null);t&&t.forEach(n=>n())})(e)}(function YP(e=[],t){return Da.create({name:t,providers:[{provide:LD,useValue:"platform"},{provide:qI,useValue:new Set([()=>xc=null])},...e]})}(c,r))}return function A9(e){const t=GI();if(!t)throw new _e(401,!1);return t}()}}function GI(){return xc?.get(XP)??null}let XP=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function ZP(e,t){let n;return n="noop"===e?new E9:("zone.js"===e?void 0:e)||new pr(t),n}(r?.ngZone,function JP(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(r)),o=[{provide:pr,useValue:i}];return i.run(()=>{const a=Da.create({providers:o,parent:this.injector,name:n.moduleType.name}),c=n.create(a),d=c.injector.get(Jh,null);if(!d)throw new _e(402,!1);return i.runOutsideAngular(()=>{const m=i.onError.subscribe({next:v=>{d.handleError(v)}});c.onDestroy(()=>{D0(this._modules,c),m.unsubscribe()})}),function eF(e,t,n){try{const r=n();return Zg(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(d,i,()=>{const m=c.injector.get(b0);return m.runInitializers(),m.donePromise.then(()=>(function DO(e){Ti(e,"Expected localeId to be defined"),"string"==typeof e&&(CO=e.toLowerCase().replace(/_/g,"-"))}(c.injector.get(bu,dd)||dd),this._moduleDoBootstrap(c),c))})})}bootstrapModule(n,r=[]){const i=tF({},r);return function D9(e,t,n){const r=new bI(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(C0);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new _e(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _e(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(qI,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(Ye(Da))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function tF(e,t){return Array.isArray(t)?t.reduce(tF,e):{...e,...t}}let C0=(()=>{class e{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(n,r,i){this._zone=n,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new Y(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),a=new Y(c=>{let d;this._zone.runOutsideAngular(()=>{d=this._zone.onStable.subscribe(()=>{pr.assertNotInAngularZone(),VI(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const m=this._zone.onUnstable.subscribe(()=>{pr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{d.unsubscribe(),m.unsubscribe()}});this.isStable=function er(...e){const t=j(e),n=function G(e,t){return"number"==typeof ca(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?Jt(r[0]):$i(n)(it(r,t)):Lr}(o,a.pipe(function qi(e={}){const{connector:t=(()=>new ee),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return o=>{let a,c,d,m=0,v=!1,w=!1;const C=()=>{c?.unsubscribe(),c=void 0},S=()=>{C(),a=d=void 0,v=w=!1},A=()=>{const x=a;S(),x?.unsubscribe()};return tt((x,V)=>{m++,!w&&!v&&C();const H=d=d??t();V.add(()=>{m--,0===m&&!w&&!v&&(c=Vo(A,i))}),H.subscribe(V),!a&&m>0&&(a=new cr({next:K=>H.next(K),error:K=>{w=!0,C(),c=Vo(S,n,K),H.error(K)},complete:()=>{v=!0,C(),c=Vo(S,r),H.complete()}}),Jt(x).subscribe(a))})(o)}}()))}bootstrap(n,r){const i=n instanceof Nk;if(!this._injector.get(b0).done){!i&&function Ya(e){const t=un(e)||Vr(e)||fi(e);return null!==t&&t.standalone}(n);throw new _e(405,Eu)}let a;a=i?n:this._injector.get(Gg).resolveComponentFactory(n),this.componentTypes.push(a.componentType);const c=function I9(e){return e.isBoundToModule}(a)?void 0:this._injector.get(pd),m=a.create(Da.NULL,[],r||a.selector,c),v=m.location.nativeElement,w=m.injector.get(qP,null);return w?.registerApplication(v),m.onDestroy(()=>{this.detachView(m.hostView),D0(this.components,m),w?.unregisterApplication(v)}),this._loadComponent(m),m}tick(){if(this._runningTick)throw new _e(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;D0(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(zP,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>D0(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new _e(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(n){return new(n||e)(Ye(pr),Ye(Ca),Ye(Jh))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function D0(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}let I0=(()=>{class e{}return e.__NG_ELEMENT_ID__=R9,e})();function R9(e){return function N9(e,t,n){if(Ja(e)&&!n){const r=Br(e.index,t);return new Kg(r,r)}return 47&e.type?new Kg(t[fr],t):null}(Hr(),le(),16==(16&e))}class sF{constructor(){}supports(t){return a0(t)}create(t){return new L9(t)}}const F9=(e,t)=>t;class L9{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||F9}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const a=!r||n&&n.currentIndex<uF(r,i,o)?n:r,c=uF(a,i,o),d=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(n=n._next,null==a.previousIndex)i++;else{o||(o=[]);const m=c-i,v=d-i;if(m!=v){for(let C=0;C<m;C++){const S=C<o.length?o[C]:o[C]=0,A=S+C;v<=A&&A<m&&(o[C]=S+1)}o[a.previousIndex]=v-m}}c!==d&&t(a,c,d)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!a0(t))throw new _e(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let i,o,a,n=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let c=0;c<this.length;c++)o=t[c],a=this._trackByFn(c,o),null!==n&&Object.is(n.trackById,a)?(r&&(n=this._verifyReinsertion(n,o,a,c)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,a,c),r=!0),n=n._next}else i=0,function oz(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Symbol.iterator]();let r;for(;!(r=n.next()).done;)t(r.value)}}(t,c=>{a=this._trackByFn(i,c),null!==n&&Object.is(n.trackById,a)?(r&&(n=this._verifyReinsertion(n,c,a,i)),Object.is(n.item,c)||this._addIdentityChange(n,c)):(n=this._mismatch(n,c,a,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new V9(n,r),o,i),t}_verifyReinsertion(t,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,o=t._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const i=null===n?this._itHead:n._next;return t._next=i,t._prev=n,null===i?this._itTail=t:i._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new aF),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new aF),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class V9{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class U9{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class aF{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new U9,this.map.set(n,r)),r.add(t)}get(t,n){const i=this.map.get(t);return i?i.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function uF(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function lF(){return new A0([new sF])}let A0=(()=>{class e{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||lF()),deps:[[e,new uu,new Ea]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new _e(901,!1)}}return e.\u0275prov=we({token:e,providedIn:"root",factory:lF}),e})();const q9=QP(null,"core",[]);let G9=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(Ye(C0))},e.\u0275mod=Wi({type:e}),e.\u0275inj=mo({}),e})();function vd(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}let YI=null;function Cu(){return YI}class K9{}const to=new Ge("DocumentToken");let XI=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=we({token:e,factory:function(){return function Q9(){return Ye(hF)}()},providedIn:"platform"}),e})();const Y9=new Ge("Location Initialized");let hF=(()=>{class e extends XI{constructor(n){super(),this._doc=n,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Cu().getBaseHref(this._doc)}onPopState(n){const r=Cu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=Cu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){dF()?this._history.pushState(n,r,i):this._location.hash=i}replaceState(n,r,i){dF()?this._history.replaceState(n,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return e.\u0275fac=function(n){return new(n||e)(Ye(to))},e.\u0275prov=we({token:e,factory:function(){return function X9(){return new hF(Ye(to))}()},providedIn:"platform"}),e})();function dF(){return!!window.history.pushState}function JI(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function pF(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function Du(e){return e&&"?"!==e[0]?"?"+e:e}let sf=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=we({token:e,factory:function(){return Nt(mF)},providedIn:"root"}),e})();const gF=new Ge("appBaseHref");let mF=(()=>{class e extends sf{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Nt(to).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return JI(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Du(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const a=this.prepareExternalUrl(i+Du(o));this._platformLocation.pushState(n,r,a)}replaceState(n,r,i,o){const a=this.prepareExternalUrl(i+Du(o));this._platformLocation.replaceState(n,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(Ye(XI),Ye(gF,8))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),J9=(()=>{class e extends sf{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=JI(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let a=this.prepareExternalUrl(i+Du(o));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(n,r,a)}replaceState(n,r,i,o){let a=this.prepareExternalUrl(i+Du(o));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(Ye(XI),Ye(gF,8))},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})(),ZI=(()=>{class e{constructor(n){this._subject=new ir,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function tQ(e){if(new RegExp("^(https?:)?//").test(e)){const[,n]=e.split(/\/\/[^\/]+/);return n}return e}(pF(vF(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Du(r))}normalize(n){return e.stripTrailingSlash(function eQ(e,t){if(!e||!t.startsWith(e))return t;const n=t.substring(e.length);return""===n||["/",";","?","#"].includes(n[0])?n:t}(this._basePath,vF(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Du(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Du(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}}return e.normalizeQueryParams=Du,e.joinWithSlash=JI,e.stripTrailingSlash=pF,e.\u0275fac=function(n){return new(n||e)(Ye(sf))},e.\u0275prov=we({token:e,factory:function(){return function Z9(){return new ZI(Ye(sf))}()},providedIn:"root"}),e})();function vF(e){return e.replace(/\/index.html$/,"")}function TF(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}class jQ{constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Oc=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,o,a)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new jQ(i.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)r.remove(null===o?void 0:o);else if(null!==o){const c=r.get(o);r.move(c,a),RF(c,i)}});for(let i=0,o=r.length;i<o;i++){const c=r.get(i).context;c.index=i,c.count=o,c.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{RF(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}}return e.\u0275fac=function(n){return new(n||e)(ie(Hs),ie(wu),ie(A0))},e.\u0275dir=pt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function RF(e,t){e.context.$implicit=t.item}let Tu=(()=>{class e{constructor(n,r){this._viewContainer=n,this._context=new HQ,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){NF("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){NF("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}}return e.\u0275fac=function(n){return new(n||e)(ie(Hs),ie(wu))},e.\u0275dir=pt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class HQ{constructor(){this.$implicit=null,this.ngIf=null}}function NF(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${Dn(t)}'.`)}let d7=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Wi({type:e}),e.\u0275inj=mo({}),e})();let v7=(()=>{class e{}return e.\u0275prov=we({token:e,providedIn:"root",factory:()=>new y7(Ye(to),window)}),e})();class y7{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function _7(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const a=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(a)return a}i=r.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=t)}}scrollToElement(t){const n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=PF(this.window.history)||PF(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function PF(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class FF{}class z7 extends K9{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class mT extends z7{static makeCurrent(){!function W9(e){YI||(YI=e)}(new mT)}onAndCancel(t,n,r){return t.addEventListener(n,r,!1),()=>{t.removeEventListener(n,r,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function W7(){return pm=pm||document.querySelector("base"),pm?pm.getAttribute("href"):null}();return null==n?null:function K7(e){j0=j0||document.createElement("a"),j0.setAttribute("href",e);const t=j0.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){pm=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return TF(document.cookie,t)}}let j0,pm=null;const BF=new Ge("TRANSITION_ID"),Y7=[{provide:w0,useFactory:function Q7(e,t,n){return()=>{n.get(b0).donePromise.then(()=>{const r=Cu(),i=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[BF,to,Da],multi:!0}];let J7=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})();const B0=new Ge("EventManagerPlugins");let H0=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const a=i[o];if(a.supports(n))return this._eventNameToPlugin.set(n,a),a}throw new Error(`No event manager plugin found for event ${n}`)}}return e.\u0275fac=function(n){return new(n||e)(Ye(B0),Ye(pr))},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})();class HF{constructor(t){this._doc=t}addGlobalEventListener(t,n,r){const i=Cu().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let $F=(()=>{class e{constructor(){this.usageCount=new Map}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(n){}onStyleAdded(n){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(n,r){const i=this.usageCount;let o=i.get(n)??0;return o+=r,o>0?i.set(n,o):i.delete(n),o}ngOnDestroy(){for(const n of this.getAllStyles())this.onStyleRemoved(n);this.usageCount.clear()}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})(),gm=(()=>{class e extends $F{constructor(n){super(),this.doc=n,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.forEach(o=>o.remove()),r.delete(n)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}addStyleToHost(n,r){const i=this.doc.createElement("style");i.textContent=r,n.appendChild(i);const o=this.styleRef.get(r);o?o.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}}return e.\u0275fac=function(n){return new(n||e)(Ye(to))},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})();const vT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},yT=/%COMP%/g,zF=new Ge("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function WF(e,t){return t.flat(100).map(n=>n.replace(yT,e))}function KF(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let _T=(()=>{class e{constructor(n,r,i,o){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=o,this.rendererByCompId=new Map,this.defaultRenderer=new wT(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(n,r);return i instanceof XF?i.applyToHost(n):i instanceof bT&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const a=this.eventManager,c=this.sharedStylesHost,d=this.removeStylesOnCompDestory;switch(r.encapsulation){case ss.Emulated:o=new XF(a,c,r,this.appId,d);break;case ss.ShadowDom:return new oY(a,c,n,r);default:o=new bT(a,c,r,d)}o.onDestroy=()=>i.delete(r.id),i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return e.\u0275fac=function(n){return new(n||e)(Ye(H0),Ye(gm),Ye(cm),Ye(zF))},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})();class wT{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?document.createElementNS(vT[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){(YF(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(YF(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;const o=vT[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const i=vT[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Ai.DashCase|Ai.Important)?t.style.setProperty(n,r,i&Ai.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Ai.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,KF(r)):this.eventManager.addEventListener(t,n,KF(r))}}function YF(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class oY extends wT{constructor(t,n,r,i){super(t),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=WF(i.id,i.styles);for(const a of o){const c=document.createElement("style");c.textContent=a,this.shadowRoot.appendChild(c)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class bT extends wT{constructor(t,n,r,i,o=r.id){super(t),this.sharedStylesHost=n,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=WF(o,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class XF extends bT{constructor(t,n,r,i,o){const a=i+"-"+r.id;super(t,n,r,o,a),this.contentAttr=function nY(e){return"_ngcontent-%COMP%".replace(yT,e)}(a),this.hostAttr=function rY(e){return"_nghost-%COMP%".replace(yT,e)}(a)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}let sY=(()=>{class e extends HF{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return e.\u0275fac=function(n){return new(n||e)(Ye(to))},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})();const JF=["alt","control","meta","shift"],aY={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},uY={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let cY=(()=>{class e extends HF{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,i){const o=e.parseEventName(r),a=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Cu().onAndCancel(n,o.domEventName,a))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=e._normalizeKey(r.pop());let a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),JF.forEach(m=>{const v=r.indexOf(m);v>-1&&(r.splice(v,1),a+=m+".")}),a+=o,0!=r.length||0===o.length)return null;const d={};return d.domEventName=i,d.fullKey=a,d}static matchEventFullKeyCode(n,r){let i=aY[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),JF.forEach(a=>{a!==i&&(0,uY[a])(n)&&(o+=a+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return e.\u0275fac=function(n){return new(n||e)(Ye(to))},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})();const eL=[{provide:LI,useValue:"browser"},{provide:VP,useValue:function lY(){mT.makeCurrent()},multi:!0},{provide:to,useFactory:function hY(){return function Uq(e){AD=e}(document),document},deps:[]}],dY=QP(q9,"browser",eL),tL=new Ge(""),nL=[{provide:E0,useClass:class X7{addToWindow(t){Tn.getAngularTestability=(r,i=!0)=>{const o=t.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},Tn.getAllAngularTestabilities=()=>t.getAllTestabilities(),Tn.getAllAngularRootElements=()=>t.getAllRootElements(),Tn.frameworkStabilizers||(Tn.frameworkStabilizers=[]),Tn.frameworkStabilizers.push(r=>{const i=Tn.getAllAngularTestabilities();let o=i.length,a=!1;const c=function(d){a=a||d,o--,0==o&&r(a)};i.forEach(function(d){d.whenStable(c)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?Cu().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:qP,useClass:BI,deps:[pr,HI,E0]},{provide:BI,useClass:BI,deps:[pr,HI,E0]}],rL=[{provide:LD,useValue:"root"},{provide:Jh,useFactory:function fY(){return new Jh},deps:[]},{provide:B0,useClass:sY,multi:!0,deps:[to,pr,LI]},{provide:B0,useClass:cY,multi:!0,deps:[to]},{provide:_T,useClass:_T,deps:[H0,gm,cm,zF]},{provide:xk,useExisting:_T},{provide:$F,useExisting:gm},{provide:gm,useClass:gm,deps:[to]},{provide:H0,useClass:H0,deps:[B0,pr]},{provide:FF,useClass:J7,deps:[]},[]];let pY=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:cm,useValue:n.appId},{provide:BF,useExisting:cm},Y7]}}}return e.\u0275fac=function(n){return new(n||e)(Ye(tL,12))},e.\u0275mod=Wi({type:e}),e.\u0275inj=mo({providers:[...rL,...nL],imports:[d7,G9]}),e})(),iL=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return e.\u0275fac=function(n){return new(n||e)(Ye(to))},e.\u0275prov=we({token:e,factory:function(n){let r=null;return r=n?new n:function mY(){return new iL(Ye(to))}(),r},providedIn:"root"}),e})();typeof window<"u"&&window;const{isArray:EY}=Array,{getPrototypeOf:CY,prototype:DY,keys:IY}=Object;function aL(e){if(1===e.length){const t=e[0];if(EY(t))return{args:t,keys:null};if(function TY(e){return e&&"object"==typeof e&&CY(e)===DY}(t)){const n=IY(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}const{isArray:SY}=Array;function uL(e){return Ue(t=>function AY(e,t){return SY(t)?e(...t):e(t)}(e,t))}function cL(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}let lL=(()=>{class e{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}}return e.\u0275fac=function(n){return new(n||e)(ie(vu),ie(zo))},e.\u0275dir=pt({type:e}),e})(),af=(()=>{class e extends lL{}return e.\u0275fac=function(){let t;return function(r){return(t||(t=hr(e)))(r||e)}}(),e.\u0275dir=pt({type:e,features:[yn]}),e})();const Ra=new Ge("NgValueAccessor"),NY={provide:Ra,useExisting:Zt(()=>yd),multi:!0},xY=new Ge("CompositionEventMode");let yd=(()=>{class e extends lL{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function kY(){const e=Cu()?Cu().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}}return e.\u0275fac=function(n){return new(n||e)(ie(vu),ie(zo),ie(xY,8))},e.\u0275dir=pt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){1&n&&ft("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[Bn([NY]),yn]}),e})();const OY=!1,Ni=new Ge("NgValidators"),Lc=new Ge("NgAsyncValidators");function bL(e){return null!=e}function EL(e){const t=Zg(e)?it(e):e;if(OY&&!cI(t)){let n="Expected async validator to return Promise or Observable.";throw"object"==typeof e&&(n+=" Are you using a synchronous validator where an async validator is expected?"),new _e(-1101,n)}return t}function CL(e){let t={};return e.forEach(n=>{t=null!=n?{...t,...n}:t}),0===Object.keys(t).length?null:t}function DL(e,t){return t.map(n=>n(e))}function IL(e){return e.map(t=>function FY(e){return!e.validate}(t)?t:n=>t.validate(n))}function DT(e){return null!=e?function TL(e){if(!e)return null;const t=e.filter(bL);return 0==t.length?null:function(n){return CL(DL(n,t))}}(IL(e)):null}function IT(e){return null!=e?function SL(e){if(!e)return null;const t=e.filter(bL);return 0==t.length?null:function(n){return function MY(...e){const t=B(e),{args:n,keys:r}=aL(e),i=new Y(o=>{const{length:a}=n;if(!a)return void o.complete();const c=new Array(a);let d=a,m=a;for(let v=0;v<a;v++){let w=!1;Jt(n[v]).subscribe(Re(o,C=>{w||(w=!0,m--),c[v]=C},()=>d--,void 0,()=>{(!d||!w)&&(m||o.next(r?cL(r,c):c),o.complete())}))}});return t?i.pipe(uL(t)):i}(DL(n,t).map(EL)).pipe(Ue(CL))}}(IL(e)):null}function AL(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}function TT(e){return e?Array.isArray(e)?e:[e]:[]}function q0(e,t){return Array.isArray(e)?e.includes(t):e===t}function NL(e,t){const n=TT(t);return TT(e).forEach(i=>{q0(n,i)||n.push(i)}),n}function kL(e,t){return TT(t).filter(n=>!q0(e,n))}class xL{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=DT(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=IT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,n){return!!this.control&&this.control.hasError(t,n)}getError(t,n){return this.control?this.control.getError(t,n):null}}class no extends xL{get formDirective(){return null}get path(){return null}}class Vc extends xL{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class OL{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Na=(()=>{class e extends OL{constructor(n){super(n)}}return e.\u0275fac=function(n){return new(n||e)(ie(Vc,2))},e.\u0275dir=pt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){2&n&&l0("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[yn]}),e})(),ST=(()=>{class e extends OL{constructor(n){super(n)}}return e.\u0275fac=function(n){return new(n||e)(ie(no,10))},e.\u0275dir=pt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,r){2&n&&l0("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[yn]}),e})();function PL(e,t){return e?`with name: '${t}'`:`at index: ${t}`}const RT=!1,mm="VALID",z0="INVALID",_d="PENDING",vm="DISABLED";function NT(e){return(W0(e)?e.validators:e)||null}function kT(e,t){return(W0(t)?t.asyncValidators:e)||null}function W0(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class VL{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===mm}get invalid(){return this.status===z0}get pending(){return this.status==_d}get disabled(){return this.status===vm}get enabled(){return this.status!==vm}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(NL(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(NL(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(kL(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(kL(t,this._rawAsyncValidators))}hasValidator(t){return q0(this._rawValidators,t)}hasAsyncValidator(t){return q0(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=_d,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=vm,this.errors=null,this._forEachChild(r=>{r.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=mm,this._forEachChild(r=>{r.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===mm||this.status===_d)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?vm:mm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=_d,this._hasOwnPendingAsyncValidator=!0;const n=EL(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(!1!==n.emitEvent)}get(t){let n=t;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new ir,this.statusChanges=new ir}_calculateStatus(){return this._allControlsDisabled()?vm:this.errors?z0:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_d)?_d:this._anyControlsHaveStatus(z0)?z0:mm}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){W0(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function $Y(e){return Array.isArray(e)?DT(e):e||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function qY(e){return Array.isArray(e)?IT(e):e||null}(this._rawAsyncValidators)}}class xT extends VL{constructor(t,n,r){super(NT(n),kT(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){(function LL(e,t,n){e._forEachChild((r,i)=>{if(void 0===n[i])throw new _e(1002,RT?function HY(e,t){return`Must supply a value for form control ${PL(e,t)}`}(t,i):"")})})(this,!0,t),Object.keys(t).forEach(r=>{(function FL(e,t,n){const r=e.controls;if(!(t?Object.keys(r):r).length)throw new _e(1e3,RT?function jY(e){return`\n    There are no form controls registered with this ${e?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(t):"");if(!r[n])throw new _e(1001,RT?function BY(e,t){return`Cannot find form control ${PL(e,t)}`}(t,n):"")})(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){null!=t&&(Object.keys(t).forEach(r=>{const i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}const wd=new Ge("CallSetDisabledState",{providedIn:"root",factory:()=>K0}),K0="always";function ym(e,t,n=K0){OT(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||"always"===n)&&t.valueAccessor.setDisabledState?.(e.disabled),function WY(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&UL(e,t)})}(e,t),function QY(e,t){const n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function KY(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&UL(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function zY(e,t){if(t.valueAccessor.setDisabledState){const n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function X0(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function OT(e,t){const n=function ML(e){return e._rawValidators}(e);null!==t.validator?e.setValidators(AL(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const r=function RL(e){return e._rawAsyncValidators}(e);null!==t.asyncValidator?e.setAsyncValidators(AL(r,t.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();X0(t._rawValidators,i),X0(t._rawAsyncValidators,i)}function UL(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}const eX={provide:no,useExisting:Zt(()=>wm)},_m=(()=>Promise.resolve())();let wm=(()=>{class e extends no{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new ir,this.form=new xT({},DT(n),IT(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){_m.then(()=>{const r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),ym(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){_m.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){_m.then(()=>{const r=this._findContainer(n.path),i=new xT({});(function jL(e,t){OT(e,t)})(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){_m.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){_m.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,function BL(e,t){e._syncPendingControls(),t.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}}return e.\u0275fac=function(n){return new(n||e)(ie(Ni,10),ie(Lc,10),ie(wd,8))},e.\u0275dir=pt({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,r){1&n&&ft("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Bn([eX]),yn]}),e})();function HL(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function $L(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const qL=class extends VL{constructor(t=null,n,r){super(NT(n),kT(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),W0(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=$L(t)?t.value:t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){HL(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){HL(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){$L(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},rX={provide:Vc,useExisting:Zt(()=>zs)},WL=(()=>Promise.resolve())();let zs=(()=>{class e extends Vc{constructor(n,r,i,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new qL,this._registered=!1,this.update=new ir,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function LT(e,t){if(!t)return null;let n,r,i;return Array.isArray(t),t.forEach(o=>{o.constructor===yd?n=o:function JY(e){return Object.getPrototypeOf(e.constructor)===af}(o)?r=o:i=o}),i||r||n||null}(0,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function FT(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ym(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){WL.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&vd(r);WL.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function Q0(e,t){return[...t.path,e]}(n,this._parent):[n]}}return e.\u0275fac=function(n){return new(n||e)(ie(no,9),ie(Ni,10),ie(Lc,10),ie(Ra,10),ie(I0,8),ie(wd,8))},e.\u0275dir=pt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Bn([rX]),yn,di]}),e})(),VT=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=pt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})(),QL=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Wi({type:e}),e.\u0275inj=mo({}),e})();const dX={provide:Ra,useExisting:Zt(()=>Su),multi:!0};function n2(e,t){return null==e?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let Su=(()=>{class e extends af{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;const i=n2(this._getOptionId(n),n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){const r=function pX(e){return e.split(":")[0]}(n);return this._optionMap.has(r)?this._optionMap.get(r):n}}return e.\u0275fac=function(){let t;return function(r){return(t||(t=hr(e)))(r||e)}}(),e.\u0275dir=pt({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,r){1&n&&ft("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Bn([dX]),yn]}),e})(),uf=(()=>{class e{constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){null!=this._select&&(this._select._optionMap.set(this.id,n),this._setElementValue(n2(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(n){return new(n||e)(ie(zo),ie(vu),ie(Su,9))},e.\u0275dir=pt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();const gX={provide:Ra,useExisting:Zt(()=>HT),multi:!0};function r2(e,t){return null==e?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let HT=(()=>{class e extends af{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){let r;if(this.value=n,Array.isArray(n)){const i=n.map(o=>this._getOptionId(o));r=(o,a)=>{o._setSelected(i.indexOf(a.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{const i=[],o=r.selectedOptions;if(void 0!==o){const a=o;for(let c=0;c<a.length;c++){const m=this._getOptionValue(a[c].value);i.push(m)}}else{const a=r.options;for(let c=0;c<a.length;c++){const d=a[c];if(d.selected){const m=this._getOptionValue(d.value);i.push(m)}}}this.value=i,n(i)}}_registerOption(n){const r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){const r=function mX(e){return e.split(":")[0]}(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}}return e.\u0275fac=function(){let t;return function(r){return(t||(t=hr(e)))(r||e)}}(),e.\u0275dir=pt({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,r){1&n&&ft("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Bn([gX]),yn]}),e})(),cf=(()=>{class e{constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){null!=this._select&&(this._value=n,this._setElementValue(r2(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(r2(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(n){return new(n||e)(ie(zo),ie(vu),ie(HT,9))},e.\u0275dir=pt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})(),IX=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Wi({type:e}),e.\u0275inj=mo({imports:[QL]}),e})(),SX=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:wd,useValue:n.callSetDisabledState??K0}]}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Wi({type:e}),e.\u0275inj=mo({imports:[IX]}),e})();function ht(...e){return it(e,j(e))}function Uc(e,t){return Ve(t)?zn(e,t,1):zn(e,1)}function Au(e,t){return tt((n,r)=>{let i=0;n.subscribe(Re(r,o=>e.call(t,o,i++)&&r.next(o)))})}class Z0{}class qT{}class Mu{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const i=n.slice(0,r),o=i.toLowerCase(),a=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(a):this.headers.set(o,[a])}})}:()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{let i;if(i="string"==typeof r?[r]:"number"==typeof r?[r.toString()]:r.map(o=>o.toString()),i.length>0){const o=n.toLowerCase();this.headers.set(o,i),this.maybeSetNormalizedName(n,o)}})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof Mu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){const n=new Mu;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof Mu?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){const n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,n);const i=("a"===t.op?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":const o=t.value;if(o){let a=this.headers.get(n);if(!a)return;a=a.filter(c=>-1===o.indexOf(c)),0===a.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,a)}else this.headers.delete(n),this.normalizedNames.delete(n)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}}class AX{encodeKey(t){return d2(t)}encodeValue(t){return d2(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const RX=/%(\d[a-f0-9])/gi,NX={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function d2(e){return encodeURIComponent(e).replace(RX,(t,n)=>NX[n]??t)}function ew(e){return`${e}`}class jc{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new AX,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function MX(e,t){const n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[a,c]=-1==o?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],d=n.get(a)||[];d.push(c),n.set(a,d)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{const r=t.fromObject[n],i=Array.isArray(r)?r.map(ew):[ew(r)];this.map.set(n,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){const n=[];return Object.keys(t).forEach(r=>{const i=t[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const n=new jc({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const n=("a"===t.op?this.map.get(t.param):void 0)||[];n.push(ew(t.value)),this.map.set(t.param,n);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const i=r.indexOf(ew(t.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class kX{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function p2(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function g2(e){return typeof Blob<"u"&&e instanceof Blob}function m2(e){return typeof FormData<"u"&&e instanceof FormData}class bm{constructor(t,n,r,i){let o;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function xX(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Mu),this.context||(this.context=new kX),this.params){const a=this.params.toString();if(0===a.length)this.urlWithParams=n;else{const c=n.indexOf("?");this.urlWithParams=n+(-1===c?"?":c<n.length-1?"&":"")+a}}else this.params=new jc,this.urlWithParams=n}serializeBody(){return null===this.body?null:p2(this.body)||g2(this.body)||m2(this.body)||function OX(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof jc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||m2(this.body)?null:g2(this.body)?this.body.type||null:p2(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof jc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,a=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,c=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let d=t.headers||this.headers,m=t.params||this.params;const v=t.context??this.context;return void 0!==t.setHeaders&&(d=Object.keys(t.setHeaders).reduce((w,C)=>w.set(C,t.setHeaders[C]),d)),t.setParams&&(m=Object.keys(t.setParams).reduce((w,C)=>w.set(C,t.setParams[C]),m)),new bm(n,r,o,{params:m,headers:d,context:v,reportProgress:c,responseType:i,withCredentials:a})}}var Mr=(()=>((Mr=Mr||{})[Mr.Sent=0]="Sent",Mr[Mr.UploadProgress=1]="UploadProgress",Mr[Mr.ResponseHeader=2]="ResponseHeader",Mr[Mr.DownloadProgress=3]="DownloadProgress",Mr[Mr.Response=4]="Response",Mr[Mr.User=5]="User",Mr))();class GT{constructor(t,n=200,r="OK"){this.headers=t.headers||new Mu,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class zT extends GT{constructor(t={}){super(t),this.type=Mr.ResponseHeader}clone(t={}){return new zT({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class tw extends GT{constructor(t={}){super(t),this.type=Mr.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new tw({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class v2 extends GT{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function WT(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let PX=(()=>{class e{constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof bm)o=n;else{let d,m;d=i.headers instanceof Mu?i.headers:new Mu(i.headers),i.params&&(m=i.params instanceof jc?i.params:new jc({fromObject:i.params})),o=new bm(n,r,void 0!==i.body?i.body:null,{headers:d,context:i.context,params:m,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const a=ht(o).pipe(Uc(d=>this.handler.handle(d)));if(n instanceof bm||"events"===i.observe)return a;const c=a.pipe(Au(d=>d instanceof tw));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(Ue(d=>{if(null!==d.body&&!(d.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return d.body}));case"blob":return c.pipe(Ue(d=>{if(null!==d.body&&!(d.body instanceof Blob))throw new Error("Response is not a Blob.");return d.body}));case"text":return c.pipe(Ue(d=>{if(null!==d.body&&"string"!=typeof d.body)throw new Error("Response is not a string.");return d.body}));default:return c.pipe(Ue(d=>d.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:(new jc).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,WT(i,r))}post(n,r,i={}){return this.request("POST",n,WT(i,r))}put(n,r,i={}){return this.request("PUT",n,WT(i,r))}}return e.\u0275fac=function(n){return new(n||e)(Ye(Z0))},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})();function y2(e,t){return t(e)}function FX(e,t){return(n,r)=>t.intercept(n,{handle:i=>e(i,r)})}const VX=new Ge("HTTP_INTERCEPTORS"),Em=new Ge("HTTP_INTERCEPTOR_FNS");function UX(){let e=null;return(t,n)=>(null===e&&(e=(Nt(VX,{optional:!0})??[]).reduceRight(FX,y2)),e(t,n))}let _2=(()=>{class e extends Z0{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null}handle(n){if(null===this.chain){const r=Array.from(new Set(this.injector.get(Em)));this.chain=r.reduceRight((i,o)=>function LX(e,t,n){return(r,i)=>n.runInContext(()=>t(r,o=>e(o,i)))}(i,o,this.injector),y2)}return this.chain(n,r=>this.backend.handle(r))}}return e.\u0275fac=function(n){return new(n||e)(Ye(qT),Ye(Ca))},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})();const $X=/^\)\]\}',?\n/;let b2=(()=>{class e{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Y(r=>{const i=this.xhrFactory.build();if(i.open(n.method,n.urlWithParams),n.withCredentials&&(i.withCredentials=!0),n.headers.forEach((S,A)=>i.setRequestHeader(S,A.join(","))),n.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const S=n.detectContentTypeHeader();null!==S&&i.setRequestHeader("Content-Type",S)}if(n.responseType){const S=n.responseType.toLowerCase();i.responseType="json"!==S?S:"text"}const o=n.serializeBody();let a=null;const c=()=>{if(null!==a)return a;const S=i.statusText||"OK",A=new Mu(i.getAllResponseHeaders()),x=function qX(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(i)||n.url;return a=new zT({headers:A,status:i.status,statusText:S,url:x}),a},d=()=>{let{headers:S,status:A,statusText:x,url:V}=c(),H=null;204!==A&&(H=typeof i.response>"u"?i.responseText:i.response),0===A&&(A=H?200:0);let K=A>=200&&A<300;if("json"===n.responseType&&"string"==typeof H){const q=H;H=H.replace($X,"");try{H=""!==H?JSON.parse(H):null}catch(fe){H=q,K&&(K=!1,H={error:fe,text:H})}}K?(r.next(new tw({body:H,headers:S,status:A,statusText:x,url:V||void 0})),r.complete()):r.error(new v2({error:H,headers:S,status:A,statusText:x,url:V||void 0}))},m=S=>{const{url:A}=c(),x=new v2({error:S,status:i.status||0,statusText:i.statusText||"Unknown Error",url:A||void 0});r.error(x)};let v=!1;const w=S=>{v||(r.next(c()),v=!0);let A={type:Mr.DownloadProgress,loaded:S.loaded};S.lengthComputable&&(A.total=S.total),"text"===n.responseType&&i.responseText&&(A.partialText=i.responseText),r.next(A)},C=S=>{let A={type:Mr.UploadProgress,loaded:S.loaded};S.lengthComputable&&(A.total=S.total),r.next(A)};return i.addEventListener("load",d),i.addEventListener("error",m),i.addEventListener("timeout",m),i.addEventListener("abort",m),n.reportProgress&&(i.addEventListener("progress",w),null!==o&&i.upload&&i.upload.addEventListener("progress",C)),i.send(o),r.next({type:Mr.Sent}),()=>{i.removeEventListener("error",m),i.removeEventListener("abort",m),i.removeEventListener("load",d),i.removeEventListener("timeout",m),n.reportProgress&&(i.removeEventListener("progress",w),null!==o&&i.upload&&i.upload.removeEventListener("progress",C)),i.readyState!==i.DONE&&i.abort()}})}}return e.\u0275fac=function(n){return new(n||e)(Ye(FF))},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})();const KT=new Ge("XSRF_ENABLED"),E2=new Ge("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),C2=new Ge("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class D2{}let WX=(()=>{class e{constructor(n,r,i){this.doc=n,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=TF(n,this.cookieName),this.lastCookieString=n),this.lastToken}}return e.\u0275fac=function(n){return new(n||e)(Ye(to),Ye(LI),Ye(E2))},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})();function KX(e,t){const n=e.url.toLowerCase();if(!Nt(KT)||"GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t(e);const r=Nt(D2).getToken(),i=Nt(C2);return null!=r&&!e.headers.has(i)&&(e=e.clone({headers:e.headers.set(i,r)})),t(e)}var vr=(()=>((vr=vr||{})[vr.Interceptors=0]="Interceptors",vr[vr.LegacyInterceptors=1]="LegacyInterceptors",vr[vr.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",vr[vr.NoXsrfProtection=3]="NoXsrfProtection",vr[vr.JsonpSupport=4]="JsonpSupport",vr[vr.RequestsMadeViaParent=5]="RequestsMadeViaParent",vr))();function bd(e,t){return{\u0275kind:e,\u0275providers:t}}function QX(...e){const t=[PX,b2,_2,{provide:Z0,useExisting:_2},{provide:qT,useExisting:b2},{provide:Em,useValue:KX,multi:!0},{provide:KT,useValue:!0},{provide:D2,useClass:WX}];for(const n of e)t.push(...n.\u0275providers);return function uG(e){return{\u0275providers:e}}(t)}const I2=new Ge("LEGACY_INTERCEPTOR_FN");let XX=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Wi({type:e}),e.\u0275inj=mo({providers:[QX(bd(vr.LegacyInterceptors,[{provide:I2,useFactory:UX},{provide:Em,useExisting:I2,multi:!0}]))]}),e})();class Ws extends ee{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}const nw=Tt(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function T2(...e){const t=j(e),n=B(e),{args:r,keys:i}=aL(e);if(0===r.length)return it([],t);const o=new Y(function JX(e,t,n=Cn){return r=>{S2(t,()=>{const{length:i}=e,o=new Array(i);let a=i,c=i;for(let d=0;d<i;d++)S2(t,()=>{const m=it(e[d],t);let v=!1;m.subscribe(Re(r,w=>{o[d]=w,v||(v=!0,c--),c||r.next(n(o.slice()))},()=>{--a||r.complete()}))},r)},r)}}(r,t,i?a=>cL(i,a):Cn));return n?o.pipe(uL(n)):o}function S2(e,t,n){e?ci(n,e,t):t()}function QT(...e){return function ZX(){return $i(1)}()(it(e,j(e)))}function A2(e){return new Y(t=>{Jt(e()).subscribe(t)})}function Cm(e,t){const n=Ve(e)?e:()=>e,r=i=>i.error(n());return new Y(t?i=>t.schedule(r,0,i):r)}function YT(){return tt((e,t)=>{let n=null;e._refCount++;const r=Re(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(n=null);const i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}class M2 extends Y{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Le(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Ct;const n=this.getSubject();t.add(this.source.subscribe(Re(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Ct.EMPTY)}return t}refCount(){return YT()(this)}}function ka(e,t){return tt((n,r)=>{let i=null,o=0,a=!1;const c=()=>a&&!i&&r.complete();n.subscribe(Re(r,d=>{i?.unsubscribe();let m=0;const v=o++;Jt(e(d,v)).subscribe(i=Re(r,w=>r.next(t?t(d,w,v,m++):w),()=>{i=null,c()}))},()=>{a=!0,c()}))})}function Ed(e){return e<=0?()=>Lr:tt((t,n)=>{let r=0;t.subscribe(Re(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function rw(e){return tt((t,n)=>{let r=!1;t.subscribe(Re(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function R2(e=tJ){return tt((t,n)=>{let r=!1;t.subscribe(Re(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function tJ(){return new nw}function Bc(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Au((i,o)=>e(i,o,r)):Cn,Ed(1),n?rw(t):R2(()=>new nw))}function ki(e,t,n){const r=Ve(e)||t||n?{next:e,error:t,complete:n}:e;return r?tt((i,o)=>{var a;null===(a=r.subscribe)||void 0===a||a.call(r);let c=!0;i.subscribe(Re(o,d=>{var m;null===(m=r.next)||void 0===m||m.call(r,d),o.next(d)},()=>{var d;c=!1,null===(d=r.complete)||void 0===d||d.call(r),o.complete()},d=>{var m;c=!1,null===(m=r.error)||void 0===m||m.call(r,d),o.error(d)},()=>{var d,m;c&&(null===(d=r.unsubscribe)||void 0===d||d.call(r)),null===(m=r.finalize)||void 0===m||m.call(r)}))}):Cn}function Hc(e){return tt((t,n)=>{let o,r=null,i=!1;r=t.subscribe(Re(n,void 0,void 0,a=>{o=Jt(e(a,Hc(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function N2(e,t){return tt(function nJ(e,t,n,r,i){return(o,a)=>{let c=n,d=t,m=0;o.subscribe(Re(a,v=>{const w=m++;d=c?e(d,v,w):(c=!0,v),r&&a.next(d)},i&&(()=>{c&&a.next(d),a.complete()})))}}(e,t,arguments.length>=2,!0))}function XT(e){return e<=0?()=>Lr:tt((t,n)=>{let r=[];t.subscribe(Re(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function k2(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Au((i,o)=>e(i,o,r)):Cn,XT(1),n?rw(t):R2(()=>new nw))}function JT(e){return tt((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}const Ot="primary",Dm=Symbol("RouteTitle");class oJ{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Cd(e){return new oJ(e)}function sJ(e,t,n){const r=n.path.split("/");if(r.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let o=0;o<r.length;o++){const a=r[o],c=e[o];if(a.startsWith(":"))i[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function xa(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!x2(e[i],t[i]))return!1;return!0}function x2(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}return e===t}function O2(e){return Array.prototype.concat.apply([],e)}function P2(e){return e.length>0?e[e.length-1]:null}function pi(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function $c(e){return cI(e)?e:Zg(e)?it(Promise.resolve(e)):ht(e)}const iw=!1,uJ={exact:function V2(e,t,n){if(!ff(e.segments,t.segments)||!ow(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!e.children[r]||!V2(e.children[r],t.children[r],n))return!1;return!0},subset:U2},F2={exact:function cJ(e,t){return xa(e,t)},subset:function lJ(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>x2(e[n],t[n]))},ignored:()=>!0};function L2(e,t,n){return uJ[n.paths](e.root,t.root,n.matrixParams)&&F2[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function U2(e,t,n){return j2(e,t,t.segments,n)}function j2(e,t,n,r){if(e.segments.length>n.length){const i=e.segments.slice(0,n.length);return!(!ff(i,n)||t.hasChildren()||!ow(i,n,r))}if(e.segments.length===n.length){if(!ff(e.segments,n)||!ow(e.segments,n,r))return!1;for(const i in t.children)if(!e.children[i]||!U2(e.children[i],t.children[i],r))return!1;return!0}{const i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!!(ff(e.segments,i)&&ow(e.segments,i,r)&&e.children[Ot])&&j2(e.children[Ot],t,o,r)}}function ow(e,t,n){return t.every((r,i)=>F2[n](e[i].parameters,r.parameters))}class qc{constructor(t=new Bt([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cd(this.queryParams)),this._queryParamMap}toString(){return dJ.serialize(this)}}class Bt{constructor(t,n){this.segments=t,this.children=n,this.parent=null,pi(n,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return sw(this)}}class Im{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Cd(this.parameters)),this._parameterMap}toString(){return $2(this)}}function ff(e,t){return e.length===t.length&&e.every((n,r)=>n.path===t[r].path)}let Tm=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=we({token:e,factory:function(){return new ZT},providedIn:"root"}),e})();class ZT{parse(t){const n=new EJ(t);return new qc(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${Sm(t.root,!0)}`,r=function mJ(e){const t=Object.keys(e).map(n=>{const r=e[n];return Array.isArray(r)?r.map(i=>`${aw(n)}=${aw(i)}`).join("&"):`${aw(n)}=${aw(r)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${n}${r}${"string"==typeof t.fragment?`#${function pJ(e){return encodeURI(e)}(t.fragment)}`:""}`}}const dJ=new ZT;function sw(e){return e.segments.map(t=>$2(t)).join("/")}function Sm(e,t){if(!e.hasChildren())return sw(e);if(t){const n=e.children[Ot]?Sm(e.children[Ot],!1):"",r=[];return pi(e.children,(i,o)=>{o!==Ot&&r.push(`${o}:${Sm(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function hJ(e,t){let n=[];return pi(e.children,(r,i)=>{i===Ot&&(n=n.concat(t(r,i)))}),pi(e.children,(r,i)=>{i!==Ot&&(n=n.concat(t(r,i)))}),n}(e,(r,i)=>i===Ot?[Sm(e.children[Ot],!1)]:[`${i}:${Sm(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[Ot]?`${sw(e)}/${n[0]}`:`${sw(e)}/(${n.join("//")})`}}function B2(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function aw(e){return B2(e).replace(/%3B/gi,";")}function eS(e){return B2(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function uw(e){return decodeURIComponent(e)}function H2(e){return uw(e.replace(/\+/g,"%20"))}function $2(e){return`${eS(e.path)}${function gJ(e){return Object.keys(e).map(t=>`;${eS(t)}=${eS(e[t])}`).join("")}(e.parameters)}`}const vJ=/^[^\/()?;=#]+/;function cw(e){const t=e.match(vJ);return t?t[0]:""}const yJ=/^[^=?&#]+/,wJ=/^[^&#]+/;class EJ{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Bt([],{}):new Bt([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[Ot]=new Bt(t,n)),r}parseSegment(){const t=cw(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new _e(4009,iw);return this.capture(t),new Im(uw(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=cw(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=cw(this.remaining);i&&(r=i,this.capture(r))}t[uw(n)]=uw(r)}parseQueryParam(t){const n=function _J(e){const t=e.match(yJ);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const a=function bJ(e){const t=e.match(wJ);return t?t[0]:""}(this.remaining);a&&(r=a,this.capture(r))}const i=H2(n),o=H2(r);if(t.hasOwnProperty(i)){let a=t[i];Array.isArray(a)||(a=[a],t[i]=a),a.push(o)}else t[i]=o}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=cw(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new _e(4010,iw);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=Ot);const a=this.parseChildren();n[o]=1===Object.keys(a).length?a[Ot]:new Bt([],a),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new _e(4011,iw)}}function tS(e){return e.segments.length>0?new Bt([],{[Ot]:e}):e}function lw(e){const t={};for(const r of Object.keys(e.children)){const o=lw(e.children[r]);(o.segments.length>0||o.hasChildren())&&(t[r]=o)}return function CJ(e){if(1===e.numberOfChildren&&e.children[Ot]){const t=e.children[Ot];return new Bt(e.segments.concat(t.segments),t.children)}return e}(new Bt(e.segments,t))}function hf(e){return e instanceof qc}const nS=!1;function DJ(e,t,n,r,i){if(0===n.length)return Dd(t.root,t.root,t.root,r,i);const o=function K2(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new W2(!0,0,e);let t=0,n=!1;const r=e.reduce((i,o,a)=>{if("object"==typeof o&&null!=o){if(o.outlets){const c={};return pi(o.outlets,(d,m)=>{c[m]="string"==typeof d?d.split("/"):d}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===a?(o.split("/").forEach((c,d)=>{0==d&&"."===c||(0==d&&""===c?n=!0:".."===c?t++:""!=c&&i.push(c))}),i):[...i,o]},[]);return new W2(n,t,r)}(n);return o.toRoot()?Dd(t.root,t.root,new Bt([],{}),r,i):function a(d){const m=function TJ(e,t,n,r){if(e.isAbsolute)return new Id(t.root,!0,0);if(-1===r)return new Id(n,n===t.root,0);return function Q2(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new _e(4005,nS&&"Invalid number of '../'");i=r.segments.length}return new Id(r,!1,i-o)}(n,r+(Am(e.commands[0])?0:1),e.numberOfDoubleDots)}(o,t,e.snapshot?._urlSegment,d),v=m.processChildren?Td(m.segmentGroup,m.index,o.commands):rS(m.segmentGroup,m.index,o.commands);return Dd(t.root,m.segmentGroup,v,r,i)}(e.snapshot?._lastPathIndex)}function Am(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Mm(e){return"object"==typeof e&&null!=e&&e.outlets}function Dd(e,t,n,r,i){let a,o={};r&&pi(r,(d,m)=>{o[m]=Array.isArray(d)?d.map(v=>`${v}`):`${d}`}),a=e===t?n:z2(e,t,n);const c=tS(lw(a));return new qc(c,o,i)}function z2(e,t,n){const r={};return pi(e.children,(i,o)=>{r[o]=i===t?n:z2(i,t,n)}),new Bt(e.segments,r)}class W2{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Am(r[0]))throw new _e(4003,nS&&"Root segment cannot have matrix parameters");const i=r.find(Mm);if(i&&i!==P2(r))throw new _e(4004,nS&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Id{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}}function rS(e,t,n){if(e||(e=new Bt([],{})),0===e.segments.length&&e.hasChildren())return Td(e,t,n);const r=function AJ(e,t,n){let r=0,i=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;const a=e.segments[i],c=n[r];if(Mm(c))break;const d=`${c}`,m=r<n.length-1?n[r+1]:null;if(i>0&&void 0===d)break;if(d&&m&&"object"==typeof m&&void 0===m.outlets){if(!X2(d,m,a))return o;r+=2}else{if(!X2(d,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const o=new Bt(e.segments.slice(0,r.pathIndex),{});return o.children[Ot]=new Bt(e.segments.slice(r.pathIndex),e.children),Td(o,0,i)}return r.match&&0===i.length?new Bt(e.segments,{}):r.match&&!e.hasChildren()?iS(e,t,n):r.match?Td(e,0,i):iS(e,t,n)}function Td(e,t,n){if(0===n.length)return new Bt(e.segments,{});{const r=function SJ(e){return Mm(e[0])?e[0].outlets:{[Ot]:e}}(n),i={};if(!r[Ot]&&e.children[Ot]&&1===e.numberOfChildren&&0===e.children[Ot].segments.length){const o=Td(e.children[Ot],t,n);return new Bt(e.segments,o.children)}return pi(r,(o,a)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[a]=rS(e.children[a],t,o))}),pi(e.children,(o,a)=>{void 0===r[a]&&(i[a]=o)}),new Bt(e.segments,i)}}function iS(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const o=n[i];if(Mm(o)){const d=MJ(o.outlets);return new Bt(r,d)}if(0===i&&Am(n[0])){r.push(new Im(e.segments[t].path,Y2(n[0]))),i++;continue}const a=Mm(o)?o.outlets[Ot]:`${o}`,c=i<n.length-1?n[i+1]:null;a&&c&&Am(c)?(r.push(new Im(a,Y2(c))),i+=2):(r.push(new Im(a,{})),i++)}return new Bt(r,{})}function MJ(e){const t={};return pi(e,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(t[r]=iS(new Bt([],{}),0,n))}),t}function Y2(e){const t={};return pi(e,(n,r)=>t[r]=`${n}`),t}function X2(e,t,n){return e==n.path&&xa(t,n.parameters)}const Rm="imperative";class Oa{constructor(t,n){this.id=t,this.url=n}}class oS extends Oa{constructor(t,n,r="imperative",i=null){super(t,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class df extends Oa{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class fw extends Oa{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class hw extends Oa{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=16}}class sS extends Oa{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class RJ extends Oa{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class NJ extends Oa{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kJ extends Oa{constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class xJ extends Oa{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class OJ extends Oa{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class PJ{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class FJ{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class LJ{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class VJ{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class UJ{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jJ{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class J2{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let $J=(()=>{class e{createUrlTree(n,r,i,o,a,c){return DJ(n||r.root,i,o,a,c)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})(),GJ=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=we({token:e,factory:function(t){return $J.\u0275fac(t)},providedIn:"root"}),e})();class Z2{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=aS(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){const n=aS(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=uS(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return uS(t,this._root).map(n=>n.value)}}function aS(e,t){if(e===t.value)return t;for(const n of t.children){const r=aS(e,n);if(r)return r}return null}function uS(e,t){if(e===t.value)return[t];for(const n of t.children){const r=uS(e,n);if(r.length)return r.unshift(t),r}return[]}class Ru{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function Sd(e){const t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}class eV extends Z2{constructor(t,n){super(t),this.snapshot=n,cS(this,t)}toString(){return this.snapshot.toString()}}function tV(e,t){const n=function zJ(e,t){const a=new dw([],{},{},"",{},Ot,t,null,e.root,-1,{});return new rV("",new Ru(a,[]))}(e,t),r=new Ws([new Im("",{})]),i=new Ws({}),o=new Ws({}),a=new Ws({}),c=new Ws(""),d=new Ad(r,i,a,c,o,Ot,t,n.root);return d.snapshot=n.root,new eV(new Ru(d,[]),n)}class Ad{constructor(t,n,r,i,o,a,c,d){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=c,this.title=this.data?.pipe(Ue(m=>m[Dm]))??ht(void 0),this._futureSnapshot=d}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ue(t=>Cd(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ue(t=>Cd(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function nV(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function WJ(e){return e.reduce((t,n)=>({params:{...t.params,...n.params},data:{...t.data,...n.data},resolve:{...n.data,...t.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class dw{get title(){return this.data?.[Dm]}constructor(t,n,r,i,o,a,c,d,m,v,w){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=c,this.routeConfig=d,this._urlSegment=m,this._lastPathIndex=v,this._resolve=w}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Cd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class rV extends Z2{constructor(t,n){super(n),this.url=t,cS(this,n)}toString(){return iV(this._root)}}function cS(e,t){t.value._routerState=e,t.children.forEach(n=>cS(e,n))}function iV(e){const t=e.children.length>0?` { ${e.children.map(iV).join(", ")} } `:"";return`${e.value}${t}`}function lS(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,xa(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),xa(t.params,n.params)||e.params.next(n.params),function aJ(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!xa(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),xa(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function fS(e,t){const n=xa(e.params,t.params)&&function fJ(e,t){return ff(e,t)&&e.every((n,r)=>xa(n.parameters,t[r].parameters))}(e.url,t.url);return n&&!(!e.parent!=!t.parent)&&(!e.parent||fS(e.parent,t.parent))}function Nm(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function QJ(e,t,n){return t.children.map(r=>{for(const i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return Nm(e,r,i);return Nm(e,r)})}(e,t,n);return new Ru(r,i)}{if(e.shouldAttach(t.value)){const o=e.retrieve(t.value);if(null!==o){const a=o.route;return a.value._futureSnapshot=t.value,a.children=t.children.map(c=>Nm(e,c)),a}}const r=function YJ(e){return new Ad(new Ws(e.url),new Ws(e.params),new Ws(e.queryParams),new Ws(e.fragment),new Ws(e.data),e.outlet,e.component,e)}(t.value),i=t.children.map(o=>Nm(e,o));return new Ru(r,i)}}const hS="ngNavigationCancelingError";function oV(e,t){const{redirectTo:n,navigationBehaviorOptions:r}=hf(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=sV(!1,0,t);return i.url=n,i.navigationBehaviorOptions=r,i}function sV(e,t,n){const r=new Error("NavigationCancelingError: "+(e||""));return r[hS]=!0,r.cancellationCode=t,n&&(r.url=n),r}function aV(e){return uV(e)&&hf(e.url)}function uV(e){return e&&e[hS]}class XJ{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new km,this.attachRef=null}}let km=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new XJ,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const pw=!1;let dS=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ot,this.activateEvents=new ir,this.deactivateEvents=new ir,this.attachEvents=new ir,this.detachEvents=new ir,this.parentContexts=Nt(km),this.location=Nt(Hs),this.changeDetector=Nt(I0),this.environmentInjector=Nt(Ca)}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _e(4012,pw);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _e(4012,pw);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _e(4012,pw);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new _e(4013,pw);this._activatedRoute=n;const i=this.location,a=n.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,d=new JJ(n,c,i.injector);if(r&&function ZJ(e){return!!e.resolveComponentFactory}(r)){const m=r.resolveComponentFactory(a);this.activated=i.createComponent(m,i.length,d)}else this.activated=i.createComponent(a,{index:i.length,injector:d,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=pt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[di]}),e})();class JJ{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===Ad?this.route:t===km?this.childContexts:this.parent.get(t,n)}}let pS=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Jr({type:e,selectors:[["ng-component"]],standalone:!0,features:[XO],decls:1,vars:0,template:function(n,r){1&n&&tn(0,"router-outlet")},dependencies:[dS],encapsulation:2}),e})();function cV(e,t){return e.providers&&!e._injector&&(e._injector=m0(e.providers,t,`Route: ${e.path}`)),e._injector??t}function mS(e){const t=e.children&&e.children.map(mS),n=t?{...e,children:t}:{...e};return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Ot&&(n.component=pS),n}function vs(e){return e.outlet||Ot}function lV(e,t){const n=e.filter(r=>vs(r)===t);return n.push(...e.filter(r=>vs(r)!==t)),n}function xm(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){const n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class iZ{constructor(t,n,r,i){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i}activate(t){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),lS(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){const i=Sd(n);t.children.forEach(o=>{const a=o.value.outlet;this.deactivateRoutes(o,i[a],r),delete i[a]}),pi(i,(o,a)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){const i=t.value,o=n?n.value:null;if(i===o)if(i.component){const a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(t,n,a.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Sd(t);for(const a of Object.keys(o))this.deactivateRouteAndItsChildren(o[a],i);if(r&&r.outlet){const a=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:a,route:t,contexts:c})}}deactivateRouteAndOutlet(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Sd(t);for(const a of Object.keys(o))this.deactivateRouteAndItsChildren(o[a],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,n,r){const i=Sd(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new jJ(o.value.snapshot))}),t.children.length&&this.forwardEvent(new VJ(t.value.snapshot))}activateRoutes(t,n,r){const i=t.value,o=n?n.value:null;if(lS(i),i===o)if(i.component){const a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,a.children)}else this.activateChildRoutes(t,n,r);else if(i.component){const a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),lS(c.route.value),this.activateChildRoutes(t,null,a.children)}else{const c=xm(i.snapshot),d=c?.get(Gg)??null;a.attachRef=null,a.route=i,a.resolver=d,a.injector=c,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,r)}}class fV{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class gw{constructor(t,n){this.component=t,this.route=n}}function oZ(e,t,n){const r=e._root;return Om(r,t?t._root:null,n,[r.value])}function Md(e,t){const n=Symbol(),r=t.get(e,n);return r===n?"function"!=typeof e||function vo(e){return null!==ec(e)}(e)?t.get(e):e:r}function Om(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Sd(t);return e.children.forEach(a=>{(function aZ(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,a=t?t.value:null,c=n?n.getContext(e.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){const d=function uZ(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!ff(e.url,t.url);case"pathParamsOrQueryParamsChange":return!ff(e.url,t.url)||!xa(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fS(e,t)||!xa(e.queryParams,t.queryParams);default:return!fS(e,t)}}(a,o,o.routeConfig.runGuardsAndResolvers);d?i.canActivateChecks.push(new fV(r)):(o.data=a.data,o._resolvedData=a._resolvedData),Om(e,t,o.component?c?c.children:null:n,r,i),d&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new gw(c.outlet.component,a))}else a&&Pm(t,c,i),i.canActivateChecks.push(new fV(r)),Om(e,null,o.component?c?c.children:null:n,r,i)})(a,o[a.value.outlet],n,r.concat([a.value]),i),delete o[a.value.outlet]}),pi(o,(a,c)=>Pm(a,n.getContext(c),i)),i}function Pm(e,t,n){const r=Sd(e),i=e.value;pi(r,(o,a)=>{Pm(o,i.component?t?t.children.getContext(a):null:t,n)}),n.canDeactivateChecks.push(new gw(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}function Fm(e){return"function"==typeof e}function vS(e){return e instanceof nw||"EmptyError"===e?.name}const mw=Symbol("INITIAL_VALUE");function Rd(){return ka(e=>T2(e.map(t=>t.pipe(Ed(1),function eJ(...e){const t=j(e);return tt((n,r)=>{(t?QT(e,n,t):QT(e,n)).subscribe(r)})}(mw)))).pipe(Ue(t=>{for(const n of t)if(!0!==n){if(n===mw)return mw;if(!1===n||n instanceof qc)return n}return!0}),Au(t=>t!==mw),Ed(1)))}function hV(e){return function lr(...e){return Gn(e)}(ki(t=>{if(hf(t))throw oV(0,t)}),Ue(t=>!0===t))}const yS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function dV(e,t,n,r,i){const o=_S(e,t,n);return o.matched?function IZ(e,t,n,r){const i=t.canMatch;return i&&0!==i.length?ht(i.map(a=>{const c=Md(a,e);return $c(function pZ(e){return e&&Fm(e.canMatch)}(c)?c.canMatch(t,n):e.runInContext(()=>c(t,n)))})).pipe(Rd(),hV()):ht(!0)}(r=cV(t,r),t,n).pipe(Ue(a=>!0===a?o:{...yS})):ht(o)}function _S(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{...yS}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(t.matcher||sJ)(n,e,t);if(!i)return{...yS};const o={};pi(i.posParams,(c,d)=>{o[d]=c.path});const a=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function vw(e,t,n,r){if(n.length>0&&function AZ(e,t,n){return n.some(r=>yw(e,t,r)&&vs(r)!==Ot)}(e,n,r)){const o=new Bt(t,function SZ(e,t,n,r){const i={};i[Ot]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const o of n)if(""===o.path&&vs(o)!==Ot){const a=new Bt([],{});a._sourceSegment=e,a._segmentIndexShift=t.length,i[vs(o)]=a}return i}(e,t,r,new Bt(n,e.children)));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===n.length&&function MZ(e,t,n){return n.some(r=>yw(e,t,r))}(e,n,r)){const o=new Bt(e.segments,function TZ(e,t,n,r,i){const o={};for(const a of r)if(yw(e,n,a)&&!i[vs(a)]){const c=new Bt([],{});c._sourceSegment=e,c._segmentIndexShift=t.length,o[vs(a)]=c}return{...i,...o}}(e,t,n,r,e.children));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}const i=new Bt(e.segments,e.children);return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:n}}function yw(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function pV(e,t,n,r){return!!(vs(e)===r||r!==Ot&&yw(t,n,e))&&("**"===e.path||_S(t,e,n).matched)}function gV(e,t,n){return 0===t.length&&!e.children[n]}const _w=!1;class ww{constructor(t){this.segmentGroup=t||null}}class mV{constructor(t){this.urlTree=t}}function Lm(e){return Cm(new ww(e))}function vV(e){return Cm(new mV(e))}class xZ{constructor(t,n,r,i,o){this.injector=t,this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const t=vw(this.urlTree.root,[],[],this.config).segmentGroup,n=new Bt(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,n,Ot).pipe(Ue(o=>this.createUrlTree(lw(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Hc(o=>{if(o instanceof mV)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof ww?this.noMatchError(o):o}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,Ot).pipe(Ue(i=>this.createUrlTree(lw(i),t.queryParams,t.fragment))).pipe(Hc(i=>{throw i instanceof ww?this.noMatchError(i):i}))}noMatchError(t){return new _e(4002,_w)}createUrlTree(t,n,r){const i=tS(t);return new qc(i,n,r)}expandSegmentGroup(t,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,n,r).pipe(Ue(o=>new Bt([],o))):this.expandSegment(t,r,n,r.segments,i,!0)}expandChildren(t,n,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return it(i).pipe(Uc(o=>{const a=r.children[o],c=lV(n,o);return this.expandSegmentGroup(t,c,a,o).pipe(Ue(d=>({segment:d,outlet:o})))}),N2((o,a)=>(o[a.outlet]=a.segment,o),{}),k2())}expandSegment(t,n,r,i,o,a){return it(r).pipe(Uc(c=>this.expandSegmentAgainstRoute(t,n,r,c,i,o,a).pipe(Hc(m=>{if(m instanceof ww)return ht(null);throw m}))),Bc(c=>!!c),Hc((c,d)=>{if(vS(c))return gV(n,i,o)?ht(new Bt([],{})):Lm(n);throw c}))}expandSegmentAgainstRoute(t,n,r,i,o,a,c){return pV(i,n,o,a)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,n,i,o,a):c&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,a):Lm(n):Lm(n)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,a){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,a):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,o,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?vV(o):this.lineralizeSegments(r,o).pipe(zn(a=>{const c=new Bt(a,{});return this.expandSegment(t,c,n,a,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,o,a){const{matched:c,consumedSegments:d,remainingSegments:m,positionalParamSegments:v}=_S(n,i,o);if(!c)return Lm(n);const w=this.applyRedirectCommands(d,i.redirectTo,v);return i.redirectTo.startsWith("/")?vV(w):this.lineralizeSegments(i,w).pipe(zn(C=>this.expandSegment(t,n,r,C.concat(m),a,!1)))}matchSegmentAgainstRoute(t,n,r,i,o){return"**"===r.path?(t=cV(r,t),r.loadChildren?(r._loadedRoutes?ht({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(t,r)).pipe(Ue(c=>(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,new Bt(i,{})))):ht(new Bt(i,{}))):dV(n,r,i,t).pipe(ka(({matched:a,consumedSegments:c,remainingSegments:d})=>a?this.getChildConfig(t=r._injector??t,r,i).pipe(zn(v=>{const w=v.injector??t,C=v.routes,{segmentGroup:S,slicedSegments:A}=vw(n,c,d,C),x=new Bt(S.segments,S.children);if(0===A.length&&x.hasChildren())return this.expandChildren(w,C,x).pipe(Ue(q=>new Bt(c,q)));if(0===C.length&&0===A.length)return ht(new Bt(c,{}));const V=vs(r)===o;return this.expandSegment(w,x,C,A,V?Ot:o,!0).pipe(Ue(K=>new Bt(c.concat(K.segments),K.children)))})):Lm(n)))}getChildConfig(t,n,r){return n.children?ht({routes:n.children,injector:t}):n.loadChildren?void 0!==n._loadedRoutes?ht({routes:n._loadedRoutes,injector:n._loadedInjector}):function DZ(e,t,n,r){const i=t.canLoad;return void 0===i||0===i.length?ht(!0):ht(i.map(a=>{const c=Md(a,e);return $c(function lZ(e){return e&&Fm(e.canLoad)}(c)?c.canLoad(t,n):e.runInContext(()=>c(t,n)))})).pipe(Rd(),hV())}(t,n,r).pipe(zn(i=>i?this.configLoader.loadChildren(t,n).pipe(ki(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function NZ(e){return Cm(sV(_w,3))}())):ht({routes:[],injector:t})}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ht(r);if(i.numberOfChildren>1||!i.children[Ot])return t.redirectTo,Cm(new _e(4e3,_w));i=i.children[Ot]}}applyRedirectCommands(t,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r)}applyRedirectCreateUrlTree(t,n,r,i){const o=this.createSegmentGroup(t,n.root,r,i);return new qc(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const r={};return pi(t,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const c=i.substring(1);r[o]=n[c]}else r[o]=i}),r}createSegmentGroup(t,n,r,i){const o=this.createSegments(t,n.segments,r,i);let a={};return pi(n.children,(c,d)=>{a[d]=this.createSegmentGroup(t,c,r,i)}),new Bt(o,a)}createSegments(t,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){const i=r[n.path.substring(1)];if(!i)throw new _e(4001,_w);return i}findOrReturn(t,n){let r=0;for(const i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}}class PZ{}class VZ{constructor(t,n,r,i,o,a,c){this.injector=t,this.rootComponentType=n,this.config=r,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=a,this.urlSerializer=c}recognize(){const t=vw(this.urlTree.root,[],[],this.config.filter(n=>void 0===n.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Ot).pipe(Ue(n=>{if(null===n)return null;const r=new dw([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ot,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ru(r,n),o=new rV(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(t){const n=t.value,r=nV(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(t,n,r):this.processSegment(t,n,r,r.segments,i)}processChildren(t,n,r){return it(Object.keys(r.children)).pipe(Uc(i=>{const o=r.children[i],a=lV(n,i);return this.processSegmentGroup(t,a,o,i)}),N2((i,o)=>i&&o?(i.push(...o),i):null),function rJ(e,t=!1){return tt((n,r)=>{let i=0;n.subscribe(Re(r,o=>{const a=e(o,i++);(a||t)&&r.next(o),!a&&r.complete()}))})}(i=>null!==i),rw(null),k2(),Ue(i=>{if(null===i)return null;const o=_V(i);return function UZ(e){e.sort((t,n)=>t.value.outlet===Ot?-1:n.value.outlet===Ot?1:t.value.outlet.localeCompare(n.value.outlet))}(o),o}))}processSegment(t,n,r,i,o){return it(n).pipe(Uc(a=>this.processSegmentAgainstRoute(a._injector??t,a,r,i,o)),Bc(a=>!!a),Hc(a=>{if(vS(a))return gV(r,i,o)?ht([]):ht(null);throw a}))}processSegmentAgainstRoute(t,n,r,i,o){if(n.redirectTo||!pV(n,r,i,o))return ht(null);let a;if("**"===n.path){const c=i.length>0?P2(i).parameters:{},d=bV(r)+i.length;a=ht({snapshot:new dw(i,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,EV(n),vs(n),n.component??n._loadedComponent??null,n,wV(r),d,CV(n)),consumedSegments:[],remainingSegments:[]})}else a=dV(r,n,i,t).pipe(Ue(({matched:c,consumedSegments:d,remainingSegments:m,parameters:v})=>{if(!c)return null;const w=bV(r)+d.length;return{snapshot:new dw(d,v,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,EV(n),vs(n),n.component??n._loadedComponent??null,n,wV(r),w,CV(n)),consumedSegments:d,remainingSegments:m}}));return a.pipe(ka(c=>{if(null===c)return ht(null);const{snapshot:d,consumedSegments:m,remainingSegments:v}=c;t=n._injector??t;const w=n._loadedInjector??t,C=function jZ(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(n),{segmentGroup:S,slicedSegments:A}=vw(r,m,v,C.filter(V=>void 0===V.redirectTo));if(0===A.length&&S.hasChildren())return this.processChildren(w,C,S).pipe(Ue(V=>null===V?null:[new Ru(d,V)]));if(0===C.length&&0===A.length)return ht([new Ru(d,[])]);const x=vs(n)===o;return this.processSegment(w,C,S,A,x?Ot:o).pipe(Ue(V=>null===V?null:[new Ru(d,V)]))}))}}function BZ(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function _V(e){const t=[],n=new Set;for(const r of e){if(!BZ(r)){t.push(r);continue}const i=t.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):t.push(r)}for(const r of n){const i=_V(r.children);t.push(new Ru(r.value,i))}return t.filter(r=>!n.has(r))}function wV(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function bV(e){let t=e,n=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift??0;return n-1}function EV(e){return e.data||{}}function CV(e){return e.resolve||{}}function DV(e){return"string"==typeof e.title||null===e.title}function wS(e){return ka(t=>{const n=e(t);return n?it(n).pipe(Ue(()=>t)):ht(t)})}const Nd=new Ge("ROUTES");let bS=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Nt(UP)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return ht(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=$c(n.loadComponent()).pipe(Ue(TV),ki(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),JT(()=>{this.componentLoaders.delete(n)})),i=new M2(r,()=>new ee).pipe(YT());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ht({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(Ue(c=>{this.onLoadEndListener&&this.onLoadEndListener(r);let d,m,v=!1;Array.isArray(c)?m=c:(d=c.create(n).injector,m=O2(d.get(Nd,[],ct.Self|ct.Optional)));return{routes:m.map(mS),injector:d}}),JT(()=>{this.childrenLoaders.delete(r)})),a=new M2(o,()=>new ee).pipe(YT());return this.childrenLoaders.set(r,a),a}loadModuleFactoryOrRoutes(n){return $c(n()).pipe(Ue(TV),zn(r=>r instanceof QO||Array.isArray(r)?ht(r):it(this.compiler.compileModuleAsync(r))))}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function TV(e){return function QZ(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let Ew=(()=>{class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ee,this.configLoader=Nt(bS),this.environmentInjector=Nt(Ca),this.urlSerializer=Nt(Tm),this.rootContexts=Nt(km),this.navigationId=0,this.afterPreactivation=()=>ht(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new FJ(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new PJ(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n){return this.transitions=new Ws({id:0,targetPageId:0,currentUrlTree:n.currentUrlTree,currentRawUrl:n.currentUrlTree,extractedUrl:n.urlHandlingStrategy.extract(n.currentUrlTree),urlAfterRedirects:n.urlHandlingStrategy.extract(n.currentUrlTree),rawUrl:n.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Rm,restoredState:null,currentSnapshot:n.routerState.snapshot,targetSnapshot:null,currentRouterState:n.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Au(r=>0!==r.id),Ue(r=>({...r,extractedUrl:n.urlHandlingStrategy.extract(r.rawUrl)})),ka(r=>{let i=!1,o=!1;return ht(r).pipe(ki(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ka(a=>{const c=n.browserUrlTree.toString(),d=!n.navigated||a.extractedUrl.toString()!==c||c!==n.currentUrlTree.toString();if(!d&&"reload"!==(a.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const v="";return this.events.next(new hw(a.id,n.serializeUrl(r.rawUrl),v,0)),n.rawUrlTree=a.rawUrl,a.resolve(null),Lr}if(n.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return SV(a.source)&&(n.browserUrlTree=a.extractedUrl),ht(a).pipe(ka(v=>{const w=this.transitions?.getValue();return this.events.next(new oS(v.id,this.urlSerializer.serialize(v.extractedUrl),v.source,v.restoredState)),w!==this.transitions?.getValue()?Lr:Promise.resolve(v)}),function OZ(e,t,n,r){return ka(i=>function kZ(e,t,n,r,i){return new xZ(e,t,n,r,i).apply()}(e,t,n,i.extractedUrl,r).pipe(Ue(o=>({...i,urlAfterRedirects:o}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,n.config),ki(v=>{this.currentNavigation={...this.currentNavigation,finalUrl:v.urlAfterRedirects},r.urlAfterRedirects=v.urlAfterRedirects}),function $Z(e,t,n,r,i){return zn(o=>function LZ(e,t,n,r,i,o,a="emptyOnly"){return new VZ(e,t,n,r,i,a,o).recognize().pipe(ka(c=>null===c?function FZ(e){return new Y(t=>t.error(e))}(new PZ):ht(c)))}(e,t,n,o.urlAfterRedirects,r.serialize(o.urlAfterRedirects),r,i).pipe(Ue(a=>({...o,targetSnapshot:a}))))}(this.environmentInjector,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),ki(v=>{if(r.targetSnapshot=v.targetSnapshot,"eager"===n.urlUpdateStrategy){if(!v.extras.skipLocationChange){const C=n.urlHandlingStrategy.merge(v.urlAfterRedirects,v.rawUrl);n.setBrowserUrl(C,v)}n.browserUrlTree=v.urlAfterRedirects}const w=new RJ(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(w)}));if(d&&n.urlHandlingStrategy.shouldProcessUrl(n.rawUrlTree)){const{id:v,extractedUrl:w,source:C,restoredState:S,extras:A}=a,x=new oS(v,this.urlSerializer.serialize(w),C,S);this.events.next(x);const V=tV(w,this.rootComponentType).snapshot;return ht(r={...a,targetSnapshot:V,urlAfterRedirects:w,extras:{...A,skipLocationChange:!1,replaceUrl:!1}})}{const v="";return this.events.next(new hw(a.id,n.serializeUrl(r.extractedUrl),v,1)),n.rawUrlTree=a.rawUrl,a.resolve(null),Lr}}),ki(a=>{const c=new NJ(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Ue(a=>r={...a,guards:oZ(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function mZ(e,t){return zn(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=n;return 0===a.length&&0===o.length?ht({...n,guardsResult:!0}):function vZ(e,t,n,r){return it(e).pipe(zn(i=>function CZ(e,t,n,r,i){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?ht(o.map(c=>{const d=xm(t)??i,m=Md(c,d);return $c(function dZ(e){return e&&Fm(e.canDeactivate)}(m)?m.canDeactivate(e,t,n,r):d.runInContext(()=>m(e,t,n,r))).pipe(Bc())})).pipe(Rd()):ht(!0)}(i.component,i.route,n,t,r)),Bc(i=>!0!==i,!0))}(a,r,i,e).pipe(zn(c=>c&&function cZ(e){return"boolean"==typeof e}(c)?function yZ(e,t,n,r){return it(t).pipe(Uc(i=>QT(function wZ(e,t){return null!==e&&t&&t(new LJ(e)),ht(!0)}(i.route.parent,r),function _Z(e,t){return null!==e&&t&&t(new UJ(e)),ht(!0)}(i.route,r),function EZ(e,t,n){const r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(a=>function sZ(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(a)).filter(a=>null!==a).map(a=>A2(()=>ht(a.guards.map(d=>{const m=xm(a.node)??n,v=Md(d,m);return $c(function hZ(e){return e&&Fm(e.canActivateChild)}(v)?v.canActivateChild(r,e):m.runInContext(()=>v(r,e))).pipe(Bc())})).pipe(Rd())));return ht(o).pipe(Rd())}(e,i.path,n),function bZ(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return ht(!0);const i=r.map(o=>A2(()=>{const a=xm(t)??n,c=Md(o,a);return $c(function fZ(e){return e&&Fm(e.canActivate)}(c)?c.canActivate(t,e):a.runInContext(()=>c(t,e))).pipe(Bc())}));return ht(i).pipe(Rd())}(e,i.route,n))),Bc(i=>!0!==i,!0))}(r,o,e,t):ht(c)),Ue(c=>({...n,guardsResult:c})))})}(this.environmentInjector,a=>this.events.next(a)),ki(a=>{if(r.guardsResult=a.guardsResult,hf(a.guardsResult))throw oV(0,a.guardsResult);const c=new kJ(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.events.next(c)}),Au(a=>!!a.guardsResult||(n.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),wS(a=>{if(a.guards.canActivateChecks.length)return ht(a).pipe(ki(c=>{const d=new xJ(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),ka(c=>{let d=!1;return ht(c).pipe(function qZ(e,t){return zn(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ht(n);let o=0;return it(i).pipe(Uc(a=>function GZ(e,t,n,r){const i=e.routeConfig,o=e._resolve;return void 0!==i?.title&&!DV(i)&&(o[Dm]=i.title),function zZ(e,t,n,r){const i=function WZ(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===i.length)return ht({});const o={};return it(i).pipe(zn(a=>function KZ(e,t,n,r){const i=xm(t)??r,o=Md(e,i);return $c(o.resolve?o.resolve(t,n):i.runInContext(()=>o(t,n)))}(e[a],t,n,r).pipe(Bc(),ki(c=>{o[a]=c}))),XT(1),function iJ(e){return Ue(()=>e)}(o),Hc(a=>vS(a)?Lr:Cm(a)))}(o,e,t,r).pipe(Ue(a=>(e._resolvedData=a,e.data=nV(e,n).resolve,i&&DV(i)&&(e.data[Dm]=i.title),null)))}(a.route,r,e,t)),ki(()=>o++),XT(1),zn(a=>o===i.length?ht(n):Lr))})}(n.paramsInheritanceStrategy,this.environmentInjector),ki({next:()=>d=!0,complete:()=>{d||(n.restoreHistory(c),this.cancelNavigationTransition(c,"",2))}}))}),ki(c=>{const d=new OJ(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}))}),wS(a=>{const c=d=>{const m=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(d.routeConfig).pipe(ki(v=>{d.component=v}),Ue(()=>{})));for(const v of d.children)m.push(...c(v));return m};return T2(c(a.targetSnapshot.root)).pipe(rw(),Ed(1))}),wS(()=>this.afterPreactivation()),Ue(a=>{const c=function KJ(e,t,n){const r=Nm(e,t._root,n?n._root:void 0);return new eV(r,t)}(n.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return r={...a,targetRouterState:c}}),ki(a=>{n.currentUrlTree=a.urlAfterRedirects,n.rawUrlTree=n.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),n.routerState=a.targetRouterState,"deferred"===n.urlUpdateStrategy&&(a.extras.skipLocationChange||n.setBrowserUrl(n.rawUrlTree,a),n.browserUrlTree=a.urlAfterRedirects)}),((e,t,n)=>Ue(r=>(new iZ(t,r.targetRouterState,r.currentRouterState,n).activate(e),r)))(this.rootContexts,n.routeReuseStrategy,a=>this.events.next(a)),Ed(1),ki({next:a=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,n.navigated=!0,this.events.next(new df(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(n.currentUrlTree))),n.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)},complete:()=>{i=!0}}),JT(()=>{i||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Hc(a=>{if(o=!0,uV(a)){aV(a)||(n.navigated=!0,n.restoreHistory(r,!0));const c=new fw(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode);if(this.events.next(c),aV(a)){const d=n.urlHandlingStrategy.merge(a.url,n.rawUrlTree),m={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===n.urlUpdateStrategy||SV(r.source)};n.scheduleNavigation(d,Rm,null,m,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{n.restoreHistory(r,!0);const c=new sS(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);this.events.next(c);try{r.resolve(n.errorHandler(a))}catch(d){r.reject(d)}}return Lr}))}))}cancelNavigationTransition(n,r,i){const o=new fw(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function SV(e){return e!==Rm}let AV=(()=>{class e{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Ot);return r}getResolvedTitleForRoute(n){return n.data[Dm]}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=we({token:e,factory:function(){return Nt(YZ)},providedIn:"root"}),e})(),YZ=(()=>{class e extends AV{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}}return e.\u0275fac=function(n){return new(n||e)(Ye(iL))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),XZ=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=we({token:e,factory:function(){return Nt(ZZ)},providedIn:"root"}),e})();class JZ{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}let ZZ=(()=>{class e extends JZ{}return e.\u0275fac=function(){let t;return function(r){return(t||(t=hr(e)))(r||e)}}(),e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Cw=new Ge("",{providedIn:"root",factory:()=>({})});let tee=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=we({token:e,factory:function(){return Nt(nee)},providedIn:"root"}),e})(),nee=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function ree(e){throw e}function iee(e,t,n){return t.parse("/")}const oee={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},see={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let yr=(()=>{class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Nt(f9),this.isNgZoneEnabled=!1,this.options=Nt(Cw,{optional:!0})||{},this.errorHandler=this.options.errorHandler||ree,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||iee,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Nt(tee),this.routeReuseStrategy=Nt(XZ),this.urlCreationStrategy=Nt(GJ),this.titleStrategy=Nt(AV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=O2(Nt(Nd,{optional:!0})??[]),this.navigationTransitions=Nt(Ew),this.urlSerializer=Nt(Tm),this.location=Nt(ZI),this.isNgZoneEnabled=Nt(pr)instanceof pr&&pr.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new qc,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=tV(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId??0},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Rm,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const o={replaceUrl:!0},a=i?.navigationId?i:null;if(i){const d={...i};delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(o.state=d)}const c=this.parseUrl(n);this.scheduleNavigation(c,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(n){this.config=n.map(mS),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:d}=r,m=d?this.currentUrlTree.fragment:a;let v=null;switch(c){case"merge":v={...this.currentUrlTree.queryParams,...o};break;case"preserve":v=this.currentUrlTree.queryParams;break;default:v=o||null}return null!==v&&(v=this.removeEmptyProps(v)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,n,v,m??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=hf(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Rm,null,r)}navigate(n,r={skipLocationChange:!1}){return function aee(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new _e(4008,false)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...oee}:!1===r?{...see}:r,hf(n))return L2(this.currentUrlTree,n,i);const o=this.parseUrl(n);return L2(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const o=n[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(n,r,i,o,a){if(this.disposed)return Promise.resolve(!1);let c,d,m,v;return a?(c=a.resolve,d=a.reject,m=a.promise):m=new Promise((w,C)=>{c=w,d=C}),v="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:v,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:c,reject:d,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(w=>Promise.reject(w))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const a={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",a)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(i,"",o)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-(this.browserPageId??this.currentPageId);0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),pf=(()=>{class e{constructor(n,r,i,o,a,c){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=a,this.locationStrategy=c,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new ee;const d=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===d||"area"===d,this.isAnchorElement?this.subscription=n.events.subscribe(m=>{m instanceof df&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(n){this._preserveFragment=vd(n)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(n){this._skipLocationChange=vd(n)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(n){this._replaceUrl=vd(n)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,i,o,a){return!!(null===this.urlTree||this.isAnchorElement&&(0!==n||r||i||o||a||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const n=null===this.href?null:function bk(e,t,n){return function aG(e,t){return"src"===t&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===t&&("base"===e||"link"===e)?wk:ds}(t,n)(e)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(n,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return e.\u0275fac=function(n){return new(n||e)(ie(yr),ie(Ad),function Lh(e){return function wg(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(i_(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===t)return n[i+1];i+=2}}}return null}(Hr(),e)}("tabindex"),ie(vu),ie(zo),ie(sf))},e.\u0275dir=pt({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(n,r){1&n&&ft("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&n&&Sa("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[di]}),e})();class MV{}let lee=(()=>{class e{constructor(n,r,i,o,a){this.router=n,this.injector=i,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Au(n=>n instanceof df),Uc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=m0(o.providers,n,`Route: ${o.path}`));const a=o._injector??n,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(c,o.children??o._loadedRoutes))}return it(i).pipe($i())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):ht(null);const o=i.pipe(zn(a=>null===a?ht(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??n,a.routes))));return r.loadComponent&&!r._loadedComponent?it([o,this.loader.loadComponent(r)]).pipe($i()):o})}}return e.\u0275fac=function(n){return new(n||e)(Ye(yr),Ye(UP),Ye(Ca),Ye(MV),Ye(bS))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const CS=new Ge("");let RV=(()=>{class e{constructor(n,r,i,o,a={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof oS?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof df&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof J2&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new J2(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return e.\u0275fac=function(n){!function Jk(){throw new Error("invalid")}()},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})();var Ko=(()=>((Ko=Ko||{})[Ko.COMPLETE=0]="COMPLETE",Ko[Ko.FAILED=1]="FAILED",Ko[Ko.REDIRECTING=2]="REDIRECTING",Ko))();const kd=!1;function Gc(e,t){return{\u0275kind:e,\u0275providers:t}}const DS=new Ge("",{providedIn:"root",factory:()=>!1});function kV(){const e=Nt(Da);return t=>{const n=e.get(C0);if(t!==n.components[0])return;const r=e.get(yr),i=e.get(xV);1===e.get(IS)&&r.initialNavigation(),e.get(OV,null,ct.Optional)?.setUpPreloading(),e.get(CS,null,ct.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const xV=new Ge(kd?"bootstrap done indicator":"",{factory:()=>new ee}),IS=new Ge(kd?"initial navigation":"",{providedIn:"root",factory:()=>1});function gee(){let e=[];return e=kd?[{provide:Q_,multi:!0,useFactory:()=>{const t=Nt(yr);return()=>t.events.subscribe(n=>{console.group?.(`Router Event: ${n.constructor.name}`),console.log(function BJ(e){if(!("type"in e))return`Unknown Router Event: ${e.constructor.name}`;switch(e.type){case 14:return`ActivationEnd(path: '${e.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${e.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${e.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${e.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state}, shouldActivate: ${e.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 2:return`NavigationCancel(id: ${e.id}, url: '${e.url}')`;case 16:return`NavigationSkipped(id: ${e.id}, url: '${e.url}')`;case 1:return`NavigationEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${e.id}, url: '${e.url}', error: ${e.error})`;case 0:return`NavigationStart(id: ${e.id}, url: '${e.url}')`;case 6:return`ResolveEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 5:return`ResolveStart(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 10:return`RouteConfigLoadEnd(path: ${e.route.path})`;case 9:return`RouteConfigLoadStart(path: ${e.route.path})`;case 4:return`RoutesRecognized(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 15:return`Scroll(anchor: '${e.anchor}', position: '${e.position?`${e.position[0]}, ${e.position[1]}`:null}')`}}(n)),console.log(n),console.groupEnd?.()})}}]:[],Gc(1,e)}const OV=new Ge(kd?"router preloader":"");function mee(e){return Gc(0,[{provide:OV,useExisting:lee},{provide:MV,useExisting:e}])}const Vm=!1,PV=new Ge(Vm?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),vee=[ZI,{provide:Tm,useClass:ZT},yr,km,{provide:Ad,useFactory:function NV(e){return e.routerState.root},deps:[yr]},bS,Vm?{provide:DS,useValue:!0}:[]];function yee(){return new WP("Router",yr)}let FV=(()=>{class e{constructor(n){}static forRoot(n,r){return{ngModule:e,providers:[vee,Vm&&r?.enableTracing?gee().\u0275providers:[],{provide:Nd,multi:!0,useValue:n},{provide:PV,useFactory:Eee,deps:[[yr,new Ea,new uu]]},{provide:Cw,useValue:r||{}},r?.useHash?{provide:sf,useClass:J9}:{provide:sf,useClass:mF},{provide:CS,useFactory:()=>{const e=Nt(v7),t=Nt(pr),n=Nt(Cw),r=Nt(Ew),i=Nt(Tm);return n.scrollOffset&&e.setOffset(n.scrollOffset),new RV(i,r,e,t,n)}},r?.preloadingStrategy?mee(r.preloadingStrategy).\u0275providers:[],{provide:WP,multi:!0,useFactory:yee},r?.initialNavigation?Cee(r):[],[{provide:LV,useFactory:kV},{provide:zP,multi:!0,useExisting:LV}]]}}static forChild(n){return{ngModule:e,providers:[{provide:Nd,multi:!0,useValue:n}]}}}return e.\u0275fac=function(n){return new(n||e)(Ye(PV,8))},e.\u0275mod=Wi({type:e}),e.\u0275inj=mo({imports:[pS]}),e})();function Eee(e){if(Vm&&e)throw new _e(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Cee(e){return["disabled"===e.initialNavigation?Gc(3,[{provide:w0,multi:!0,useFactory:()=>{const t=Nt(yr);return()=>{t.setUpLocationChangeListener()}}},{provide:IS,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?Gc(2,[{provide:IS,useValue:0},{provide:w0,multi:!0,deps:[Da],useFactory:t=>{const n=t.get(Y9,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=t.get(yr),o=t.get(xV);(function fee(e,t){e.events.pipe(Au(n=>n instanceof df||n instanceof fw||n instanceof sS||n instanceof hw),Ue(n=>n instanceof df||n instanceof hw?Ko.COMPLETE:n instanceof fw&&(0===n.code||1===n.code)?Ko.REDIRECTING:Ko.FAILED),Au(n=>n!==Ko.REDIRECTING),Ed(1)).subscribe(()=>{t()})})(i,()=>{r(!0)}),t.get(Ew).afterPreactivation=()=>(r(!0),o.closed?ht(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const LV=new Ge(Vm?"Router Initializer":"");var Xe=gt(367);(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(s,u,p){s!=Array.prototype&&s!=Object.prototype&&(s[u]=p.value)},r=function n(s){s=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,s];for(var u=0;u<s.length;++u){var p=s[u];if(p&&p.Math==Math)return p}return globalThis}(this);function o(s){var u=0;return function(){return u<s.length?{done:!1,value:s[u++]}:{done:!0}}}function a(s){var u=typeof Symbol<"u"&&Symbol.iterator&&s[Symbol.iterator];return u?u.call(s):{next:o(s)}}!function i(s,u){if(u){var p=r;s=s.split(".");for(var y=0;y<s.length-1;y++){var E=s[y];E in p||(p[E]={}),p=p[E]}(u=u(y=p[s=s[s.length-1]]))!=y&&null!=u&&t(p,s,{configurable:!0,writable:!0,value:u})}}("Promise",function(s){function u(M){this.b=0,this.c=void 0,this.a=[];var L=this.f();try{M(L.resolve,L.reject)}catch(ne){L.reject(ne)}}function p(){this.a=null}function y(M){return M instanceof u?M:new u(function(L){L(M)})}if(s)return s;p.prototype.b=function(M){if(null==this.a){this.a=[];var L=this;this.c(function(){L.g()})}this.a.push(M)};var E=r.setTimeout;p.prototype.c=function(M){E(M,0)},p.prototype.g=function(){for(;this.a&&this.a.length;){var M=this.a;this.a=[];for(var L=0;L<M.length;++L){var ne=M[L];M[L]=null;try{ne()}catch(de){this.f(de)}}}this.a=null},p.prototype.f=function(M){this.c(function(){throw M})},u.prototype.f=function(){function M(de){return function(Et){ne||(ne=!0,de.call(L,Et))}}var L=this,ne=!1;return{resolve:M(this.m),reject:M(this.g)}},u.prototype.m=function(M){if(M===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(M instanceof u)this.s(M);else{e:switch(typeof M){case"object":var L=null!=M;break e;case"function":L=!0;break e;default:L=!1}L?this.v(M):this.h(M)}},u.prototype.v=function(M){var L=void 0;try{L=M.then}catch(ne){return void this.g(ne)}"function"==typeof L?this.u(L,M):this.h(M)},u.prototype.g=function(M){this.i(2,M)},u.prototype.h=function(M){this.i(1,M)},u.prototype.i=function(M,L){if(0!=this.b)throw Error("Cannot settle("+M+", "+L+"): Promise already settled in state"+this.b);this.b=M,this.c=L,this.l()},u.prototype.l=function(){if(null!=this.a){for(var M=0;M<this.a.length;++M)T.b(this.a[M]);this.a=null}};var T=new p;return u.prototype.s=function(M){var L=this.f();M.Ra(L.resolve,L.reject)},u.prototype.u=function(M,L){var ne=this.f();try{M.call(L,ne.resolve,ne.reject)}catch(de){ne.reject(de)}},u.prototype.then=function(M,L){function ne(fn,ui){return"function"==typeof fn?function(Yu){try{de(fn(Yu))}catch(KN){Et(KN)}}:ui}var de,Et,bn=new u(function(fn,ui){de=fn,Et=ui});return this.Ra(ne(M,de),ne(L,Et)),bn},u.prototype.catch=function(M){return this.then(void 0,M)},u.prototype.Ra=function(M,L){function ne(){switch(de.b){case 1:M(de.c);break;case 2:L(de.c);break;default:throw Error("Unexpected state: "+de.b)}}var de=this;null==this.a?T.b(ne):this.a.push(ne)},u.resolve=y,u.reject=function(M){return new u(function(L,ne){ne(M)})},u.race=function(M){return new u(function(L,ne){for(var de=a(M),Et=de.next();!Et.done;Et=de.next())y(Et.value).Ra(L,ne)})},u.all=function(M){var L=a(M),ne=L.next();return ne.done?y([]):new u(function(de,Et){function bn(Yu){return function(KN){fn[Yu]=KN,0==--ui&&de(fn)}}var fn=[],ui=0;do{fn.push(void 0),ui++,y(ne.value).Ra(bn(fn.length-1),Et),ne=L.next()}while(!ne.done)})},u});var c=c||{},d=this||self,m=/^[\w+/_-]+[=]{0,2}$/,v=null;function w(s){return(s=s.querySelector&&s.querySelector("script[nonce]"))&&(s=s.nonce||s.getAttribute("nonce"))&&m.test(s)?s:""}function C(){}function S(s){var u=typeof s;return"object"!=u?u:s?Array.isArray(s)?"array":u:"null"}function A(s){var u=S(s);return"array"==u||"object"==u&&"number"==typeof s.length}function x(s){return"function"==S(s)}function V(s){var u=typeof s;return"object"==u&&null!=s||"function"==u}function H(s){return Object.prototype.hasOwnProperty.call(s,K)&&s[K]||(s[K]=++q)}var K="closure_uid_"+(1e9*Math.random()>>>0),q=0;function fe(s,u,p){return s.call.apply(s.bind,arguments)}function Se(s,u,p){if(!s)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var E=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(E,y),s.apply(u,E)}}return function(){return s.apply(u,arguments)}}function he(s,u,p){return(he=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fe:Se).apply(null,arguments)}function pn(s,u){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),s.apply(this,y)}}var ko=Date.now;function Je(s,u){function p(){}p.prototype=u.prototype,s.bb=u.prototype,s.prototype=new p,s.prototype.constructor=s}function wp(s){return s}function z(s,u,p){this.code=Uv+s,this.message=u||Sle[s]||"",this.a=p||null}function HH(s){var u=s&&s.code;return u?new z(u.substring(Uv.length),s.message,s.serverResponse):null}Je(z,Error),z.prototype.w=function(){var s={code:this.code,message:this.message};return this.a&&(s.serverResponse=this.a),s},z.prototype.toJSON=function(){return this.w()};var Bv,Uv="auth/",Sle={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},pM={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function jv(s){for(var u in pM)if(pM[u].id===s)return{firebaseEndpoint:(s=pM[u]).Ua,secureTokenEndpoint:s.$a,identityPlatformEndpoint:s.Xa};return null}function $H(s){if(!s)return!1;try{return!!s.$goog_Thenable}catch{return!1}}function ts(s){if(Error.captureStackTrace)Error.captureStackTrace(this,ts);else{var u=Error().stack;u&&(this.stack=u)}s&&(this.message=String(s))}function gM(s,u){for(var p="",y=(s=s.split("%s")).length-1,E=0;E<y;E++)p+=s[E]+(E<u.length?u[E]:"%s");ts.call(this,p+s[y])}function bp(s,u){throw new gM("Failure"+(s?": "+s:""),Array.prototype.slice.call(arguments,1))}function mM(s,u){this.c=s,this.f=u,this.b=0,this.a=null}function qH(s,u){s.f(u),100>s.b&&(s.b++,u.next=s.a,s.a=u)}function GH(){this.b=this.a=null}Bv=jv("__EID__")?"__EID__":void 0,Je(ts,Error),ts.prototype.name="CustomError",Je(gM,ts),gM.prototype.name="AssertionError",mM.prototype.get=function(){if(0<this.b){this.b--;var s=this.a;this.a=s.next,s.next=null}else s=this.c();return s};var zH=new mM(function(){return new vM},function(s){s.reset()});function Ale(){var s=_5,u=null;return s.a&&(u=s.a,s.a=s.a.next,s.a||(s.b=null),u.next=null),u}function vM(){this.next=this.b=this.a=null}GH.prototype.add=function(s,u){var p=zH.get();p.set(s,u),this.b?this.b.next=p:this.a=p,this.b=p},vM.prototype.set=function(s,u){this.a=s,this.b=u,this.next=null},vM.prototype.reset=function(){this.next=this.b=this.a=null};var WH=Array.prototype.indexOf?function(s,u){return Array.prototype.indexOf.call(s,u,void 0)}:function(s,u){if("string"==typeof s)return"string"!=typeof u||1!=u.length?-1:s.indexOf(u,0);for(var p=0;p<s.length;p++)if(p in s&&s[p]===u)return p;return-1},Xn=Array.prototype.forEach?function(s,u,p){Array.prototype.forEach.call(s,u,p)}:function(s,u,p){for(var y=s.length,E="string"==typeof s?s.split(""):s,T=0;T<y;T++)T in E&&u.call(p,E[T],T,s)},Rle=Array.prototype.filter?function(s,u){return Array.prototype.filter.call(s,u,void 0)}:function(s,u){for(var p=s.length,y=[],E=0,T="string"==typeof s?s.split(""):s,M=0;M<p;M++)if(M in T){var L=T[M];u.call(void 0,L,M,s)&&(y[E++]=L)}return y},nE=Array.prototype.map?function(s,u){return Array.prototype.map.call(s,u,void 0)}:function(s,u){for(var p=s.length,y=Array(p),E="string"==typeof s?s.split(""):s,T=0;T<p;T++)T in E&&(y[T]=u.call(void 0,E[T],T,s));return y},Nle=Array.prototype.some?function(s,u){return Array.prototype.some.call(s,u,void 0)}:function(s,u){for(var p=s.length,y="string"==typeof s?s.split(""):s,E=0;E<p;E++)if(E in y&&u.call(void 0,y[E],E,s))return!0;return!1};function Gu(s,u){return 0<=WH(s,u)}function rE(s,u){var p;return(p=0<=(u=WH(s,u)))&&Array.prototype.splice.call(s,u,1),p}function Zs(s,u){!function Mle(s,u){for(var p="string"==typeof s?s.split(""):s,y=s.length-1;0<=y;--y)y in p&&u.call(void 0,p[y],y,s)}(s,function(y,E){u.call(void 0,y,E,s)&&Array.prototype.splice.call(s,E,1)})}function yM(s){return Array.prototype.concat.apply([],arguments)}function Hf(s){var u=s.length;if(0<u){for(var p=Array(u),y=0;y<u;y++)p[y]=s[y];return p}return[]}var Ep,KH=String.prototype.trim?function(s){return s.trim()}:function(s){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(s)[1]},xle=/&/g,Ole=/</g,Ple=/>/g,Fle=/"/g,Lle=/'/g,Vle=/\x00/g,Ule=/[\x00&<>"']/;function kn(s,u){return-1!=s.indexOf(u)}function _M(s,u){return s<u?-1:s>u?1:0}e:{var QH=d.navigator;if(QH){var YH=QH.userAgent;if(YH){Ep=YH;break e}}Ep=""}function Qr(s){return kn(Ep,s)}function XH(s,u){for(var p in s)u.call(void 0,s[p],p,s)}function $f(s){for(var u in s)return!1;return!0}function hl(s){var p,u={};for(p in s)u[p]=s[p];return u}var JH="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xo(s,u){for(var p,y,E=1;E<arguments.length;E++){for(p in y=arguments[E])s[p]=y[p];for(var T=0;T<JH.length;T++)p=JH[T],Object.prototype.hasOwnProperty.call(y,p)&&(s[p]=y[p])}}function ZH(s,u){e:{try{var p=s&&s.ownerDocument,y=p&&(p.defaultView||p.parentWindow);if((y=y||d).Element&&y.Location){var E=y;break e}}catch{}E=null}if(E&&typeof E[u]<"u"&&(!s||!(s instanceof E[u])&&(s instanceof E.Location||s instanceof E.Element))){if(V(s))try{var T=s.constructor.displayName||s.constructor.name||Object.prototype.toString.call(s)}catch{T="<object could not be stringified>"}else T=void 0===s?"undefined":null===s?"null":typeof s;bp("Argument is not a %s (or a non-Element, non-Location mock); got: %s",u,T)}}function Ba(s,u){this.a=s===iE&&u||"",this.b=e5}function wM(s){return s instanceof Ba&&s.constructor===Ba&&s.b===e5?s.a:(bp("expected object of type Const, got '"+s+"'"),"type_error:Const")}Ba.prototype.ta=!0,Ba.prototype.sa=function(){return this.a},Ba.prototype.toString=function(){return"Const{"+this.a+"}"};var oE,e5={},iE={};function t5(){if(void 0===oE){var s=null,u=d.trustedTypes;if(u&&u.createPolicy){try{s=u.createPolicy("goog#html",{createHTML:wp,createScript:wp,createScriptURL:wp})}catch(p){d.console&&d.console.error(p.message)}oE=s}else oE=s}return oE}function Cp(s,u){this.a=u===r5?s:""}function n5(s){return s instanceof Cp&&s.constructor===Cp?s.a:(bp("expected object of type TrustedResourceUrl, got '"+s+"' of type "+S(s)),"type_error:TrustedResourceUrl")}function bM(s,u){var p=wM(s);if(!Ble.test(p))throw Error("Invalid TrustedResourceUrl format: "+p);return function Hle(s){var u=t5();return new Cp(s=u?u.createScriptURL(s):s,r5)}(s=p.replace(jle,function(y,E){if(!Object.prototype.hasOwnProperty.call(u,E))throw Error('Found marker, "'+E+'", in format string, "'+p+'", but no valid label mapping found in args: '+JSON.stringify(u));return(y=u[E])instanceof Ba?wM(y):encodeURIComponent(String(y))}))}Cp.prototype.ta=!0,Cp.prototype.sa=function(){return this.a.toString()},Cp.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var jle=/%{(\w+)}/g,Ble=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,r5={};function Oo(s,u){this.a=u===Hv?s:""}function sE(s){return s instanceof Oo&&s.constructor===Oo?s.a:(bp("expected object of type SafeUrl, got '"+s+"' of type "+S(s)),"type_error:SafeUrl")}Oo.prototype.ta=!0,Oo.prototype.sa=function(){return this.a.toString()},Oo.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var $le=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,qle=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,i5=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function o5(s){if(s instanceof Oo)return s;if(s="object"==typeof s&&s.ta?s.sa():String(s),i5.test(s))s=new Oo(s,Hv);else{var u=(s=(s=String(s)).replace(/(%0A|%0D)/g,"")).match(qle);s=u&&$le.test(u[1])?new Oo(s,Hv):null}return s}function s5(s){return s instanceof Oo?s:(s="object"==typeof s&&s.ta?s.sa():String(s),i5.test(s)||(s="about:invalid#zClosurez"),new Oo(s,Hv))}var Hv={},a5=new Oo("about:invalid#zClosurez",Hv);function Dp(s,u,p){this.a=p===u5?s:""}Dp.prototype.ta=!0,Dp.prototype.sa=function(){return this.a.toString()},Dp.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var u5={};function c5(s,u,p,y){return s=s instanceof Oo?s:s5(s),u=u||d,p=p instanceof Ba?wM(p):p||"",u.open(sE(s),p,y,void 0)}function l5(s,u){for(var p=s.split("%s"),y="",E=Array.prototype.slice.call(arguments,1);E.length&&1<p.length;)y+=p.shift()+E.shift();return y+p.join("%s")}function EM(s){return Ule.test(s)&&(-1!=s.indexOf("&")&&(s=s.replace(xle,"&amp;")),-1!=s.indexOf("<")&&(s=s.replace(Ole,"&lt;")),-1!=s.indexOf(">")&&(s=s.replace(Ple,"&gt;")),-1!=s.indexOf('"')&&(s=s.replace(Fle,"&quot;")),-1!=s.indexOf("'")&&(s=s.replace(Lle,"&#39;")),-1!=s.indexOf("\0")&&(s=s.replace(Vle,"&#0;"))),s}function CM(s){return CM[" "](s),s}CM[" "]=C;var aE,s,Kle=Qr("Opera"),ea=Qr("Trident")||Qr("MSIE"),f5=Qr("Edge"),Qle=f5||ea,h5=Qr("Gecko")&&!(kn(Ep.toLowerCase(),"webkit")&&!Qr("Edge"))&&!(Qr("Trident")||Qr("MSIE"))&&!Qr("Edge"),Yle=kn(Ep.toLowerCase(),"webkit")&&!Qr("Edge");function d5(){var s=d.document;return s?s.documentMode:void 0}e:{var DM="",IM=(s=Ep,h5?/rv:([^\);]+)(\)|;)/.exec(s):f5?/Edge\/([\d\.]+)/.exec(s):ea?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(s):Yle?/WebKit\/(\S+)/.exec(s):Kle?/(?:Version)[ \/]?(\S+)/.exec(s):void 0);if(IM&&(DM=IM?IM[1]:""),ea){var TM=d5();if(null!=TM&&TM>parseFloat(DM)){aE=String(TM);break e}}aE=DM}var Xle={};function p5(s){return function Wle(s,u){var p=Xle;return Object.prototype.hasOwnProperty.call(p,s)?p[s]:p[s]=u(s)}(s,function(){for(var u=0,p=KH(String(aE)).split("."),y=KH(String(s)).split("."),E=Math.max(p.length,y.length),T=0;0==u&&T<E;T++){var M=p[T]||"",L=y[T]||"";do{if(M=/(\d*)(\D*)(.*)/.exec(M)||["","","",""],L=/(\d*)(\D*)(.*)/.exec(L)||["","","",""],0==M[0].length&&0==L[0].length)break;u=_M(0==M[1].length?0:parseInt(M[1],10),0==L[1].length?0:parseInt(L[1],10))||_M(0==M[2].length,0==L[2].length)||_M(M[2],L[2]),M=M[3],L=L[3]}while(0==u)}return 0<=u})}var dl=d.document&&ea&&(d5()||parseInt(aE,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch{}var Jle=!ea||9<=Number(dl);function $v(s){var u=document;return"string"==typeof s?u.getElementById(s):s}function m5(s,u){XH(u,function(p,y){p&&"object"==typeof p&&p.ta&&(p=p.sa()),"style"==y?s.style.cssText=p:"class"==y?s.className=p:"for"==y?s.htmlFor=p:v5.hasOwnProperty(y)?s.setAttribute(v5[y],p):0==y.lastIndexOf("aria-",0)||0==y.lastIndexOf("data-",0)?s.setAttribute(y,p):s[y]=p})}var AM,lE,v5={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function uE(s,u){return u=String(u),"application/xhtml+xml"===s.contentType&&(u=u.toLowerCase()),s.createElement(u)}function y5(s){d.setTimeout(function(){throw s},0)}function cE(s,u){lE||function nfe(){if(d.Promise&&d.Promise.resolve){var s=d.Promise.resolve(void 0);lE=function(){s.then(w5)}}else lE=function(){var u=w5;!x(d.setImmediate)||d.Window&&d.Window.prototype&&!Qr("Edge")&&d.Window.prototype.setImmediate==d.setImmediate?(AM||(AM=function tfe(){var s=d.MessageChannel;if(typeof s>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!Qr("Presto")&&(s=function(){var E=uE(document,"IFRAME");E.style.display="none",document.documentElement.appendChild(E);var T=E.contentWindow;(E=T.document).open(),E.close();var M="callImmediate"+Math.random(),L="file:"==T.location.protocol?"*":T.location.protocol+"//"+T.location.host;E=he(function(ne){("*"==L||ne.origin==L)&&ne.data==M&&this.port1.onmessage()},this),T.addEventListener("message",E,!1),this.port1={},this.port2={postMessage:function(){T.postMessage(M,L)}}}),typeof s<"u"&&!Qr("Trident")&&!Qr("MSIE")){var u=new s,p={},y=p;return u.port1.onmessage=function(){if(void 0!==p.next){var E=(p=p.next).Hb;p.Hb=null,E()}},function(E){y.next={Hb:E},y=y.next,u.port2.postMessage(0)}}return function(E){d.setTimeout(E,0)}}()),AM(u)):d.setImmediate(u)}}(),MM||(lE(),MM=!0),_5.add(s,u)}var MM=!1,_5=new GH;function w5(){for(var s;s=Ale();){try{s.a.call(s.b)}catch(u){y5(u)}qH(zH,s)}MM=!1}function Wt(s,u){if(this.a=qf,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,s!=C)try{var p=this;s.call(u,function(y){Gf(p,qv,y)},function(y){if(!(y instanceof Ip))try{throw y instanceof Error?y:Error("Promise rejected.")}catch{}Gf(p,zu,y)})}catch(y){Gf(this,zu,y)}}var qf=0,qv=2,zu=3;function b5(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}b5.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var E5=new mM(function(){return new b5},function(s){s.reset()});function RM(s,u,p){var y=E5.get();return y.g=s,y.b=u,y.f=p,y}function ot(s){if(s instanceof Wt)return s;var u=new Wt(C);return Gf(u,qv,s),u}function $n(s){return new Wt(function(u,p){p(s)})}function C5(s,u,p){S5(s,u,p,null)||cE(pn(u,s))}function D5(s){return new Wt(function(u){var p=s.length,y=[];if(p)for(var E=function(L,ne,de){p--,y[L]=ne?{Qb:!0,value:de}:{Qb:!1,reason:de},0==p&&u(y)},T=0;T<s.length;T++)C5(s[T],pn(E,T,!0),pn(E,T,!1));else u(y)})}function I5(s,u){if(s.a==qf)if(s.c){var p=s.c;if(p.b){for(var y=0,E=null,T=null,M=p.b;M&&(M.c||(y++,M.a==s&&(E=M),!(E&&1<y)));M=M.next)E||(T=M);E&&(p.a==qf&&1==y?I5(p,u):(T?((y=T).next==p.f&&(p.f=y),y.next=y.next.next):M5(p),R5(p,E,zu,u)))}s.c=null}else Gf(s,zu,u)}function NM(s,u){s.b||s.a!=qv&&s.a!=zu||A5(s),s.f?s.f.next=u:s.b=u,s.f=u}function T5(s,u,p,y){var E=RM(null,null,null);return E.a=new Wt(function(T,M){E.g=u?function(L){try{var ne=u.call(y,L);T(ne)}catch(de){M(de)}}:T,E.b=p?function(L){try{var ne=p.call(y,L);void 0===ne&&L instanceof Ip?M(L):T(ne)}catch(de){M(de)}}:M}),E.a.c=s,NM(s,E),E.a}function Gf(s,u,p){s.a==qf&&(s===p&&(u=zu,p=new TypeError("Promise cannot resolve to itself")),s.a=1,S5(p,s.$c,s.ad,s)||(s.i=p,s.a=u,s.c=null,A5(s),u!=zu||p instanceof Ip||function ofe(s,u){s.g=!0,cE(function(){s.g&&k5.call(null,u)})}(s,p)))}function S5(s,u,p,y){if(s instanceof Wt)return NM(s,RM(u||C,p||null,y)),!0;if($H(s))return s.then(u,p,y),!0;if(V(s))try{var E=s.then;if(x(E))return function ife(s,u,p,y,E){function T(ne){L||(L=!0,y.call(E,ne))}var L=!1;try{u.call(s,function M(ne){L||(L=!0,p.call(E,ne))},T)}catch(ne){T(ne)}}(s,E,u,p,y),!0}catch(T){return p.call(y,T),!0}return!1}function A5(s){s.h||(s.h=!0,cE(s.gc,s))}function M5(s){var u=null;return s.b&&(s.b=(u=s.b).next,u.next=null),s.b||(s.f=null),u}function R5(s,u,p,y){if(p==zu&&u.b&&!u.c)for(;s&&s.g;s=s.c)s.g=!1;if(u.a)u.a.c=null,N5(u,p,y);else try{u.c?u.g.call(u.f):N5(u,p,y)}catch(E){k5.call(null,E)}qH(E5,u)}function N5(s,u,p){u==qv?s.g.call(s.f,p):s.b&&s.b.call(s.f,p)}Wt.prototype.then=function(s,u,p){return T5(this,x(s)?s:null,x(u)?u:null,p)},Wt.prototype.$goog_Thenable=!0,(e=Wt.prototype).oa=function(s,u){return(s=RM(s,s,u)).c=!0,NM(this,s),this},e.o=function(s,u){return T5(this,null,s,u)},e.cancel=function(s){if(this.a==qf){var u=new Ip(s);cE(function(){I5(this,u)},this)}},e.$c=function(s){this.a=qf,Gf(this,qv,s)},e.ad=function(s){this.a=qf,Gf(this,zu,s)},e.gc=function(){for(var s;s=M5(this);)R5(this,s,this.a,this.i);this.h=!1};var k5=y5;function Ip(s){ts.call(this,s)}function fE(){0!=kM&&(x5[H(this)]=this),this.ya=this.ya,this.pa=this.pa}Je(Ip,ts),Ip.prototype.name="cancel";var kM=0,x5={};function O5(s){if(!s.ya&&(s.ya=!0,s.Da(),0!=kM)){var u=H(s);if(0!=kM&&s.pa&&0<s.pa.length)throw Error(s+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete x5[u]}}fE.prototype.ya=!1,fE.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var sfe=Object.freeze||function(s){return s},P5=!ea||9<=Number(dl),afe=ea&&!p5("9"),ufe=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var s=!1,u=Object.defineProperty({},"passive",{get:function(){s=!0}});try{d.addEventListener("test",C,u),d.removeEventListener("test",C,u)}catch{}return s}();function Po(s,u){this.type=s,this.b=this.target=u,this.defaultPrevented=!1}function zf(s,u){if(Po.call(this,s?s.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,s){var p=this.type=s.type,y=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.b=u,u=s.relatedTarget){if(h5){e:{try{CM(u.nodeName);var E=!0;break e}catch{}E=!1}E||(u=null)}}else"mouseover"==p?u=s.fromElement:"mouseout"==p&&(u=s.toElement);this.relatedTarget=u,y?(this.clientX=void 0!==y.clientX?y.clientX:y.pageX,this.clientY=void 0!==y.clientY?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType="string"==typeof s.pointerType?s.pointerType:cfe[s.pointerType]||"",this.a=s,s.defaultPrevented&&this.preventDefault()}}Po.prototype.preventDefault=function(){this.defaultPrevented=!0},Je(zf,Po);var cfe=sfe({2:"touch",3:"pen",4:"mouse"});zf.prototype.preventDefault=function(){zf.bb.preventDefault.call(this);var s=this.a;if(s.preventDefault)s.preventDefault();else if(s.returnValue=!1,afe)try{(s.ctrlKey||112<=s.keyCode&&123>=s.keyCode)&&(s.keyCode=-1)}catch{}},zf.prototype.g=function(){return this.a};var Gv="closure_listenable_"+(1e6*Math.random()|0),lfe=0;function ffe(s,u,p,y,E){this.listener=s,this.proxy=null,this.src=u,this.type=p,this.capture=!!y,this.Wa=E,this.key=++lfe,this.wa=this.Qa=!1}function hE(s){s.wa=!0,s.listener=null,s.proxy=null,s.src=null,s.Wa=null}function dE(s){this.src=s,this.a={},this.b=0}function xM(s,u){var p=u.type;p in s.a&&rE(s.a[p],u)&&(hE(u),0==s.a[p].length&&(delete s.a[p],s.b--))}function OM(s,u,p,y){for(var E=0;E<s.length;++E){var T=s[E];if(!T.wa&&T.listener==u&&T.capture==!!p&&T.Wa==y)return E}return-1}dE.prototype.add=function(s,u,p,y,E){var T=s.toString();(s=this.a[T])||(s=this.a[T]=[],this.b++);var M=OM(s,u,y,E);return-1<M?(u=s[M],p||(u.Qa=!1)):((u=new ffe(u,this.src,T,!!y,E)).Qa=p,s.push(u)),u};var PM="closure_lm_"+(1e6*Math.random()|0),FM={};function Ds(s,u,p,y,E){if(y&&y.once)LM(s,u,p,y,E);else if(Array.isArray(u))for(var T=0;T<u.length;T++)Ds(s,u[T],p,y,E);else p=UM(p),s&&s[Gv]?H5(s,u,p,V(y)?!!y.capture:!!y,E):L5(s,u,p,!1,y,E)}function L5(s,u,p,y,E,T){if(!u)throw Error("Invalid event type");var M=V(E)?!!E.capture:!!E,L=pE(s);if(L||(s[PM]=L=new dE(s)),!(p=L.add(u,p,y,M,T)).proxy)if(y=function hfe(){var s=dfe,u=P5?function(p){return s.call(u.src,u.listener,p)}:function(p){if(!(p=s.call(u.src,u.listener,p)))return p};return u}(),p.proxy=y,y.src=s,y.listener=p,s.addEventListener)ufe||(E=M),void 0===E&&(E=!1),s.addEventListener(u.toString(),y,E);else if(s.attachEvent)s.attachEvent(U5(u.toString()),y);else{if(!s.addListener||!s.removeListener)throw Error("addEventListener and attachEvent are unavailable.");s.addListener(y)}}function LM(s,u,p,y,E){if(Array.isArray(u))for(var T=0;T<u.length;T++)LM(s,u[T],p,y,E);else p=UM(p),s&&s[Gv]?jM(s,u,p,V(y)?!!y.capture:!!y,E):L5(s,u,p,!0,y,E)}function ns(s,u,p,y,E){if(Array.isArray(u))for(var T=0;T<u.length;T++)ns(s,u[T],p,y,E);else y=V(y)?!!y.capture:!!y,p=UM(p),s&&s[Gv]?(s=s.v,(u=String(u).toString())in s.a&&-1<(p=OM(T=s.a[u],p,y,E))&&(hE(T[p]),Array.prototype.splice.call(T,p,1),0==T.length&&(delete s.a[u],s.b--))):s&&(s=pE(s))&&(u=s.a[u.toString()],s=-1,u&&(s=OM(u,p,y,E)),(p=-1<s?u[s]:null)&&V5(p))}function V5(s){if("number"!=typeof s&&s&&!s.wa){var u=s.src;if(u&&u[Gv])xM(u.v,s);else{var p=s.type,y=s.proxy;u.removeEventListener?u.removeEventListener(p,y,s.capture):u.detachEvent?u.detachEvent(U5(p),y):u.addListener&&u.removeListener&&u.removeListener(y),(p=pE(u))?(xM(p,s),0==p.b&&(p.src=null,u[PM]=null)):hE(s)}}}function U5(s){return s in FM?FM[s]:FM[s]="on"+s}function j5(s,u,p,y){var E=!0;if((s=pE(s))&&(u=s.a[u.toString()]))for(u=u.concat(),s=0;s<u.length;s++){var T=u[s];T&&T.capture==p&&!T.wa&&(T=B5(T,y),E=E&&!1!==T)}return E}function B5(s,u){var p=s.listener,y=s.Wa||s.src;return s.Qa&&V5(s),p.call(y,u)}function dfe(s,u){if(s.wa)return!0;if(!P5){if(!u)e:{u=["window","event"];for(var p=d,y=0;y<u.length;y++)if(null==(p=p[u[y]])){u=null;break e}u=p}if(u=new zf(y=u,this),p=!0,!(0>y.keyCode||null!=y.returnValue)){e:{var E=!1;if(0==y.keyCode)try{y.keyCode=-1;break e}catch{E=!0}(E||null==y.returnValue)&&(y.returnValue=!0)}for(y=[],E=u.b;E;E=E.parentNode)y.push(E);for(s=s.type,E=y.length-1;0<=E;E--){u.b=y[E];var T=j5(y[E],s,!0,u);p=p&&T}for(E=0;E<y.length;E++)u.b=y[E],T=j5(y[E],s,!1,u),p=p&&T}return p}return B5(s,new zf(u,this))}function pE(s){return(s=s[PM])instanceof dE?s:null}var VM="__closure_events_fn_"+(1e9*Math.random()>>>0);function UM(s){return x(s)?s:(s[VM]||(s[VM]=function(u){return s.handleEvent(u)}),s[VM])}function ho(){fE.call(this),this.v=new dE(this),this.bc=this,this.hb=null}function H5(s,u,p,y,E){s.v.add(String(u),p,!1,y,E)}function jM(s,u,p,y,E){s.v.add(String(u),p,!0,y,E)}function gE(s,u,p,y){if(!(u=s.v.a[String(u)]))return!0;u=u.concat();for(var E=!0,T=0;T<u.length;++T){var M=u[T];if(M&&!M.wa&&M.capture==p){var L=M.listener,ne=M.Wa||M.src;M.Qa&&xM(s.v,M),E=!1!==L.call(ne,y)&&E}}return E&&!y.defaultPrevented}function BM(s,u,p){if(x(s))p&&(s=he(s,p));else{if(!s||"function"!=typeof s.handleEvent)throw Error("Invalid listener argument");s=he(s.handleEvent,s)}return 2147483647<Number(u)?-1:d.setTimeout(s,u||0)}function Tp(s){var u=null;return new Wt(function(p,y){-1==(u=BM(function(){p(void 0)},s))&&y(Error("Failed to schedule timer."))}).o(function(p){throw d.clearTimeout(u),p})}function $5(s){if(s.X&&"function"==typeof s.X)return s.X();if("string"==typeof s)return s.split("");if(A(s)){for(var u=[],p=s.length,y=0;y<p;y++)u.push(s[y]);return u}for(y in u=[],p=0,s)u[p++]=s[y];return u}function q5(s){if(s.Y&&"function"==typeof s.Y)return s.Y();if(!s.X||"function"!=typeof s.X){if(A(s)||"string"==typeof s){var u=[];s=s.length;for(var p=0;p<s;p++)u.push(p);return u}for(var y in u=[],p=0,s)u[p++]=y;return u}}function Sp(s,u){this.b={},this.a=[],this.c=0;var p=arguments.length;if(1<p){if(p%2)throw Error("Uneven number of arguments");for(var y=0;y<p;y+=2)this.set(arguments[y],arguments[y+1])}else if(s)if(s instanceof Sp)for(p=s.Y(),y=0;y<p.length;y++)this.set(p[y],s.get(p[y]));else for(y in s)this.set(y,s[y])}function HM(s){if(s.c!=s.a.length){for(var u=0,p=0;u<s.a.length;){var y=s.a[u];Wf(s.b,y)&&(s.a[p++]=y),u++}s.a.length=p}if(s.c!=s.a.length){var E={};for(p=u=0;u<s.a.length;)Wf(E,y=s.a[u])||(s.a[p++]=y,E[y]=1),u++;s.a.length=p}}function Wf(s,u){return Object.prototype.hasOwnProperty.call(s,u)}Je(ho,fE),ho.prototype[Gv]=!0,ho.prototype.addEventListener=function(s,u,p,y){Ds(this,s,u,p,y)},ho.prototype.removeEventListener=function(s,u,p,y){ns(this,s,u,p,y)},ho.prototype.dispatchEvent=function(s){var u,p=this.hb;if(p)for(u=[];p;p=p.hb)u.push(p);p=this.bc;var y=s.type||s;if("string"==typeof s)s=new Po(s,p);else if(s instanceof Po)s.target=s.target||p;else{var E=s;xo(s=new Po(y,p),E)}if(E=!0,u)for(var T=u.length-1;0<=T;T--){var M=s.b=u[T];E=gE(M,y,!0,s)&&E}if(E=gE(M=s.b=p,y,!0,s)&&E,E=gE(M,y,!1,s)&&E,u)for(T=0;T<u.length;T++)E=gE(M=s.b=u[T],y,!1,s)&&E;return E},ho.prototype.Da=function(){if(ho.bb.Da.call(this),this.v){var p,s=this.v;for(p in s.a){for(var y=s.a[p],E=0;E<y.length;E++)hE(y[E]);delete s.a[p],s.b--}}this.hb=null},(e=Sp.prototype).X=function(){HM(this);for(var s=[],u=0;u<this.a.length;u++)s.push(this.b[this.a[u]]);return s},e.Y=function(){return HM(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(s,u){return Wf(this.b,s)?this.b[s]:u},e.set=function(s,u){Wf(this.b,s)||(this.c++,this.a.push(s)),this.b[s]=u},e.forEach=function(s,u){for(var p=this.Y(),y=0;y<p.length;y++){var E=p[y],T=this.get(E);s.call(u,T,E,this)}};var G5=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function pl(s,u){var p;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,s instanceof pl?(this.i=void 0!==u?u:s.i,zv(this,s.c),this.l=s.l,this.a=s.a,Wv(this,s.g),this.f=s.f,$M(this,Q5(s.b)),this.h=s.h):s&&(p=String(s).match(G5))?(this.i=!!u,zv(this,p[1]||"",!0),this.l=Kv(p[2]||""),this.a=Kv(p[3]||"",!0),Wv(this,p[4]),this.f=Kv(p[5]||"",!0),$M(this,p[6]||"",!0),this.h=Kv(p[7]||"")):(this.i=!!u,this.b=new Kf(null,this.i))}function zv(s,u,p){s.c=p?Kv(u,!0):u,s.c&&(s.c=s.c.replace(/:$/,""))}function Wv(s,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);s.g=u}else s.g=null}function $M(s,u,p){u instanceof Kf?(s.b=u,function bfe(s,u){u&&!s.f&&(gl(s),s.c=null,s.a.forEach(function(p,y){var E=y.toLowerCase();y!=E&&(Ha(this,y),K5(this,E,p))},s)),s.f=u}(s.b,s.i)):(p||(u=Qv(u,_fe)),s.b=new Kf(u,s.i))}function wr(s,u,p){s.b.set(u,p)}function Is(s,u){return s.b.get(u)}function Fo(s){return s instanceof pl?new pl(s):new pl(s,void 0)}function mE(s,u,p,y){var E=new pl(null,void 0);return s&&zv(E,s),u&&(E.a=u),p&&Wv(E,p),y&&(E.f=y),E}function Kv(s,u){return s?u?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function Qv(s,u,p){return"string"==typeof s?(s=encodeURI(s).replace(u,mfe),p&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function mfe(s){return"%"+((s=s.charCodeAt(0))>>4&15).toString(16)+(15&s).toString(16)}pl.prototype.toString=function(){var s=[],u=this.c;u&&s.push(Qv(u,z5,!0),":");var p=this.a;return(p||"file"==u)&&(s.push("//"),(u=this.l)&&s.push(Qv(u,z5,!0),"@"),s.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(p=this.g)&&s.push(":",String(p))),(p=this.f)&&(this.a&&"/"!=p.charAt(0)&&s.push("/"),s.push(Qv(p,"/"==p.charAt(0)?yfe:vfe,!0))),(p=this.b.toString())&&s.push("?",p),(p=this.h)&&s.push("#",Qv(p,wfe)),s.join("")},pl.prototype.resolve=function(s){var u=new pl(this),p=!!s.c;p?zv(u,s.c):p=!!s.l,p?u.l=s.l:p=!!s.a,p?u.a=s.a:p=null!=s.g;var y=s.f;if(p)Wv(u,s.g);else if(p=!!s.f){if("/"!=y.charAt(0))if(this.a&&!this.f)y="/"+y;else{var E=u.f.lastIndexOf("/");-1!=E&&(y=u.f.substr(0,E+1)+y)}if(".."==(E=y)||"."==E)y="";else if(kn(E,"./")||kn(E,"/.")){y=0==E.lastIndexOf("/",0),E=E.split("/");for(var T=[],M=0;M<E.length;){var L=E[M++];"."==L?y&&M==E.length&&T.push(""):".."==L?((1<T.length||1==T.length&&""!=T[0])&&T.pop(),y&&M==E.length&&T.push("")):(T.push(L),y=!0)}y=T.join("/")}else y=E}return p?u.f=y:p=""!==s.b.toString(),p?$M(u,Q5(s.b)):p=!!s.h,p&&(u.h=s.h),u};var z5=/[#\/\?@]/g,vfe=/[#\?:]/g,yfe=/[#\?]/g,_fe=/[#\?@]/g,wfe=/#/g;function Kf(s,u){this.b=this.a=null,this.c=s||null,this.f=!!u}function gl(s){s.a||(s.a=new Sp,s.b=0,s.c&&function gfe(s,u){if(s){s=s.split("&");for(var p=0;p<s.length;p++){var y=s[p].indexOf("="),E=null;if(0<=y){var T=s[p].substring(0,y);E=s[p].substring(y+1)}else T=s[p];u(T,E?decodeURIComponent(E.replace(/\+/g," ")):"")}}}(s.c,function(u,p){s.add(decodeURIComponent(u.replace(/\+/g," ")),p)}))}function W5(s){var u=q5(s);if(typeof u>"u")throw Error("Keys are undefined");var p=new Kf(null,void 0);s=$5(s);for(var y=0;y<u.length;y++){var E=u[y],T=s[y];Array.isArray(T)?K5(p,E,T):p.add(E,T)}return p}function Ha(s,u){gl(s),u=Ap(s,u),Wf(s.a.b,u)&&(s.c=null,s.b-=s.a.get(u).length,Wf((s=s.a).b,u)&&(delete s.b[u],s.c--,s.a.length>2*s.c&&HM(s)))}function qM(s,u){return gl(s),u=Ap(s,u),Wf(s.a.b,u)}function K5(s,u,p){Ha(s,u),0<p.length&&(s.c=null,s.a.set(Ap(s,u),Hf(p)),s.b+=p.length)}function Q5(s){var u=new Kf;return u.c=s.c,s.a&&(u.a=new Sp(s.a),u.b=s.b),u}function Ap(s,u){return u=String(u),s.f&&(u=u.toLowerCase()),u}function Y5(s){var u=[];return GM(new Efe,s,u),u.join("")}function Efe(){}function GM(s,u,p){if(null==u)p.push("null");else{if("object"==typeof u){if(Array.isArray(u)){var y=u;u=y.length,p.push("[");for(var E="",T=0;T<u;T++)p.push(E),GM(s,y[T],p),E=",";return void p.push("]")}if(!(u instanceof String||u instanceof Number||u instanceof Boolean)){for(y in p.push("{"),E="",u)Object.prototype.hasOwnProperty.call(u,y)&&"function"!=typeof(T=u[y])&&(p.push(E),J5(y,p),p.push(":"),GM(s,T,p),E=",");return void p.push("}")}u=u.valueOf()}switch(typeof u){case"string":J5(u,p);break;case"number":p.push(isFinite(u)&&!isNaN(u)?String(u):"null");break;case"boolean":p.push(String(u));break;case"function":p.push("null");break;default:throw Error("Unknown type: "+typeof u)}}}(e=Kf.prototype).add=function(s,u){gl(this),this.c=null,s=Ap(this,s);var p=this.a.get(s);return p||this.a.set(s,p=[]),p.push(u),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(s,u){gl(this),this.a.forEach(function(p,y){Xn(p,function(E){s.call(u,E,y,this)},this)},this)},e.Y=function(){gl(this);for(var s=this.a.X(),u=this.a.Y(),p=[],y=0;y<u.length;y++)for(var E=s[y],T=0;T<E.length;T++)p.push(u[y]);return p},e.X=function(s){gl(this);var u=[];if("string"==typeof s)qM(this,s)&&(u=yM(u,this.a.get(Ap(this,s))));else{s=this.a.X();for(var p=0;p<s.length;p++)u=yM(u,s[p])}return u},e.set=function(s,u){return gl(this),this.c=null,qM(this,s=Ap(this,s))&&(this.b-=this.a.get(s).length),this.a.set(s,[u]),this.b+=1,this},e.get=function(s,u){return s&&0<(s=this.X(s)).length?String(s[0]):u},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var s=[],u=this.a.Y(),p=0;p<u.length;p++){var y=u[p],E=encodeURIComponent(String(y));y=this.X(y);for(var T=0;T<y.length;T++){var M=E;""!==y[T]&&(M+="="+encodeURIComponent(String(y[T]))),s.push(M)}}return this.c=s.join("&")};var X5={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Cfe=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function J5(s,u){u.push('"',s.replace(Cfe,function(p){var y=X5[p];return y||(y="\\u"+(65536|p.charCodeAt(0)).toString(16).substr(1),X5[p]=y),y}),'"')}function zM(){var s=Di();return ea&&!!dl&&11==dl||/Edge\/\d+/.test(s)}function Yv(){return d.window&&d.window.location.href||self&&self.location&&self.location.href||""}function Z5(s,u){u=u||d.window;var p="about:blank";s&&(p=sE(o5(s)||a5)),u.location.href=p}function e6(s,u){var y,p=[];for(y in s)y in u?typeof s[y]!=typeof u[y]?p.push(y):"object"==typeof s[y]&&null!=s[y]&&null!=u[y]?0<e6(s[y],u[y]).length&&p.push(y):s[y]!==u[y]&&p.push(y):p.push(y);for(y in u)y in s||p.push(y);return p}function t6(s){return!!((s=(s||Di()).toLowerCase()).match(/android/)||s.match(/webos/)||s.match(/iphone|ipad|ipod/)||s.match(/blackberry/)||s.match(/windows phone/)||s.match(/iemobile/))}function Qf(s){s=s||d.window;try{s.close()}catch{}}function n6(s,u,p){var y=Math.floor(1e9*Math.random()).toString();u=u||500,p=p||600;var E=(window.screen.availHeight-p)/2,T=(window.screen.availWidth-u)/2;for(M in u={width:u,height:p,top:0<E?E:0,left:0<T?T:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},p=Di().toLowerCase(),y&&(u.target=y,kn(p,"crios/")&&(u.target="_blank")),Mp(Di())==QM&&(s=s||"http://localhost",u.scrollbars=!0),p=s||"",(s=u)||(s={}),y=window,u=p instanceof Oo?p:o5(typeof p.href<"u"?p.href:String(p))||a5,p=s.target||p.target,E=[],s)switch(M){case"width":case"height":case"top":case"left":E.push(M+"="+s[M]);break;case"target":case"noopener":case"noreferrer":break;default:E.push(M+"="+(s[M]?1:0))}var M=E.join(",");if((Qr("iPhone")&&!Qr("iPod")&&!Qr("iPad")||Qr("iPad")||Qr("iPod"))&&y.navigator&&y.navigator.standalone&&p&&"_self"!=p?(ZH(M=uE(document,"A"),"HTMLAnchorElement"),u=u instanceof Oo?u:s5(u),M.href=sE(u),M.setAttribute("target",p),s.noreferrer&&M.setAttribute("rel","noreferrer"),(s=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,y,1),M.dispatchEvent(s),M={}):s.noreferrer?(M=c5("",y,p,M),s=sE(u),M&&(Qle&&kn(s,";")&&(s="'"+s.replace(/'/g,"%27")+"'"),M.opener=null,s='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+EM(s)+'">',s=new Dp(s=(y=t5())?y.createHTML(s):s,null,u5),y=M.document)&&(y.write(function Gle(s){return s instanceof Dp&&s.constructor===Dp?s.a:(bp("expected object of type SafeHtml, got '"+s+"' of type "+S(s)),"type_error:SafeHtml")}(s)),y.close())):(M=c5(u,y,p,M))&&s.noopener&&(M.opener=null),M)try{M.focus()}catch{}return M}var Tfe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sfe=/^[^@]+@[^@]+$/;function vE(){var s=null;return new Wt(function(u){"complete"==d.document.readyState?u():(s=function(){u()},LM(window,"load",s))}).o(function(u){throw ns(window,"load",s),u})}function WM(s){return s=s||Di(),!("file:"!==Np()&&"ionic:"!==Np()||!s.toLowerCase().match(/iphone|ipad|ipod|android/))}function KM(){var s=d.window;try{return!(!s||s==s.top)}catch{return!1}}function ta(){return typeof d.WorkerGlobalScope<"u"&&"function"==typeof d.importScripts}function $a(){return Xe.default.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Xe.default.INTERNAL.hasOwnProperty("node")?"Node":ta()?"Worker":"Browser"}function r6(){var s=$a();return"ReactNative"===s||"Node"===s}var QM="Firefox",i6="Chrome";function Mp(s){var u=s.toLowerCase();return kn(u,"opera/")||kn(u,"opr/")||kn(u,"opios/")?"Opera":kn(u,"iemobile")?"IEMobile":kn(u,"msie")||kn(u,"trident/")?"IE":kn(u,"edge/")?"Edge":kn(u,"firefox/")?QM:kn(u,"silk/")?"Silk":kn(u,"blackberry")?"Blackberry":kn(u,"webos")?"Webos":!kn(u,"safari/")||kn(u,"chrome/")||kn(u,"crios/")||kn(u,"android")?!kn(u,"chrome/")&&!kn(u,"crios/")||kn(u,"edge/")?kn(u,"android")?"Android":(s=s.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==s.length?s[1]:"Other":i6:"Safari"}var o6={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Rp(s,u){u=u||[];var E,p=[],y={};for(E in o6)y[o6[E]]=!0;for(E=0;E<u.length;E++)typeof y[u[E]]<"u"&&(delete y[u[E]],p.push(u[E]));return p.sort(),(u=p).length||(u=["FirebaseCore-web"]),"Browser"===(p=$a())?p=Mp(y=Di()):"Worker"===p&&(p=Mp(y=Di())+"-"+p),p+"/JsCore/"+s+"/"+u.join(",")}function Di(){return d.navigator&&d.navigator.userAgent||""}function qn(s,u){s=s.split("."),u=u||d;for(var p=0;p<s.length&&"object"==typeof u&&null!=u;p++)u=u[s[p]];return p!=s.length&&(u=void 0),u}function YM(){try{var s=d.localStorage,u=Xf();if(s)return s.setItem(u,"1"),s.removeItem(u),!zM()||!!d.indexedDB}catch{return ta()&&!!d.indexedDB}return!1}function Yf(){return(yE()||"chrome-extension:"===Np()||WM())&&!r6()&&YM()&&!ta()}function yE(){return"http:"===Np()||"https:"===Np()}function Np(){return d.location&&d.location.protocol||null}function Xv(s){return!(t6(s=s||Di())||Mp(s)==QM)}function Jv(s){return typeof s>"u"?null:Y5(s)}function s6(s){var p,u={};for(p in s)s.hasOwnProperty(p)&&null!=s[p]&&(u[p]=s[p]);return u}function kp(s){if(null!==s)return JSON.parse(s)}function Xf(s){return s||Math.floor(1e9*Math.random()).toString()}function a6(s){return!("Safari"==Mp(s=s||Di())||s.toLowerCase().match(/iphone|ipad|ipod/))}function u6(){var s=d.___jsl;if(s&&s.H)for(var u in s.H)if(s.H[u].r=s.H[u].r||[],s.H[u].L=s.H[u].L||[],s.H[u].r=s.H[u].L.concat(),s.CP)for(var p=0;p<s.CP.length;p++)s.CP[p]=null}function ml(s,u){if(s>u)throw Error("Short delay should be less than long delay!");this.a=s,this.c=u,s=Di(),u=$a(),this.b=t6(s)||"ReactNative"===u}function XM(){var s=d.document;return!(s&&typeof s.visibilityState<"u")||"visible"==s.visibilityState}function Zv(s){try{var u=new Date(parseInt(s,10));if(!isNaN(u.getTime())&&!/[^0-9]/.test(s))return u.toUTCString()}catch{}return null}function c6(){return!(!qn("fireauth.oauthhelper",d)&&!qn("fireauth.iframe",d))}ml.prototype.get=function(){var s=d.navigator;return s&&"boolean"==typeof s.onLine&&(yE()||"chrome-extension:"===Np()||typeof s.connection<"u")&&!s.onLine?Math.min(5e3,this.a):this.b?this.c:this.a};var ZM,l6={};function JM(s){l6[s]||(l6[s]=!0,typeof console<"u"&&"function"==typeof console.warn&&console.warn(s))}try{var eR={};Object.defineProperty(eR,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(eR,"abcd",{configurable:!0,enumerable:!0,value:2}),ZM=2==eR.abcd}catch{ZM=!1}function We(s,u,p){ZM?Object.defineProperty(s,u,{configurable:!0,enumerable:!0,value:p}):s[u]=p}function po(s,u){if(u)for(var p in u)u.hasOwnProperty(p)&&We(s,p,u[p])}function qa(s){var u={};return po(u,s),u}function tR(s){var u=s;if("object"==typeof s&&null!=s)for(var p in u="length"in s?[]:{},s)We(u,p,tR(s[p]));return u}function nR(s){var u=s&&(s[sR]?"phone":null);if(!(u&&s&&s[oR]))throw new z("internal-error","Internal assert: invalid MultiFactorInfo object");We(this,"uid",s[oR]),We(this,"displayName",s[f6]||null);var p=null;s[iR]&&(p=new Date(s[iR]).toUTCString()),We(this,"enrollmentTime",p),We(this,"factorId",u)}function rR(s){try{var u=new ey(s)}catch{u=null}return u}nR.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var f6="displayName",iR="enrolledAt",oR="mfaEnrollmentId",sR="phoneInfo";function ey(s){nR.call(this,s),We(this,"phoneNumber",s[sR])}function Pfe(s){var u={},p=s[Ffe],y=s[Vfe],E=s[Ufe];if(s=rR(s[Lfe]),!E||E!=_E&&E!=ty&&!p||E==ty&&!y||E==aR&&!s)throw Error("Invalid checkActionCode response!");E==ty?(u[d6]=p||null,u[p6]=p||null,u[h6]=y):(u[d6]=y||null,u[p6]=y||null,u[h6]=p||null),u[jfe]=s||null,We(this,Hfe,E),We(this,Bfe,tR(u))}Je(ey,nR),ey.prototype.w=function(){var s=ey.bb.w.call(this);return s.phoneNumber=this.phoneNumber,s};var aR="REVERT_SECOND_FACTOR_ADDITION",_E="EMAIL_SIGNIN",ty="VERIFY_AND_CHANGE_EMAIL",Ffe="email",Lfe="mfaInfo",Vfe="newEmail",Ufe="requestType",h6="email",d6="fromEmail",jfe="multiFactorInfo",p6="previousEmail",Bfe="data",Hfe="operation";function uR(s){var u=Is(s=Fo(s),g6)||null,p=Is(s,m6)||null,y=Is(s,v6)||null;if(y=y&&zfe[y]||null,!u||!p||!y)throw new z("argument-error",g6+", "+m6+"and "+v6+" are required in a valid action code URL.");po(this,{apiKey:u,operation:y,code:p,continueUrl:Is(s,$fe)||null,languageCode:Is(s,qfe)||null,tenantId:Is(s,Gfe)||null})}var g6="apiKey",m6="oobCode",$fe="continueUrl",qfe="languageCode",v6="mode",Gfe="tenantId",zfe={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:aR,signIn:_E,verifyAndChangeEmail:ty,verifyEmail:"VERIFY_EMAIL"};function y6(s){try{return new uR(s)}catch{return null}}function wE(s){var u=s[Wfe];if(typeof u>"u")throw new z("missing-continue-uri");if("string"!=typeof u||"string"==typeof u&&!u.length)throw new z("invalid-continue-uri");this.h=u,this.b=this.a=null,this.g=!1;var p=s[_6];if(p&&"object"==typeof p){u=p[D6];var y=p[E6];if(p=p[C6],"string"==typeof u&&u.length){if(this.a=u,typeof y<"u"&&"boolean"!=typeof y)throw new z("argument-error",E6+" property must be a boolean when specified.");if(this.g=!!y,typeof p<"u"&&("string"!=typeof p||"string"==typeof p&&!p.length))throw new z("argument-error",C6+" property must be a non empty string when specified.");this.b=p||null}else{if(typeof u<"u")throw new z("argument-error",D6+" property must be a non empty string when specified.");if(typeof y<"u"||typeof p<"u")throw new z("missing-android-pkg-name")}}else if(typeof p<"u")throw new z("argument-error",_6+" property must be a non null object when specified.");if(this.f=null,(u=s[b6])&&"object"==typeof u){if("string"==typeof(u=u[I6])&&u.length)this.f=u;else if(typeof u<"u")throw new z("argument-error",I6+" property must be a non empty string when specified.")}else if(typeof u<"u")throw new z("argument-error",b6+" property must be a non null object when specified.");if(typeof(u=s[cR])<"u"&&"boolean"!=typeof u)throw new z("argument-error",cR+" property must be a boolean when specified.");if(this.c=!!u,typeof(s=s[w6])<"u"&&("string"!=typeof s||"string"==typeof s&&!s.length))throw new z("argument-error",w6+" property must be a non empty string when specified.");this.i=s||null}var _6="android",w6="dynamicLinkDomain",cR="handleCodeInApp",b6="iOS",Wfe="url",E6="installApp",C6="minimumVersion",D6="packageName",I6="bundleId";function bE(s){var u={};for(var p in u.continueUrl=s.h,u.canHandleCodeInApp=s.c,(u.androidPackageName=s.a)&&(u.androidMinimumVersion=s.b,u.androidInstallApp=s.g),u.iOSBundleId=s.f,u.dynamicLinkDomain=s.i,u)null===u[p]&&delete u[p];return u}var ny=null;function EE(s){var u=T6(s);if(!(u&&u.sub&&u.iss&&u.aud&&u.exp))throw Error("Invalid JWT");this.h=s,this.a=u.exp,this.i=u.sub,s=Date.now()/1e3,this.g=u.iat||(s>this.a?this.a:s),this.b=u.provider_id||u.firebase&&u.firebase.sign_in_provider||null,this.f=u.firebase&&u.firebase.tenant||null,this.c=!!u.is_anonymous||"anonymous"==this.b}function CE(s){try{return new EE(s)}catch{return null}}function T6(s){if(!s||3!=(s=s.split(".")).length)return null;for(var u=(4-(s=s[1]).length%4)%4,p=0;p<u;p++)s+=".";try{var y=function Qfe(s){var u=[];return function Yfe(s,u){function p(ne){for(;y<s.length;){var de=s.charAt(y++),Et=ny[de];if(null!=Et)return Et;if(!/^[\s\xa0]*$/.test(de))throw Error("Unknown base64 encoding at char: "+de)}return ne}!function Xfe(){if(!ny){ny={};for(var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),u=["+/=","+/","-_=","-_.","-_"],p=0;5>p;p++)for(var y=s.concat(u[p].split("")),E=0;E<y.length;E++){var T=y[E];void 0===ny[T]&&(ny[T]=E)}}}();for(var y=0;;){var E=p(-1),T=p(0),M=p(64),L=p(64);if(64===L&&-1===E)break;u(E<<2|T>>4),64!=M&&(u(T<<4&240|M>>2),64!=L&&u(M<<6&192|L))}}(s,function(p){u.push(p)}),u}(s);for(s=[],p=u=0;u<y.length;){var E=y[u++];if(128>E)s[p++]=String.fromCharCode(E);else if(191<E&&224>E){var T=y[u++];s[p++]=String.fromCharCode((31&E)<<6|63&T)}else if(239<E&&365>E){T=y[u++];var M=y[u++],ne=((7&E)<<18|(63&T)<<12|(63&M)<<6|63&y[u++])-65536;s[p++]=String.fromCharCode(55296+(ne>>10)),s[p++]=String.fromCharCode(56320+(1023&ne))}else T=y[u++],M=y[u++],s[p++]=String.fromCharCode((15&E)<<12|(63&T)<<6|63&M)}return JSON.parse(s.join(""))}catch{}return null}EE.prototype.T=function(){return this.f},EE.prototype.l=function(){return this.c},EE.prototype.toString=function(){return this.h};var S6="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),DE=["client_id","response_type","scope","redirect_uri","state"],lR={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:DE},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:DE},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:DE},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:S6},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function fR(s){for(var u in lR)if(lR[u].fa==s)return lR[u];return null}function A6(s){var u={};u["facebook.com"]=R6,u["google.com"]=k6,u["github.com"]=N6,u["twitter.com"]=x6;var p=s&&s[M6];try{if(p)return u[p]?new u[p](s):new Ga(s);if(typeof s[hR]<"u")return new dR(s)}catch{}return null}var hR="idToken",M6="providerId";function dR(s){var u=s[M6];if(!u&&s[hR]){var p=CE(s[hR]);p&&p.b&&(u=p.b)}if(!u)throw Error("Invalid additional user info!");("anonymous"==u||"custom"==u)&&(u=null),p=!1,typeof s.isNewUser<"u"?p=!!s.isNewUser:"identitytoolkit#SignupNewUserResponse"===s.kind&&(p=!0),We(this,"providerId",u),We(this,"isNewUser",p)}function Ga(s){dR.call(this,s),We(this,"profile",tR((s=kp(s.rawUserInfo||"{}"))||{}))}function R6(s){if(Ga.call(this,s),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function N6(s){if(Ga.call(this,s),"github.com"!=this.providerId)throw Error("Invalid provider ID!");We(this,"username",this.profile&&this.profile.login||null)}function k6(s){if(Ga.call(this,s),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function x6(s){if(Ga.call(this,s),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");We(this,"username",s.screenName||null)}function O6(s){var u=Fo(s),p=Is(u,"link"),y=Is(Fo(p),"link");return u=Is(u,"deep_link_id"),Is(Fo(u),"link")||u||y||p||s}function IE(s,u){if(!s&&!u)throw new z("internal-error","Internal assert: no raw session string available");if(s&&u)throw new z("internal-error","Internal assert: unable to determine the session type");this.a=s||null,this.b=u||null,this.type=this.a?ry:TE}Je(Ga,dR),Je(R6,Ga),Je(N6,Ga),Je(k6,Ga),Je(x6,Ga);var ry="enroll",TE="signin";function xp(){}function Op(s,u){return s.then(function(p){if(p[ia]){var y=CE(p[ia]);if(!y||u!=y.i)throw new z("user-mismatch");return p}throw new z("user-mismatch")}).o(function(p){throw p&&p.code&&p.code==Uv+"user-not-found"?new z("user-mismatch"):p})}function Jf(s,u){if(!u)throw new z("internal-error","failed to construct a credential");this.a=u,We(this,"providerId",s),We(this,"signInMethod",s)}function pR(s){return{pendingToken:s.a,requestUri:"http://localhost"}}function Jfe(s){if(s&&s.providerId&&s.signInMethod&&0==s.providerId.indexOf("saml.")&&s.pendingToken)try{return new Jf(s.providerId,s.pendingToken)}catch{}return null}function Wu(s,u,p){if(this.a=null,u.idToken||u.accessToken)u.idToken&&We(this,"idToken",u.idToken),u.accessToken&&We(this,"accessToken",u.accessToken),u.nonce&&!u.pendingToken&&We(this,"nonce",u.nonce),u.pendingToken&&(this.a=u.pendingToken);else{if(!u.oauthToken||!u.oauthTokenSecret)throw new z("internal-error","failed to construct a credential");We(this,"accessToken",u.oauthToken),We(this,"secret",u.oauthTokenSecret)}We(this,"providerId",s),We(this,"signInMethod",p)}function gR(s){var u={};return s.idToken&&(u.id_token=s.idToken),s.accessToken&&(u.access_token=s.accessToken),s.secret&&(u.oauth_token_secret=s.secret),u.providerId=s.providerId,s.nonce&&!s.a&&(u.nonce=s.nonce),u={postBody:W5(u).toString(),requestUri:"http://localhost"},s.a&&(delete u.postBody,u.pendingToken=s.a),u}function Zfe(s){if(s&&s.providerId&&s.signInMethod){var u={idToken:s.oauthIdToken,accessToken:s.oauthTokenSecret?null:s.oauthAccessToken,oauthTokenSecret:s.oauthTokenSecret,oauthToken:s.oauthTokenSecret&&s.oauthAccessToken,nonce:s.nonce,pendingToken:s.pendingToken};try{return new Wu(s.providerId,u,s.signInMethod)}catch{}}return null}function Zf(s,u){this.Qc=u||[],po(this,{providerId:s,isOAuthProvider:!0}),this.Jb={},this.qb=(fR(s)||{}).Ja||null,this.pb=null}function P6(s){if("string"!=typeof s||0!=s.indexOf("saml."))throw new z("argument-error",'SAML provider IDs must be prefixed with "saml."');Zf.call(this,s,[])}function rs(s){Zf.call(this,s,DE),this.a=[]}function eh(){rs.call(this,"facebook.com")}function F6(s){if(!s)throw new z("argument-error","credential failed: expected 1 argument (the OAuth access token).");var u=s;return V(s)&&(u=s.accessToken),(new eh).credential({accessToken:u})}function th(){rs.call(this,"github.com")}function L6(s){if(!s)throw new z("argument-error","credential failed: expected 1 argument (the OAuth access token).");var u=s;return V(s)&&(u=s.accessToken),(new th).credential({accessToken:u})}function nh(){rs.call(this,"google.com"),this.Ca("profile")}function V6(s,u){var p=s;return V(s)&&(p=s.idToken,u=s.accessToken),(new nh).credential({idToken:p,accessToken:u})}function Pp(){Zf.call(this,"twitter.com",S6)}function U6(s,u){var p=s;if(V(p)||(p={oauthToken:s,oauthTokenSecret:u}),!p.oauthToken||!p.oauthTokenSecret)throw new z("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Wu("twitter.com",p,"twitter.com")}function vl(s,u,p){this.a=s,this.f=u,We(this,"providerId","password"),We(this,"signInMethod",p===Ts.EMAIL_LINK_SIGN_IN_METHOD?Ts.EMAIL_LINK_SIGN_IN_METHOD:Ts.EMAIL_PASSWORD_SIGN_IN_METHOD)}function ehe(s){return s&&s.email&&s.password?new vl(s.email,s.password,s.signInMethod):null}function Ts(){po(this,{providerId:"password",isOAuthProvider:!1})}function j6(s,u){if(!(u=mR(u)))throw new z("argument-error","Invalid email link!");return new vl(s,u.code,Ts.EMAIL_LINK_SIGN_IN_METHOD)}function mR(s){return(s=y6(s=O6(s)))&&s.operation===_E?s:null}function yl(s){if(!(s.fb&&s.eb||s.La&&s.ea))throw new z("internal-error");this.a=s,We(this,"providerId","phone"),this.fa="phone",We(this,"signInMethod","phone")}function the(s){if(s&&"phone"===s.providerId&&(s.verificationId&&s.verificationCode||s.temporaryProof&&s.phoneNumber)){var u={};return Xn(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(p){s[p]&&(u[p]=s[p])}),new yl(u)}return null}function iy(s){return s.a.La&&s.a.ea?{temporaryProof:s.a.La,phoneNumber:s.a.ea}:{sessionInfo:s.a.fb,code:s.a.eb}}function Ku(s){try{this.a=s||Xe.default.auth()}catch{throw new z("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}po(this,{providerId:"phone",isOAuthProvider:!1})}function B6(s,u){if(!s)throw new z("missing-verification-id");if(!u)throw new z("missing-verification-code");return new yl({fb:s,eb:u})}function vR(s){if(s.temporaryProof&&s.phoneNumber)return new yl({La:s.temporaryProof,ea:s.phoneNumber});var u=s&&s.providerId;if(!u||"password"===u)return null;var p=s&&s.oauthAccessToken,y=s&&s.oauthTokenSecret,E=s&&s.nonce,T=s&&s.oauthIdToken,M=s&&s.pendingToken;try{switch(u){case"google.com":return V6(T,p);case"facebook.com":return F6(p);case"github.com":return L6(p);case"twitter.com":return U6(p,y);default:return p||y||T||M?M?0==u.indexOf("saml.")?new Jf(u,M):new Wu(u,{pendingToken:M,idToken:s.oauthIdToken,accessToken:s.oauthAccessToken},u):new rs(u).credential({idToken:T,accessToken:p,rawNonce:E}):null}}catch{return null}}function yR(s){if(!s.isOAuthProvider)throw new z("invalid-oauth-provider")}function na(s,u,p,y,E,T,M){if(this.c=s,this.b=u||null,this.g=p||null,this.f=y||null,this.i=T||null,this.h=M||null,this.a=E||null,!this.g&&!this.a)throw new z("invalid-auth-event");if(this.g&&this.a)throw new z("invalid-auth-event");if(this.g&&!this.f)throw new z("invalid-auth-event")}function H6(s){return(s=s||{}).type?new na(s.type,s.eventId,s.urlResponse,s.sessionId,s.error&&HH(s.error),s.postBody,s.tenantId):null}function nhe(){this.b=null,this.a=[]}IE.prototype.Ha=function(){return ot(this.a?this.a:this.b)},IE.prototype.w=function(){return this.type==ry?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},xp.prototype.ka=function(){},xp.prototype.b=function(){},xp.prototype.c=function(){},xp.prototype.w=function(){},Jf.prototype.ka=function(s){return LR(s,pR(this))},Jf.prototype.b=function(s,u){var p=pR(this);return p.idToken=u,VR(s,p)},Jf.prototype.c=function(s,u){return Op(UR(s,pR(this)),u)},Jf.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Wu.prototype.ka=function(s){return LR(s,gR(this))},Wu.prototype.b=function(s,u){var p=gR(this);return p.idToken=u,VR(s,p)},Wu.prototype.c=function(s,u){return Op(UR(s,gR(this)),u)},Wu.prototype.w=function(){var s={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(s.oauthIdToken=this.idToken),this.accessToken&&(s.oauthAccessToken=this.accessToken),this.secret&&(s.oauthTokenSecret=this.secret),this.nonce&&(s.nonce=this.nonce),this.a&&(s.pendingToken=this.a),s},Zf.prototype.Ka=function(s){return this.Jb=hl(s),this},Je(P6,Zf),Je(rs,Zf),rs.prototype.Ca=function(s){return Gu(this.a,s)||this.a.push(s),this},rs.prototype.Rb=function(){return Hf(this.a)},rs.prototype.credential=function(s,u){var p;if(!(p=V(s)?{idToken:s.idToken||null,accessToken:s.accessToken||null,nonce:s.rawNonce||null}:{idToken:s||null,accessToken:u||null}).idToken&&!p.accessToken)throw new z("argument-error","credential failed: must provide the ID token and/or the access token.");return new Wu(this.providerId,p,this.providerId)},Je(eh,rs),We(eh,"PROVIDER_ID","facebook.com"),We(eh,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),Je(th,rs),We(th,"PROVIDER_ID","github.com"),We(th,"GITHUB_SIGN_IN_METHOD","github.com"),Je(nh,rs),We(nh,"PROVIDER_ID","google.com"),We(nh,"GOOGLE_SIGN_IN_METHOD","google.com"),Je(Pp,Zf),We(Pp,"PROVIDER_ID","twitter.com"),We(Pp,"TWITTER_SIGN_IN_METHOD","twitter.com"),vl.prototype.ka=function(s){return this.signInMethod==Ts.EMAIL_LINK_SIGN_IN_METHOD?Xt(s,Vhe,{email:this.a,oobCode:this.f}):Xt(s,d$,{email:this.a,password:this.f})},vl.prototype.b=function(s,u){return this.signInMethod==Ts.EMAIL_LINK_SIGN_IN_METHOD?Xt(s,Uhe,{idToken:u,email:this.a,oobCode:this.f}):Xt(s,h$,{idToken:u,email:this.a,password:this.f})},vl.prototype.c=function(s,u){return Op(this.ka(s),u)},vl.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},po(Ts,{PROVIDER_ID:"password"}),po(Ts,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),po(Ts,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),yl.prototype.ka=function(s){return s.gb(iy(this))},yl.prototype.b=function(s,u){var p=iy(this);return p.idToken=u,Xt(s,ode,p)},yl.prototype.c=function(s,u){var p=iy(this);return p.operation="REAUTH",Op(s=Xt(s,sde,p),u)},yl.prototype.w=function(){var s={providerId:"phone"};return this.a.fb&&(s.verificationId=this.a.fb),this.a.eb&&(s.verificationCode=this.a.eb),this.a.La&&(s.temporaryProof=this.a.La),this.a.ea&&(s.phoneNumber=this.a.ea),s},Ku.prototype.gb=function(s,u){var p=this.a.a;return ot(u.verify()).then(function(y){if("string"!=typeof y)throw new z("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"===u.type){var M,E=V(s)?s.session:null,T=V(s)?s.phoneNumber:s;return M=E&&E.type==ry?E.Ha().then(function(L){return function Mhe(s,u){return Xt(s,Jhe,u).then(function(p){return p.phoneSessionInfo.sessionInfo})}(p,{idToken:L,phoneEnrollmentInfo:{phoneNumber:T,recaptchaToken:y}})}):E&&E.type==TE?E.Ha().then(function(L){return function Rhe(s,u){return Xt(s,Zhe,u).then(function(p){return p.phoneResponseInfo.sessionInfo})}(p,{mfaPendingCredential:L,mfaEnrollmentId:s.multiFactorHint&&s.multiFactorHint.uid||s.multiFactorUid,phoneSignInInfo:{recaptchaToken:y}})}):function Ahe(s,u){return Xt(s,Yhe,u)}(p,{phoneNumber:T,recaptchaToken:y}),M.then(function(L){return"function"==typeof u.reset&&u.reset(),L},function(L){throw"function"==typeof u.reset&&u.reset(),L})}throw new z("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')})},po(Ku,{PROVIDER_ID:"phone"}),po(Ku,{PHONE_SIGN_IN_METHOD:"phone"}),na.prototype.getUid=function(){var s=[];return s.push(this.c),this.b&&s.push(this.b),this.f&&s.push(this.f),this.h&&s.push(this.h),s.join("-")},na.prototype.T=function(){return this.h},na.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var bR,_R=null;function wR(s){var u="unauthorized-domain",p=void 0,y=Fo(s);s=y.a,"chrome-extension"==(y=y.c)?p=l5("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",s):"http"==y||"https"==y?p=l5("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",s):u="operation-not-supported-in-this-environment",z.call(this,u,p)}function oy(s,u,p){z.call(this,s,p),(s=u||{}).Kb&&We(this,"email",s.Kb),s.ea&&We(this,"phoneNumber",s.ea),s.credential&&We(this,"credential",s.credential),s.$b&&We(this,"tenantId",s.$b)}function SE(s){if(s.code){var u=s.code||"";0==u.indexOf(Uv)&&(u=u.substring(Uv.length));var p={credential:vR(s),$b:s.tenantId};if(s.email)p.Kb=s.email;else if(s.phoneNumber)p.ea=s.phoneNumber;else if(!p.credential)return new z(u,s.message||void 0);return new oy(u,p,s.message)}return null}function sy(){}function AE(){}function q6(s){if(!s.f&&typeof XMLHttpRequest>"u"&&typeof ActiveXObject<"u"){for(var u=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],p=0;p<u.length;p++){var y=u[p];try{return new ActiveXObject(y),s.f=y}catch{}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return s.f}function ME(){}function G6(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=he(this.qc,this),this.a.onerror=he(this.Tb,this),this.a.onprogress=he(this.rc,this),this.a.ontimeout=he(this.vc,this)}function ER(s,u){s.readyState=u,s.onreadystatechange&&s.onreadystatechange()}function CR(s,u,p){this.reset(s,u,p,void 0,void 0)}function DR(s){this.f=s,this.b=this.c=this.a=null}function ay(s,u){this.name=s,this.value=u}Je(wR,z),Je(oy,z),oy.prototype.w=function(){var s={code:this.code,message:this.message};this.email&&(s.email=this.email),this.phoneNumber&&(s.phoneNumber=this.phoneNumber),this.tenantId&&(s.tenantId=this.tenantId);var u=this.credential&&this.credential.w();return u&&xo(s,u),s},oy.prototype.toJSON=function(){return this.w()},sy.prototype.c=null,Je(AE,sy),AE.prototype.a=function(){var s=q6(this);return s?new ActiveXObject(s):new XMLHttpRequest},AE.prototype.b=function(){var s={};return q6(this)&&(s[0]=!0,s[1]=!0),s},bR=new AE,Je(ME,sy),ME.prototype.a=function(){var s=new XMLHttpRequest;if("withCredentials"in s)return s;if(typeof XDomainRequest<"u")return new G6;throw Error("Unsupported browser")},ME.prototype.b=function(){return{}},(e=G6.prototype).open=function(s,u,p){if(null!=p&&!p)throw Error("Only async requests are supported.");this.a.open(s,u)},e.send=function(s){if(s){if("string"!=typeof s)throw Error("Only string data is supported");this.a.send(s)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(s){return"content-type"==s.toLowerCase()?this.a.contentType:""},e.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ER(this,4)},e.Tb=function(){this.status=500,this.response=this.responseText="",ER(this,4)},e.vc=function(){this.Tb()},e.rc=function(){this.status=200,ER(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},CR.prototype.a=null,CR.prototype.reset=function(s,u,p,y,E){y||ko(),delete this.a},ay.prototype.toString=function(){return this.name};var z6=new ay("SEVERE",1e3),IR=new ay("WARNING",900),ohe=new ay("CONFIG",700),she=new ay("FINE",500);function W6(s){return s.c?s.c:s.a?W6(s.a):(bp("Root logger has no level set."),null)}DR.prototype.log=function(s,u,p){if(s.value>=W6(this).value)for(x(u)&&(u=u()),s=new CR(s,String(u),this.f),p&&(s.a=p),p=this;p;)p=p.a};var TR={},RE=null;function SR(s){var u;if(RE||(RE=new DR(""),TR[""]=RE,RE.c=ohe),!(u=TR[s])){u=new DR(s);var p=s.lastIndexOf("."),y=s.substr(p+1);(p=SR(s.substr(0,p))).b||(p.b={}),p.b[y]=u,u.a=p,TR[s]=u}return u}function Ss(s,u){s&&s.log(she,u,void 0)}function NE(s){this.f=s}function kE(s){ho.call(this),this.u=s,this.h=void 0,this.readyState=AR,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=SR("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}Je(NE,sy),NE.prototype.a=function(){return new kE(this.f)},NE.prototype.b=function(s){return function(){return s}}({}),Je(kE,ho);var AR=0;function K6(s){s.c.read().then(s.pc.bind(s)).catch(s.Va.bind(s))}function uy(s){s.readyState=4,s.g=null,s.c=null,s.m=null,cy(s)}function cy(s){s.onreadystatechange&&s.onreadystatechange.call(s)}function ly(s){ho.call(this),this.headers=new Sp,this.D=s||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=Q6,this.u=this.S=!1}(e=kE.prototype).open=function(s,u){if(this.readyState!=AR)throw this.abort(),Error("Error reopening a connection");this.s=s,this.f=u,this.readyState=1,cy(this)},e.send=function(s){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var u={headers:this.l,method:this.s,credentials:this.h,cache:void 0};s&&(u.body=s),this.u.fetch(new Request(this.f,u)).then(this.uc.bind(this),this.Va.bind(this))},e.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,uy(this)),this.readyState=AR},e.uc=function(s){this.a&&(this.g=s,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=s.headers,this.readyState=2,cy(this)),this.a&&(this.readyState=3,cy(this),this.a&&("arraybuffer"===this.responseType?s.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):typeof d.ReadableStream<"u"&&"body"in s?(this.response=this.responseText="",this.c=s.body.getReader(),this.m=new TextDecoder,K6(this)):s.text().then(this.tc.bind(this),this.Va.bind(this)))))},e.pc=function(s){if(this.a){var u=this.m.decode(s.value?s.value:new Uint8Array(0),{stream:!s.done});u&&(this.response=this.responseText+=u),s.done?uy(this):cy(this),3==this.readyState&&K6(this)}},e.tc=function(s){this.a&&(this.response=this.responseText=s,uy(this))},e.sc=function(s){this.a&&(this.response=s,uy(this))},e.Va=function(s){var u=this.i;u&&u.log(IR,"Failed to fetch url "+this.f,s instanceof Error?s:Error(s)),this.a&&uy(this)},e.setRequestHeader=function(s,u){this.l.append(s,u)},e.getResponseHeader=function(s){return this.b?this.b.get(s.toLowerCase())||"":((s=this.i)&&s.log(IR,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var s=this.i;return s&&s.log(IR,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}s=[];for(var u=this.b.entries(),p=u.next();!p.done;)s.push((p=p.value)[0]+": "+p[1]),p=u.next();return s.join("\r\n")},Object.defineProperty(kE.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(s){this.h=s?"include":"same-origin"}}),Je(ly,ho);var Q6="";ly.prototype.b=SR("goog.net.XhrIo");var ahe=/^https?$/i,uhe=["POST","PUT"];function fhe(s){return"content-type"==s.toLowerCase()}function Y6(s,u){s.c=!1,s.a&&(s.f=!0,s.a.abort(),s.f=!1),s.h=u,X6(s),xE(s)}function X6(s){s.J||(s.J=!0,s.dispatchEvent("complete"),s.dispatchEvent("error"))}function J6(s){if(s.c&&typeof c<"u")if(s.C[1]&&4==fy(s)&&2==OE(s))Ss(s.b,Qu(s,"Local request error detected and ignored"));else if(s.i&&4==fy(s))BM(s.Wb,0,s);else if(s.dispatchEvent("readystatechange"),4==fy(s)){Ss(s.b,Qu(s,"Request complete")),s.c=!1;try{var y,u=OE(s);e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}if(!(y=p)){var E;if(E=0===u){var T=String(s.l).match(G5)[1]||null;if(!T&&d.self&&d.self.location){var M=d.self.location.protocol;T=M.substr(0,M.length-1)}E=!ahe.test(T?T.toLowerCase():"")}y=E}if(y)s.dispatchEvent("complete"),s.dispatchEvent("success");else{try{var L=2<fy(s)?s.a.statusText:""}catch(ne){Ss(s.b,"Can not get status: "+ne.message),L=""}s.h=L+" ["+OE(s)+"]",X6(s)}}finally{xE(s)}}}function xE(s,u){if(s.a){Z6(s);var p=s.a,y=s.C[0]?C:null;s.a=null,s.C=null,u||s.dispatchEvent("ready");try{p.onreadystatechange=y}catch(E){(s=s.b)&&s.log(z6,"Problem encountered resetting onreadystatechange: "+E.message,void 0)}}}function Z6(s){s.a&&s.u&&(s.a.ontimeout=null),s.s&&(d.clearTimeout(s.s),s.s=null)}function fy(s){return s.a?s.a.readyState:0}function OE(s){try{return 2<fy(s)?s.a.status:-1}catch{return-1}}function Qu(s,u){return u+" ["+s.P+" "+s.l+" "+OE(s)+"]"}function rh(s){var u=ghe;this.g=[],this.u=u,this.s=s||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function hy(s,u,p){s.a=!0,s.c=p,s.f=!u,t$(s)}function PE(s){if(s.a){if(!s.v)throw new FE(s);s.v=!1}}function MR(s,u,p,y){s.g.push([u,p,y]),s.a&&t$(s)}function e$(s){return Nle(s.g,function(u){return x(u[1])})}function t$(s){if(s.h&&s.a&&e$(s)){var u=s.h,p=LE[u];p&&(d.clearTimeout(p.a),delete LE[u]),s.h=0}s.b&&(s.b.l--,delete s.b),u=s.c;for(var y=p=!1;s.g.length&&!s.i;){var E=s.g.shift(),T=E[0],M=E[1];if(E=E[2],T=s.f?M:T)try{var L=T.call(E||s.s,u);void 0!==L&&(s.f=s.f&&(L==u||L instanceof Error),s.c=u=L),($H(u)||"function"==typeof d.Promise&&u instanceof d.Promise)&&(y=!0,s.i=!0)}catch(ne){u=ne,s.f=!0,e$(s)||(p=!0)}}s.c=u,y&&(L=he(s.m,s,!0),y=he(s.m,s,!1),u instanceof rh?(MR(u,L,y),u.C=!0):u.then(L,y)),p&&(u=new n$(u),LE[u.a]=u,s.h=u.a)}function FE(){ts.call(this)}function dy(){ts.call(this)}function n$(s){this.a=d.setTimeout(he(this.c,this),0),this.b=s}(e=ly.prototype).Ma=function(){typeof c<"u"&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Ss(this.b,Qu(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(Ss(this.b,Qu(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),xE(this))},e.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),xE(this,!0)),ly.bb.Da.call(this)},e.Wb=function(){this.ya||(this.N||this.i||this.f?J6(this):this.Jc())},e.Jc=function(){J6(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Q6:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var s=this.b;return s&&s.log(z6,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(u){return Ss(this.b,"Can not get response: "+u.message),null}},rh.prototype.cancel=function(s){if(this.a)this.c instanceof rh&&this.c.cancel();else{if(this.b){var u=this.b;delete this.b,s?u.cancel(s):(u.l--,0>=u.l&&u.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(s=new dy(this),PE(this),hy(this,!1,s))}},rh.prototype.m=function(s,u){this.i=!1,hy(this,s,u)},rh.prototype.then=function(s,u,p){var y,E,T=new Wt(function(M,L){y=M,E=L});return MR(this,y,function(M){M instanceof dy?T.cancel():E(M)}),T.then(s,u,p)},rh.prototype.$goog_Thenable=!0,Je(FE,ts),FE.prototype.message="Deferred has already fired",FE.prototype.name="AlreadyCalledError",Je(dy,ts),dy.prototype.message="Deferred was canceled",dy.prototype.name="CanceledError",n$.prototype.c=function(){throw delete LE[this.a],this.b};var LE={};function RR(s){var u={},p=u.document||document,y=n5(s).toString(),E=uE(document,"SCRIPT"),T={Xb:E,Ma:void 0},M=new rh(T),L=null,ne=null!=u.timeout?u.timeout:5e3;return 0<ne&&(L=window.setTimeout(function(){VE(E,!0);var de=new NR(vhe,"Timeout reached for loading script "+y);PE(M),hy(M,!1,de)},ne),T.Ma=L),E.onload=E.onreadystatechange=function(){E.readyState&&"loaded"!=E.readyState&&"complete"!=E.readyState||(VE(E,u.xd||!1,L),PE(M),hy(M,!0,null))},E.onerror=function(){VE(E,!0,L);var de=new NR(mhe,"Error while loading script "+y);PE(M),hy(M,!1,de)},xo(T=u.attributes||{},{type:"text/javascript",charset:"UTF-8"}),m5(E,T),function zle(s,u){ZH(s,"HTMLScriptElement"),s.src=n5(u),(u=s.ownerDocument&&s.ownerDocument.defaultView)&&u!=d?u=w(u.document):(null===v&&(v=w(d.document)),u=v),u&&s.setAttribute("nonce",u)}(E,s),function phe(s){var u;return(u=(s||document).getElementsByTagName("HEAD"))&&0!=u.length?u[0]:s.documentElement}(p).appendChild(E),M}function ghe(){if(this&&this.Xb){var s=this.Xb;s&&"SCRIPT"==s.tagName&&VE(s,!0,this.Ma)}}function VE(s,u,p){null!=p&&d.clearTimeout(p),s.onload=C,s.onerror=C,s.onreadystatechange=C,u&&window.setTimeout(function(){s&&s.parentNode&&s.parentNode.removeChild(s)},0)}var mhe=0,vhe=1;function NR(s,u){var p="Jsloader error (code #"+s+")";u&&(p+=": "+u),ts.call(this,p),this.code=s}function UE(s){this.f=s}function ra(s,u,p){if(this.c=s,this.l=(s=u||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=s.secureTokenTimeout||yhe,this.g=hl(s.secureTokenHeaders||_he),this.h=s.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=s.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=s.firebaseTimeout||whe,this.a=hl(s.firebaseHeaders||bhe),p&&(this.a["X-Client-Version"]=p,this.g["X-Client-Version"]=p),p="Node"==$a(),!(p=d.XMLHttpRequest||p&&Xe.default.INTERNAL.node&&Xe.default.INTERNAL.node.XMLHttpRequest)&&!ta())throw new z("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=ta()?new NE(self):r6()?new UE(p):new ME,this.b=null}Je(NR,ts),Je(UE,sy),UE.prototype.a=function(){return new this.f},UE.prototype.b=function(){return{}};var kR,ia="idToken",yhe=new ml(3e4,6e4),_he={"Content-Type":"application/x-www-form-urlencoded"},whe=new ml(3e4,6e4),bhe={"Content-Type":"application/json"};function r$(s,u){u?s.a["X-Firebase-Locale"]=u:delete s.a["X-Firebase-Locale"]}function jE(s,u){u&&(s.l=xR("https://securetoken.googleapis.com/v1/token",u),s.h=xR("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",u),s.i=xR("https://identitytoolkit.googleapis.com/v2/",u))}function xR(s,u){return s=Fo(s),u=Fo(u.url),s.f=s.a+s.f,zv(s,u.c),s.a=u.a,Wv(s,u.g),s.toString()}function i$(s,u){u?(s.a["X-Client-Version"]=u,s.g["X-Client-Version"]=u):(delete s.a["X-Client-Version"],delete s.g["X-Client-Version"])}function o$(s,u,p,y,E,T,M){(function Dfe(){var s=Di();return!((s=Mp(s)!=i6?null:(s=s.match(/\sChrome\/(\d+)/i))&&2==s.length?parseInt(s[1],10):null)&&30>s||ea&&dl&&!(9<dl))})()||ta()?s=he(s.u,s):(kR||(kR=new Wt(function(L,ne){!function Che(s,u){((window.gapi||{}).client||{}).request?s():(d[s$]=function(){((window.gapi||{}).client||{}).request?s():u(Error("CORS_UNSUPPORTED"))},function dhe(s,u){MR(s,null,u,void 0)}(RR(bM(Ehe,{onload:s$})),function(){u(Error("CORS_UNSUPPORTED"))}))}(L,ne)})),s=he(s.s,s)),s(u,p,y,E,T,M)}ra.prototype.T=function(){return this.b},ra.prototype.u=function(s,u,p,y,E,T){if(ta()&&(typeof d.fetch>"u"||typeof d.Headers>"u"||typeof d.Request>"u"))throw new z("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var M=new ly(this.f);if(T){M.g=Math.max(0,T);var L=setTimeout(function(){M.dispatchEvent("timeout")},T)}H5(M,"complete",function(){L&&clearTimeout(L);var ne=null;try{ne=JSON.parse(function hhe(s){try{return s.a?s.a.responseText:""}catch(u){return Ss(s.b,"Can not get responseText: "+u.message),""}}(this))||null}catch{ne=null}u&&u(ne)}),jM(M,"ready",function(){L&&clearTimeout(L),O5(this)}),jM(M,"timeout",function(){L&&clearTimeout(L),O5(this),u&&u(null)}),function che(s,u,p,y,E){if(s.a)throw Error("[goog.net.XhrIo] Object is active with another request="+s.l+"; newUri="+u);p=p?p.toUpperCase():"GET",s.l=u,s.h="",s.P=p,s.J=!1,s.c=!0,s.a=s.D?s.D.a():bR.a(),s.C=function $6(s){return s.c||(s.c=s.b())}(s.D?s.D:bR),s.a.onreadystatechange=he(s.Wb,s);try{Ss(s.b,Qu(s,"Opening Xhr")),s.N=!0,s.a.open(p,String(u),!0),s.N=!1}catch(M){return Ss(s.b,Qu(s,"Error opening Xhr: "+M.message)),void Y6(s,M)}u=y||"";var T=new Sp(s.headers);E&&function pfe(s,u){if(s.forEach&&"function"==typeof s.forEach)s.forEach(u,void 0);else if(A(s)||"string"==typeof s)Xn(s,u,void 0);else for(var p=q5(s),y=$5(s),E=y.length,T=0;T<E;T++)u.call(void 0,y[T],p&&p[T],s)}(E,function(M,L){T.set(L,M)}),E=function kle(s){e:{for(var u=fhe,p=s.length,y="string"==typeof s?s.split(""):s,E=0;E<p;E++)if(E in y&&u.call(void 0,y[E],E,s)){u=E;break e}u=-1}return 0>u?null:"string"==typeof s?s.charAt(u):s[u]}(T.Y()),y=d.FormData&&u instanceof d.FormData,!Gu(uhe,p)||E||y||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),T.forEach(function(M,L){this.a.setRequestHeader(L,M)},s),s.m&&(s.a.responseType=s.m),"withCredentials"in s.a&&s.a.withCredentials!==s.S&&(s.a.withCredentials=s.S);try{Z6(s),0<s.g&&(s.u=function lhe(s){return ea&&p5(9)&&"number"==typeof s.timeout&&void 0!==s.ontimeout}(s.a),Ss(s.b,Qu(s,"Will abort after "+s.g+"ms if incomplete, xhr2 "+s.u)),s.u?(s.a.timeout=s.g,s.a.ontimeout=he(s.Ma,s)):s.s=BM(s.Ma,s.g,s)),Ss(s.b,Qu(s,"Sending request")),s.i=!0,s.a.send(u),s.i=!1}catch(M){Ss(s.b,Qu(s,"Send error: "+M.message)),Y6(s,M)}}(M,s,p,y,E)};var Ehe=new Ba(iE,"https://apis.google.com/js/client.js?onload=%{onload}"),s$="__fcb"+Math.floor(1e6*Math.random()).toString();function ih(s){if("string"!=typeof(s=s.email)||!Sfe.test(s))throw new z("invalid-email")}function u$(s){"email"in s&&ih(s)}function Lo(s){if(!s[ia])throw s.mfaPendingCredential?new z("multi-factor-auth-required",null,hl(s)):new z("internal-error")}function OR(s){if(s.phoneNumber||s.temporaryProof){if(!s.phoneNumber||!s.temporaryProof)throw new z("internal-error")}else{if(!s.sessionInfo)throw new z("missing-verification-id");if(!s.code)throw new z("missing-verification-code")}}ra.prototype.s=function(s,u,p,y,E){var T=this;kR.then(function(){window.gapi.client.setApiKey(T.c);var M=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:s,method:p,body:y,headers:E,authType:"none",callback:function(L){window.gapi.auth.setToken(M),u&&u(L)}})}).o(function(M){u&&u({error:{message:M&&M.message||"CORS_UNSUPPORTED"}})})},ra.prototype.Ab=function(){return Xt(this,Xhe,{})},ra.prototype.Cb=function(s,u){return Xt(this,f$,{idToken:s,email:u})},ra.prototype.Db=function(s,u){return Xt(this,h$,{idToken:s,password:u})};var She={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function c$(s){if(!s.phoneVerificationInfo)throw new z("internal-error");if(!s.phoneVerificationInfo.sessionInfo)throw new z("missing-verification-id");if(!s.phoneVerificationInfo.code)throw new z("missing-verification-code")}function PR(s){if(!s.requestUri||!s.sessionId&&!s.postBody&&!s.pendingToken)throw new z("internal-error")}function FR(s,u){return u.oauthIdToken&&u.providerId&&0==u.providerId.indexOf("oidc.")&&!u.pendingToken&&(s.sessionId?u.nonce=s.sessionId:s.postBody&&qM(s=new Kf(s.postBody),"nonce")&&(u.nonce=s.get("nonce"))),u}function l$(s){var u=null;if(s.needConfirmation?(s.code="account-exists-with-different-credential",u=SE(s)):"FEDERATED_USER_ID_ALREADY_LINKED"==s.errorMessage?(s.code="credential-already-in-use",u=SE(s)):"EMAIL_EXISTS"==s.errorMessage?(s.code="email-already-in-use",u=SE(s)):s.errorMessage&&(u=p$(s.errorMessage)),u)throw u;Lo(s)}function LR(s,u){return u.returnIdpCredential=!0,Xt(s,ede,u)}function VR(s,u){return u.returnIdpCredential=!0,Xt(s,nde,u)}function UR(s,u){return u.returnIdpCredential=!0,u.autoCreate=!1,Xt(s,tde,u)}function jR(s){if(!s.oobCode)throw new z("invalid-action-code")}(e=ra.prototype).Eb=function(s,u){var p={idToken:s},y=[];return XH(She,function(E,T){var M=u[T];null===M?y.push(E):T in u&&(p[T]=M)}),y.length&&(p.deleteAttribute=y),Xt(this,f$,p)},e.wb=function(s,u){return xo(s={requestType:"PASSWORD_RESET",email:s},u),Xt(this,zhe,s)},e.xb=function(s,u){return xo(s={requestType:"EMAIL_SIGNIN",email:s},u),Xt(this,$he,s)},e.vb=function(s,u){return xo(s={requestType:"VERIFY_EMAIL",idToken:s},u),Xt(this,qhe,s)},e.Fb=function(s,u,p){return xo(s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:s,newEmail:u},p),Xt(this,Ghe,s)},e.gb=function(s){return Xt(this,ide,s)},e.ob=function(s,u){return Xt(this,Qhe,{oobCode:s,newPassword:u})},e.Sa=function(s){return Xt(this,xhe,{oobCode:s})},e.kb=function(s){return Xt(this,khe,{oobCode:s})};var khe={endpoint:"setAccountInfo",A:jR,Z:"email",B:!0},xhe={endpoint:"resetPassword",A:jR,G:function(s){var u=s.requestType;if(!u||!s.email&&"EMAIL_SIGNIN"!=u&&"VERIFY_AND_CHANGE_EMAIL"!=u)throw new z("internal-error")},B:!0},Ohe={endpoint:"signupNewUser",A:function(s){if(ih(s),!s.password)throw new z("weak-password")},G:Lo,V:!0,B:!0},Phe={endpoint:"createAuthUri",B:!0},Fhe={endpoint:"deleteAccount",O:["idToken"]},Lhe={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(s){if(!Array.isArray(s.deleteProvider))throw new z("internal-error")}},Vhe={endpoint:"emailLinkSignin",O:["email","oobCode"],A:ih,G:Lo,V:!0,B:!0},Uhe={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:ih,G:Lo,V:!0},jhe={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:c$,G:Lo,B:!0,Na:!0},Bhe={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:c$,G:Lo,B:!0,Na:!0},Hhe={endpoint:"getAccountInfo"},$he={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(s){if("EMAIL_SIGNIN"!=s.requestType)throw new z("internal-error");ih(s)},Z:"email",B:!0},qhe={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(s){if("VERIFY_EMAIL"!=s.requestType)throw new z("internal-error")},Z:"email",B:!0},Ghe={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(s){if("VERIFY_AND_CHANGE_EMAIL"!=s.requestType)throw new z("internal-error")},Z:"email",B:!0},zhe={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(s){if("PASSWORD_RESET"!=s.requestType)throw new z("internal-error");ih(s)},Z:"email",B:!0},Whe={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},Khe={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(s){if(!s.recaptchaSiteKey)throw new z("internal-error")}},Qhe={endpoint:"resetPassword",A:jR,Z:"email",B:!0},Yhe={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},f$={endpoint:"setAccountInfo",O:["idToken"],A:u$,V:!0},h$={endpoint:"setAccountInfo",O:["idToken"],A:function(s){if(u$(s),!s.password)throw new z("weak-password")},G:Lo,V:!0},Xhe={endpoint:"signupNewUser",G:Lo,V:!0,B:!0},Jhe={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(s){if(!s.phoneEnrollmentInfo)throw new z("internal-error");if(!s.phoneEnrollmentInfo.phoneNumber)throw new z("missing-phone-number");if(!s.phoneEnrollmentInfo.recaptchaToken)throw new z("missing-app-credential")},G:function(s){if(!s.phoneSessionInfo||!s.phoneSessionInfo.sessionInfo)throw new z("internal-error")},B:!0,Na:!0},Zhe={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(s){if(!s.phoneSignInInfo||!s.phoneSignInInfo.recaptchaToken)throw new z("missing-app-credential")},G:function(s){if(!s.phoneResponseInfo||!s.phoneResponseInfo.sessionInfo)throw new z("internal-error")},B:!0,Na:!0},ede={endpoint:"verifyAssertion",A:PR,Za:FR,G:l$,V:!0,B:!0},tde={endpoint:"verifyAssertion",A:PR,Za:FR,G:function(s){if(s.errorMessage&&"USER_NOT_FOUND"==s.errorMessage)throw new z("user-not-found");if(s.errorMessage)throw p$(s.errorMessage);Lo(s)},V:!0,B:!0},nde={endpoint:"verifyAssertion",A:function(s){if(PR(s),!s.idToken)throw new z("internal-error")},Za:FR,G:l$,V:!0},rde={endpoint:"verifyCustomToken",A:function(s){if(!s.token)throw new z("invalid-custom-token")},G:Lo,V:!0,B:!0},d$={endpoint:"verifyPassword",A:function(s){if(ih(s),!s.password)throw new z("wrong-password")},G:Lo,V:!0,B:!0},ide={endpoint:"verifyPhoneNumber",A:OR,G:Lo,B:!0},ode={endpoint:"verifyPhoneNumber",A:function(s){if(!s.idToken)throw new z("internal-error");OR(s)},G:function(s){if(s.temporaryProof)throw s.code="credential-already-in-use",SE(s);Lo(s)}},sde={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:OR,G:Lo,B:!0},ade={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(s){if(!!s[ia]^!!s.refreshToken)throw new z("internal-error")},B:!0,Na:!0};function Xt(s,u,p){if(!function Ofe(s,u){if(!u||!u.length)return!0;if(!s)return!1;for(var p=0;p<u.length;p++){var y=s[u[p]];if(null==y||""===y)return!1}return!0}(p,u.O))return $n(new z("internal-error"));var T,y=!!u.Na,E=u.Vb||"POST";return ot(p).then(u.A).then(function(){return u.V&&(p.returnSecureToken=!0),u.B&&s.b&&typeof p.tenantId>"u"&&(p.tenantId=s.b),function a$(s,u,p,y,E,T,M){var L=Fo(u+p);wr(L,"key",s.c),M&&wr(L,"cb",Date.now().toString());var ne="GET"==y;if(ne)for(var de in E)E.hasOwnProperty(de)&&wr(L,de,E[de]);return new Wt(function(Et,bn){o$(s,L.toString(),function(fn){fn?fn.error?bn(BR(fn,T||{})):Et(fn):bn(new z("network-request-failed"))},y,ne?void 0:Y5(s6(E)),s.a,s.v.get())})}(s,y?s.i:s.h,u.endpoint,E,p,u.Ib,u.mb||!1)}).then(function(M){return T=M,u.Za?u.Za(p,T):T}).then(u.G).then(function(){if(!u.Z)return T;if(!(u.Z in T))throw new z("internal-error");return T[u.Z]})}function p$(s){return BR({error:{errors:[{message:s}],code:400,message:s}})}function BR(s,u){var p=(s.error&&s.error.errors&&s.error.errors[0]||{}).reason||"",y={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(p=y[p]?new z(y[p]):null)return p;for(var E in p=s.error&&s.error.message||"",xo(y={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},u||{}),u=(u=p.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<u.length?u[1]:void 0,y)if(0===p.indexOf(E))return new z(y[E],u);return!u&&s&&(u=Jv(s)),new z("internal-error",u)}function ude(s){this.b=s,this.a=null,this.sb=function cde(s){return function gde(){return BE||(BE=new Wt(function(s,u){function p(){u6(),qn("gapi.load")("gapi.iframes",{callback:s,ontimeout:function(){u6(),u(Error("Network Error"))},timeout:dde.get()})}if(qn("gapi.iframes.Iframe"))s();else if(qn("gapi.load"))p();else{var y="__iframefcb"+Math.floor(1e6*Math.random()).toString();d[y]=function(){qn("gapi.load")?p():u(Error("Network Error"))},ot(RR(y=bM(hde,{onload:y}))).o(function(){u(Error("Network Error"))})}}).o(function(s){throw BE=null,s}))}().then(function(){return new Wt(function(u,p){qn("gapi.iframes.getContext")().open({where:document.body,url:s.b,messageHandlersFilter:qn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(y){function E(){clearTimeout(T),u()}s.a=y,s.a.restyle({setHideOnLeave:!1});var T=setTimeout(function(){p(Error("Network Error"))},pde.get());y.ping(E).then(E,function(){p(Error("Network Error"))})})})})}(this)}var hde=new Ba(iE,"https://apis.google.com/js/api.js?onload=%{onload}"),dde=new ml(3e4,6e4),pde=new ml(5e3,15e3),BE=null;function g$(s,u,p,y){this.l=s,this.h=u,this.i=p,this.g=y,this.f=null,s=this.g?mE((s=Fo(this.g.url)).c,s.a,s.g,"/emulator/auth/iframe"):mE("https",this.l,null,"/__/auth/iframe"),this.a=s,wr(this.a,"apiKey",this.h),wr(this.a,"appName",this.i),this.b=null,this.c=[]}function HR(s,u,p,y,E,T){this.u=s,this.s=u,this.c=p,this.m=y,this.v=T,this.i=this.g=this.l=null,this.a=E,this.h=this.f=null}function $R(s){try{return Xe.default.app(s).auth().Ga()}catch{return[]}}function m$(s,u,p,y,E,T){this.s=s,this.g=u,this.b=p,this.f=T,this.c=y||null,this.i=E||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function v$(s){var u=Yv();return function The(s){return Xt(s,Whe,{}).then(function(u){return u.authorizedDomains||[]})}(s).then(function(p){e:{var y=Fo(u),E=y.c;y=y.a;for(var T=0;T<p.length;T++){var M=p[T],L=y,ne=E;if(0==M.indexOf("chrome-extension://")?L=Fo(M).a==L&&"chrome-extension"==ne:"http"!=ne&&"https"!=ne?L=!1:Tfe.test(M)?L=L==M:(M=M.split(".").join("\\."),L=new RegExp("^(.+\\."+M+"|"+M+")$","i").test(L)),L){p=!0;break e}}p=!1}if(!p)throw new wR(Yv())})}function y$(s){return s.m||(s.m=vE().then(function(){if(!s.u){var u=s.c,p=s.i,y=$R(s.b),E=new g$(s.s,s.g,s.b,s.f);E.f=u,E.b=p,E.c=Hf(y||[]),s.u=E.toString()}s.v=new ude(s.u),function mde(s){if(!s.v)throw Error("IfcHandler must be initialized!");!function fde(s,u){s.sb.then(function(){s.a.register("authEvent",u,qn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(s.v,function(u){var p={};if(u&&u.authEvent){var y=!1;for(u=H6(u.authEvent),p=0;p<s.h.length;p++)y=s.h[p](u)||y;return(p={}).status=y?"ACK":"ERROR",ot(p)}return p.status="ERROR",ot(p)})}(s)})),s.m}function _$(s){return s.l||(s.C=s.c?Rp(s.c,$R(s.b)):null,s.l=new ra(s.g,jv(s.i),s.C),s.f&&jE(s.l,s.f)),s.l}function py(s,u,p,y,E,T,M,L,ne,de,Et,bn){return(s=new HR(s,u,p,y,E,bn)).l=T,s.g=M,s.i=L,s.b=hl(ne||null),s.f=de,s.zb(Et).toString()}function w$(s){if(this.a=s||Xe.default.INTERNAL.reactNative&&Xe.default.INTERNAL.reactNative.AsyncStorage,!this.a)throw new z("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function b$(s){this.b=s,this.a={},this.f=he(this.c,this)}g$.prototype.toString=function(){return this.f?wr(this.a,"v",this.f):Ha(this.a.b,"v"),this.b?wr(this.a,"eid",this.b):Ha(this.a.b,"eid"),this.c.length?wr(this.a,"fw",this.c.join(",")):Ha(this.a.b,"fw"),this.a.toString()},HR.prototype.zb=function(s){return this.h=s,this},HR.prototype.toString=function(){if(this.v){var s=Fo(this.v.url);s=mE(s.c,s.a,s.g,"/emulator/auth/handler")}else s=mE("https",this.u,null,"/__/auth/handler");if(wr(s,"apiKey",this.s),wr(s,"appName",this.c),wr(s,"authType",this.m),this.a.isOAuthProvider){var u=this.a;try{var p=Xe.default.app(this.c).auth().la()}catch{p=null}for(var y in u.pb=p,wr(s,"providerId",this.a.providerId),u=s6((p=this.a).Jb))u[y]=u[y].toString();y=p.Qc,u=hl(u);for(var E=0;E<y.length;E++){var T=y[E];T in u&&delete u[T]}p.qb&&p.pb&&!u[p.qb]&&(u[p.qb]=p.pb),$f(u)||wr(s,"customParameters",Jv(u))}if("function"==typeof this.a.Rb&&(p=this.a.Rb()).length&&wr(s,"scopes",p.join(",")),this.l?wr(s,"redirectUrl",this.l):Ha(s.b,"redirectUrl"),this.g?wr(s,"eventId",this.g):Ha(s.b,"eventId"),this.i?wr(s,"v",this.i):Ha(s.b,"v"),this.b)for(var M in this.b)this.b.hasOwnProperty(M)&&!Is(s,M)&&wr(s,M,this.b[M]);return this.h?wr(s,"tid",this.h):Ha(s.b,"tid"),this.f?wr(s,"eid",this.f):Ha(s.b,"eid"),(M=$R(this.c)).length&&wr(s,"fw",M.join(",")),s.toString()},(e=m$.prototype).Pb=function(s,u,p){var y=new z("popup-closed-by-user"),E=new z("web-storage-unsupported"),T=this,M=!1;return this.ma().then(function(){(function vde(s){var u={type:"webStorageSupport"};return y$(s).then(function(){return function lde(s,u){return s.sb.then(function(){return new Wt(function(p){s.a.send(u.type,u,p,qn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(s.v,u)}).then(function(p){if(p&&p.length&&typeof p[0].webStorageSupport<"u")return p[0].webStorageSupport;throw Error()})})(T).then(function(L){L||(s&&Qf(s),u(E),M=!0)})}).o(function(){}).then(function(){if(!M)return function Ife(s){return new Wt(function(u){return function p(){Tp(2e3).then(function(){if(s&&!s.closed)return p();u()})}()})}(s)}).then(function(){if(!M)return Tp(p).then(function(){u(y)})})},e.Yb=function(){var s=Di();return!Xv(s)&&!a6(s)},e.Ub=function(){return!1},e.Nb=function(s,u,p,y,E,T,M,L){if(!s)return $n(new z("popup-blocked"));if(M&&!Xv())return this.ma().o(function(de){Qf(s),E(de)}),y(),ot();this.a||(this.a=v$(_$(this)));var ne=this;return this.a.then(function(){var de=ne.ma().o(function(Et){throw Qf(s),E(Et),Et});return y(),de}).then(function(){yR(p),M||Z5(py(ne.s,ne.g,ne.b,u,p,null,T,ne.c,void 0,ne.i,L,ne.f),s)}).o(function(de){throw"auth/network-request-failed"==de.code&&(ne.a=null),de})},e.Ob=function(s,u,p,y){this.a||(this.a=v$(_$(this)));var E=this;return this.a.then(function(){yR(u),Z5(py(E.s,E.g,E.b,s,u,Yv(),p,E.c,void 0,E.i,y,E.f))}).o(function(T){throw"auth/network-request-failed"==T.code&&(E.a=null),T})},e.ma=function(){var s=this;return y$(this).then(function(){return s.v.sb}).o(function(){throw s.a=null,new z("network-request-failed")})},e.ac=function(){return!0},e.Ea=function(s){this.h.push(s)},e.Ta=function(s){Zs(this.h,function(u){return u==s})},(e=w$.prototype).get=function(s){return ot(this.a.getItem(s)).then(function(u){return u&&kp(u)})},e.set=function(s,u){return ot(this.a.setItem(s,Jv(u)))},e.U=function(s){return ot(this.a.removeItem(s))},e.ca=function(){},e.ia=function(){};var GR,E$=[];function C$(s,u,p){$f(s.a)&&s.b.addEventListener("message",s.f),typeof s.a[u]>"u"&&(s.a[u]=[]),s.a[u].push(p)}function D$(s){this.a=s}function I$(s){this.c=s,this.b=!1,this.a=[]}function T$(s,u,p,y){var E,M,L,ne,T=p||{},de=null;if(s.b)return $n(Error("connection_unavailable"));var Et=y?800:50,bn=typeof MessageChannel<"u"?new MessageChannel:null;return new Wt(function(fn,ui){bn?(E=Math.floor(Math.random()*Math.pow(10,20)).toString(),bn.port1.start(),L=setTimeout(function(){ui(Error("unsupported_event"))},Et),s.a.push(de={messageChannel:bn,onMessage:M=function(Yu){Yu.data.eventId===E&&("ack"===Yu.data.status?(clearTimeout(L),ne=setTimeout(function(){ui(Error("timeout"))},3e3)):"done"===Yu.data.status?(clearTimeout(ne),typeof Yu.data.response<"u"?fn(Yu.data.response):ui(Error("unknown_error"))):(clearTimeout(L),clearTimeout(ne),ui(Error("invalid_response"))))}}),bn.port1.addEventListener("message",M),s.c.postMessage({eventType:u,eventId:E,data:T},[bn.port2])):ui(Error("connection_unavailable"))}).then(function(fn){return qR(s,de),fn}).o(function(fn){throw qR(s,de),fn})}function qR(s,u){if(u){var p=u.messageChannel;p&&(p.port1.removeEventListener("message",u.onMessage),p.port1.close()),Zs(s.a,function(E){return E==u})}}function S$(){if(!WR())throw new z("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=d.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var s=this;ta()&&self?(this.v=function yde(){var s=ta()?self:null;if(Xn(E$,function(p){p.b==s&&(u=p)}),!u){var u=new b$(s);E$.push(u)}return u}(),C$(this.v,"keyChanged",function(u,p){return R$(s).then(function(y){return 0<y.length&&Xn(s.a,function(E){E(y)}),{keyProcessed:Gu(y,p.key)}})}),C$(this.v,"ping",function(){return ot(["keyChanged"])})):function kfe(){var s=d.navigator;return s&&s.serviceWorker?ot().then(function(){return s.serviceWorker.ready}).then(function(u){return u.active||null}).o(function(){return null}):ot(null)}().then(function(u){(s.h=u)&&(s.g=new I$(new D$(u)),T$(s.g,"ping",null,!0).then(function(p){p[0].fulfilled&&Gu(p[0].value,"keyChanged")&&(s.s=!0)}).o(function(){}))})}function A$(s){return new Wt(function(u,p){var y=s.m.open("firebaseLocalStorageDb",1);y.onerror=function(E){try{E.preventDefault()}catch{}p(Error(E.target.error))},y.onupgradeneeded=function(E){E=E.target.result;try{E.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(T){p(T)}},y.onsuccess=function(E){(E=E.target.result).objectStoreNames.contains("firebaseLocalStorage")?u(E):function _de(s){return new Wt(function(u,p){var y=s.m.deleteDatabase("firebaseLocalStorageDb");y.onsuccess=function(){u()},y.onerror=function(E){p(Error(E.target.error))}})}(s).then(function(){return A$(s)}).then(function(T){u(T)}).o(function(T){p(T)})}})}function zR(s){return s.i||(s.i=A$(s)),s.i}function HE(s,u){var y=0;return new Wt(function p(E,T){zR(s).then(u).then(E).o(function(M){if(!(3<++y))return zR(s).then(function(L){return L.close(),s.i=void 0,p(E,T)}).o(function(L){T(L)});T(M)})})}function WR(){try{return!!d.indexedDB}catch{return!1}}function gy(s){return s.objectStore("firebaseLocalStorage")}function my(s,u){return s.transaction(["firebaseLocalStorage"],u?"readwrite":"readonly")}function Fp(s){return new Wt(function(u,p){s.onsuccess=function(y){y&&y.target?u(y.target.result):u()},s.onerror=function(y){p(y.target.error)}})}function M$(s,u){return s.g&&s.h&&function Nfe(){var s=d.navigator;return s&&s.serviceWorker&&s.serviceWorker.controller||null}()===s.h?T$(s.g,"keyChanged",{key:u},s.s).then(function(){}).o(function(){}):ot()}function R$(s){return zR(s).then(function(u){var p=gy(my(u,!1));return p.getAll?Fp(p.getAll()):new Wt(function(y,E){var T=[],M=p.openCursor();M.onsuccess=function(L){(L=L.target.result)?(T.push(L.value),L.continue()):y(T)},M.onerror=function(L){E(L.target.error)}})}).then(function(u){var p={},y=[];if(0==s.b){for(y=0;y<u.length;y++)p[u[y].fbase_key]=u[y].value;y=e6(s.c,p),s.c=p}return y})}function N$(s){s.l&&s.l.cancel("STOP_EVENT"),s.f&&(clearTimeout(s.f),s.f=null)}function k$(s){var u=this,p=null;this.a=[],this.type="indexedDB",this.c=s,this.b=ot().then(function(){if(WR()){var y=Xf(),E="__sak"+y;return GR||(GR=new S$),(p=GR).set(E,y).then(function(){return p.get(E)}).then(function(T){if(T!==y)throw Error("indexedDB not supported!");return p.U(E)}).then(function(){return p}).o(function(){return u.c})}return u.c}).then(function(y){return u.type=y.type,y.ca(function(E){Xn(u.a,function(T){T(E)})}),y})}function vy(){this.a={},this.type="inMemory"}function $E(){if(!function bde(){var s="Node"==$a();if(!(s=x$()||s&&Xe.default.INTERNAL.node&&Xe.default.INTERNAL.node.localStorage))return!1;try{return s.setItem("__sak","1"),s.removeItem("__sak"),!0}catch{return!1}}())throw"Node"==$a()?new z("internal-error","The LocalStorage compatibility library was not found."):new z("web-storage-unsupported");this.a=x$()||Xe.default.INTERNAL.node.localStorage,this.type="localStorage"}function x$(){try{var s=d.localStorage,u=Xf();return s&&(s.setItem(u,"1"),s.removeItem(u)),s}catch{return null}}function KR(){this.type="nullStorage"}function QR(){if(!function Ede(){var s="Node"==$a();if(!(s=O$()||s&&Xe.default.INTERNAL.node&&Xe.default.INTERNAL.node.sessionStorage))return!1;try{return s.setItem("__sak","1"),s.removeItem("__sak"),!0}catch{return!1}}())throw"Node"==$a()?new z("internal-error","The SessionStorage compatibility library was not found."):new z("web-storage-unsupported");this.a=O$()||Xe.default.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function O$(){try{var s=d.sessionStorage,u=Xf();return s&&(s.setItem(u,"1"),s.removeItem(u)),s}catch{return null}}function Cde(){var s={};s.Browser=Dde,s.Node=Ide,s.ReactNative=Tde,s.Worker=Sde,this.a=s[$a()]}b$.prototype.c=function(s){var u=s.data.eventType,p=s.data.eventId,y=this.a[u];if(y&&0<y.length){s.ports[0].postMessage({status:"ack",eventId:p,eventType:u,response:null});var E=[];Xn(y,function(T){E.push(ot().then(function(){return T(s.origin,s.data.data)}))}),D5(E).then(function(T){var M=[];Xn(T,function(L){M.push({fulfilled:L.Qb,value:L.value,reason:L.reason?L.reason.message:void 0})}),Xn(M,function(L){for(var ne in L)typeof L[ne]>"u"&&delete L[ne]}),s.ports[0].postMessage({status:"done",eventId:p,eventType:u,response:M})})}},D$.prototype.postMessage=function(s,u){this.a.postMessage(s,u)},I$.prototype.close=function(){for(;0<this.a.length;)qR(this,this.a[0]);this.b=!0},(e=S$.prototype).set=function(s,u){var p=this,y=!1;return HE(this,function(E){return Fp((E=gy(my(E,!0))).get(s))}).then(function(E){return HE(p,function(T){if(T=gy(my(T,!0)),E)return E.value=u,Fp(T.put(E));p.b++,y=!0;var M={};return M.fbase_key=s,M.value=u,Fp(T.add(M))})}).then(function(){return p.c[s]=u,M$(p,s)}).oa(function(){y&&p.b--})},e.get=function(s){return HE(this,function(u){return Fp(gy(my(u,!1)).get(s))}).then(function(u){return u&&u.value})},e.U=function(s){var u=this,p=!1;return HE(this,function(y){return p=!0,u.b++,Fp(gy(my(y,!0)).delete(s))}).then(function(){return delete u.c[s],M$(u,s)}).oa(function(){p&&u.b--})},e.ca=function(s){0==this.a.length&&function wde(s){N$(s),function u(){s.f=setTimeout(function(){s.l=R$(s).then(function(p){0<p.length&&Xn(s.a,function(y){y(p)})}).then(function(){u()}).o(function(p){"STOP_EVENT"!=p.message&&u()})},800)}()}(this),this.a.push(s)},e.ia=function(s){Zs(this.a,function(u){return u==s}),0==this.a.length&&N$(this)},(e=k$.prototype).get=function(s){return this.b.then(function(u){return u.get(s)})},e.set=function(s,u){return this.b.then(function(p){return p.set(s,u)})},e.U=function(s){return this.b.then(function(u){return u.U(s)})},e.ca=function(s){this.a.push(s)},e.ia=function(s){Zs(this.a,function(u){return u==s})},(e=vy.prototype).get=function(s){return ot(this.a[s])},e.set=function(s,u){return this.a[s]=u,ot()},e.U=function(s){return delete this.a[s],ot()},e.ca=function(){},e.ia=function(){},(e=$E.prototype).get=function(s){var u=this;return ot().then(function(){return kp(u.a.getItem(s))})},e.set=function(s,u){var p=this;return ot().then(function(){var y=Jv(u);null===y?p.U(s):p.a.setItem(s,y)})},e.U=function(s){var u=this;return ot().then(function(){u.a.removeItem(s)})},e.ca=function(s){d.window&&Ds(d.window,"storage",s)},e.ia=function(s){d.window&&ns(d.window,"storage",s)},(e=KR.prototype).get=function(){return ot(null)},e.set=function(){return ot()},e.U=function(){return ot()},e.ca=function(){},e.ia=function(){},(e=QR.prototype).get=function(s){var u=this;return ot().then(function(){return kp(u.a.getItem(s))})},e.set=function(s,u){var p=this;return ot().then(function(){var y=Jv(u);null===y?p.U(s):p.a.setItem(s,y)})},e.U=function(s){var u=this;return ot().then(function(){u.a.removeItem(s)})},e.ca=function(){},e.ia=function(){};var YR,XR,Dde={F:$E,cb:QR},Ide={F:$E,cb:QR},Tde={F:w$,cb:KR},Sde={F:$E,cb:KR},Lp={rd:"local",NONE:"none",td:"session"};function P$(){var s=!(a6(Di())||!KM()),u=Xv(),p=YM();this.m=s,this.h=u,this.l=p,this.a={},YR||(YR=new Cde),s=YR;try{this.g=!zM()&&c6()||!d.indexedDB?new s.a.F:new k$(ta()?new vy:new s.a.F)}catch{this.g=new vy,this.h=!0}try{this.i=new s.a.cb}catch{this.i=new vy}this.v=new vy,this.f=he(this.Zb,this),this.b={}}function yy(){return XR||(XR=new P$),XR}function oh(s,u){switch(u){case"session":return s.i;case"none":return s.v;default:return s.g}}function Vp(s,u){return"firebase:"+s.name+(u?":"+u:"")}function Up(s,u,p){return p=Vp(u,p),"local"==u.F&&(s.b[p]=null),oh(s,u.F).U(p)}function JR(s){s.c&&(clearInterval(s.c),s.c=null)}function Nde(s){this.a=s,this.b=yy()}(e=P$.prototype).get=function(s,u){return oh(this,s.F).get(Vp(s,u))},e.set=function(s,u,p){var y=Vp(s,p),E=this,T=oh(this,s.F);return T.set(y,u).then(function(){return T.get(y)}).then(function(M){"local"==s.F&&(E.b[y]=M)})},e.addListener=function(s,u,p){s=Vp(s,u),this.l&&(this.b[s]=d.localStorage.getItem(s)),$f(this.a)&&(oh(this,"local").ca(this.f),this.h||(zM()||!c6())&&d.indexedDB||!this.l||function Rde(s){JR(s),s.c=setInterval(function(){for(var u in s.a){var p=d.localStorage.getItem(u),y=s.b[u];p!=y&&(s.b[u]=p,p=new zf({type:"storage",key:u,target:window,oldValue:y,newValue:p,a:!0}),s.Zb(p))}},1e3)}(this)),this.a[s]||(this.a[s]=[]),this.a[s].push(p)},e.removeListener=function(s,u,p){s=Vp(s,u),this.a[s]&&(Zs(this.a[s],function(y){return y==p}),0==this.a[s].length&&delete this.a[s]),$f(this.a)&&(oh(this,"local").ia(this.f),JR(this))},e.Zb=function(s){if(s&&s.g){var u=s.a.key;if(null==u)for(var p in this.a){var y=this.b[p];typeof y>"u"&&(y=null);var E=d.localStorage.getItem(p);E!==y&&(this.b[p]=E,this.nb(p))}else if(0==u.indexOf("firebase:")&&this.a[u]){if(typeof s.a.a<"u"?oh(this,"local").ia(this.f):JR(this),this.m)if(p=d.localStorage.getItem(u),(y=s.a.newValue)!==p)null!==y?d.localStorage.setItem(u,y):d.localStorage.removeItem(u);else if(this.b[u]===y&&typeof s.a.a>"u")return;var T=this;p=function(){(typeof s.a.a<"u"||T.b[u]!==d.localStorage.getItem(u))&&(T.b[u]=d.localStorage.getItem(u),T.nb(u))},ea&&dl&&10==dl&&d.localStorage.getItem(u)!==s.a.newValue&&s.a.newValue!==s.a.oldValue?setTimeout(p,10):p()}}else Xn(s,he(this.nb,this))},e.nb=function(s){this.a[s]&&Xn(this.a[s],function(u){u()})};var GE,ZR={name:"authEvent",F:"local"};function xde(){this.a=yy()}function qE(s,u){this.b=F$,this.f=d.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=s,this.h=u,this.l=d.Int32Array?new Int32Array(64):Array(64),void 0===GE&&(GE=d.Int32Array?new Int32Array(U$):U$),this.reset()}Je(qE,function Ode(){this.b=-1});for(var F$=64,Pde=F$-1,L$=[],eN=0;eN<Pde;eN++)L$[eN]=0;var V$=yM(128,L$);function tN(s){for(var u=s.f,p=s.l,y=0,E=0;E<u.length;)p[y++]=u[E]<<24|u[E+1]<<16|u[E+2]<<8|u[E+3],E=4*y;for(u=16;64>u;u++){var T=(0|p[u-16])+(((E=0|p[u-15])>>>7|E<<25)^(E>>>18|E<<14)^E>>>3)|0,M=(0|p[u-7])+(((y=0|p[u-2])>>>17|y<<15)^(y>>>19|y<<13)^y>>>10)|0;p[u]=T+M|0}y=0|s.a[0],E=0|s.a[1];var L=0|s.a[2],ne=0|s.a[3],de=0|s.a[4],Et=0|s.a[5],bn=0|s.a[6];for(T=0|s.a[7],u=0;64>u;u++){var fn=((y>>>2|y<<30)^(y>>>13|y<<19)^(y>>>22|y<<10))+(y&E^y&L^E&L)|0;M=(T=T+((de>>>6|de<<26)^(de>>>11|de<<21)^(de>>>25|de<<7))|0)+((M=(M=de&Et^~de&bn)+(0|GE[u])|0)+(0|p[u])|0)|0,T=bn,bn=Et,Et=de,de=ne+M|0,ne=L,L=E,E=y,y=M+fn|0}s.a[0]=s.a[0]+y|0,s.a[1]=s.a[1]+E|0,s.a[2]=s.a[2]+L|0,s.a[3]=s.a[3]+ne|0,s.a[4]=s.a[4]+de|0,s.a[5]=s.a[5]+Et|0,s.a[6]=s.a[6]+bn|0,s.a[7]=s.a[7]+T|0}function nN(s,u,p){void 0===p&&(p=u.length);var y=0,E=s.c;if("string"==typeof u)for(;y<p;)s.f[E++]=u.charCodeAt(y++),E==s.b&&(tN(s),E=0);else{if(!A(u))throw Error("message must be string or array");for(;y<p;){var T=u[y++];if(!("number"==typeof T&&0<=T&&255>=T&&T==(0|T)))throw Error("message must be a byte array");s.f[E++]=T,E==s.b&&(tN(s),E=0)}}s.c=E,s.g+=p}qE.prototype.reset=function(){this.g=this.c=0,this.a=d.Int32Array?new Int32Array(this.h):Hf(this.h)};var U$=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function j$(){qE.call(this,8,Fde)}Je(j$,qE);var Fde=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function B$(s,u,p,y,E,T){this.v=s,this.i=u,this.l=p,this.m=y||null,this.u=E||null,this.s=T,this.h=u+":"+p,this.C=new xde,this.g=new Nde(this.h),this.f=null,this.b=[],this.a=this.c=null}function zE(s){return new z("invalid-cordova-configuration",s)}function H$(s,u){for(var p=0;p<s.b.length;p++)try{s.b[p](u)}catch{}}function $$(s){return s.f||(s.f=s.ma().then(function(){return new Wt(function(u){s.Ea(function p(y){return u(y),s.Ta(p),!1}),function jde(s){function u(M){y=!0,E&&E.cancel(),rN(s).then(function(L){var ne=p;if(L&&M&&M.url){var de=null;-1!=(ne=O6(M.url)).indexOf("/__/auth/callback")&&(de=(de="object"==typeof(de=kp(Is(de=Fo(ne),"firebaseError")||null))?HH(de):null)?new na(L.c,L.b,null,null,de,null,L.T()):new na(L.c,L.b,ne,L.f,null,null,L.T())),ne=de||p}H$(s,ne)})}var p=new na("unknown",null,null,null,new z("no-auth-event")),y=!1,E=Tp(500).then(function(){return rN(s).then(function(){y||H$(s,p)})}),T=d.handleOpenURL;d.handleOpenURL=function(M){if(0==M.toLowerCase().indexOf(qn("BuildInfo.packageName",d).toLowerCase()+"://")&&u({url:M}),"function"==typeof T)try{T(M)}catch(L){console.error(L)}},_R||(_R=new nhe),function rhe(s){var u=_R;u.a.push(s),u.b||(u.b=function(p){for(var y=0;y<u.a.length;y++)u.a[y](p)},"function"==typeof(s=qn("universalLinks.subscribe",d))&&s(null,u.b))}(u)}(s)})})),s.f}function rN(s){var u=null;return function kde(s){return s.b.get(ZR,s.a).then(function(u){return H6(u)})}(s.g).then(function(p){return u=p,Up((p=s.g).b,ZR,p.a)}).then(function(){return u})}function Bde(s){this.a=s,this.b=yy()}(e=B$.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=function Afe(){return WM(void 0)?vE().then(function(){return new Wt(function(s,u){var p=d.document,y=setTimeout(function(){u(Error("Cordova framework is not ready."))},1e3);p.addEventListener("deviceready",function(){clearTimeout(y),s()},!1)})}):$n(Error("Cordova must run in an Android or iOS file scheme."))}().then(function(){if("function"!=typeof qn("universalLinks.subscribe",d))throw zE("cordova-universal-links-plugin-fix is not installed");if(typeof qn("BuildInfo.packageName",d)>"u")throw zE("cordova-plugin-buildinfo is not installed");if("function"!=typeof qn("cordova.plugins.browsertab.openUrl",d))throw zE("cordova-plugin-browsertab is not installed");if("function"!=typeof qn("cordova.InAppBrowser.open",d))throw zE("cordova-plugin-inappbrowser is not installed")},function(){throw new z("cordova-not-ready")})},e.Pb=function(s,u){return u(new z("operation-not-supported-in-this-environment")),ot()},e.Nb=function(){return $n(new z("operation-not-supported-in-this-environment"))},e.ac=function(){return!1},e.Yb=function(){return!0},e.Ub=function(){return!0},e.Ob=function(s,u,p,y){if(this.c)return $n(new z("redirect-operation-pending"));var E=this,T=d.document,M=null,L=null,ne=null,de=null;return this.c=ot().then(function(){return yR(u),$$(E)}).then(function(){return function Ude(s,u,p,y,E){var T=function Lde(){for(var s=20,u=[];0<s;)u.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),s--;return u.join("")}(),M=new na(u,y,null,T,new z("no-auth-event"),null,E),L=qn("BuildInfo.packageName",d);if("string"!=typeof L)throw new z("invalid-cordova-configuration");var ne=qn("BuildInfo.displayName",d),de={};if(Di().toLowerCase().match(/iphone|ipad|ipod/))de.ibi=L;else{if(!Di().toLowerCase().match(/android/))return $n(new z("operation-not-supported-in-this-environment"));de.apn=L}ne&&(de.appDisplayName=ne),T=function Vde(s){var u=new j$;nN(u,s),s=[];var p=8*u.g;nN(u,V$,56>u.c?56-u.c:u.b-(u.c-56));for(var y=63;56<=y;y--)u.f[y]=255&p,p/=256;for(tN(u),y=p=0;y<u.i;y++)for(var E=24;0<=E;E-=8)s[p++]=u.a[y]>>E&255;return function Kfe(s){return nE(s,function(u){return 1<(u=u.toString(16)).length?u:"0"+u}).join("")}(s)}(T),de.sessionId=T;var Et=py(s.v,s.i,s.l,u,p,null,y,s.m,de,s.u,E,s.s);return s.ma().then(function(){var bn=s.h;return s.C.a.set(ZR,M.w(),bn)}).then(function(){var bn=qn("cordova.plugins.browsertab.isAvailable",d);if("function"!=typeof bn)throw new z("invalid-cordova-configuration");var fn=null;bn(function(ui){if(ui){if("function"!=typeof(fn=qn("cordova.plugins.browsertab.openUrl",d)))throw new z("invalid-cordova-configuration");fn(Et)}else{if("function"!=typeof(fn=qn("cordova.InAppBrowser.open",d)))throw new z("invalid-cordova-configuration");ui=Di(),s.a=fn(Et,ui.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||ui.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(E,s,u,p,y)}).then(function(){return new Wt(function(Et,bn){L=function(){var fn=qn("cordova.plugins.browsertab.close",d);return Et(),"function"==typeof fn&&fn(),E.a&&"function"==typeof E.a.close&&(E.a.close(),E.a=null),!1},E.Ea(L),de=function(){XM()&&ne()},T.addEventListener("resume",ne=function(){M||(M=Tp(2e3).then(function(){bn(new z("redirect-cancelled-by-user"))}))},!1),Di().toLowerCase().match(/android/)||T.addEventListener("visibilitychange",de,!1)}).o(function(Et){return rN(E).then(function(){throw Et})})}).oa(function(){ne&&T.removeEventListener("resume",ne,!1),de&&T.removeEventListener("visibilitychange",de,!1),M&&M.cancel(),L&&E.Ta(L),E.c=null})},e.Ea=function(s){this.b.push(s),$$(this).o(function(u){"auth/invalid-cordova-configuration"===u.code&&(u=new na("unknown",null,null,null,new z("no-auth-event")),s(u))})},e.Ta=function(s){Zs(this.b,function(u){return u==s})};var iN={name:"pendingRedirect",F:"session"};function oN(s){return Up(s.b,iN,s.a)}function WE(s,u,p,y){this.i={},this.u=0,this.D=s,this.v=u,this.m=p,this.J=y,this.h=[],this.f=!1,this.l=he(this.s,this),this.b=new QE,this.C=new Z$,this.g=new Bde(Y$(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=q$(this.D,this.v,this.m,Bv,this.J)}function q$(s,u,p,y,E){var T=Xe.default.SDK_VERSION||null;return WM()?new B$(s,u,p,T,y,E):new m$(s,u,p,T,y,E)}function G$(s){s.f||(s.f=!0,s.a.Ea(s.l));var u=s.a;return s.a.ma().o(function(p){throw s.a==u&&s.reset(),p})}function z$(s){s.a.Yb()&&G$(s).o(function(u){var p=new na("unknown",null,null,null,new z("operation-not-supported-in-this-environment"));aN(u)&&s.s(p)}),s.a.Ub()||X$(s.b)}function KE(s,u){Gu(s.h,u)||s.h.push(u),s.f||function $de(s){return s.b.get(iN,s.a).then(function(u){return"pending"==u})}(s.g).then(function(p){p?oN(s.g).then(function(){G$(s).o(function(y){var E=new na("unknown",null,null,null,new z("operation-not-supported-in-this-environment"));aN(y)&&s.s(E)})}):z$(s)}).o(function(){z$(s)})}function sN(s,u){Zs(s.h,function(p){return p==u})}WE.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=q$(this.D,this.v,this.m,null,this.J),this.i={}},WE.prototype.s=function(s){if(!s)throw new z("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),s&&s.getUid()&&this.i.hasOwnProperty(s.getUid()))return!1;for(var u=!1,p=0;p<this.h.length;p++){var y=this.h[p];if(y.Gb(s.c,s.b)){(u=this.c[s.c])&&(u.h(s,y),s&&(s.f||s.b)&&(this.i[s.getUid()]=!0,this.u=Date.now())),u=!0;break}}return X$(this.b),u};var qde=new ml(2e3,1e4),Gde=new ml(3e4,6e4);function W$(s,u,p,y,E,T,M){return s.a.Nb(u,p,y,function(){s.f||(s.f=!0,s.a.Ea(s.l))},function(){s.reset()},E,T,M)}function aN(s){return!(!s||"auth/cordova-not-ready"!=s.code)}function K$(s,u,p,y,E){var T;return function Hde(s){return s.b.set(iN,"pending",s.a)}(s.g).then(function(){return s.a.Ob(u,p,y,E).o(function(M){if(aN(M))throw new z("operation-not-supported-in-this-environment");return T=M,oN(s.g).then(function(){throw T})}).then(function(){return s.a.ac()?new Wt(function(){}):oN(s.g).then(function(){return s.ra()}).then(function(){}).o(function(){})})})}function Q$(s,u,p,y,E){return s.a.Pb(y,function(T){u.na(p,null,T,E)},qde.get())}WE.prototype.ra=function(){return this.b.ra()};var uN={};function Y$(s,u,p){return s=s+":"+u,p&&(s=s+":"+p.url),s}function cN(s,u,p,y){var E=Y$(u,p,y);return uN[E]||(uN[E]=new WE(s,u,p,y)),uN[E]}function QE(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function X$(s){s.g||(s.g=!0,sh(s,!1,null,null))}function YE(s){s.g&&!s.i&&sh(s,!1,null,null)}function J$(s,u){if(s.b=function(){return ot(u)},s.f.length)for(var p=0;p<s.f.length;p++)s.f[p](u)}function sh(s,u,p,y){u?y?function Wde(s,u){if(s.b=function(){return $n(u)},s.c.length)for(var p=0;p<s.c.length;p++)s.c[p](u)}(s,y):J$(s,p):J$(s,{user:null}),s.f=[],s.c=[]}function Z$(){}function eq(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(s){this.jb=s},enumerable:!1})}function lN(s,u){this.a=u,We(this,"verificationId",s)}function fN(s,u,p,y){return new Ku(s).gb(u,p).then(function(E){return new lN(E,y)})}function Yde(s){var u=T6(s);if(!(u&&u.exp&&u.auth_time&&u.iat))throw new z("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");po(this,{token:s,expirationTime:Zv(1e3*u.exp),authTime:Zv(1e3*u.auth_time),issuedAtTime:Zv(1e3*u.iat),signInProvider:u.firebase&&u.firebase.sign_in_provider?u.firebase.sign_in_provider:null,signInSecondFactor:u.firebase&&u.firebase.sign_in_second_factor?u.firebase.sign_in_second_factor:null,claims:u})}function hN(s,u,p){var y=u&&u[nq];if(!y)throw new z("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=s,this.f=hl(u),this.g=p,this.c=new IE(null,y),this.b=[];var E=this;Xn(u[tq]||[],function(T){(T=rR(T))&&E.b.push(T)}),We(this,"auth",this.a),We(this,"session",this.c),We(this,"hints",this.b)}QE.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},QE.prototype.h=function(s,u){if(s){this.reset(),this.g=!0;var p=s.c,y=s.b,E=s.a&&"auth/web-storage-unsupported"==s.a.code,T=s.a&&"auth/operation-not-supported-in-this-environment"==s.a.code;this.i=!(!E&&!T),"unknown"!=p||E||T?s.a?(sh(this,!0,null,s.a),ot()):u.Fa(p,y)?function zde(s,u,p){p=p.Fa(u.c,u.b);var y=u.g,E=u.f,T=u.i,M=u.T(),L=!!u.c.match(/Redirect$/);p(y,E,M,T).then(function(ne){sh(s,L,ne,null)}).o(function(ne){sh(s,L,null,ne)})}(this,s,u):$n(new z("invalid-auth-event")):(sh(this,!1,null,null),ot())}else $n(new z("invalid-auth-event"))},QE.prototype.ra=function(){var s=this;return new Wt(function(u,p){s.b?s.b().then(u,p):(s.f.push(u),s.c.push(p),function Kde(s){var u=new z("timeout");s.a&&s.a.cancel(),s.a=Tp(Gde.get()).then(function(){s.b||(s.g=!0,sh(s,!0,null,u))})}(s))})},Z$.prototype.h=function(s,u){if(s){var p=s.c,y=s.b;s.a?(u.na(s.c,null,s.a,s.b),ot()):u.Fa(p,y)?function Qde(s,u){var p=s.b,y=s.c;u.Fa(y,p)(s.g,s.f,s.T(),s.i).then(function(E){u.na(y,E,null,p)}).o(function(E){u.na(y,null,E,p)})}(s,u):$n(new z("invalid-auth-event"))}else $n(new z("invalid-auth-event"))},lN.prototype.confirm=function(s){return s=B6(this.verificationId,s),this.a(s)};var tq="mfaInfo",nq="mfaPendingCredential";function dN(s,u,p,y){z.call(this,"multi-factor-auth-required",y,u),this.b=new hN(s,u,p),We(this,"resolver",this.b)}function rq(s,u,p){if(s&&V(s.serverResponse)&&"auth/multi-factor-auth-required"===s.code)try{return new dN(u,s.serverResponse,p,s.message)}catch{}return null}function iq(){}function pN(s){We(this,"factorId",s.fa),this.a=s}function oq(s){if(pN.call(this,s),this.a.fa!=Ku.PROVIDER_ID)throw new z("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function jp(s,u){for(var p in Po.call(this,s),u)this[p]=u[p]}function gN(s,u){this.a=s,this.b=[],this.c=he(this.yc,this),Ds(this.a,"userReloaded",this.c);var p=[];u&&u.multiFactor&&u.multiFactor.enrolledFactors&&Xn(u.multiFactor.enrolledFactors,function(y){var E=null,T={};if(y){y.uid&&(T[oR]=y.uid),y.displayName&&(T[f6]=y.displayName),y.enrollmentTime&&(T[iR]=new Date(y.enrollmentTime).toISOString()),y.phoneNumber&&(T[sR]=y.phoneNumber);try{E=new ey(T)}catch{}y=E}else y=null;y&&p.push(y)}),XE(this,p)}function XE(s,u){s.b=u,We(s,"enrolledFactors",u)}function mN(s,u,p){if(this.h=s,this.i=u,this.g=p,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function vN(s,u){s.stop(),s.b=Tp(function epe(s,u){return u?(s.a=s.c,s.g()):(u=s.a,s.a*=2,s.a>s.f&&(s.a=s.f),u)}(s,u)).then(function(){return function Rfe(){var s=d.document,u=null;return XM()||!s?ot():new Wt(function(p){u=function(){XM()&&(s.removeEventListener("visibilitychange",u,!1),p())},s.addEventListener("visibilitychange",u,!1)}).o(function(p){throw s.removeEventListener("visibilitychange",u,!1),p})}()}).then(function(){return s.h()}).then(function(){vN(s,!0)}).o(function(p){s.i(p)&&vN(s,!1)})}function yN(s){this.f=s,this.b=this.a=null,this.c=Date.now()}function sq(s,u){typeof u>"u"&&(u=s.b?(u=s.b).a-u.g:0),s.c=Date.now()+1e3*u}function aq(s,u){s.b=CE(u[ia]||""),s.a=u.refreshToken,sq(s,typeof(u=u.expiresIn)<"u"?Number(u):void 0)}function JE(s,u){this.a=s||null,this.b=u||null,po(this,{lastSignInTime:Zv(u||null),creationTime:Zv(s||null)})}function ipe(s,u,p,y,E,T){po(this,{uid:s,displayName:y||null,photoURL:E||null,email:p||null,phoneNumber:T||null,providerId:u})}function is(s,u,p){this.N=[],this.l=s.apiKey,this.m=s.appName,this.s=s.authDomain||null;var y=Xe.default.SDK_VERSION?Rp(Xe.default.SDK_VERSION):null;this.a=new ra(this.l,jv(Bv),y),(this.u=s.emulatorConfig||null)&&jE(this.a,this.u),this.h=new yN(this.a),IN(this,u[ia]),aq(this.h,u),We(this,"refreshToken",this.h.a),cq(this,p||{}),ho.call(this),this.P=!1,this.s&&Yf()&&(this.b=cN(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function ope(s){return new mN(function(){return s.I(!0)},function(u){return!(!u||"auth/network-request-failed"!=u.code)},function(){var u=s.h.c-Date.now()-3e5;return 0<u?u:0})}(this),this.ba=he(this.ib,this);var E=this;this.za=null,this.Pa=function(T){E.xa(T.h)},this.qa=null,this.Ba=function(T){_N(E,T.c)},this.$=null,this.aa=[],this.Oa=function(T){_y(E,T.f)},this.ja=null,this.S=new gN(this,p),We(this,"multiFactor",this.S)}function _N(s,u){s.u=u,jE(s.a,u),s.b&&(u=s.b,s.b=cN(s.s,s.l,s.m,s.u),s.P&&(sN(u,s),KE(s.b,s)))}function wN(s,u){s.qa&&ns(s.qa,"languageCodeChanged",s.Pa),(s.qa=u)&&Ds(u,"languageCodeChanged",s.Pa)}function bN(s,u){s.$&&ns(s.$,"emulatorConfigChanged",s.Ba),(s.$=u)&&Ds(u,"emulatorConfigChanged",s.Ba)}function _y(s,u){s.aa=u,i$(s.a,Xe.default.SDK_VERSION?Rp(Xe.default.SDK_VERSION,s.aa):null)}function EN(s,u){s.ja&&ns(s.ja,"frameworkChanged",s.Oa),(s.ja=u)&&Ds(u,"frameworkChanged",s.Oa)}function CN(s){try{return Xe.default.app(s.m).auth()}catch{throw new z("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+s.m+"'!")}}function uq(s){s.J||s.D.b||(s.D.start(),ns(s,"tokenChanged",s.ba),Ds(s,"tokenChanged",s.ba))}function DN(s){ns(s,"tokenChanged",s.ba),s.D.stop()}function IN(s,u){s.Aa=u,We(s,"_lat",u)}function ah(s){for(var u=[],p=0;p<s.W.length;p++)u.push(s.W[p](s));return D5(u).then(function(){return s})}function wy(s){s.b&&!s.P&&(s.P=!0,KE(s.b,s))}function cq(s,u){po(s,{uid:u.uid,displayName:u.displayName||null,photoURL:u.photoURL||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,isAnonymous:u.isAnonymous||!1,tenantId:u.tenantId||null,metadata:new JE(u.createdAt,u.lastLoginAt),providerData:[]}),s.a.b=s.tenantId}function lq(){}function TN(s){return ot().then(function(){if(s.J)throw new z("app-deleted")})}function SN(s){return nE(s.providerData,function(u){return u.providerId})}function AN(s,u){u&&(fq(s,u.providerId),s.providerData.push(u))}function fq(s,u){Zs(s.providerData,function(p){return p.providerId==u})}function _l(s,u,p){("uid"!=u||p)&&s.hasOwnProperty(u)&&We(s,u,p)}function ZE(s,u){s!=u&&(po(s,{uid:u.uid,displayName:u.displayName,photoURL:u.photoURL,email:u.email,emailVerified:u.emailVerified,phoneNumber:u.phoneNumber,isAnonymous:u.isAnonymous,tenantId:u.tenantId,providerData:[]}),We(s,"metadata",u.metadata?function rpe(s){return new JE(s.a,s.b)}(u.metadata):new JE),Xn(u.providerData,function(p){AN(s,p)}),function tpe(s,u){s.b=u.b,s.a=u.a,s.c=u.c}(s.h,u.h),We(s,"refreshToken",s.h.a),XE(s.S,u.S.b))}function MN(s){return s.I().then(function(u){var p=s.isAnonymous;return function ape(s,u){return Xt(s.a,Hhe,{idToken:u}).then(he(s.Kc,s))}(s,u).then(function(){return p||_l(s,"isAnonymous",!1),u})})}function za(s,u){u[ia]&&s.Aa!=u[ia]&&(aq(s.h,u),s.dispatchEvent(new jp("tokenChanged")),IN(s,u[ia]),_l(s,"refreshToken",s.h.a))}function eC(s,u){return MN(s).then(function(){if(Gu(SN(s),u))return ah(s).then(function(){throw new z("provider-already-linked")})})}function by(s,u,p){return qa({user:s,credential:vR(u),additionalUserInfo:u=A6(u),operationType:p})}function hq(s,u){return za(s,u),s.reload().then(function(){return s})}function dq(s,u,p,y,E){if(!Yf())return $n(new z("operation-not-supported-in-this-environment"));if(s.i&&!E)return $n(s.i);var T=fR(p.providerId),M=Xf(s.uid+":::"),L=null;(!Xv()||KM())&&s.s&&p.isOAuthProvider&&(L=py(s.s,s.l,s.m,u,p,null,M,Xe.default.SDK_VERSION||null,null,null,s.tenantId,s.u));var ne=n6(L,T&&T.va,T&&T.ua);return y=y().then(function(){if(gq(s),!E)return s.I().then(function(){})}).then(function(){return W$(s.b,ne,u,p,M,!!L,s.tenantId)}).then(function(){return new Wt(function(de,Et){s.na(u,null,new z("cancelled-popup-request"),s.g||null),s.f=de,s.C=Et,s.g=M,s.c=Q$(s.b,s,u,ne,M)})}).then(function(de){return ne&&Qf(ne),de?qa(de):null}).o(function(de){throw ne&&Qf(ne),de}),Yr(s,y,E)}function pq(s,u,p,y,E){if(!Yf())return $n(new z("operation-not-supported-in-this-environment"));if(s.i&&!E)return $n(s.i);var T=null,M=Xf(s.uid+":::");return y=y().then(function(){if(gq(s),!E)return s.I().then(function(){})}).then(function(){return s.ga=M,ah(s)}).then(function(L){return s.ha&&(L=(L=s.ha).b.set(RN,s.w(),L.a)),L}).then(function(){return K$(s.b,u,p,M,s.tenantId)}).o(function(L){if(T=L,s.ha)return vq(s.ha);throw T}).then(function(){if(T)throw T}),Yr(s,y,E)}function gq(s){if(!s.b||!s.P)throw new z(s.b&&!s.P?"internal-error":"auth-domain-config-required")}function Yr(s,u,p){var y=function cpe(s,u,p){return s.i&&!p?(u.cancel(),$n(s.i)):u.o(function(y){throw!y||"auth/user-disabled"!=y.code&&"auth/user-token-expired"!=y.code||(s.i||s.dispatchEvent(new jp("userInvalidated")),s.i=y),y})}(s,u,p);return s.N.push(y),y.oa(function(){rE(s.N,y)}),y.o(function(E){var T=null;throw E&&"auth/multi-factor-auth-required"===E.code&&(T=rq(E.w(),CN(s),he(s.jc,s))),T||E})}function mq(s){if(!s.apiKey)return null;var u={apiKey:s.apiKey,authDomain:s.authDomain,appName:s.appName,emulatorConfig:s.emulatorConfig},p={};if(!s.stsTokenManager||!s.stsTokenManager.accessToken)return null;p[ia]=s.stsTokenManager.accessToken,p.refreshToken=s.stsTokenManager.refreshToken||null;var y=s.stsTokenManager.expirationTime;y&&(p.expiresIn=(y-Date.now())/1e3);var E=new is(u,p,s);return s.providerData&&Xn(s.providerData,function(T){T&&AN(E,qa(T))}),s.redirectEventId&&(E.ga=s.redirectEventId),E}function hpe(s){this.a=s,this.b=yy()}hN.prototype.Rc=function(s){var u=this;return s.tb(this.a.a,this.c).then(function(p){var y=hl(u.f);return delete y[tq],delete y[nq],xo(y,p),u.g(y)})},Je(dN,z),iq.prototype.tb=function(s,u,p){return u.type==ry?function Xde(s,u,p,y){return p.Ha().then(function(E){return E={idToken:E},typeof y<"u"&&(E.displayName=y),xo(E,{phoneVerificationInfo:iy(s.a)}),Xt(u,jhe,E)})}(this,s,u,p):function Jde(s,u,p){return p.Ha().then(function(y){return xo(y={mfaPendingCredential:y},{phoneVerificationInfo:iy(s.a)}),Xt(u,Bhe,y)})}(this,s,u)},Je(pN,iq),Je(oq,pN),Je(jp,Po),(e=gN.prototype).yc=function(s){XE(this,function Zde(s){var u=[];return Xn(s.mfaInfo||[],function(p){(p=rR(p))&&u.push(p)}),u}(s.hd))},e.Sb=function(){return this.a.I().then(function(s){return new IE(s,null)})},e.fc=function(s,u){var p=this,y=this.a.a;return this.Sb().then(function(E){return s.tb(y,E,u)}).then(function(E){return za(p.a,E),p.a.reload()})},e.bd=function(s){var u=this,p="string"==typeof s?s:s.uid,y=this.a.a;return this.a.I().then(function(E){return Xt(y,ade,{idToken:E,mfaEnrollmentId:p})}).then(function(E){var T=Rle(u.b,function(M){return M.uid!=p});return XE(u,T),za(u.a,E),u.a.reload().o(function(M){if("auth/user-token-expired"!=M.code)throw M})})},e.w=function(){return{multiFactor:{enrolledFactors:nE(this.b,function(s){return s.w()})}}},mN.prototype.start=function(){this.a=this.c,vN(this,!0)},mN.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},yN.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},yN.prototype.getToken=function(s){return s=!!s,this.b&&!this.a?$n(new z("user-token-expired")):s||!this.b||Date.now()>this.c-3e4?this.a?function npe(s,u){return function Dhe(s,u){return new Wt(function(p,y){"refresh_token"==u.grant_type&&u.refresh_token||"authorization_code"==u.grant_type&&u.code?o$(s,s.l+"?key="+encodeURIComponent(s.c),function(E){E?E.error?y(BR(E)):E.access_token&&E.refresh_token?p(E):y(new z("internal-error")):y(new z("network-request-failed"))},"POST",W5(u).toString(),s.g,s.m.get()):y(new z("internal-error"))})}(s.f,u).then(function(p){return s.b=CE(p.access_token),s.a=p.refresh_token,sq(s,p.expires_in),{accessToken:s.b.toString(),refreshToken:s.a}}).o(function(p){throw"auth/user-token-expired"==p.code&&(s.a=null),p})}(this,{grant_type:"refresh_token",refresh_token:this.a}):ot(null):ot({accessToken:this.b.toString(),refreshToken:this.a})},JE.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},Je(is,ho),is.prototype.xa=function(s){this.za=s,r$(this.a,s)},is.prototype.la=function(){return this.za},is.prototype.Ga=function(){return Hf(this.aa)},is.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},We(is.prototype,"providerId","firebase"),(e=is.prototype).reload=function(){var s=this;return Yr(this,TN(this).then(function(){return MN(s).then(function(){return ah(s)}).then(lq)}))},e.oc=function(s){return this.I(s).then(function(u){return new Yde(u)})},e.I=function(s){var u=this;return Yr(this,TN(this).then(function(){return u.h.getToken(s)}).then(function(p){if(!p)throw new z("internal-error");return p.accessToken!=u.Aa&&(IN(u,p.accessToken),u.dispatchEvent(new jp("tokenChanged"))),_l(u,"refreshToken",p.refreshToken),p.accessToken}))},e.Kc=function(s){if(!(s=s.users)||!s.length)throw new z("internal-error");cq(this,{uid:(s=s[0]).localId,displayName:s.displayName,photoURL:s.photoUrl,email:s.email,emailVerified:!!s.emailVerified,phoneNumber:s.phoneNumber,lastLoginAt:s.lastLoginAt,createdAt:s.createdAt,tenantId:s.tenantId});for(var u=function upe(s){return(s=s.providerUserInfo)&&s.length?nE(s,function(u){return new ipe(u.rawId,u.providerId,u.email,u.displayName,u.photoUrl,u.phoneNumber)}):[]}(s),p=0;p<u.length;p++)AN(this,u[p]);_l(this,"isAnonymous",!(this.email&&s.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new jp("userReloaded",{hd:s}))},e.Lc=function(s){return JM("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(s)},e.ub=function(s){var u=this,p=null;return Yr(this,s.c(this.a,this.uid).then(function(y){return za(u,y),p=by(u,y,"reauthenticate"),u.i=null,u.reload()}).then(function(){return p}),!0)},e.Cc=function(s){return JM("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(s)},e.rb=function(s){var u=this,p=null;return Yr(this,eC(this,s.providerId).then(function(){return u.I()}).then(function(y){return s.b(u.a,y)}).then(function(y){return p=by(u,y,"link"),hq(u,y)}).then(function(){return p}))},e.Dc=function(s,u){var p=this;return Yr(this,eC(this,"phone").then(function(){return fN(CN(p),s,u,he(p.rb,p))}))},e.Mc=function(s,u){var p=this;return Yr(this,ot().then(function(){return fN(CN(p),s,u,he(p.ub,p))}),!0)},e.Cb=function(s){var u=this;return Yr(this,this.I().then(function(p){return u.a.Cb(p,s)}).then(function(p){return za(u,p),u.reload()}))},e.ed=function(s){var u=this;return Yr(this,this.I().then(function(p){return s.b(u.a,p)}).then(function(p){return za(u,p),u.reload()}))},e.Db=function(s){var u=this;return Yr(this,this.I().then(function(p){return u.a.Db(p,s)}).then(function(p){return za(u,p),u.reload()}))},e.Eb=function(s){if(void 0===s.displayName&&void 0===s.photoURL)return TN(this);var u=this;return Yr(this,this.I().then(function(p){return u.a.Eb(p,{displayName:s.displayName,photoUrl:s.photoURL})}).then(function(p){return za(u,p),_l(u,"displayName",p.displayName||null),_l(u,"photoURL",p.photoUrl||null),Xn(u.providerData,function(y){"password"===y.providerId&&(We(y,"displayName",u.displayName),We(y,"photoURL",u.photoURL))}),ah(u)}).then(lq))},e.cd=function(s){var u=this;return Yr(this,MN(this).then(function(p){return Gu(SN(u),s)?function Nhe(s,u,p){return Xt(s,Lhe,{idToken:u,deleteProvider:p})}(u.a,p,[s]).then(function(y){var E={};return Xn(y.providerUserInfo||[],function(T){E[T.providerId]=!0}),Xn(SN(u),function(T){E[T]||fq(u,T)}),E[Ku.PROVIDER_ID]||We(u,"phoneNumber",null),ah(u)}):ah(u).then(function(){throw new z("no-such-provider")})}))},e.delete=function(){var s=this;return Yr(this,this.I().then(function(u){return Xt(s.a,Fhe,{idToken:u})}).then(function(){s.dispatchEvent(new jp("userDeleted"))})).then(function(){for(var u=0;u<s.N.length;u++)s.N[u].cancel("app-deleted");wN(s,null),bN(s,null),EN(s,null),s.N=[],s.J=!0,DN(s),We(s,"refreshToken",null),s.b&&sN(s.b,s)})},e.Gb=function(s,u){return!!("linkViaPopup"==s&&(this.g||null)==u&&this.f||"reauthViaPopup"==s&&(this.g||null)==u&&this.f||"linkViaRedirect"==s&&(this.ga||null)==u||"reauthViaRedirect"==s&&(this.ga||null)==u)},e.na=function(s,u,p,y){"linkViaPopup"!=s&&"reauthViaPopup"!=s||y!=(this.g||null)||(p&&this.C?this.C(p):u&&!p&&this.f&&this.f(u),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(s,u){return"linkViaPopup"==s&&u==(this.g||null)?he(this.Lb,this):"reauthViaPopup"==s&&u==(this.g||null)?he(this.Mb,this):"linkViaRedirect"==s&&(this.ga||null)==u?he(this.Lb,this):"reauthViaRedirect"==s&&(this.ga||null)==u?he(this.Mb,this):null},e.Ec=function(s){var u=this;return dq(this,"linkViaPopup",s,function(){return eC(u,s.providerId).then(function(){return ah(u)})},!1)},e.Nc=function(s){return dq(this,"reauthViaPopup",s,function(){return ot()},!0)},e.Fc=function(s){var u=this;return pq(this,"linkViaRedirect",s,function(){return eC(u,s.providerId)},!1)},e.Oc=function(s){return pq(this,"reauthViaRedirect",s,function(){return ot()},!0)},e.Lb=function(s,u,p,y){var E=this;this.c&&(this.c.cancel(),this.c=null);var T=null;return Yr(this,this.I().then(function(M){return VR(E.a,{requestUri:s,postBody:y,sessionId:u,idToken:M})}).then(function(M){return T=by(E,M,"link"),hq(E,M)}).then(function(){return T}))},e.Mb=function(s,u,p,y){var E=this;this.c&&(this.c.cancel(),this.c=null);var T=null;return Yr(this,ot().then(function(){return Op(UR(E.a,{requestUri:s,sessionId:u,postBody:y,tenantId:p}),E.uid)}).then(function(L){return T=by(E,L,"reauthenticate"),za(E,L),E.i=null,E.reload()}).then(function(){return T}),!0)},e.vb=function(s){var u=this,p=null;return Yr(this,this.I().then(function(y){return p=y,typeof s>"u"||$f(s)?{}:bE(new wE(s))}).then(function(y){return u.a.vb(p,y)}).then(function(y){if(u.email!=y)return u.reload()}).then(function(){}))},e.Fb=function(s,u){var p=this,y=null;return Yr(this,this.I().then(function(E){return y=E,typeof u>"u"||$f(u)?{}:bE(new wE(u))}).then(function(E){return p.a.Fb(y,s,E)}).then(function(E){if(p.email!=E)return p.reload()}).then(function(){}))},e.jc=function(s){var u=null,p=this;return Yr(this,s=Op(ot(s),p.uid).then(function(y){return u=by(p,y,"reauthenticate"),za(p,y),p.i=null,p.reload()}).then(function(){return u}),!0)},e.toJSON=function(){return this.w()},e.w=function(){var s={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&xo(s,this.metadata.w()),Xn(this.providerData,function(u){s.providerData.push(function xfe(s){var p,u={};for(p in s)s.hasOwnProperty(p)&&(u[p]=s[p]);return u}(u))}),xo(s,this.S.w()),s};var RN={name:"redirectUser",F:"session"};function vq(s){return Up(s.b,RN,s.a)}function NN(s){this.a=s,this.b=yy(),this.c=null,this.f=function ppe(s){var u=Wa("local"),p=Wa("session"),y=Wa("none");return function Mde(s,u,p){var y=Vp(u,p),E=oh(s,u.F);return s.get(u,p).then(function(T){var M=null;try{M=kp(d.localStorage.getItem(y))}catch{}if(M&&!T)return d.localStorage.removeItem(y),s.set(u,M,p);M&&T&&"localStorage"!=E.type&&d.localStorage.removeItem(y)})}(s.b,u,s.a).then(function(){return s.b.get(p,s.a)}).then(function(E){return E?p:s.b.get(y,s.a).then(function(T){return T?y:s.b.get(u,s.a).then(function(M){return M?u:s.b.get(xN,s.a).then(function(L){return L?Wa(L):u})})})}).then(function(E){return s.c=E,kN(s,E.F)}).o(function(){s.c||(s.c=u)})}(this),this.b.addListener(Wa("local"),this.a,he(this.g,this))}function kN(s,u){var y,p=[];for(y in Lp)Lp[y]!==u&&p.push(Up(s.b,Wa(Lp[y]),s.a));return p.push(Up(s.b,xN,s.a)),function rfe(s){return new Wt(function(u,p){var y=s.length,E=[];if(y)for(var T=function(de,Et){y--,E[de]=Et,0==y&&u(E)},M=function(de){p(de)},L=0;L<s.length;L++)C5(s[L],pn(T,L),M);else u(E)})}(p)}NN.prototype.g=function(){var s=this,u=Wa("local");Bp(this,function(){return ot().then(function(){return s.c&&"local"!=s.c.F?s.b.get(u,s.a):null}).then(function(p){if(p)return kN(s,"local").then(function(){s.c=u})})})};var xN={name:"persistence",F:"session"};function Wa(s){return{name:"authUser",F:s}}function yq(s,u){return Bp(s,function(){return s.b.set(s.c,u.w(),s.a)})}function _q(s){return Bp(s,function(){return Up(s.b,s.c,s.a)})}function wq(s,u,p){return Bp(s,function(){return s.b.get(s.c,s.a).then(function(y){return y&&u&&(y.authDomain=u),y&&p&&(y.emulatorConfig=p),mq(y||{})})})}function Bp(s,u){return s.f=s.f.then(u,u),s.f}function oa(s){if(this.l=!1,We(this,"settings",new eq),We(this,"app",s),!An(this).options||!An(this).options.apiKey)throw new z("invalid-api-key");s=Xe.default.SDK_VERSION?Rp(Xe.default.SDK_VERSION):null,this.a=new ra(An(this).options&&An(this).options.apiKey,jv(Bv),s),this.P=[],this.s=[],this.N=[],this.Pa=Xe.default.INTERNAL.createSubscribe(he(this.zc,this)),this.W=void 0,this.ib=Xe.default.INTERNAL.createSubscribe(he(this.Ac,this)),Hp(this,null),this.i=new NN(An(this).options.apiKey+":"+An(this).name),this.D=new hpe(An(this).options.apiKey+":"+An(this).name),this.$=sr(this,function bpe(s){var u=An(s).options.authDomain,p=function wpe(s){var u=function dpe(s,u){return s.b.get(RN,s.a).then(function(p){return p&&u&&(p.authDomain=u),mq(p||{})})}(s.D,An(s).options.authDomain).then(function(p){return(s.m=p)&&(p.ha=s.D),vq(s.D)});return sr(s,u)}(s).then(function(){return wq(s.i,u,s.R)}).then(function(y){return y?(y.ha=s.D,s.m&&(s.m.ga||null)==(y.ga||null)?y:y.reload().then(function(){return yq(s.i,y).then(function(){return y})}).o(function(E){return"auth/network-request-failed"==E.code?y:_q(s.i)})):null}).then(function(y){Hp(s,y||null)});return sr(s,p)}(this)),this.h=sr(this,function Epe(s){return s.$.then(function(){return Dq(s)}).o(function(){}).then(function(){if(!s.l)return s.ja()}).o(function(){}).then(function(){if(!s.l){s.ba=!0;var u=s.i;u.b.addListener(Wa("local"),u.a,s.ja)}})}(this)),this.ba=!1,this.ja=he(this.Zc,this),this.Ba=he(this.da,this),this.qa=he(this.mc,this),this.za=he(this.wc,this),this.Aa=he(this.xc,this),this.b=null,function ype(s){var u=An(s).options.authDomain,p=An(s).options.apiKey;u&&Yf()&&(s.Oa=s.$.then(function(){if(!s.l){if(s.b=cN(u,p,An(s).name,s.R),KE(s.b,s),Vt(s)&&wy(Vt(s)),s.m){wy(s.m);var y=s.m;y.xa(s.la()),wN(y,s),_y(y=s.m,s.J),EN(y,s),_N(y=s.m,s.R),bN(y,s),s.m=null}return s.b}}))}(this),this.INTERNAL={},this.INTERNAL.delete=he(this.delete,this),this.INTERNAL.logFramework=he(this.Gc,this),this.u=0,ho.call(this),function vpe(s){Object.defineProperty(s,"lc",{get:function(){return this.la()},set:function(u){this.xa(u)},enumerable:!1}),s.aa=null,Object.defineProperty(s,"ti",{get:function(){return this.T()},set:function(u){this.zb(u)},enumerable:!1}),s.S=null,Object.defineProperty(s,"emulatorConfig",{get:function(){if(this.R){var u=Fo(this.R.url);u=qa({protocol:u.c,host:u.a,port:u.g,options:qa({disableWarnings:this.R.ec})})}else u=null;return u},enumerable:!1})}(this),this.J=[],this.R=null}function bq(s){Po.call(this,"languageCodeChanged"),this.h=s}function Eq(s){Po.call(this,"emulatorConfigChanged"),this.c=s}function Cq(s){Po.call(this,"frameworkChanged"),this.f=s}function ON(s){return s.Oa||$n(new z("auth-domain-config-required"))}function Dq(s){if(!Yf())return $n(new z("operation-not-supported-in-this-environment"));var u=ON(s).then(function(){return s.b.ra()}).then(function(p){return p?qa(p):null});return sr(s,u)}function Hp(s,u){Vt(s)&&(function spe(s,u){Zs(s.W,function(p){return p==u})}(Vt(s),s.Ba),ns(Vt(s),"tokenChanged",s.qa),ns(Vt(s),"userDeleted",s.za),ns(Vt(s),"userInvalidated",s.Aa),DN(Vt(s))),u&&(u.W.push(s.Ba),Ds(u,"tokenChanged",s.qa),Ds(u,"userDeleted",s.za),Ds(u,"userInvalidated",s.Aa),0<s.u&&uq(u)),We(s,"currentUser",u),u&&(u.xa(s.la()),wN(u,s),_y(u,s.J),EN(u,s),_N(u,s.R),bN(u,s))}function uh(s,u){var p=null,y=null;return sr(s,u.then(function(E){return p=vR(E),y=A6(E),function _pe(s,u){var p={};return p.apiKey=An(s).options.apiKey,p.authDomain=An(s).options.authDomain,p.appName=An(s).name,s.R&&(p.emulatorConfig=s.R),s.$.then(function(){return function lpe(s,u,p,y){var E=new is(s,u);return p&&(E.ha=p),y&&_y(E,y),E.reload().then(function(){return E})}(p,u,s.D,s.Ga())}).then(function(y){return Vt(s)&&y.uid==Vt(s).uid?(ZE(Vt(s),y),s.da(y)):(Hp(s,y),wy(y),s.da(y))}).then(function(){Ey(s)})}(s,E)},function(E){var T=null;throw E&&"auth/multi-factor-auth-required"===E.code&&(T=rq(E.w(),s,he(s.kc,s))),T||E}).then(function(){return qa({user:Vt(s),credential:p,additionalUserInfo:y,operationType:"signIn"})}))}function An(s){return s.app}function Vt(s){return s.currentUser}function tC(s){return Vt(s)&&Vt(s)._lat||null}function Ey(s){if(s.ba){for(var u=0;u<s.s.length;u++)s.s[u]&&s.s[u](tC(s));if(s.W!==s.getUid()&&s.N.length)for(s.W=s.getUid(),u=0;u<s.N.length;u++)s.N[u]&&s.N[u](tC(s))}}function sr(s,u){return s.P.push(u),u.oa(function(){rE(s.P,u)}),u}function Cy(){}function $p(){this.a={},this.b=1e12}NN.prototype.yb=function(s){var u=null,p=this;return function Ade(s){var u=new z("invalid-persistence-type"),p=new z("unsupported-persistence-type");e:{for(y in Lp)if(Lp[y]==s){var y=!0;break e}y=!1}if(!y||"string"!=typeof s)throw u;switch($a()){case"ReactNative":if("session"===s)throw p;break;case"Node":if("none"!==s)throw p;break;case"Worker":if("session"===s||!WR()&&"none"!==s)throw p;break;default:if(!YM()&&"none"!==s)throw p}}(s),Bp(this,function(){return s!=p.c.F?p.b.get(p.c,p.a).then(function(y){return u=y,kN(p,s)}).then(function(){if(p.c=Wa(s),u)return p.b.set(p.c,u,p.a)}):ot()})},Je(oa,ho),Je(bq,Po),Je(Eq,Po),Je(Cq,Po),(e=oa.prototype).yb=function(s){return sr(this,s=this.i.yb(s))},e.xa=function(s){this.aa===s||this.l||(this.aa=s,r$(this.a,this.aa),this.dispatchEvent(new bq(this.la())))},e.la=function(){return this.aa},e.fd=function(){var s=d.navigator;this.xa(s&&(s.languages&&s.languages[0]||s.language||s.userLanguage)||null)},e.gd=function(s,u){if(!this.R){if(!/^https?:\/\//.test(s))throw new z("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function mpe(s){typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),d.document&&!s&&vE().then(function(){var u=d.document.createElement("div");u.innerText="Running in emulator mode. Do not use with production credentials.",u.style.position="fixed",u.style.width="100%",u.style.backgroundColor="#ffffff",u.style.border=".1em solid #000000",u.style.color="#b50000",u.style.bottom="0px",u.style.left="0px",u.style.margin="0px",u.style.zIndex=1e4,u.style.textAlign="center",u.classList.add("firebase-emulator-warning"),d.document.body.appendChild(u)})})(u=!!u&&!!u.disableWarnings),this.R={url:s,ec:u},this.settings.jb=!0,jE(this.a,this.R),this.dispatchEvent(new Eq(this.R))}},e.Gc=function(s){this.J.push(s),i$(this.a,Xe.default.SDK_VERSION?Rp(Xe.default.SDK_VERSION,this.J):null),this.dispatchEvent(new Cq(this.J))},e.Ga=function(){return Hf(this.J)},e.zb=function(s){this.S===s||this.l||(this.S=s,this.a.b=this.S)},e.T=function(){return this.S},e.toJSON=function(){return{apiKey:An(this).options.apiKey,authDomain:An(this).options.authDomain,appName:An(this).name,currentUser:Vt(this)&&Vt(this).w()}},e.Gb=function(s,u){switch(s){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==u&&!!this.f;default:return!1}},e.na=function(s,u,p,y){"signInViaPopup"==s&&this.g==y&&(p&&this.C?this.C(p):u&&!p&&this.f&&this.f(u),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(s,u){return"signInViaRedirect"==s||"signInViaPopup"==s&&this.g==u&&this.f?he(this.ic,this):null},e.ic=function(s,u,p,y){var E=this,T={requestUri:s,postBody:y,sessionId:u,tenantId:p};return this.c&&(this.c.cancel(),this.c=null),E.$.then(function(){return uh(E,LR(E.a,T))})},e.Xc=function(s){if(!Yf())return $n(new z("operation-not-supported-in-this-environment"));var u=this,p=fR(s.providerId),y=Xf(),E=null;(!Xv()||KM())&&An(this).options.authDomain&&s.isOAuthProvider&&(E=py(An(this).options.authDomain,An(this).options.apiKey,An(this).name,"signInViaPopup",s,null,y,Xe.default.SDK_VERSION||null,null,null,this.T(),this.R));var T=n6(E,p&&p.va,p&&p.ua);return sr(this,p=ON(this).then(function(M){return W$(M,T,"signInViaPopup",s,y,!!E,u.T())}).then(function(){return new Wt(function(M,L){u.na("signInViaPopup",null,new z("cancelled-popup-request"),u.g),u.f=M,u.C=L,u.g=y,u.c=Q$(u.b,u,"signInViaPopup",T,y)})}).then(function(M){return T&&Qf(T),M?qa(M):null}).o(function(M){throw T&&Qf(T),M}))},e.Yc=function(s){if(!Yf())return $n(new z("operation-not-supported-in-this-environment"));var u=this,p=ON(this).then(function(){return function gpe(s){return Bp(s,function(){return s.b.set(xN,s.c.F,s.a)})}(u.i)}).then(function(){return K$(u.b,"signInViaRedirect",s,void 0,u.T())});return sr(this,p)},e.ra=function(){var s=this;return Dq(this).then(function(u){return s.b&&YE(s.b.b),u}).o(function(u){throw s.b&&YE(s.b.b),u})},e.dd=function(s){if(!s)return $n(new z("null-user"));if(this.S!=s.tenantId)return $n(new z("tenant-id-mismatch"));var u=this,p={};p.apiKey=An(this).options.apiKey,p.authDomain=An(this).options.authDomain,p.appName=An(this).name;var y=function fpe(s,u,p,y){var E=s.h,T={};return T[ia]=E.b&&E.b.toString(),T.refreshToken=E.a,u=new is(u||{apiKey:s.l,authDomain:s.s,appName:s.m},T),p&&(u.ha=p),y&&_y(u,y),ZE(u,s),u}(s,p,u.D,u.Ga());return sr(this,this.h.then(function(){if(An(u).options.apiKey!=s.l)return y.reload()}).then(function(){return Vt(u)&&s.uid==Vt(u).uid?(ZE(Vt(u),s),u.da(s)):(Hp(u,y),wy(y),u.da(y))}).then(function(){Ey(u)}))},e.Bb=function(){var s=this;return sr(this,this.h.then(function(){return s.b&&YE(s.b.b),Vt(s)?(Hp(s,null),_q(s.i).then(function(){Ey(s)})):ot()}))},e.Zc=function(){var s=this;return wq(this.i,An(this).options.authDomain).then(function(u){if(!s.l){var p;if(p=Vt(s)&&u){p=Vt(s).uid;var y=u.uid;p=null!=p&&""!==p&&null!=y&&""!==y&&p==y}if(p)return ZE(Vt(s),u),Vt(s).I();(Vt(s)||u)&&(Hp(s,u),u&&(wy(u),u.ha=s.D),s.b&&KE(s.b,s),Ey(s))}})},e.da=function(s){return yq(this.i,s)},e.mc=function(){Ey(this),this.da(Vt(this))},e.wc=function(){this.Bb()},e.xc=function(){this.Bb()},e.kc=function(s){var u=this;return this.h.then(function(){return uh(u,ot(s))})},e.zc=function(s){var u=this;this.addAuthTokenListener(function(){s.next(Vt(u))})},e.Ac=function(s){var u=this;!function Cpe(s,u){s.N.push(u),sr(s,s.h.then(function(){!s.l&&Gu(s.N,u)&&s.W!==s.getUid()&&(s.W=s.getUid(),u(tC(s)))}))}(this,function(){s.next(Vt(u))})},e.Ic=function(s,u,p){var y=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof s?s(Vt(y)):"function"==typeof s.next&&s.next(Vt(y))}),this.Pa(s,u,p)},e.Hc=function(s,u,p){var y=this;return this.ba&&Promise.resolve().then(function(){y.W=y.getUid(),"function"==typeof s?s(Vt(y)):"function"==typeof s.next&&s.next(Vt(y))}),this.ib(s,u,p)},e.nc=function(s){var u=this;return sr(this,this.h.then(function(){return Vt(u)?Vt(u).I(s).then(function(y){return{accessToken:y}}):null}))},e.Tc=function(s){var u=this;return this.h.then(function(){return uh(u,Xt(u.a,rde,{token:s}))}).then(function(p){var y=p.user;return _l(y,"isAnonymous",!1),u.da(y),p})},e.Uc=function(s,u){var p=this;return this.h.then(function(){return uh(p,Xt(p.a,d$,{email:s,password:u}))})},e.dc=function(s,u){var p=this;return this.h.then(function(){return uh(p,Xt(p.a,Ohe,{email:s,password:u}))})},e.ab=function(s){var u=this;return this.h.then(function(){return uh(u,s.ka(u.a))})},e.Sc=function(s){return JM("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(s)},e.Ab=function(){var s=this;return this.h.then(function(){var u=Vt(s);if(u&&u.isAnonymous){var p=qa({providerId:null,isNewUser:!1});return qa({user:u,credential:null,additionalUserInfo:p,operationType:"signIn"})}return uh(s,s.a.Ab()).then(function(y){var E=y.user;return _l(E,"isAnonymous",!0),s.da(E),y})})},e.getUid=function(){return Vt(this)&&Vt(this).uid||null},e.cc=function(s){this.addAuthTokenListener(s),this.u++,0<this.u&&Vt(this)&&uq(Vt(this))},e.Pc=function(s){var u=this;Xn(this.s,function(p){p==s&&u.u--}),0>this.u&&(this.u=0),0==this.u&&Vt(this)&&DN(Vt(this)),this.removeAuthTokenListener(s)},e.addAuthTokenListener=function(s){var u=this;this.s.push(s),sr(this,this.h.then(function(){u.l||Gu(u.s,s)&&s(tC(u))}))},e.removeAuthTokenListener=function(s){Zs(this.s,function(u){return u==s})},e.delete=function(){this.l=!0;for(var s=0;s<this.P.length;s++)this.P[s].cancel("app-deleted");return this.P=[],this.i&&(s=this.i).b.removeListener(Wa("local"),s.a,this.ja),this.b&&(sN(this.b,this),YE(this.b.b)),Promise.resolve()},e.hc=function(s){return sr(this,function Ihe(s,u){return Xt(s,Phe,{identifier:u,continueUri:yE()?Yv():"http://localhost"}).then(function(p){return p.signinMethods||[]})}(this.a,s))},e.Bc=function(s){return!!mR(s)},e.xb=function(s,u){var p=this;return sr(this,ot().then(function(){var y=new wE(u);if(!y.c)throw new z("argument-error",cR+" must be true when sending sign in link to email");return bE(y)}).then(function(y){return p.a.xb(s,y)}).then(function(){}))},e.jd=function(s){return this.Sa(s).then(function(u){return u.data.email})},e.ob=function(s,u){return sr(this,this.a.ob(s,u).then(function(){}))},e.Sa=function(s){return sr(this,this.a.Sa(s).then(function(u){return new Pfe(u)}))},e.kb=function(s){return sr(this,this.a.kb(s).then(function(){}))},e.wb=function(s,u){var p=this;return sr(this,ot().then(function(){return typeof u>"u"||$f(u)?{}:bE(new wE(u))}).then(function(y){return p.a.wb(s,y)}).then(function(){}))},e.Wc=function(s,u){return sr(this,fN(this,s,u,he(this.ab,this)))},e.Vc=function(s,u){var p=this;return sr(this,ot().then(function(){var y=u||Yv(),E=j6(s,y);if(!(y=mR(y)))throw new z("argument-error","Invalid email link!");if(y.tenantId!==p.T())throw new z("tenant-id-mismatch");return p.ab(E)}))},Cy.prototype.render=function(){},Cy.prototype.reset=function(){},Cy.prototype.getResponse=function(){},Cy.prototype.execute=function(){};var PN=null;function FN(s,u){return(u=Iq(u))&&s.a[u]||null}function Iq(s){return(s=typeof s>"u"?1e12:s)?s.toString():null}function nC(s,u){this.g=!1,this.c=u,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=$v(s);var p=this;this.i=function(){p.execute()},this.h?this.execute():Ds(this.f,"click",this.i)}function LN(s){if(s.g)throw Error("reCAPTCHA mock was already deleted!")}function VN(){}function UN(){}$p.prototype.render=function(s,u){return this.a[this.b.toString()]=new nC(s,u),this.b++},$p.prototype.reset=function(s){var u=FN(this,s);s=Iq(s),u&&s&&(u.delete(),delete this.a[s])},$p.prototype.getResponse=function(s){return(s=FN(this,s))?s.getResponse():null},$p.prototype.execute=function(s){(s=FN(this,s))&&s.execute()},nC.prototype.getResponse=function(){return LN(this),this.b},nC.prototype.execute=function(){LN(this);var s=this;this.a||(this.a=setTimeout(function(){s.b=function Mfe(){for(var s=50,u=[];0<s;)u.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),s--;return u.join("")}();var u=s.c.callback,p=s.c["expired-callback"];if(u)try{u(s.b)}catch{}s.a=setTimeout(function(){if(s.a=null,s.b=null,p)try{p()}catch{}s.h&&s.execute()},6e4)},500))},nC.prototype.delete=function(){LN(this),this.g=!0,clearTimeout(this.a),this.a=null,ns(this.f,"click",this.i)},We(VN,"FACTOR_ID","phone"),UN.prototype.g=function(){return PN||(PN=new $p),ot(PN)},UN.prototype.c=function(){};var jN=null;function BN(){this.b=d.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Dpe=new Ba(iE,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ipe=new ml(3e4,6e4);BN.prototype.g=function(s){var u=this;return new Wt(function(p,y){var E=setTimeout(function(){y(new z("network-request-failed"))},Ipe.get());!d.grecaptcha||s!==u.f&&!u.b?(d[u.a]=function(){if(d.grecaptcha){u.f=s;var M=d.grecaptcha.render;d.grecaptcha.render=function(L,ne){return L=M(L,ne),u.b++,L},clearTimeout(E),p(d.grecaptcha)}else clearTimeout(E),y(new z("internal-error"));delete d[u.a]},ot(RR(bM(Dpe,{onload:u.a,hl:s||""}))).o(function(){clearTimeout(E),y(new z("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(E),p(d.grecaptcha))})},BN.prototype.c=function(){this.b--};var HN=null;function $N(s,u,p,y,E,T,M){if(We(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=u,this.g=null,M?(jN||(jN=new UN),M=jN):(HN||(HN=new BN),M=HN),this.m=M,this.a=p||{theme:"light",type:"image"},this.h=[],this.a[Aq])throw new z("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Tpe],!d.document)throw new z("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!$v(u)||!this.i&&$v(u).hasChildNodes())throw new z("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new ra(s,T||null,E||null),this.u=y||function(){return null};var L=this;this.l=[];var ne=this.a[Tq];this.a[Tq]=function(Et){if(Mq(L,Et),"function"==typeof ne)ne(Et);else if("string"==typeof ne){var bn=qn(ne,d);"function"==typeof bn&&bn(Et)}};var de=this.a[Sq];this.a[Sq]=function(){if(Mq(L,null),"function"==typeof de)de();else if("string"==typeof de){var Et=qn(de,d);"function"==typeof Et&&Et()}}}var Tq="callback",Sq="expired-callback",Aq="sitekey",Tpe="size";function Mq(s,u){for(var p=0;p<s.l.length;p++)try{s.l[p](u)}catch{}}function qN(s,u){return s.h.push(u),u.oa(function(){rE(s.h,u)}),u}function rC(s){if(s.J)throw new z("internal-error","RecaptchaVerifier instance has been destroyed.")}function GN(s,u,p){var y=!1;try{this.b=p||Xe.default.app()}catch{throw new z("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new z("invalid-api-key");p=this.b.options.apiKey;var E=this,T=null;try{T=this.b.auth().Ga()}catch{}try{y=this.b.auth().settings.appVerificationDisabledForTesting}catch{}T=Xe.default.SDK_VERSION?Rp(Xe.default.SDK_VERSION,T):null,$N.call(this,p,s,u,function(){try{var M=E.b.auth().la()}catch{M=null}return M},T,jv(Bv),y)}function Rq(s,u,p,y){e:{p=Array.prototype.slice.call(p);for(var E=0,T=!1,M=0;M<u.length;M++)if(u[M].optional)T=!0;else{if(T)throw new z("internal-error","Argument validator encountered a required argument after an optional argument.");E++}if(T=u.length,p.length<E||T<p.length)y="Expected "+(E==T?1==E?"1 argument":E+" arguments":E+"-"+T+" arguments")+" but got "+p.length+".";else{for(E=0;E<p.length;E++)if(T=u[E].optional&&void 0===p[E],!u[E].M(p[E])&&!T){if(u=u[E],0>E||E>=Nq.length)throw new z("internal-error","Argument validator received an unsupported number of arguments.");p=Nq[E],y=(y?"":p+" argument ")+(u.name?'"'+u.name+'" ':"")+"must be "+u.K+".";break e}y=null}}if(y)throw new z("argument-error",s+" failed: "+y)}(e=$N.prototype).Ia=function(){var s=this;return this.f?this.f:this.f=qN(this,ot().then(function(){if(yE()&&!ta())return vE();throw new z("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return s.m.g(s.u())}).then(function(u){return s.g=u,Xt(s.s,Khe,{})}).then(function(u){s.a[Aq]=u.recaptchaSiteKey}).o(function(u){throw s.f=null,u}))},e.render=function(){rC(this);var s=this;return qN(this,this.Ia().then(function(){if(null===s.c){var u=s.v;if(!s.i){var p=$v(u);u=function Zle(s,u,p){var y=arguments,E=document,T=String(y[0]),M=y[1];if(!Jle&&M&&(M.name||M.type)){if(T=["<",T],M.name&&T.push(' name="',EM(M.name),'"'),M.type){T.push(' type="',EM(M.type),'"');var L={};xo(L,M),delete L.type,M=L}T.push(">"),T=T.join("")}return T=uE(E,T),M&&("string"==typeof M?T.className=M:Array.isArray(M)?T.className=M.join(" "):m5(T,M)),2<y.length&&function efe(s,u,p){function y(L){L&&u.appendChild("string"==typeof L?s.createTextNode(L):L)}for(var E=2;E<p.length;E++){var T=p[E];if(!A(T)||V(T)&&0<T.nodeType)y(T);else{e:{if(T&&"number"==typeof T.length){if(V(T)){var M="function"==typeof T.item||"string"==typeof T.item;break e}if(x(T)){M="function"==typeof T.item;break e}}M=!1}Xn(M?Hf(T):T,y)}}}(E,T,y),T}("DIV"),p.appendChild(u)}s.c=s.g.render(u,s.a)}return s.c}))},e.verify=function(){rC(this);var s=this;return qN(this,this.render().then(function(u){return new Wt(function(p){var y=s.g.getResponse(u);if(y)p(y);else{var E=function(T){T&&(function Spe(s,u){Zs(s.l,function(p){return p==u})}(s,E),p(T))};s.l.push(E),s.i&&s.g.execute(s.c)}})}))},e.reset=function(){rC(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){rC(this),this.J=!0,this.m.c();for(var s=0;s<this.h.length;s++)this.h[s].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){s=$v(this.v);for(var u;u=s.firstChild;)s.removeChild(u)}},Je(GN,$N);var Nq="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function qe(s,u){return{name:s||"",K:"a valid string",optional:!!u,M:function(p){return"string"==typeof p}}}function zN(s,u){return{name:s||"",K:"a boolean",optional:!!u,M:function(p){return"boolean"==typeof p}}}function Pr(s,u){return{name:s||"",K:"a valid object",optional:!!u,M:V}}function qp(s,u){return{name:s||"",K:"a function",optional:!!u,M:function(p){return"function"==typeof p}}}function Ka(s,u){return{name:s||"",K:"null",optional:!!u,M:function(p){return null===p}}}function wl(s){return{name:s?s+"Credential":"credential",K:s?"a valid "+s+" credential":"a valid credential",optional:!1,M:function(u){return!!u&&!(!u.ka||s&&u.providerId!==s)}}}function WN(s,u){return V(s)&&"string"==typeof s.type&&s.type===u&&"function"==typeof s.Ha}function xq(s){return V(s)&&"string"==typeof s.uid}function br(s,u,p,y){return{name:p||"",K:s.K+" or "+u.K,optional:!!y,M:function(E){return s.M(E)||u.M(E)}}}function Jn(s,u){for(var p in u){var y=u[p].name;s[y]=Pq(y,s[p],u[p].j)}}function Oq(s,u){for(var p in u){var y=u[p].name;y!==p&&Object.defineProperty(s,y,{get:pn(function(E){return this[E]},p),set:pn(function(E,T,M,L){Rq(E,[M],[L],!0),this[T]=L},y,p,u[p].lb),enumerable:!0})}}function Er(s,u,p,y){s[u]=Pq(u,p,y)}function Pq(s,u,p){function y(){var M=Array.prototype.slice.call(arguments);return Rq(E,p,M),u.apply(this,M)}if(!p)return u;var T,E=function Npe(s){return(s=s.split("."))[s.length-1]}(s);for(T in u)y[T]=u[T];for(T in u.prototype)y.prototype[T]=u.prototype[T];return y}Jn(oa.prototype,{kb:{name:"applyActionCode",j:[qe("code")]},Sa:{name:"checkActionCode",j:[qe("code")]},ob:{name:"confirmPasswordReset",j:[qe("code"),qe("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[qe("email"),qe("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[qe("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[qe("emailLink")]},Hc:{name:"onAuthStateChanged",j:[br(Pr(),qp(),"nextOrObserver"),qp("opt_error",!0),qp("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[br(Pr(),qp(),"nextOrObserver"),qp("opt_error",!0),qp("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[qe("email"),br(Pr("opt_actionCodeSettings",!0),Ka(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[qe("email"),Pr("actionCodeSettings")]},yb:{name:"setPersistence",j:[qe("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[wl()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[wl()]},Tc:{name:"signInWithCustomToken",j:[qe("token")]},Uc:{name:"signInWithEmailAndPassword",j:[qe("email"),qe("password")]},Vc:{name:"signInWithEmailLink",j:[qe("email"),qe("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[qe("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(s){return!(!s||"string"!=typeof s.type||"function"!=typeof s.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(s){return!!(s&&s.providerId&&s.hasOwnProperty&&s.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(s){return!!(s&&s.providerId&&s.hasOwnProperty&&s.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[br({name:"user",K:"an instance of Firebase User",optional:!1,M:function(u){return!!(u&&u instanceof is)}},Ka(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[qe(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[qe("url"),Pr("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[qe("code")]}}),Oq(oa.prototype,{lc:{name:"languageCode",lb:br(qe(),Ka(),"languageCode")},ti:{name:"tenantId",lb:br(qe(),Ka(),"tenantId")}}),(oa.Persistence=Lp).LOCAL="local",oa.Persistence.SESSION="session",oa.Persistence.NONE="none",Jn(is.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[zN("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[zN("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[wl()]},rb:{name:"linkWithCredential",j:[wl()]},Dc:{name:"linkWithPhoneNumber",j:[qe("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(s){return!(!s||"string"!=typeof s.type||"function"!=typeof s.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(s){return!!(s&&s.providerId&&s.hasOwnProperty&&s.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(s){return!!(s&&s.providerId&&s.hasOwnProperty&&s.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[wl()]},ub:{name:"reauthenticateWithCredential",j:[wl()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[qe("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(s){return!(!s||"string"!=typeof s.type||"function"!=typeof s.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(s){return!!(s&&s.providerId&&s.hasOwnProperty&&s.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(s){return!!(s&&s.providerId&&s.hasOwnProperty&&s.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[br(Pr("opt_actionCodeSettings",!0),Ka(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[qe(null,!0)]},cd:{name:"unlink",j:[qe("provider")]},Cb:{name:"updateEmail",j:[qe("email")]},Db:{name:"updatePassword",j:[qe("password")]},ed:{name:"updatePhoneNumber",j:[wl("phone")]},Eb:{name:"updateProfile",j:[Pr("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[qe("email"),br(Pr("opt_actionCodeSettings",!0),Ka(null,!0),"opt_actionCodeSettings",!0)]}}),Jn($p.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Jn(Cy.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Jn(Wt.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Oq(eq.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:zN("appVerificationDisabledForTesting")}}),Jn(lN.prototype,{confirm:{name:"confirm",j:[qe("verificationCode")]}}),Er(xp,"fromJSON",function(s){s="string"==typeof s?JSON.parse(s):s;for(var u,p=[Zfe,ehe,the,Jfe],y=0;y<p.length;y++)if(u=p[y](s))return u;return null},[br(qe(),Pr(),"json")]),Er(Ts,"credential",function(s,u){return new vl(s,u)},[qe("email"),qe("password")]),Jn(vl.prototype,{w:{name:"toJSON",j:[qe(null,!0)]}}),Jn(eh.prototype,{Ca:{name:"addScope",j:[qe("scope")]},Ka:{name:"setCustomParameters",j:[Pr("customOAuthParameters")]}}),Er(eh,"credential",F6,[br(qe(),Pr(),"token")]),Er(Ts,"credentialWithLink",j6,[qe("email"),qe("emailLink")]),Jn(th.prototype,{Ca:{name:"addScope",j:[qe("scope")]},Ka:{name:"setCustomParameters",j:[Pr("customOAuthParameters")]}}),Er(th,"credential",L6,[br(qe(),Pr(),"token")]),Jn(nh.prototype,{Ca:{name:"addScope",j:[qe("scope")]},Ka:{name:"setCustomParameters",j:[Pr("customOAuthParameters")]}}),Er(nh,"credential",V6,[br(qe(),br(Pr(),Ka()),"idToken"),br(qe(),Ka(),"accessToken",!0)]),Jn(Pp.prototype,{Ka:{name:"setCustomParameters",j:[Pr("customOAuthParameters")]}}),Er(Pp,"credential",U6,[br(qe(),Pr(),"token"),qe("secret",!0)]),Jn(rs.prototype,{Ca:{name:"addScope",j:[qe("scope")]},credential:{name:"credential",j:[br(qe(),br(Pr(),Ka()),"optionsOrIdToken"),br(qe(),Ka(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Pr("customOAuthParameters")]}}),Jn(Wu.prototype,{w:{name:"toJSON",j:[qe(null,!0)]}}),Jn(Jf.prototype,{w:{name:"toJSON",j:[qe(null,!0)]}}),Er(Ku,"credential",B6,[qe("verificationId"),qe("verificationCode")]),Jn(Ku.prototype,{gb:{name:"verifyPhoneNumber",j:[br(qe(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(p){return!!p&&(p.session&&p.phoneNumber?WN(p.session,ry)&&"string"==typeof p.phoneNumber:p.session&&p.multiFactorHint?WN(p.session,TE)&&xq(p.multiFactorHint):p.session&&p.multiFactorUid?WN(p.session,TE)&&"string"==typeof p.multiFactorUid:!!p.phoneNumber&&"string"==typeof p.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(s){return!(!s||"string"!=typeof s.type||"function"!=typeof s.verify)}}]}}),Jn(yl.prototype,{w:{name:"toJSON",j:[qe(null,!0)]}}),Jn(z.prototype,{toJSON:{name:"toJSON",j:[qe(null,!0)]}}),Jn(oy.prototype,{toJSON:{name:"toJSON",j:[qe(null,!0)]}}),Jn(wR.prototype,{toJSON:{name:"toJSON",j:[qe(null,!0)]}}),Jn(dN.prototype,{toJSON:{name:"toJSON",j:[qe(null,!0)]}}),Jn(hN.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(s){return!!s&&!!s.tb}}]}}),Jn(gN.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(s){return!!s&&!!s.tb}},qe("displayName",!0)]},bd:{name:"unenroll",j:[br({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:xq},qe(),"multiFactorInfoIdentifier")]}}),Jn(GN.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Er(uR,"parseLink",y6,[qe("link")]),Er(VN,"assertion",function(s){return new oq(s)},[wl("phone")]),function(){if(!(typeof Xe.default<"u"&&Xe.default.INTERNAL&&Xe.default.INTERNAL.registerComponent))throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var s={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:_E,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:aR,VERIFY_AND_CHANGE_EMAIL:ty,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:oa,AuthCredential:xp,Error:z};Er(s,"EmailAuthProvider",Ts,[]),Er(s,"FacebookAuthProvider",eh,[]),Er(s,"GithubAuthProvider",th,[]),Er(s,"GoogleAuthProvider",nh,[]),Er(s,"TwitterAuthProvider",Pp,[]),Er(s,"OAuthProvider",rs,[qe("providerId")]),Er(s,"SAMLAuthProvider",P6,[qe("providerId")]),Er(s,"PhoneAuthProvider",Ku,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(s){return!!(s&&s instanceof oa)}}]),Er(s,"RecaptchaVerifier",GN,[br(qe(),{name:"",K:"an HTML element",optional:!1,M:function(s){return!!(s&&s instanceof Element)}},"recaptchaContainer"),Pr("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(s){return!!(s&&s instanceof Xe.default.app.App)}}]),Er(s,"ActionCodeURL",uR,[]),Er(s,"PhoneMultiFactorGenerator",VN,[]),Xe.default.INTERNAL.registerComponent({name:"auth",instanceFactory:function(u){return new oa(u=u.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:s,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(u){u.getProvider("auth-internal").initialize()}}),Xe.default.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(u){return{getUid:he((u=u.getProvider("auth").getImmediate()).getUid,u),getToken:he(u.nc,u),addAuthTokenListener:he(u.cc,u),removeAuthTokenListener:he(u.Pc,u)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Xe.default.registerVersion("@firebase/auth","0.16.8"),Xe.default.INTERNAL.extendNamespace({User:is})}()}).apply(typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{}),gt(89);var ze=gt(492),ro=gt(3),TS=function(e,t){return(TS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])})(e,t)};function VV(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var je,Tee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},SS=SS||{},It=Tee||self;function Dw(){}function AS(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Um(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var MS="closure_uid_"+(1e9*Math.random()>>>0),Aee=0;function Mee(e,t,n){return e.call.apply(e.bind,arguments)}function Ree(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function gi(e,t,n){return(gi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Mee:Ree).apply(null,arguments)}function Iw(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function mi(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(r,i,o){for(var a=Array(arguments.length-2),c=2;c<arguments.length;c++)a[c-2]=arguments[c];return t.prototype[i].apply(r,a)}}function zc(){this.s=this.s,this.o=this.o}var kee={};zc.prototype.s=!1,zc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function See(e){return Object.prototype.hasOwnProperty.call(e,MS)&&e[MS]||(e[MS]=++Aee)}(this);delete kee[e]}},zc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var UV=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},jV=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function BV(e){return Array.prototype.concat.apply([],arguments)}function RS(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Tw(e){return/^[\s\xa0]*$/.test(e)}var oo,HV=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function io(e,t){return-1!=e.indexOf(t)}function NS(e,t){return e<t?-1:e>t?1:0}e:{var $V=It.navigator;if($V){var qV=$V.userAgent;if(qV){oo=qV;break e}}oo=""}function kS(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function GV(e){var t={};for(var n in e)t[n]=e[n];return t}var zV="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function WV(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<zV.length;o++)n=zV[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function xS(e){return xS[" "](e),e}xS[" "]=Dw;var Sw,e,Pee=io(oo,"Opera"),xd=io(oo,"Trident")||io(oo,"MSIE"),KV=io(oo,"Edge"),OS=KV||xd,QV=io(oo,"Gecko")&&!(io(oo.toLowerCase(),"webkit")&&!io(oo,"Edge"))&&!(io(oo,"Trident")||io(oo,"MSIE"))&&!io(oo,"Edge"),Fee=io(oo.toLowerCase(),"webkit")&&!io(oo,"Edge");function YV(){var e=It.document;return e?e.documentMode:void 0}e:{var PS="",FS=(e=oo,QV?/rv:([^\);]+)(\)|;)/.exec(e):KV?/Edge\/([\d\.]+)/.exec(e):xd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Fee?/WebKit\/(\S+)/.exec(e):Pee?/(?:Version)[ \/]?(\S+)/.exec(e):void 0);if(FS&&(PS=FS?FS[1]:""),xd){var LS=YV();if(null!=LS&&LS>parseFloat(PS)){Sw=String(LS);break e}}Sw=PS}var Lee={};var Uee=It.document&&xd&&(YV()||parseInt(Sw,10))||void 0,jee=function(){if(!It.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{It.addEventListener("test",Dw,t),It.removeEventListener("test",Dw,t)}catch{}return e}();function xi(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function jm(e,t){if(xi.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(QV){e:{try{xS(t.nodeName);var i=!0;break e}catch{}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Bee[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&jm.Z.h.call(this)}}xi.prototype.h=function(){this.defaultPrevented=!0},mi(jm,xi);var Bee={2:"touch",3:"pen",4:"mouse"};jm.prototype.h=function(){jm.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Bm="closure_listenable_"+(1e6*Math.random()|0),Hee=0;function $ee(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Hee,this.ca=this.fa=!1}function Aw(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Mw(e){this.src=e,this.g={},this.h=0}function US(e,t){var n=t.type;if(n in e.g){var o,r=e.g[n],i=UV(r,t);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(Aw(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function jS(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ca&&o.listener==t&&o.capture==!!n&&o.ia==r)return i}return-1}Mw.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=jS(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new $ee(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var BS="closure_lm_"+(1e6*Math.random()|0),HS={};function JV(e,t,n,r,i){if(r&&r.once)return eU(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)JV(e,t[o],n,r,i);return null}return n=zS(n),e&&e[Bm]?e.N(t,n,Um(r)?!!r.capture:!!r,i):ZV(e,t,n,!1,r,i)}function ZV(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=Um(i)?!!i.capture:!!i,c=qS(e);if(c||(e[BS]=c=new Mw(e)),(n=c.add(t,n,r,a,o)).proxy)return n;if(r=function qee(){var t=Gee;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)jee||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(nU(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function eU(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)eU(e,t[o],n,r,i);return null}return n=zS(n),e&&e[Bm]?e.O(t,n,Um(r)?!!r.capture:!!r,i):ZV(e,t,n,!0,r,i)}function tU(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)tU(e,t[o],n,r,i);else r=Um(r)?!!r.capture:!!r,n=zS(n),e&&e[Bm]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=jS(o=e.g[t],n,r,i))&&(Aw(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--))):e&&(e=qS(e))&&(t=e.g[t.toString()],e=-1,t&&(e=jS(t,n,r,i)),(n=-1<e?t[e]:null)&&$S(n))}function $S(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Bm])US(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(nU(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=qS(t))?(US(n,e),0==n.h&&(n.src=null,t[BS]=null)):Aw(e)}}}function nU(e){return e in HS?HS[e]:HS[e]="on"+e}function Gee(e,t){if(e.ca)e=!0;else{t=new jm(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&$S(e),e=n.call(r,t)}return e}function qS(e){return(e=e[BS])instanceof Mw?e:null}var GS="__closure_events_fn_"+(1e9*Math.random()>>>0);function zS(e){return"function"==typeof e?e:(e[GS]||(e[GS]=function(t){return e.handleEvent(t)}),e[GS])}function ii(){zc.call(this),this.i=new Mw(this),this.P=this,this.I=null}function vi(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new xi(t,e);else if(t instanceof xi)t.target=t.target||e;else{var i=t;WV(t=new xi(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=Rw(a,r,!0,t)&&i}if(i=Rw(a=t.g=e,r,!0,t)&&i,i=Rw(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=Rw(a=t.g=n[o],r,!1,t)&&i}function Rw(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ca&&a.capture==n){var c=a.listener,d=a.ia||a.src;a.fa&&US(e.i,a),i=!1!==c.call(d,r)&&i}}return i&&!r.defaultPrevented}mi(ii,zc),ii.prototype[Bm]=!0,ii.prototype.removeEventListener=function(e,t,n,r){tU(this,e,t,n,r)},ii.prototype.M=function(){if(ii.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Aw(n[r]);delete e.g[t],e.h--}}this.I=null},ii.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ii.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var WS=It.JSON.stringify;function zee(){var e=iU,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var QS,Wee=function(){function e(){this.h=this.g=null}return e.prototype.add=function(t,n){var r=rU.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r},e}(),rU=new(function(){function e(t,n){this.i=t,this.j=n,this.h=0,this.g=null}return e.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},e}())(function(){return new Kee},function(e){return e.reset()}),Kee=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(t,n){this.h=t,this.g=n,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function Qee(e){It.setTimeout(function(){throw e},0)}function KS(e,t){QS||function Yee(){var e=It.Promise.resolve(void 0);QS=function(){e.then(Xee)}}(),YS||(QS(),YS=!0),iU.add(e,t)}var YS=!1,iU=new Wee;function Xee(){for(var e;e=zee();){try{e.h.call(e.g)}catch(n){Qee(n)}var t=rU;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}YS=!1}function Nw(e,t){ii.call(this),this.h=e||1,this.g=t||It,this.j=gi(this.kb,this),this.l=Date.now()}function XS(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function JS(e,t,n){if("function"==typeof e)n&&(e=gi(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=gi(e.handleEvent,e)}return 2147483647<Number(t)?-1:It.setTimeout(e,t||0)}function oU(e){e.g=JS(function(){e.g=null,e.i&&(e.i=!1,oU(e))},e.j);var t=e.h;e.h=null,e.m.apply(null,t)}mi(Nw,ii),(je=Nw.prototype).da=!1,je.S=null,je.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),vi(this,"tick"),this.da&&(XS(this),this.start()))}},je.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},je.M=function(){Nw.Z.M.call(this),XS(this),delete this.g};var Jee=function(e){function t(n,r){var i=e.call(this)||this;return i.m=n,i.j=r,i.h=null,i.i=!1,i.g=null,i}return function Iee(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}TS(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.l=function(n){this.h=arguments,this.g?this.i=!0:oU(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(It.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(zc);function Hm(e){zc.call(this),this.h=e,this.g={}}mi(Hm,zc);var sU=[];function aU(e,t,n,r){Array.isArray(n)||(n&&(sU[0]=n.toString()),n=sU);for(var i=0;i<n.length;i++){var o=JV(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function uU(e){kS(e.g,function(t,n){this.g.hasOwnProperty(n)&&$S(t)},e),e.g={}}function kw(){this.g=!0}function Od(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function nte(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return WS(n)}catch{return t}}(e,n)+(r?" "+r:"")})}Hm.prototype.M=function(){Hm.Z.M.call(this),uU(this)},Hm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},kw.prototype.Aa=function(){this.g=!1},kw.prototype.info=function(){};var gf={},cU=null;function xw(){return cU=cU||new ii}function lU(e){xi.call(this,gf.Ma,e)}function $m(e){var t=xw();vi(t,new lU(t,e))}function fU(e,t){xi.call(this,gf.STAT_EVENT,e),this.stat=t}function so(e){var t=xw();vi(t,new fU(t,e))}function hU(e,t){xi.call(this,gf.Na,e),this.size=t}function qm(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return It.setTimeout(function(){e()},t)}gf.Ma="serverreachability",mi(lU,xi),gf.STAT_EVENT="statevent",mi(fU,xi),gf.Na="timingevent",mi(hU,xi);var Ow={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},dU={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ZS(){}function gU(){}ZS.prototype.h=null;var n1,Gm={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function e1(){xi.call(this,"d")}function t1(){xi.call(this,"c")}function Pw(){}function zm(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Hm(this),this.P=rte,this.W=new Nw(e=OS?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new mU}function mU(){this.i=null,this.g="",this.h=!1}mi(e1,xi),mi(t1,xi),mi(Pw,ZS),Pw.prototype.g=function(){return new XMLHttpRequest},Pw.prototype.i=function(){return{}},n1=new Pw;var rte=45e3,r1={},Fw={};function i1(e,t,n){e.K=1,e.v=Bw(Nu(t)),e.s=n,e.U=!0,vU(e,null)}function vU(e,t){e.F=Date.now(),Wm(e),e.A=Nu(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),TU(n.h,"t",r),e.C=0,n=e.l.H,e.h=new mU,e.g=QU(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Jee(gi(e.Ia,e,e.g),e.O)),aU(e.V,e.g,"readystatechange",e.gb),t=e.H?GV(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),$m(1),function Zee(e,t,n,r,i,o){e.info(function(){if(e.g)if(o)for(var a="",c=o.split("&"),d=0;d<c.length;d++){var m=c[d].split("=");if(1<m.length){var v=m[0];m=m[1];var w=v.split("_");a=2<=w.length&&"type"==w[1]?a+(v+"=")+m+"&":a+(v+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.j,e.u,e.A,e.m,e.X,e.s)}function yU(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function _U(e,t,n){for(var i,r=!0;!e.I&&e.C<n.length;){if((i=ite(e,n))==Fw){4==t&&(e.o=4,so(14),r=!1),Od(e.j,e.m,null,"[Incomplete Response]");break}if(i==r1){e.o=4,so(15),Od(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}Od(e.j,e.m,i,null),o1(e,i)}yU(e)&&i!=Fw&&i!=r1&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,so(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),m1(t),t.L=!0,so(11))):(Od(e.j,e.m,n,"[Invalid Chunked Response]"),mf(e),Km(e))}function ite(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fw:(n=Number(t.substring(n,r)),isNaN(n)?r1:(r+=1)+n>t.length?Fw:(t=t.substr(r,n),e.C=r+n,t))}function Wm(e){e.Y=Date.now()+e.P,wU(e,e.P)}function wU(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=qm(gi(e.eb,e),t)}function Lw(e){e.B&&(It.clearTimeout(e.B),e.B=null)}function Km(e){0==e.l.G||e.I||GU(e.l,e)}function mf(e){Lw(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,XS(e.W),uU(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function o1(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||u1(n.i,e)))if(n.I=e.N,!e.J&&u1(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Ww(n),Gw(n)}g1(n),so(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=qm(gi(n.ab,n),6e3));if(1>=MU(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else _f(n,11)}else if((e.J||n.g==e)&&Ww(n),!Tw(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var o=i[t];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var c=o[4];null!=c&&(n.za=c,n.h.info("SVER="+n.za));var d=o[5];null!=d&&"number"==typeof d&&0<d&&(n.K=r=1.5*d,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var m=e.g;if(m){var v=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(v){var w=r.i;!w.g&&(io(v,"spdy")||io(v,"quic")||io(v,"h2"))&&(w.j=w.l,w.g=new Set,w.h&&(c1(w,w.h),w.h=null))}if(r.D){var C=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;C&&(r.sa=C,Hn(r.F,r.D,C))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var S=e;if((r=n).oa=KU(r,r.H?r.la:null,r.W),S.J){RU(r.i,S);var A=S,x=r.K;x&&A.setTimeout(x),A.B&&(Lw(A),Wm(A)),r.g=S}else $U(r);0<n.l.length&&zw(n)}else"stop"!=o[0]&&"close"!=o[0]||_f(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?_f(n,7):d1(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}$m(4)}catch{}}function s1(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(AS(e)||"string"==typeof e)jV(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(AS(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function ote(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(AS(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function Pd(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Pd)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function a1(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];vf(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)vf(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function vf(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(je=zm.prototype).setTimeout=function(e){this.P=e},je.gb=function(e){e=e.target;var t=this.L;t&&3==ku(e)?t.l():this.Ia(e)},je.Ia=function(e){try{if(e==this.g)e:{var t=ku(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||OS||this.g&&(this.h.h||this.g.ga()||VU(this.g)))){this.I||4!=t||7==n||$m(8==n||0>=r?3:2),Lw(this);var i=this.g.ba();this.N=i;t:if(yU(this)){var o=VU(this.g);e="";var a=o.length,c=4==ku(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){mf(this),Km(this);var d="";break t}this.h.i=new It.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(o[n],{stream:c&&n==a-1});o.splice(0,a),this.h.g+=e,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==i,function ete(e,t,n,r,i,o,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a})}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var m,v=this.g;if((m=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Tw(m)){var w=m;break t}}w=null}if(!(i=w)){this.i=!1,this.o=3,so(12),mf(this),Km(this);break e}Od(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,o1(this,i)}this.U?(_U(this,t,d),OS&&this.i&&3==t&&(aU(this.V,this.W,"tick",this.fb),this.W.start())):(Od(this.j,this.m,d,null),o1(this,d)),4==t&&mf(this),this.i&&!this.I&&(4==t?GU(this.l,this):(this.i=!1,Wm(this)))}else 400==i&&0<d.indexOf("Unknown SID")?(this.o=3,so(12)):(this.o=0,so(13)),mf(this),Km(this)}}}catch{}},je.fb=function(){if(this.g){var e=ku(this.g),t=this.g.ga();this.C<t.length&&(Lw(this),_U(this,e,t),this.i&&4!=e&&Wm(this))}},je.cancel=function(){this.I=!0,mf(this)},je.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function tte(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&($m(3),so(17)),mf(this),this.o=2,Km(this)):wU(this,this.Y-e)},(je=Pd.prototype).R=function(){a1(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},je.T=function(){return a1(this),this.g.concat()},je.get=function(e,t){return vf(this.h,e)?this.h[e]:t},je.set=function(e,t){vf(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},je.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var bU=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function yf(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof yf){this.g=void 0!==t?t:e.g,Vw(this,e.j),this.s=e.s,Uw(this,e.i),jw(this,e.m),this.l=e.l,t=e.h;var n=new Xm;n.i=t.i,t.g&&(n.g=new Pd(t.g),n.h=t.h),EU(this,n),this.o=e.o}else e&&(n=String(e).match(bU))?(this.g=!!t,Vw(this,n[1]||"",!0),this.s=Qm(n[2]||""),Uw(this,n[3]||"",!0),jw(this,n[4]),this.l=Qm(n[5]||"",!0),EU(this,n[6]||"",!0),this.o=Qm(n[7]||"")):(this.g=!!t,this.h=new Xm(null,this.g))}function Nu(e){return new yf(e)}function Vw(e,t,n){e.j=n?Qm(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Uw(e,t,n){e.i=n?Qm(t,!0):t}function jw(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function EU(e,t,n){t instanceof Xm?(e.h=t,function pte(e,t){t&&!e.j&&(Wc(e),e.i=null,e.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(DU(this,r),TU(this,i,n))},e)),e.j=t}(e.h,e.g)):(n||(t=Ym(t,hte)),e.h=new Xm(t,e.g))}function Hn(e,t,n){e.h.set(t,n)}function Bw(e){return Hn(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Qm(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ym(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,cte),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function cte(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}yf.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ym(t,CU,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ym(t,CU,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ym(n,"/"==n.charAt(0)?fte:lte,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ym(n,dte)),e.join("")};var CU=/[#\/\?@]/g,lte=/[#\?:]/g,fte=/[#\?]/g,hte=/[#\?@]/g,dte=/#/g;function Xm(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Wc(e){e.g||(e.g=new Pd,e.h=0,e.i&&function ste(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function DU(e,t){Wc(e),t=Fd(e,t),vf(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,vf((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&a1(e)))}function IU(e,t){return Wc(e),t=Fd(e,t),vf(e.g.h,t)}function TU(e,t,n){DU(e,t),0<n.length&&(e.i=null,e.g.set(Fd(e,t),RS(n)),e.h+=n.length)}function Fd(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(je=Xm.prototype).add=function(e,t){Wc(this),this.i=null,e=Fd(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},je.forEach=function(e,t){Wc(this),this.g.forEach(function(n,r){jV(n,function(i){e.call(t,i,r,this)},this)},this)},je.T=function(){Wc(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},je.R=function(e){Wc(this);var t=[];if("string"==typeof e)IU(this,e)&&(t=BV(t,this.g.get(Fd(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=BV(t,e[n])}return t},je.set=function(e,t){return Wc(this),this.i=null,IU(this,e=Fd(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},je.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},je.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.i=e.join("&")};var gte=function e(t,n){this.h=t,this.g=n};function SU(e){this.l=e||mte,e=It.PerformanceNavigationTiming?0<(e=It.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(It.g&&It.g.Ea&&It.g.Ea()&&It.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var mte=10;function AU(e){return!!e.h||!!e.g&&e.g.size>=e.j}function MU(e){return e.h?1:e.g?e.g.size:0}function u1(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function c1(e,t){e.g?e.g.add(t):e.h=t}function RU(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function NU(e){var t,n;if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var r=e.i;try{for(var i=VV(e.g.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.D)}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return RS(e.i)}function l1(){}function vte(){this.g=new l1}function yte(e,t,n){var r=n||"";try{s1(e,function(i,o){var a=i;Um(i)&&(a=WS(i)),t.push(r+o+"="+encodeURIComponent(a))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Hw(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch{}}function Jm(e){this.l=e.$b||null,this.j=e.ib||!1}function $w(e,t){ii.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=f1,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}SU.prototype.cancel=function(){var e,t;if(this.i=NU(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=VV(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(o){e={error:o}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}},l1.prototype.stringify=function(e){return It.JSON.stringify(e,void 0)},l1.prototype.parse=function(e){return It.JSON.parse(e,void 0)},mi(Jm,ZS),Jm.prototype.g=function(){return new $w(this.l,this.j)},Jm.prototype.i=function(e){return function(){return e}}({}),mi($w,ii);var f1=0;function kU(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Zm(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ev(e)}function ev(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(je=$w.prototype).open=function(e,t){if(this.readyState!=f1)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ev(this)},je.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||It).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},je.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Zm(this)),this.readyState=f1},je.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ev(this)),this.g&&(this.readyState=3,ev(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof It.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;kU(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},je.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Zm(this):ev(this),3==this.readyState&&kU(this)}},je.Ua=function(e){this.g&&(this.response=this.responseText=e,Zm(this))},je.Ta=function(e){this.g&&(this.response=e,Zm(this))},je.ha=function(){this.g&&Zm(this)},je.setRequestHeader=function(e,t){this.v.append(e,t)},je.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},je.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty($w.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var wte=It.JSON.parse;function Rr(e){ii.call(this),this.headers=new Pd,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=xU,this.K=this.L=!1}mi(Rr,ii);var xU="",bte=/^https?$/i,Ete=["POST","PUT"];function Dte(e){return"content-type"==e.toLowerCase()}function OU(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,PU(e),qw(e)}function PU(e){e.D||(e.D=!0,vi(e,"complete"),vi(e,"error"))}function FU(e){if(e.h&&typeof SS<"u"&&(!e.C[1]||4!=ku(e)||2!=e.ba()))if(e.v&&4==ku(e))JS(e.Fa,0,e);else if(vi(e,"readystatechange"),4==ku(e)){e.h=!1;try{var r,t=e.ba();e:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}if(!(r=n)){var i;if(i=0===t){var o=String(e.H).match(bU)[1]||null;if(!o&&It.self&&It.self.location){var a=It.self.location.protocol;o=a.substr(0,a.length-1)}i=!bte.test(o?o.toLowerCase():"")}r=i}if(r)vi(e,"complete"),vi(e,"success");else{e.m=6;try{var c=2<ku(e)?e.g.statusText:""}catch{c=""}e.j=c+" ["+e.ba()+"]",PU(e)}}finally{qw(e)}}}function qw(e,t){if(e.g){LU(e);var n=e.g,r=e.C[0]?Dw:null;e.g=null,e.C=null,t||vi(e,"ready");try{n.onreadystatechange=r}catch{}}}function LU(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(It.clearTimeout(e.A),e.A=null)}function ku(e){return e.g?e.g.readyState:0}function VU(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case xU:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function h1(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function Ite(e){var t="";return kS(e,function(n,r){t+=r,t+=":",t+=n,t+="\r\n"}),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Hn(e,t,n))}function tv(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function UU(e){this.za=0,this.l=[],this.h=new kw,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=tv("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=tv("baseRetryDelayMs",5e3,e),this.$a=tv("retryDelaySeedMs",1e4,e),this.Ya=tv("forwardChannelMaxRetries",2,e),this.ra=tv("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new SU(e&&e.concurrentRequestLimit),this.Ca=new vte,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function d1(e){if(jU(e),3==e.G){var t=e.V++,n=Nu(e.F);Hn(n,"SID",e.J),Hn(n,"RID",t),Hn(n,"TYPE","terminate"),nv(e,n),(t=new zm(e,e.h,t,void 0)).K=2,t.v=Bw(Nu(n)),n=!1,It.navigator&&It.navigator.sendBeacon&&(n=It.navigator.sendBeacon(t.v.toString(),"")),!n&&It.Image&&((new Image).src=t.v,n=!0),n||(t.g=QU(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Wm(t)}WU(e)}function Gw(e){e.g&&(m1(e),e.g.cancel(),e.g=null)}function jU(e){Gw(e),e.u&&(It.clearTimeout(e.u),e.u=null),Ww(e),e.i.cancel(),e.m&&("number"==typeof e.m&&It.clearTimeout(e.m),e.m=null)}function p1(e,t){e.l.push(new gte(e.Za++,t)),3==e.G&&zw(e)}function zw(e){AU(e.i)||e.m||(e.m=!0,KS(e.Ha,e),e.C=0)}function BU(e,t){var n;n=t?t.m:e.V++;var r=Nu(e.F);Hn(r,"SID",e.J),Hn(r,"RID",n),Hn(r,"AID",e.U),nv(e,r),e.o&&e.s&&h1(r,e.o,e.s),n=new zm(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=HU(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),c1(e.i,n),i1(n,r,t)}function nv(e,t){e.j&&s1({},function(n,r){Hn(t,r,n)})}function HU(e,t,n){n=Math.min(e.l.length,n);var r=e.j?gi(e.j.Oa,e.j,e):null;e:for(var i=e.l,o=-1;;){var a=["count="+n];-1==o?0<n?a.push("ofs="+(o=i[0].h)):o=0:a.push("ofs="+o);for(var c=!0,d=0;d<n;d++){var m=i[d].h,v=i[d].g;if(0>(m-=o))o=Math.max(0,i[d].h-100),c=!1;else try{yte(v,a,"req"+m+"_")}catch{r&&r(v)}}if(c){r=a.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function $U(e){e.g||e.u||(e.Y=1,KS(e.Ga,e),e.A=0)}function g1(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=qm(gi(e.Ga,e),zU(e,e.A)),e.A++,0))}function m1(e){null!=e.B&&(It.clearTimeout(e.B),e.B=null)}function qU(e){e.g=new zm(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Nu(e.oa);Hn(t,"RID","rpc"),Hn(t,"SID",e.J),Hn(t,"CI",e.N?"0":"1"),Hn(t,"AID",e.U),nv(e,t),Hn(t,"TYPE","xmlhttp"),e.o&&e.s&&h1(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Bw(Nu(t)),n.s=null,n.U=!0,vU(n,e)}function Ww(e){null!=e.v&&(It.clearTimeout(e.v),e.v=null)}function GU(e,t){var n=null;if(e.g==t){Ww(e),m1(e),e.g=null;var r=2}else{if(!u1(e.i,t))return;n=t.D,RU(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;vi(r=xw(),new hU(r,n,t,i)),zw(e)}else $U(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function Tte(e,t){return!(MU(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=qm(gi(e.Ha,e,t),zU(e,e.C)),e.C++,0)))}(e,t)||2==r&&g1(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:_f(e,5);break;case 4:_f(e,10);break;case 3:_f(e,6);break;default:_f(e,2)}}function zU(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function _f(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=gi(e.jb,e);n||(n=new yf("//www.google.com/images/cleardot.gif"),It.location&&"http"==It.location.protocol||Vw(n,"https"),Bw(n)),function _te(e,t){var n=new kw;if(It.Image){var r=new Image;r.onload=Iw(Hw,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Iw(Hw,n,r,"TestLoadImage: error",!1,t),r.onabort=Iw(Hw,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Iw(Hw,n,r,"TestLoadImage: timeout",!1,t),It.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else so(2);e.G=0,e.j&&e.j.va(t),WU(e),jU(e)}function WU(e){e.G=0,e.I=-1,e.j&&((0!=NU(e.i).length||0!=e.l.length)&&(e.i.i.length=0,RS(e.l),e.l.length=0),e.j.ua())}function KU(e,t,n){var r=function ate(e){return e instanceof yf?Nu(e):new yf(e,void 0)}(n);if(""!=r.i)t&&Uw(r,t+"."+r.i),jw(r,r.m);else{var i=It.location;r=function ute(e,t,n,r){var i=new yf(null,void 0);return e&&Vw(i,e),t&&Uw(i,t),n&&jw(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&kS(e.aa,function(o,a){Hn(r,a,o)}),n=e.sa,(t=e.D)&&n&&Hn(r,t,n),Hn(r,"VER",e.ma),nv(e,r),r}function QU(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Rr(n&&e.Ba&&!e.qa?new Jm({ib:!0}):e.qa)).L=e.H,t}function YU(){}function Kw(){if(xd&&!(10<=Number(Uee)))throw Error("Environmental error: no available transport.")}function Qo(e,t){ii.call(this),this.g=new UU(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Tw(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Tw(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new Ld(this)}function XU(e){e1.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function JU(){t1.call(this),this.status=1}function Ld(e){this.g=e}(je=Rr.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():n1.g(),this.C=function pU(e){return e.h||(e.h=e.i())}(this.u?this.u:n1),this.g.onreadystatechange=gi(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(o){return void OU(this,o)}e=n||"";var i=new Pd(this.headers);r&&s1(r,function(o,a){i.set(a,o)}),r=function xee(e){e:{for(var t=Dte,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=It.FormData&&e instanceof It.FormData,!(0<=UV(Ete,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(o,a){this.g.setRequestHeader(a,o)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{LU(this),0<this.B&&((this.K=function Cte(e){return xd&&function Vee(){return function Oee(e){var t=Lee;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}(function(){for(var e=0,t=HV(String(Sw)).split("."),n=HV("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var o=t[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=NS(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||NS(0==o[2].length,0==a[2].length)||NS(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e})}()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=gi(this.pa,this)):this.A=JS(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){OU(this,o)}},je.pa=function(){typeof SS<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vi(this,"timeout"),this.abort(8))},je.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,vi(this,"complete"),vi(this,"abort"),qw(this))},je.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),qw(this,!0)),Rr.Z.M.call(this)},je.Fa=function(){this.s||(this.F||this.v||this.l?FU(this):this.cb())},je.cb=function(){FU(this)},je.ba=function(){try{return 2<ku(this)?this.g.status:-1}catch{return-1}},je.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},je.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),wte(t)}},je.Da=function(){return this.m},je.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(je=UU.prototype).ma=8,je.G=1,je.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch{}},je.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new zm(this,this.h,e,void 0),n=this.s;if(this.P&&(n?WV(n=GV(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=HU(this,t,r),Hn(i=Nu(this.F),"RID",e),Hn(i,"CVER",22),this.D&&Hn(i,"X-HTTP-Session-Id",this.D),nv(this,i),this.o&&n&&h1(i,this.o,n),c1(this.i,t),this.Ra&&Hn(i,"TYPE","init"),this.ja?(Hn(i,"$req",r),Hn(i,"SID","null"),t.$=!0,i1(t,i,null)):i1(t,i,r),this.G=2}}else 3==this.G&&(e?BU(this,e):0==this.l.length||AU(this.i)||BU(this))},je.Ga=function(){if(this.u=null,qU(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=qm(gi(this.bb,this),e)}},je.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,so(10),Gw(this),qU(this))},je.ab=function(){null!=this.v&&(this.v=null,Gw(this),g1(this),so(19))},je.jb=function(e){e?(this.h.info("Successfully pinged google.com"),so(2)):(this.h.info("Failed to ping google.com"),so(1))},(je=YU.prototype).xa=function(){},je.wa=function(){},je.va=function(){},je.ua=function(){},je.Oa=function(){},Kw.prototype.g=function(e,t){return new Qo(e,t)},mi(Qo,ii),Qo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),KS(gi(e.hb,e,t))),so(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=KU(e,null,e.W),zw(e)},Qo.prototype.close=function(){d1(this.g)},Qo.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,p1(this.g,t)}else this.v?((t={}).__data__=WS(e),p1(this.g,t)):p1(this.g,e)},Qo.prototype.M=function(){this.g.j=null,delete this.j,d1(this.g),delete this.g,Qo.Z.M.call(this)},mi(XU,e1),mi(JU,t1),mi(Ld,YU),Ld.prototype.xa=function(){vi(this.g,"a")},Ld.prototype.wa=function(e){vi(this.g,new XU(e))},Ld.prototype.va=function(e){vi(this.g,new JU(e))},Ld.prototype.ua=function(){vi(this.g,"b")},Kw.prototype.createWebChannel=Kw.prototype.g,Qo.prototype.send=Qo.prototype.u,Qo.prototype.open=Qo.prototype.m,Qo.prototype.close=Qo.prototype.close,Ow.NO_ERROR=0,Ow.TIMEOUT=8,Ow.HTTP_ERROR=6,dU.COMPLETE="complete",gU.EventType=Gm,Gm.OPEN="a",Gm.CLOSE="b",Gm.ERROR="c",Gm.MESSAGE="d",ii.prototype.listen=ii.prototype.N,Rr.prototype.listenOnce=Rr.prototype.O,Rr.prototype.getLastError=Rr.prototype.La,Rr.prototype.getLastErrorCode=Rr.prototype.Da,Rr.prototype.getStatus=Rr.prototype.ba,Rr.prototype.getResponseJson=Rr.prototype.Qa,Rr.prototype.getResponseText=Rr.prototype.ga,Rr.prototype.send=Rr.prototype.ea;var Qw=Ow,tj=dU,nj=gf,v1_PROXY=10,v1_NOPROXY=11,rj=Jm,rv=gU,ij=Rr,Yo=function(){function e(t,n){var r=this;this.previousValue=t,n&&(n.sequenceNumberHandler=function(i){return r.t(i)},this.i=function(i){return n.writeSequenceNumber(i)})}return e.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},e.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},e}();Yo.o=-1;var X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ve=function(e){function t(n,r){var i=this;return(i=e.call(this,r)||this).code=n,i.message=r,i.name="FirebaseError",i.toString=function(){return i.name+": [code="+i.code+"]: "+i.message},i}return(0,D.__extends)(t,e),t}(Error),Ks=new ro.Logger("@firebase/firestore");function y1(){return Ks.logLevel}function Ae(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Ks.logLevel<=ro.LogLevel.DEBUG){var r=t.map(_1);Ks.debug.apply(Ks,(0,D.__spreadArray)(["Firestore (8.10.1): "+e],r))}}function Nr(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Ks.logLevel<=ro.LogLevel.ERROR){var r=t.map(_1);Ks.error.apply(Ks,(0,D.__spreadArray)(["Firestore (8.10.1): "+e],r))}}function iv(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Ks.logLevel<=ro.LogLevel.WARN){var r=t.map(_1);Ks.warn.apply(Ks,(0,D.__spreadArray)(["Firestore (8.10.1): "+e],r))}}function _1(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch{return e}}function Ze(e){void 0===e&&(e="Unexpected state");var t="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+e;throw Nr(t),new Error(t)}function vt(e,t){e||Ze()}function Ne(e,t){return e}function Ste(e){var t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var oj=function(){function e(){}return e.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length,r="";r.length<20;)for(var i=Ste(40),o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=t.charAt(i[o]%t.length));return r},e}();function Yt(e,t){return e<t?-1:e>t?1:0}function Vd(e,t,n){return e.length===t.length&&e.every(function(r,i){return n(r,t[i])})}function sj(e){return e+"\0"}var Ao=function(){function e(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new ve(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ve(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new ve(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ve(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(t){return this.seconds===t.seconds?Yt(this.nanoseconds,t.nanoseconds):Yt(this.seconds,t.seconds)},e.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),Ht=function(){function e(t){this.timestamp=t}return e.fromTimestamp=function(t){return new e(t)},e.min=function(){return new e(new Ao(0,0))},e.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},e.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e}();function aj(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function wf(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function uj(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var cj=function(){function e(t,n,r){void 0===n?n=0:n>t.length&&Ze(),void 0===r?r=t.length-n:r>t.length-n&&Ze(),this.segments=t,this.offset=n,this.len=r}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(r){n.push(r)}):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},e.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(t){return this.segments[this.offset+t]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0},e.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0},e.prototype.forEach=function(t){for(var n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(t,n){for(var r=Math.min(t.length,n.length),i=0;i<r;i++){var o=t.get(i),a=n.get(i);if(o<a)return-1;if(o>a)return 1}return t.length<n.length?-1:t.length>n.length?1:0},e}(),cn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,D.__extends)(t,e),t.prototype.construct=function(n,r,i){return new t(n,r,i)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=[],o=0,a=n;o<a.length;o++){var c=a[o];if(c.indexOf("//")>=0)throw new ve(X.INVALID_ARGUMENT,"Invalid segment ("+c+"). Paths must not contain // in them.");i.push.apply(i,c.split("/").filter(function(d){return d.length>0}))}return new t(i)},t.emptyPath=function(){return new t([])},t}(cj),Ate=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Qs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,D.__extends)(t,e),t.prototype.construct=function(n,r,i){return new t(n,r,i)},t.isValidIdentifier=function(n){return Ate.test(n)},t.prototype.canonicalString=function(){return this.toArray().map(function(n){return n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(n)||(n="`"+n+"`"),n}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(n){for(var r=[],i="",o=0,a=function(){if(0===i.length)throw new ve(X.INVALID_ARGUMENT,"Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");r.push(i),i=""},c=!1;o<n.length;){var d=n[o];if("\\"===d){if(o+1===n.length)throw new ve(X.INVALID_ARGUMENT,"Path has trailing escape character: "+n);var m=n[o+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new ve(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);i+=m,o+=2}else"`"===d?(c=!c,o++):"."!==d||c?(i+=d,o++):(a(),o++)}if(a(),c)throw new ve(X.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new t(r)},t.emptyPath=function(){return new t([])},t}(cj),Ud=function(){function e(t){this.fields=t,t.sort(Qs.comparator)}return e.prototype.covers=function(t){for(var n=0,r=this.fields;n<r.length;n++)if(r[n].isPrefixOf(t))return!0;return!1},e.prototype.isEqual=function(t){return Vd(this.fields,t.fields,function(n,r){return n.isEqual(r)})},e}(),ao=function(){function e(t){this.binaryString=t}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(n){for(var r="",i=0;i<n.length;++i)r+=String.fromCharCode(n[i]);return r}(t))},e.prototype.toBase64=function(){return btoa(this.binaryString)},e.prototype.toUint8Array=function(){return function(t){for(var n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}(this.binaryString)},e.prototype.approximateByteSize=function(){return 2*this.binaryString.length},e.prototype.compareTo=function(t){return Yt(this.binaryString,t.binaryString)},e.prototype.isEqual=function(t){return this.binaryString===t.binaryString},e}();ao.EMPTY_BYTE_STRING=new ao("");var Mte=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kc(e){if(vt(!!e),"string"==typeof e){var t=0,n=Mte.exec(e);if(vt(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:kr(e.seconds),nanos:kr(e.nanos)}}function kr(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function jd(e){return"string"==typeof e?ao.fromBase64String(e):ao.fromUint8Array(e)}function w1(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=e?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function lj(e){var t=e.mapValue.fields.__previous_value__;return w1(t)?lj(t):t}function ov(e){var t=Kc(e.mapValue.fields.__local_write_time__.timestampValue);return new Ao(t.seconds,t.nanos)}function bf(e){return null==e}function Yw(e){return 0===e&&1/e==-1/0}function fj(e){return"number"==typeof e&&Number.isInteger(e)&&!Yw(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var nt=function(){function e(t){this.path=t}return e.fromPath=function(t){return new e(cn.fromString(t))},e.fromName=function(t){return new e(cn.fromString(t).popFirst(5))},e.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},e.prototype.isEqual=function(t){return null!==t&&0===cn.comparator(this.path,t.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(t,n){return cn.comparator(t.path,n.path)},e.isDocumentKey=function(t){return t.length%2==0},e.fromSegments=function(t){return new e(new cn(t.slice()))},e}();function Ef(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?w1(e)?4:10:Ze()}function Pa(e,t){var i,n=Ef(e);if(n!==Ef(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ov(e).isEqual(ov(t));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;var o=Kc(r.timestampValue),a=Kc(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return i=t,jd(e.bytesValue).isEqual(jd(i.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,i){return kr(r.geoPointValue.latitude)===kr(i.geoPointValue.latitude)&&kr(r.geoPointValue.longitude)===kr(i.geoPointValue.longitude)}(e,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return kr(r.integerValue)===kr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){var o=kr(r.doubleValue),a=kr(i.doubleValue);return o===a?Yw(o)===Yw(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return Vd(e.arrayValue.values||[],t.arrayValue.values||[],Pa);case 10:return function(r,i){var o=r.mapValue.fields||{},a=i.mapValue.fields||{};if(aj(o)!==aj(a))return!1;for(var c in o)if(o.hasOwnProperty(c)&&(void 0===a[c]||!Pa(o[c],a[c])))return!1;return!0}(e,t);default:return Ze()}}function sv(e,t){return void 0!==(e.values||[]).find(function(n){return Pa(n,t)})}function Bd(e,t){var i,o,a,c,n=Ef(e),r=Ef(t);if(n!==r)return Yt(n,r);switch(n){case 0:return 0;case 1:return Yt(e.booleanValue,t.booleanValue);case 2:return o=t,(a=kr((i=e).integerValue||i.doubleValue))<(c=kr(o.integerValue||o.doubleValue))?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1;case 3:return hj(e.timestampValue,t.timestampValue);case 4:return hj(ov(e),ov(t));case 5:return Yt(e.stringValue,t.stringValue);case 6:return function(i,o){var a=jd(i),c=jd(o);return a.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(i,o){for(var a=i.split("/"),c=o.split("/"),d=0;d<a.length&&d<c.length;d++){var m=Yt(a[d],c[d]);if(0!==m)return m}return Yt(a.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,o){var a=Yt(kr(i.latitude),kr(o.latitude));return 0!==a?a:Yt(kr(i.longitude),kr(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(i,o){for(var a=i.values||[],c=o.values||[],d=0;d<a.length&&d<c.length;++d){var m=Bd(a[d],c[d]);if(m)return m}return Yt(a.length,c.length)}(e.arrayValue,t.arrayValue);case 10:return function(i,o){var a=i.fields||{},c=Object.keys(a),d=o.fields||{},m=Object.keys(d);c.sort(),m.sort();for(var v=0;v<c.length&&v<m.length;++v){var w=Yt(c[v],m[v]);if(0!==w)return w;var C=Bd(a[c[v]],d[m[v]]);if(0!==C)return C}return Yt(c.length,m.length)}(e.mapValue,t.mapValue);default:throw Ze()}}function hj(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Yt(e,t);var n=Kc(e),r=Kc(t),i=Yt(n.seconds,r.seconds);return 0!==i?i:Yt(n.nanos,r.nanos)}function b1(e){return E1(e)}function E1(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?"time("+(i=Kc(e.timestampValue)).seconds+","+i.nanos+")":"stringValue"in e?e.stringValue:"bytesValue"in e?jd(e.bytesValue).toBase64():"referenceValue"in e?nt.fromName(e.referenceValue).toString():"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(r){for(var i="[",o=!0,a=0,c=r.values||[];a<c.length;a++)o?o=!1:i+=",",i+=E1(c[a]);return i+"]"}(e.arrayValue):"mapValue"in e?function(r){for(var i="{",o=!0,a=0,c=Object.keys(r.fields||{}).sort();a<c.length;a++){var d=c[a];o?o=!1:i+=",",i+=d+":"+E1(r.fields[d])}return i+"}"}(e.mapValue):Ze();var i,t}function Xw(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function C1(e){return!!e&&"integerValue"in e}function D1(e){return!!e&&"arrayValue"in e}function dj(e){return!!e&&"nullValue"in e}function pj(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Jw(e){return!!e&&"mapValue"in e}function av(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return wf(e.mapValue.fields,function(i,o){return t.mapValue.fields[i]=av(o)}),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=av(e.arrayValue.values[r]);return n}return Object.assign({},e)}var Xo=function(){function e(t){this.value=t}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(t){if(t.isEmpty())return this.value;for(var n=this.value,r=0;r<t.length-1;++r)if(!Jw(n=(n.mapValue.fields||{})[t.get(r)]))return null;return(n=(n.mapValue.fields||{})[t.lastSegment()])||null},e.prototype.set=function(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=av(n)},e.prototype.setAll=function(t){var n=this,r=Qs.emptyPath(),i={},o=[];t.forEach(function(c,d){if(!r.isImmediateParentOf(d)){var m=n.getFieldsMap(r);n.applyChanges(m,i,o),i={},o=[],r=d.popLast()}c?i[d.lastSegment()]=av(c):o.push(d.lastSegment())});var a=this.getFieldsMap(r);this.applyChanges(a,i,o)},e.prototype.delete=function(t){var n=this.field(t.popLast());Jw(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]},e.prototype.isEqual=function(t){return Pa(this.value,t.value)},e.prototype.getFieldsMap=function(t){var n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(var r=0;r<t.length;++r){var i=n.mapValue.fields[t.get(r)];Jw(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields},e.prototype.applyChanges=function(t,n,r){wf(n,function(c,d){return t[c]=d});for(var i=0,o=r;i<o.length;i++)delete t[o[i]]},e.prototype.clone=function(){return new e(av(this.value))},e}();function gj(e){var t=[];return wf(e.fields,function(n,r){var i=new Qs([n]);if(Jw(r)){var o=gj(r.mapValue).fields;if(0===o.length)t.push(i);else for(var a=0,c=o;a<c.length;a++)t.push(i.child(c[a]))}else t.push(i)}),new Ud(t)}var yi=function(){function e(t,n,r,i,o){this.key=t,this.documentType=n,this.version=r,this.data=i,this.documentState=o}return e.newInvalidDocument=function(t){return new e(t,0,Ht.min(),Xo.empty(),0)},e.newFoundDocument=function(t,n,r){return new e(t,1,n,r,0)},e.newNoDocument=function(t,n){return new e(t,2,n,Xo.empty(),0)},e.newUnknownDocument=function(t,n){return new e(t,3,n,Xo.empty(),2)},e.prototype.convertToFoundDocument=function(t,n){return this.version=t,this.documentType=1,this.data=n,this.documentState=0,this},e.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Xo.empty(),this.documentState=0,this},e.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Xo.empty(),this.documentState=2,this},e.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},e.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(e.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isValidDocument=function(){return 0!==this.documentType},e.prototype.isFoundDocument=function(){return 1===this.documentType},e.prototype.isNoDocument=function(){return 2===this.documentType},e.prototype.isUnknownDocument=function(){return 3===this.documentType},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},e.prototype.clone=function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},e}(),Rte=function(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function mj(e,t,n,r,i,o,a){return void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new Rte(e,t,n,r,i,o,a)}function uv(e){var t=Ne(e);if(null===t.h){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(function(r){return(i=r).field.canonicalString()+i.op.toString()+b1(i.value);var i}).join(","),n+="|ob:",n+=t.orderBy.map(function(r){return(i=r).field.canonicalString()+i.dir;var i}).join(","),bf(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=tb(t.startAt)),t.endAt&&(n+="|ub:",n+=tb(t.endAt)),t.h=n}return t.h}function Zw(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Vte(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if((i=e.filters[r]).op!==(o=t.filters[r]).op||!i.field.isEqual(o.field)||!Pa(i.value,o.value))return!1;var i,o;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!_j(e.startAt,t.startAt)&&_j(e.endAt,t.endAt)}function eb(e){return nt.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Jo=function(e){function t(n,r,i){var o=this;return(o=e.call(this)||this).field=n,o.op=r,o.value=i,o}return(0,D.__extends)(t,e),t.create=function(n,r,i){return n.isKeyField()?"in"===r||"not-in"===r?this.l(n,r,i):new Nte(n,r,i):"array-contains"===r?new Ote(n,i):"in"===r?new Pte(n,i):"not-in"===r?new Fte(n,i):"array-contains-any"===r?new Lte(n,i):new t(n,r,i)},t.l=function(n,r,i){return"in"===r?new kte(n,i):new xte(n,i)},t.prototype.matches=function(n){var r=n.data.field(this.field);return"!="===this.op?null!==r&&this.m(Bd(r,this.value)):null!==r&&Ef(this.value)===Ef(r)&&this.m(Bd(r,this.value))},t.prototype.m=function(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return 0===n;case"!=":return 0!==n;case">":return n>0;case">=":return n>=0;default:return Ze()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}(function(){}),Nte=function(e){function t(n,r,i){var o=this;return(o=e.call(this,n,r,i)||this).key=nt.fromName(i.referenceValue),o}return(0,D.__extends)(t,e),t.prototype.matches=function(n){var r=nt.comparator(n.key,this.key);return this.m(r)},t}(Jo),kte=function(e){function t(n,r){var i=this;return(i=e.call(this,n,"in",r)||this).keys=vj(0,r),i}return(0,D.__extends)(t,e),t.prototype.matches=function(n){return this.keys.some(function(r){return r.isEqual(n.key)})},t}(Jo),xte=function(e){function t(n,r){var i=this;return(i=e.call(this,n,"not-in",r)||this).keys=vj(0,r),i}return(0,D.__extends)(t,e),t.prototype.matches=function(n){return!this.keys.some(function(r){return r.isEqual(n.key)})},t}(Jo);function vj(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(r){return nt.fromName(r.referenceValue)})}var Ote=function(e){function t(n,r){return e.call(this,n,"array-contains",r)||this}return(0,D.__extends)(t,e),t.prototype.matches=function(n){var r=n.data.field(this.field);return D1(r)&&sv(r.arrayValue,this.value)},t}(Jo),Pte=function(e){function t(n,r){return e.call(this,n,"in",r)||this}return(0,D.__extends)(t,e),t.prototype.matches=function(n){var r=n.data.field(this.field);return null!==r&&sv(this.value.arrayValue,r)},t}(Jo),Fte=function(e){function t(n,r){return e.call(this,n,"not-in",r)||this}return(0,D.__extends)(t,e),t.prototype.matches=function(n){if(sv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var r=n.data.field(this.field);return null!==r&&!sv(this.value.arrayValue,r)},t}(Jo),Lte=function(e){function t(n,r){return e.call(this,n,"array-contains-any",r)||this}return(0,D.__extends)(t,e),t.prototype.matches=function(n){var r=this,i=n.data.field(this.field);return!(!D1(i)||!i.arrayValue.values)&&i.arrayValue.values.some(function(o){return sv(r.value.arrayValue,o)})},t}(Jo),cv=function(e,t){this.position=e,this.before=t};function tb(e){return(e.before?"b":"a")+":"+e.position.map(function(t){return b1(t)}).join(",")}var Hd=function(e,t){void 0===t&&(t="asc"),this.field=e,this.dir=t};function Vte(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function yj(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],a=e.position[i];if(r=o.field.isKeyField()?nt.comparator(nt.fromName(a.referenceValue),n.key):Bd(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function _j(e,t){if(null===e)return null===t;if(null===t||e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Pa(e.position[n],t.position[n]))return!1;return!0}var xu=function(e,t,n,r,i,o,a,c){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===c&&(c=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.p=null,this.T=null};function wj(e,t,n,r,i,o,a,c){return new xu(e,t,n,r,i,o,a,c)}function $d(e){return new xu(e)}function nb(e){return!bf(e.limit)&&"F"===e.limitType}function rb(e){return!bf(e.limit)&&"L"===e.limitType}function I1(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function T1(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.g())return r.field}return null}function S1(e){return null!==e.collectionGroup}function qd(e){var t=Ne(e);if(null===t.p){t.p=[];var n=T1(t),r=I1(t);if(null!==n&&null===r)n.isKeyField()||t.p.push(new Hd(n)),t.p.push(new Hd(Qs.keyField(),"asc"));else{for(var i=!1,o=0,a=t.explicitOrderBy;o<a.length;o++){var c=a[o];t.p.push(c),c.field.isKeyField()&&(i=!0)}if(!i){var d=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new Hd(Qs.keyField(),d))}}}return t.p}function ys(e){var t=Ne(e);if(!t.T)if("F"===t.limitType)t.T=mj(t.path,t.collectionGroup,qd(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=qd(t);r<i.length;r++){var o=i[r];n.push(new Hd(o.field,"desc"===o.dir?"asc":"desc"))}var c=t.endAt?new cv(t.endAt.position,!t.endAt.before):null,d=t.startAt?new cv(t.startAt.position,!t.startAt.before):null;t.T=mj(t.path,t.collectionGroup,n,t.filters,t.limit,c,d)}return t.T}function bj(e,t,n){return new xu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function lv(e,t){return Zw(ys(e),ys(t))&&e.limitType===t.limitType}function Ej(e){return uv(ys(e))+"|lt:"+e.limitType}function A1(e){return"Query(target="+(n=(t=ys(e)).path.canonicalString(),null!==t.collectionGroup&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=", filters: ["+t.filters.map(function(r){return(i=r).field.canonicalString()+" "+i.op+" "+b1(i.value);var i}).join(", ")+"]"),bf(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=", orderBy: ["+t.orderBy.map(function(r){return(i=r).field.canonicalString()+" ("+i.dir+")";var i}).join(", ")+"]"),t.startAt&&(n+=", startAt: "+tb(t.startAt)),t.endAt&&(n+=", endAt: "+tb(t.endAt)),"Target("+n+"); limitType=")+e.limitType+")";var t,n}function fv(e,t){return t.isFoundDocument()&&(i=(r=t).key.path,null!==(n=e).collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):nt.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i))&&function(n,r){for(var i=0,o=n.explicitOrderBy;i<o.length;i++){var a=o[i];if(!a.field.isKeyField()&&null===r.data.field(a.field))return!1}return!0}(e,t)&&function(n,r){for(var i=0,o=n.filters;i<o.length;i++)if(!o[i].matches(r))return!1;return!0}(e,t)&&function(n,r){return!(n.startAt&&!yj(n.startAt,qd(n),r)||n.endAt&&yj(n.endAt,qd(n),r))}(e,t);var n,r,i}function Cj(e){return function(t,n){for(var r=!1,i=0,o=qd(e);i<o.length;i++){var a=o[i],c=Ute(a,t,n);if(0!==c)return c;r=r||a.field.isKeyField()}return 0}}function Ute(e,t,n){var i,a,c,d,r=e.field.isKeyField()?nt.comparator(t.key,n.key):(a=n,c=t.data.field(i=e.field),d=a.data.field(i),null!==c&&null!==d?Bd(c,d):Ze());switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ze()}}function Dj(e,t){if(e.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yw(t)?"-0":t}}function Ij(e){return{integerValue:""+e}}function Tj(e,t){return fj(t)?Ij(t):Dj(e,t)}var ib=function(){this._=void 0};function jte(e,t,n){return e instanceof Gd?(o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},(i=t)&&(o.fields.__previous_value__=i),{mapValue:o}):e instanceof Cf?Aj(e,t):e instanceof Df?Mj(e,t):function(r,i){var o=Sj(r,i),a=Rj(o)+Rj(r.A);return C1(o)&&C1(r.A)?Ij(a):Dj(r.R,a)}(e,t);var r,i,o}function Bte(e,t,n){return e instanceof Cf?Aj(e,t):e instanceof Df?Mj(e,t):n}function Sj(e,t){return e instanceof zd?C1(n=t)||(r=n)&&"doubleValue"in r?t:{integerValue:0}:null;var r,n}var Gd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,D.__extends)(t,e),t}(ib),Cf=function(e){function t(n){var r=this;return(r=e.call(this)||this).elements=n,r}return(0,D.__extends)(t,e),t}(ib);function Aj(e,t){for(var n=Nj(t),r=function(a){n.some(function(c){return Pa(c,a)})||n.push(a)},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Df=function(e){function t(n){var r=this;return(r=e.call(this)||this).elements=n,r}return(0,D.__extends)(t,e),t}(ib);function Mj(e,t){for(var n=Nj(t),r=function(a){n=n.filter(function(c){return!Pa(c,a)})},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var zd=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).R=n,i.A=r,i}return(0,D.__extends)(t,e),t}(ib);function Rj(e){return kr(e.integerValue||e.doubleValue)}function Nj(e){return D1(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var hv=function(e,t){this.field=e,this.transform=t},Hte=function(e,t){this.version=e,this.transformResults=t},Oi=function(){function e(t,n){this.updateTime=t,this.exists=n}return e.none=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},e}();function ob(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var sb=function(){};function $te(e,t,n){var r,i,o,a,c;e instanceof dv?(i=t,o=n,a=(r=e).value.clone(),c=Pj(r.fieldTransforms,i,o.transformResults),a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()):e instanceof Qc?function(r,i,o){if(ob(r.precondition,i)){var a=Pj(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Oj(r)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}else i.convertToUnknownDocument(o.version)}(e,t,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function M1(e,t,n){var i;e instanceof dv?function(r,i,o){if(ob(r.precondition,i)){var a=r.value.clone(),c=Fj(r.fieldTransforms,o,i);a.setAll(c),i.convertToFoundDocument(xj(i),a).setHasLocalMutations()}}(e,t,n):e instanceof Qc?function(r,i,o){if(ob(r.precondition,i)){var a=Fj(r.fieldTransforms,o,i),c=i.data;c.setAll(Oj(r)),c.setAll(a),i.convertToFoundDocument(xj(i),c).setHasLocalMutations()}}(e,t,n):ob(e.precondition,i=t)&&i.convertToNoDocument(Ht.min())}function qte(e,t){for(var n=null,r=0,i=e.fieldTransforms;r<i.length;r++){var o=i[r],a=t.data.field(o.field),c=Sj(o.transform,a||null);null!=c&&(null==n&&(n=Xo.empty()),n.set(o.field,c))}return n||null}function kj(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(r=t.fieldTransforms,!!(void 0===(n=e.fieldTransforms)&&void 0===r||n&&r&&Vd(n,r,function(i,o){return(a=i).field.isEqual((c=o).field)&&(m=c.transform,(d=a.transform)instanceof Cf&&m instanceof Cf||d instanceof Df&&m instanceof Df?Vd(d.elements,m.elements,Pa):d instanceof zd&&m instanceof zd?Pa(d.A,m.A):d instanceof Gd&&m instanceof Gd);var a,c,d,m})))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask));var n,r}function xj(e){return e.isFoundDocument()?e.version:Ht.min()}var dv=function(e){function t(n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=e.call(this)||this).key=n,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return(0,D.__extends)(t,e),t}(sb),Qc=function(e){function t(n,r,i,o,a){void 0===a&&(a=[]);var c=this;return(c=e.call(this)||this).key=n,c.data=r,c.fieldMask=i,c.precondition=o,c.fieldTransforms=a,c.type=1,c}return(0,D.__extends)(t,e),t}(sb);function Oj(e){var t=new Map;return e.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}}),t}function Pj(e,t,n){var r=new Map;vt(e.length===n.length);for(var i=0;i<n.length;i++){var o=e[i],a=o.transform,c=t.data.field(o.field);r.set(o.field,Bte(a,c,n[i]))}return r}function Fj(e,t,n){for(var r=new Map,i=0,o=e;i<o.length;i++){var a=o[i],c=a.transform,d=n.data.field(a.field);r.set(a.field,jte(c,d,t))}return r}var xr,nn,pv=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).key=n,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return(0,D.__extends)(t,e),t}(sb),R1=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).key=n,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return(0,D.__extends)(t,e),t}(sb),Gte=function(e){this.count=e};function Lj(e){switch(e){case X.OK:return Ze();case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return Ze()}}function Vj(e){if(void 0===e)return Nr("GRPC error has no .code"),X.UNKNOWN;switch(e){case xr.OK:return X.OK;case xr.CANCELLED:return X.CANCELLED;case xr.UNKNOWN:return X.UNKNOWN;case xr.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case xr.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case xr.INTERNAL:return X.INTERNAL;case xr.UNAVAILABLE:return X.UNAVAILABLE;case xr.UNAUTHENTICATED:return X.UNAUTHENTICATED;case xr.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case xr.NOT_FOUND:return X.NOT_FOUND;case xr.ALREADY_EXISTS:return X.ALREADY_EXISTS;case xr.PERMISSION_DENIED:return X.PERMISSION_DENIED;case xr.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case xr.ABORTED:return X.ABORTED;case xr.OUT_OF_RANGE:return X.OUT_OF_RANGE;case xr.UNIMPLEMENTED:return X.UNIMPLEMENTED;case xr.DATA_LOSS:return X.DATA_LOSS;default:return Ze()}}(nn=xr||(xr={}))[nn.OK=0]="OK",nn[nn.CANCELLED=1]="CANCELLED",nn[nn.UNKNOWN=2]="UNKNOWN",nn[nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nn[nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nn[nn.NOT_FOUND=5]="NOT_FOUND",nn[nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",nn[nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",nn[nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",nn[nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nn[nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nn[nn.ABORTED=10]="ABORTED",nn[nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",nn[nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",nn[nn.INTERNAL=13]="INTERNAL",nn[nn.UNAVAILABLE=14]="UNAVAILABLE",nn[nn.DATA_LOSS=15]="DATA_LOSS";var Pi=function(){function e(t,n){this.comparator=t,this.root=n||Yc.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Yc.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Yc.BLACK,null,null))},e.prototype.get=function(t){for(var n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null},e.prototype.indexOf=function(t){for(var n=0,r=this.root;!r.isEmpty();){var i=this.comparator(t,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},e.prototype.forEach=function(t){this.inorderTraversal(function(n,r){return t(n,r),!1})},e.prototype.toString=function(){var t=[];return this.inorderTraversal(function(n,r){return t.push(n+":"+r),!1}),"{"+t.join(", ")+"}"},e.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},e.prototype.getIterator=function(){return new ab(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(t){return new ab(this.root,t,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new ab(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(t){return new ab(this.root,t,this.comparator,!0)},e}(),ab=function(){function e(t,n,r,i){this.isReverse=i,this.nodeStack=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(0===o){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return e.prototype.getNext=function(){var t=this.nodeStack.pop(),n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},e}(),Yc=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=o??e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(t??this.key,n??this.value,r??this.color,i??this.left,o??this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},e.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(t,n,r){var i=this,o=r(t,i.key);return(i=o<0?i.copy(null,null,null,i.left.insert(t,n,r),null):0===o?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},e.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},e.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)},e.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ze();var t=this.left.check();if(t!==this.right.check())throw Ze();return t+(this.isRed()?0:1)},e}();Yc.EMPTY=null,Yc.RED=!0,Yc.BLACK=!1,Yc.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw Ze()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw Ze()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw Ze()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw Ze()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw Ze()},enumerable:!1,configurable:!0}),e.prototype.copy=function(t,n,r,i,o){return this},e.prototype.insert=function(t,n,r){return new Yc(t,n)},e.prototype.remove=function(t,n){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(t){return!1},e.prototype.reverseTraversal=function(t){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());var zr=function(){function e(t){this.comparator=t,this.data=new Pi(this.comparator)}return e.prototype.has=function(t){return null!==this.data.get(t)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(t){return this.data.indexOf(t)},e.prototype.forEach=function(t){this.data.inorderTraversal(function(n,r){return t(n),!1})},e.prototype.forEachInRange=function(t,n){for(var r=this.data.getIteratorFrom(t[0]);r.hasNext();){var i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}},e.prototype.forEachWhile=function(t,n){var r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return},e.prototype.firstAfterOrEqual=function(t){var n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null},e.prototype.getIterator=function(){return new Uj(this.data.getIterator())},e.prototype.getIteratorFrom=function(t){return new Uj(this.data.getIteratorFrom(t))},e.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},e.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(t){var n=this;return n.size<t.size&&(n=t,t=this),t.forEach(function(r){n=n.add(r)}),n},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var t=[];return this.forEach(function(n){t.push(n)}),t},e.prototype.toString=function(){var t=[];return this.forEach(function(n){return t.push(n)}),"SortedSet("+t.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),Uj=function(){function e(t){this.iter=t}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),zte=new Pi(nt.comparator);function _s(){return zte}var Wte=new Pi(nt.comparator);function N1(){return Wte}var Kte=new Pi(nt.comparator);function jj(){return Kte}var Qte=new zr(nt.comparator);function _n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=Qte,r=0,i=e;r<i.length;r++)n=n.add(i[r]);return n}var Yte=new zr(Yt);function ub(){return Yte}var k1=function(){function e(t,n,r,i,o){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r=new Map;return r.set(t,x1.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Ht.min(),r,ub(),_s(),_n())},e}(),x1=function(){function e(t,n,r,i,o){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(ao.EMPTY_BYTE_STRING,n,_n(),_n(),_n())},e}(),cb=function(e,t,n,r){this.v=e,this.removedTargetIds=t,this.key=n,this.P=r},Bj=function(e,t){this.targetId=e,this.V=t},Hj=function(e,t,n,r){void 0===n&&(n=ao.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},$j=function(){function e(){this.S=0,this.D=Gj(),this.C=ao.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),e.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},e.prototype.M=function(){var t=_n(),n=_n(),r=_n();return this.D.forEach(function(i,o){switch(o){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ze()}}),new x1(this.C,this.N,t,n,r)},e.prototype.L=function(){this.k=!1,this.D=Gj()},e.prototype.B=function(t,n){this.k=!0,this.D=this.D.insert(t,n)},e.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},e.prototype.U=function(){this.S+=1},e.prototype.K=function(){this.S-=1},e.prototype.j=function(){this.k=!0,this.N=!0},e}(),Xte=function(){function e(t){this.W=t,this.G=new Map,this.H=_s(),this.J=qj(),this.Y=new zr(Yt)}return e.prototype.X=function(t){for(var n=0,r=t.v;n<r.length;n++){var i=r[n];t.P&&t.P.isFoundDocument()?this.Z(i,t.P):this.tt(i,t.key,t.P)}for(var o=0,a=t.removedTargetIds;o<a.length;o++)this.tt(i=a[o],t.key,t.P)},e.prototype.et=function(t){var n=this;this.forEachTarget(t,function(r){var i=n.nt(r);switch(t.state){case 0:n.st(r)&&i.O(t.resumeToken);break;case 1:i.K(),i.F||i.L(),i.O(t.resumeToken);break;case 2:i.K(),i.F||n.removeTarget(r);break;case 3:n.st(r)&&(i.j(),i.O(t.resumeToken));break;case 4:n.st(r)&&(n.it(r),i.O(t.resumeToken));break;default:Ze()}})},e.prototype.forEachTarget=function(t,n){var r=this;t.targetIds.length>0?t.targetIds.forEach(n):this.G.forEach(function(i,o){r.st(o)&&n(o)})},e.prototype.rt=function(t){var n=t.targetId,r=t.V.count,i=this.ot(n);if(i){var o=i.target;if(eb(o))if(0===r){var a=new nt(o.path);this.tt(n,a,yi.newNoDocument(a,Ht.min()))}else vt(1===r);else this.ct(n)!==r&&(this.it(n),this.Y=this.Y.add(n))}},e.prototype.ut=function(t){var n=this,r=new Map;this.G.forEach(function(a,c){var d=n.ot(c);if(d){if(a.current&&eb(d.target)){var m=new nt(d.target.path);null!==n.H.get(m)||n.at(c,m)||n.tt(c,m,yi.newNoDocument(m,t))}a.$&&(r.set(c,a.M()),a.L())}});var i=_n();this.J.forEach(function(a,c){var d=!0;c.forEachWhile(function(m){var v=n.ot(m);return!v||2===v.purpose||(d=!1,!1)}),d&&(i=i.add(a))});var o=new k1(t,r,this.Y,this.H,i);return this.H=_s(),this.J=qj(),this.Y=new zr(Yt),o},e.prototype.Z=function(t,n){if(this.st(t)){var r=this.at(t,n.key)?2:0;this.nt(t).B(n.key,r),this.H=this.H.insert(n.key,n),this.J=this.J.insert(n.key,this.ht(n.key).add(t))}},e.prototype.tt=function(t,n,r){if(this.st(t)){var i=this.nt(t);this.at(t,n)?i.B(n,1):i.q(n),this.J=this.J.insert(n,this.ht(n).delete(t)),r&&(this.H=this.H.insert(n,r))}},e.prototype.removeTarget=function(t){this.G.delete(t)},e.prototype.ct=function(t){var n=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size},e.prototype.U=function(t){this.nt(t).U()},e.prototype.nt=function(t){var n=this.G.get(t);return n||(n=new $j,this.G.set(t,n)),n},e.prototype.ht=function(t){var n=this.J.get(t);return n||(n=new zr(Yt),this.J=this.J.insert(t,n)),n},e.prototype.st=function(t){var n=null!==this.ot(t);return n||Ae("WatchChangeAggregator","Detected inactive target",t),n},e.prototype.ot=function(t){var n=this.G.get(t);return n&&n.F?null:this.W.lt(t)},e.prototype.it=function(t){var n=this;this.G.set(t,new $j),this.W.getRemoteKeysForTarget(t).forEach(function(r){n.tt(t,r,null)})},e.prototype.at=function(t,n){return this.W.getRemoteKeysForTarget(t).has(n)},e}();function qj(){return new Pi(nt.comparator)}function Gj(){return new Pi(nt.comparator)}var Jte={asc:"ASCENDING",desc:"DESCENDING"},Zte={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ene=function(e,t){this.databaseId=e,this.I=t};function gv(e,t){return e.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function zj(e,t){return e.I?t.toBase64():t.toUint8Array()}function tne(e,t){return gv(e,t.toTimestamp())}function oi(e){return vt(!!e),Ht.fromTimestamp((n=Kc(e),new Ao(n.seconds,n.nanos)));var n}function O1(e,t){return(n=e,new cn(["projects",n.projectId,"databases",n.database])).child("documents").child(t).canonicalString();var n}function Wj(e){var t=cn.fromString(e);return vt(oB(t)),t}function mv(e,t){return O1(e.databaseId,t.path)}function Fa(e,t){var n=Wj(t);if(n.get(1)!==e.databaseId.projectId)throw new ve(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ve(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new nt(Qj(n))}function P1(e,t){return O1(e.databaseId,t)}function Kj(e){var t=Wj(e);return 4===t.length?cn.emptyPath():Qj(t)}function vv(e){return new cn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Qj(e){return vt(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Yj(e,t,n){return{name:mv(e,t),fields:n.value.mapValue.fields}}function Xj(e,t,n){var r=Fa(e,t.name),i=oi(t.updateTime),o=new Xo({mapValue:{fields:t.fields}}),a=yi.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function lb(e,t){var n,i;if(t instanceof dv)n={update:Yj(e,t.key,t.value)};else if(t instanceof pv)n={delete:mv(e,t.key)};else if(t instanceof Qc)n={update:Yj(e,t.key,t.data),updateMask:sne(t.fieldMask)};else{if(!(t instanceof R1))return Ze();n={verify:mv(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(function(r){return function(i,o){var a=o.transform;if(a instanceof Gd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Cf)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Df)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof zd)return{fieldPath:o.field.canonicalString(),increment:a.A};throw Ze()}(0,r)})),t.precondition.isNone||(n.currentDocument=void 0!==(i=t.precondition).updateTime?{updateTime:tne(e,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Ze()),n}function Jj(e,t){var m,n=t.currentDocument?void 0!==(m=t.currentDocument).updateTime?Oi.updateTime(oi(m.updateTime)):void 0!==m.exists?Oi.exists(m.exists):Oi.none():Oi.none(),r=t.updateTransforms?t.updateTransforms.map(function(m){return function(v,w){var C=null;"setToServerValue"in w?(vt("REQUEST_TIME"===w.setToServerValue),C=new Gd):"appendMissingElements"in w?C=new Cf(w.appendMissingElements.values||[]):"removeAllFromArray"in w?C=new Df(w.removeAllFromArray.values||[]):"increment"in w?C=new zd(v,w.increment):Ze();var x=Qs.fromServerFormat(w.fieldPath);return new hv(x,C)}(e,m)}):[];if(t.update){var i=Fa(e,t.update.name),o=new Xo({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=function(m){return new Ud((m.fieldPaths||[]).map(function(w){return Qs.fromServerFormat(w)}))}(t.updateMask);return new Qc(i,o,a,n,r)}return new dv(i,o,n,r)}if(t.delete){var c=Fa(e,t.delete);return new pv(c,n)}if(t.verify){var d=Fa(e,t.verify);return new R1(d,n)}return Ze()}function Zj(e,t){return{documents:[P1(e,t.path)]}}function eB(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=P1(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=P1(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(c){if(0!==c.length){var d=c.map(function(m){return function(v){if("=="===v.op){if(pj(v.value))return{unaryFilter:{field:Wd(v.field),op:"IS_NAN"}};if(dj(v.value))return{unaryFilter:{field:Wd(v.field),op:"IS_NULL"}}}else if("!="===v.op){if(pj(v.value))return{unaryFilter:{field:Wd(v.field),op:"IS_NOT_NAN"}};if(dj(v.value))return{unaryFilter:{field:Wd(v.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wd(v.field),op:rne(v.op),value:v.value}}}(m)});return 1===d.length?d[0]:{compositeFilter:{op:"AND",filters:d}}}}(t.filters);i&&(n.structuredQuery.where=i);var o=function(c){if(0!==c.length)return c.map(function(d){return{field:Wd((m=d).field),direction:nne(m.dir)};var m})}(t.orderBy);o&&(n.structuredQuery.orderBy=o);var d,a=(d=t.limit,e.I||bf(d)?d:{value:d});return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=rB(t.startAt)),t.endAt&&(n.structuredQuery.endAt=rB(t.endAt)),n}function tB(e){var t=Kj(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){vt(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=nB(n.where));var c=[];n.orderBy&&(c=n.orderBy.map(function(w){return new Hd(Kd((C=w).field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction));var C}));var w,C,d=null;n.limit&&(d=bf(C="object"==typeof(w=n.limit)?w.value:w)?null:C);var m=null;n.startAt&&(m=iB(n.startAt));var v=null;return n.endAt&&(v=iB(n.endAt)),wj(t,i,c,a,d,"F",m,v)}function nB(e){return e?void 0!==e.unaryFilter?[one(e)]:void 0!==e.fieldFilter?[ine(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(function(t){return nB(t)}).reduce(function(t,n){return t.concat(n)}):Ze():[]}function rB(e){return{before:e.before,values:e.position}}function iB(e){return new cv(e.values||[],!!e.before)}function nne(e){return Jte[e]}function rne(e){return Zte[e]}function Wd(e){return{fieldPath:e.canonicalString()}}function Kd(e){return Qs.fromServerFormat(e.fieldPath)}function ine(e){return Jo.create(Kd(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ze()}}(e.fieldFilter.op),e.fieldFilter.value)}function one(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Kd(e.unaryFilter.field);return Jo.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Kd(e.unaryFilter.field);return Jo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Kd(e.unaryFilter.field);return Jo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Kd(e.unaryFilter.field);return Jo.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ze()}}function sne(e){var t=[];return e.fields.forEach(function(n){return t.push(n.canonicalString())}),{fieldPaths:t}}function oB(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Ys(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=sB(t)),t=ane(e.get(n),t);return sB(t)}function ane(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function sB(e){return e+"\x01\x01"}function Ou(e){var t=e.length;if(vt(t>=2),2===t)return vt("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),cn.emptyPath();for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("\x01",o);switch((a<0||a>n)&&Ze(),e.charAt(a+1)){case"\x01":var c=e.substring(o,a),d=void 0;0===i.length?d=c:(d=i+=c,i=""),r.push(d);break;case"\x10":i+=e.substring(o,a),i+="\0";break;case"\x11":i+=e.substring(o,a+1);break;default:Ze()}o=a+2}return new cn(r)}var une=function(e,t){this.seconds=e,this.nanoseconds=t},Zo=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};Zo.store="owner",Zo.key="owner";var Xc=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};Xc.store="mutationQueues",Xc.keyPath="userId";var Ln=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Ln.store="mutations",Ln.keyPath="batchId",Ln.userMutationsIndex="userMutationsIndex",Ln.userMutationsKeyPath=["userId","batchId"];var Fi=function(){function e(){}return e.prefixForUser=function(t){return[t]},e.prefixForPath=function(t,n){return[t,Ys(n)]},e.key=function(t,n,r){return[t,Ys(n),r]},e}();Fi.store="documentMutations",Fi.PLACEHOLDER=new Fi;var cne=function(e,t){this.path=e,this.readTime=t},lne=function(e,t){this.path=e,this.version=t},or=function(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};or.store="remoteDocuments",or.readTimeIndex="readTimeIndex",or.readTimeIndexPath="readTime",or.collectionReadTimeIndex="collectionReadTimeIndex",or.collectionReadTimeIndexPath=["parentPath","readTime"];var La=function(e){this.byteSize=e};La.store="remoteDocumentGlobal",La.key="remoteDocumentGlobalKey";var Mo=function(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};Mo.store="targets",Mo.keyPath="targetId",Mo.queryTargetsIndexName="queryTargetsIndex",Mo.queryTargetsKeyPath=["canonicalId","targetId"];var _i=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};_i.store="targetDocuments",_i.keyPath=["targetId","path"],_i.documentTargetsIndex="documentTargetsIndex",_i.documentTargetsKeyPath=["path","targetId"];var es=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};es.key="targetGlobalKey",es.store="targetGlobal";var If=function(e,t){this.collectionId=e,this.parent=t};If.store="collectionParents",If.keyPath=["collectionId","parent"];var Pu=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};Pu.store="clientMetadata",Pu.keyPath="clientId";var Qd=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};Qd.store="bundles",Qd.keyPath="bundleId";var Yd=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};Yd.store="namedQueries",Yd.keyPath="name";var fne=(0,D.__spreadArray)((0,D.__spreadArray)([],(0,D.__spreadArray)((0,D.__spreadArray)([],(0,D.__spreadArray)((0,D.__spreadArray)([],(0,D.__spreadArray)((0,D.__spreadArray)([],[Xc.store,Ln.store,Fi.store,or.store,Mo.store,Zo.store,es.store,_i.store]),[Pu.store])),[La.store])),[If.store])),[Qd.store,Yd.store]),aB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",uB=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},e}(),Li=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})},De=function(){function e(t){var n=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(r){n.isDone=!0,n.result=r,n.nextCallback&&n.nextCallback(r)},function(r){n.isDone=!0,n.error=r,n.catchCallback&&n.catchCallback(r)})}return e.prototype.catch=function(t){return this.next(void 0,t)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&Ze(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(i,o){r.nextCallback=function(a){r.wrapSuccess(t,a).next(i,o)},r.catchCallback=function(a){r.wrapFailure(n,a).next(i,o)}})},e.prototype.toPromise=function(){var t=this;return new Promise(function(n,r){t.next(n,r)})},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(r){return e.reject(r)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(n,r){n(t)})},e.reject=function(t){return new e(function(n,r){r(t)})},e.waitFor=function(t){return new e(function(n,r){var i=0,o=0,a=!1;t.forEach(function(c){++i,c.next(function(){++o,a&&o===i&&n()},function(d){return r(d)})}),a=!0,o===i&&n()})},e.or=function(t){for(var n=e.resolve(!1),r=function(a){n=n.next(function(c){return c?e.resolve(c):a()})},i=0,o=t;i<o.length;i++)r(o[i]);return n},e.forEach=function(t,n){var r=this,i=[];return t.forEach(function(o,a){i.push(n.call(r,o,a))}),this.waitFor(i)},e}(),cB=function(){function e(t,n){var r=this;this.action=t,this.transaction=n,this.aborted=!1,this.ft=new Li,this.transaction.oncomplete=function(){r.ft.resolve()},this.transaction.onabort=function(){n.error?r.ft.reject(new yv(t,n.error)):r.ft.resolve()},this.transaction.onerror=function(i){var o=F1(i.target.error);r.ft.reject(new yv(t,o))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(o){throw new yv(n,o)}},Object.defineProperty(e.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Ae("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(t){var n=this.transaction.objectStore(t);return new dne(n)},e}(),Xd=function(){function e(t,n,r){this.name=t,this.version=n,this.wt=r,12.2===e._t((0,ze.getUA)())&&Nr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(t){return Ae("SimpleDb","Removing database:",t),Sf(window.indexedDB.deleteDatabase(t)).toPromise()},e.yt=function(){if(typeof indexedDB>"u")return!1;if(e.gt())return!0;var t=(0,ze.getUA)(),n=e._t(t),r=0<n&&n<10,i=e.Et(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)},e.gt=function(){var t;return typeof process<"u"&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},e.It=function(t,n){return t.store(n)},e._t=function(t){var n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)},e.Et=function(t){var n=t.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)},e.prototype.At=function(t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r=this;return(0,D.__generator)(this,function(i){switch(i.label){case 0:return this.db?[3,2]:(Ae("SimpleDb","Opening database:",this.name),n=this,[4,new Promise(function(o,a){var c=indexedDB.open(r.name,r.version);c.onsuccess=function(d){o(d.target.result)},c.onblocked=function(){a(new yv(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=function(d){var m=d.target.error;a("VersionError"===m.name?new ve(X.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new yv(t,m))},c.onupgradeneeded=function(d){Ae("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',d.oldVersion),r.wt.Rt(d.target.result,c.transaction,d.oldVersion,r.version).next(function(){Ae("SimpleDb","Database upgrade to version "+r.version+" complete")})}})]);case 1:n.db=i.sent(),i.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(o){return r.bt(o)}),this.db)]}})})},e.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(n){return t(n)})},e.prototype.runTransaction=function(t,n,r,i){return(0,D.__awaiter)(this,void 0,void 0,function(){var o,a,c,d,m;return(0,D.__generator)(this,function(v){switch(v.label){case 0:o="readonly"===n,a=0,c=function(){var w,C,S,A,x;return(0,D.__generator)(this,function(V){switch(V.label){case 0:++a,V.label=1;case 1:return V.trys.push([1,4,,5]),[4,d.At(t)];case 2:return d.db=V.sent(),w=cB.open(d.db,t,o?"readonly":"readwrite",r),C=i(w).catch(function(H){return w.abort(H),De.reject(H)}).toPromise(),S={},C.catch(function(){}),[4,w.dt];case 3:return[2,(S.value=(V.sent(),C),S)];case 4:return Ae("SimpleDb","Transaction failed with error:",(A=V.sent()).message,"Retrying:",x="FirebaseError"!==A.name&&a<3),d.close(),x?[3,5]:[2,{value:Promise.reject(A)}];case 5:return[2]}})},d=this,v.label=1;case 1:return[5,c()];case 2:if("object"==typeof(m=v.sent()))return[2,m.value];v.label=3;case 3:return[3,1];case 4:return[2]}})})},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),hne=function(){function e(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Vt=!0},e.prototype.Ct=function(t){this.St=t},e.prototype.delete=function(){return Sf(this.Pt.delete())},e}(),yv=function(e){function t(n,r){var i=this;return(i=e.call(this,X.UNAVAILABLE,"IndexedDB transaction '"+n+"' failed: "+r)||this).name="IndexedDbTransactionError",i}return(0,D.__extends)(t,e),t}(ve);function Tf(e){return"IndexedDbTransactionError"===e.name}var dne=function(){function e(t){this.store=t}return e.prototype.put=function(t,n){var r;return void 0!==n?(Ae("SimpleDb","PUT",this.store.name,t,n),r=this.store.put(n,t)):(Ae("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),Sf(r)},e.prototype.add=function(t){return Ae("SimpleDb","ADD",this.store.name,t,t),Sf(this.store.add(t))},e.prototype.get=function(t){var n=this;return Sf(this.store.get(t)).next(function(r){return void 0===r&&(r=null),Ae("SimpleDb","GET",n.store.name,t,r),r})},e.prototype.delete=function(t){return Ae("SimpleDb","DELETE",this.store.name,t),Sf(this.store.delete(t))},e.prototype.count=function(){return Ae("SimpleDb","COUNT",this.store.name),Sf(this.store.count())},e.prototype.Nt=function(t,n){var r=this.cursor(this.options(t,n)),i=[];return this.xt(r,function(o,a){i.push(a)}).next(function(){return i})},e.prototype.kt=function(t,n){Ae("SimpleDb","DELETE ALL",this.store.name);var r=this.options(t,n);r.Ft=!1;var i=this.cursor(r);return this.xt(i,function(o,a,c){return c.delete()})},e.prototype.$t=function(t,n){var r;n?r=t:(r={},n=t);var i=this.cursor(r);return this.xt(i,n)},e.prototype.Ot=function(t){var n=this.cursor({});return new De(function(r,i){n.onerror=function(o){var a=F1(o.target.error);i(a)},n.onsuccess=function(o){var a=o.target.result;a?t(a.primaryKey,a.value).next(function(c){c?a.continue():r()}):r()}})},e.prototype.xt=function(t,n){var r=[];return new De(function(i,o){t.onerror=function(a){o(a.target.error)},t.onsuccess=function(a){var c=a.target.result;if(c){var d=new hne(c),m=n(c.primaryKey,c.value,d);if(m instanceof De){var v=m.catch(function(w){return d.done(),De.reject(w)});r.push(v)}d.isDone?i():null===d.Dt?c.continue():c.continue(d.Dt)}else i()}}).next(function(){return De.waitFor(r)})},e.prototype.options=function(t,n){var r;return void 0!==t&&("string"==typeof t?r=t:n=t),{index:r,range:n}},e.prototype.cursor=function(t){var n="next";if(t.reverse&&(n="prev"),t.index){var r=this.store.index(t.index);return t.Ft?r.openKeyCursor(t.range,n):r.openCursor(t.range,n)}return this.store.openCursor(t.range,n)},e}();function Sf(e){return new De(function(t,n){e.onsuccess=function(r){t(r.target.result)},e.onerror=function(r){var i=F1(r.target.error);n(i)}})}var lB=!1;function F1(e){var t=Xd._t((0,ze.getUA)());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new ve("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return lB||(lB=!0,setTimeout(function(){throw r},0)),r}}return e}var fB=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).Mt=n,i.currentSequenceNumber=r,i}return(0,D.__extends)(t,e),t}(uB);function Ro(e,t){var n=Ne(e);return Xd.It(n.Mt,t)}var L1=function(){function e(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return e.prototype.applyToRemoteDocument=function(t,n){for(var r=n.mutationResults,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t.key)&&$te(o,t,r[i])}},e.prototype.applyToLocalView=function(t){for(var n=0,r=this.baseMutations;n<r.length;n++)(a=r[n]).key.isEqual(t.key)&&M1(a,t,this.localWriteTime);for(var i=0,o=this.mutations;i<o.length;i++){var a;(a=o[i]).key.isEqual(t.key)&&M1(a,t,this.localWriteTime)}},e.prototype.applyToLocalDocumentSet=function(t){var n=this;this.mutations.forEach(function(r){var i=t.get(r.key),o=i;n.applyToLocalView(o),i.isValidDocument()||o.convertToNoDocument(Ht.min())})},e.prototype.keys=function(){return this.mutations.reduce(function(t,n){return t.add(n.key)},_n())},e.prototype.isEqual=function(t){return this.batchId===t.batchId&&Vd(this.mutations,t.mutations,function(n,r){return kj(n,r)})&&Vd(this.baseMutations,t.baseMutations,function(n,r){return kj(n,r)})},e}(),pne=function(){function e(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return e.from=function(t,n,r){vt(t.mutations.length===r.length);for(var i=jj(),o=t.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new e(t,n,r,i)},e}(),fb=function(){function e(t,n,r,i,o,a,c){void 0===o&&(o=Ht.min()),void 0===a&&(a=Ht.min()),void 0===c&&(c=ao.EMPTY_BYTE_STRING),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e}(),hB=function(e){this.Lt=e};function V1(e,t){if(t.document)return Xj(e.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=nt.fromSegments(t.noDocument.path),r=Zd(t.noDocument.readTime),i=yi.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var o=nt.fromSegments(t.unknownDocument.path);return r=Zd(t.unknownDocument.version),yi.newUnknownDocument(o,r)}return Ze()}function dB(e,t,n){var w,C,r=U1(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var o={name:mv(w=e.Lt,(C=t).key),fields:C.data.value.mapValue.fields,updateTime:gv(w,C.version.toTimestamp())},a=t.hasCommittedMutations;return new or(null,null,o,a,r,i)}if(t.isNoDocument()){var c=t.key.path.toArray(),d=Jd(t.version);return a=t.hasCommittedMutations,new or(null,new cne(c,d),null,a,r,i)}if(t.isUnknownDocument()){var m=t.key.path.toArray(),v=Jd(t.version);return new or(new lne(m,v),null,null,!0,r,i)}return Ze()}function U1(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function pB(e){var t=new Ao(e[0],e[1]);return Ht.fromTimestamp(t)}function Jd(e){var t=e.toTimestamp();return new une(t.seconds,t.nanoseconds)}function Zd(e){var t=new Ao(e.seconds,e.nanoseconds);return Ht.fromTimestamp(t)}function ep(e,t){for(var n=(t.baseMutations||[]).map(function(d){return Jj(e.Lt,d)}),r=0;r<t.mutations.length-1;++r)r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform&&(t.mutations[r].updateTransforms=t.mutations[r+1].transform.fieldTransforms,t.mutations.splice(r+1,1),++r);var a=t.mutations.map(function(d){return Jj(e.Lt,d)}),c=Ao.fromMillis(t.localWriteTimeMs);return new L1(t.batchId,c,n,a)}function _v(e){var t,n,r=Zd(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Zd(e.lastLimboFreeSnapshotVersion):Ht.min();return void 0!==e.query.documents?(vt(1===(n=e.query).documents.length),t=ys($d(Kj(n.documents[0])))):t=ys(tB(e.query)),new fb(t,e.targetId,0,e.lastListenSequenceNumber,r,i,ao.fromBase64String(e.resumeToken))}function gB(e,t){var n,r=Jd(t.snapshotVersion),i=Jd(t.lastLimboFreeSnapshotVersion);n=eb(t.target)?Zj(e.Lt,t.target):eB(e.Lt,t.target);var o=t.resumeToken.toBase64();return new Mo(t.targetId,uv(t.target),r,o,t.sequenceNumber,i,n)}function j1(e){var t=tB({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?bj(t,t.limit,"L"):t}var gne=function(){function e(){}return e.prototype.getBundleMetadata=function(t,n){return mB(t).get(n).next(function(r){if(r)return{id:(i=r).bundleId,createTime:Zd(i.createTime),version:i.version};var i})},e.prototype.saveBundleMetadata=function(t,n){return mB(t).put({bundleId:(r=n).id,createTime:Jd(oi(r.createTime)),version:r.version});var r},e.prototype.getNamedQuery=function(t,n){return vB(t).get(n).next(function(r){if(r)return{name:(i=r).name,query:j1(i.bundledQuery),readTime:Zd(i.readTime)};var i})},e.prototype.saveNamedQuery=function(t,n){return vB(t).put({name:(r=n).name,readTime:Jd(oi(r.readTime)),bundledQuery:r.bundledQuery});var r},e}();function mB(e){return Ro(e,Qd.store)}function vB(e){return Ro(e,Yd.store)}var mne=function(){function e(){this.Bt=new B1}return e.prototype.addToCollectionParentIndex=function(t,n){return this.Bt.add(n),De.resolve()},e.prototype.getCollectionParents=function(t,n){return De.resolve(this.Bt.getEntries(n))},e}(),B1=function(){function e(){this.index={}}return e.prototype.add=function(t){var n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new zr(cn.comparator),o=!i.has(r);return this.index[n]=i.add(r),o},e.prototype.has=function(t){var n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)},e.prototype.getEntries=function(t){return(this.index[t]||new zr(cn.comparator)).toArray()},e}(),vne=function(){function e(){this.qt=new B1}return e.prototype.addToCollectionParentIndex=function(t,n){var r=this;if(!this.qt.has(n)){var i=n.lastSegment(),o=n.popLast();t.addOnCommittedListener(function(){r.qt.add(n)});var a={collectionId:i,parent:Ys(o)};return yB(t).put(a)}return De.resolve()},e.prototype.getCollectionParents=function(t,n){var r=[],i=IDBKeyRange.bound([n,""],[sj(n),""],!1,!0);return yB(t).Nt(i).next(function(o){for(var a=0,c=o;a<c.length;a++){var d=c[a];if(d.collectionId!==n)break;r.push(Ou(d.parent))}return r})},e}();function yB(e){return Ro(e,If.store)}var _B={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Va=function(){function e(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e}();function wB(e,t,n){var r=e.store(Ln.store),i=e.store(Fi.store),o=[],a=IDBKeyRange.only(n.batchId),c=0,d=r.$t({range:a},function(A,x,V){return c++,V.delete()});o.push(d.next(function(){vt(1===c)}));for(var m=[],v=0,w=n.mutations;v<w.length;v++){var C=w[v],S=Fi.key(t,C.key.path,n.batchId);o.push(i.delete(S)),m.push(C.key)}return De.waitFor(o).next(function(){return m})}function hb(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ze();t=e.noDocument}return JSON.stringify(t).length}Va.DEFAULT_COLLECTION_PERCENTILE=10,Va.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Va.DEFAULT=new Va(41943040,Va.DEFAULT_COLLECTION_PERCENTILE,Va.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Va.DISABLED=new Va(-1,0,0);var yne=function(){function e(t,n,r,i){this.userId=t,this.R=n,this.Ut=r,this.referenceDelegate=i,this.Kt={}}return e.Qt=function(t,n,r,i){return vt(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(t){var n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Jc(t).$t({index:Ln.userMutationsIndex,range:r},function(i,o,a){n=!1,a.done()}).next(function(){return n})},e.prototype.addMutationBatch=function(t,n,r,i){var o=this,a=tp(t),c=Jc(t);return c.add({}).next(function(d){vt("number"==typeof d);for(var m=new L1(d,n,r,i),v=function(H,K,q){var fe=q.baseMutations.map(function(he){return lb(H.Lt,he)}),Se=q.mutations.map(function(he){return lb(H.Lt,he)});return new Ln(K,q.batchId,q.localWriteTime.toMillis(),fe,Se)}(o.R,o.userId,m),w=[],C=new zr(function(H,K){return Yt(H.canonicalString(),K.canonicalString())}),S=0,A=i;S<A.length;S++){var x=A[S],V=Fi.key(o.userId,x.key.path,d);C=C.add(x.key.path.popLast()),w.push(c.put(v)),w.push(a.put(V,Fi.PLACEHOLDER))}return C.forEach(function(H){w.push(o.Ut.addToCollectionParentIndex(t,H))}),t.addOnCommittedListener(function(){o.Kt[d]=m.keys()}),De.waitFor(w).next(function(){return m})})},e.prototype.lookupMutationBatch=function(t,n){var r=this;return Jc(t).get(n).next(function(i){return i?(vt(i.userId===r.userId),ep(r.R,i)):null})},e.prototype.jt=function(t,n){var r=this;return this.Kt[n]?De.resolve(this.Kt[n]):this.lookupMutationBatch(t,n).next(function(i){if(i){var o=i.keys();return r.Kt[n]=o,o}return null})},e.prototype.getNextMutationBatchAfterBatchId=function(t,n){var r=this,i=n+1,o=IDBKeyRange.lowerBound([this.userId,i]),a=null;return Jc(t).$t({index:Ln.userMutationsIndex,range:o},function(c,d,m){d.userId===r.userId&&(vt(d.batchId>=i),a=ep(r.R,d)),m.done()}).next(function(){return a})},e.prototype.getHighestUnacknowledgedBatchId=function(t){var n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Jc(t).$t({index:Ln.userMutationsIndex,range:n,reverse:!0},function(i,o,a){r=o.batchId,a.done()}).next(function(){return r})},e.prototype.getAllMutationBatches=function(t){var n=this,r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Jc(t).Nt(Ln.userMutationsIndex,r).next(function(i){return i.map(function(o){return ep(n.R,o)})})},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,n){var r=this,i=Fi.prefixForPath(this.userId,n.path),o=IDBKeyRange.lowerBound(i),a=[];return tp(t).$t({range:o},function(c,d,m){var v=c[0],C=c[2],S=Ou(c[1]);if(v===r.userId&&n.path.isEqual(S))return Jc(t).get(C).next(function(A){if(!A)throw Ze();vt(A.userId===r.userId),a.push(ep(r.R,A))});m.done()}).next(function(){return a})},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,n){var r=this,i=new zr(Yt),o=[];return n.forEach(function(a){var c=Fi.prefixForPath(r.userId,a.path),d=IDBKeyRange.lowerBound(c),m=tp(t).$t({range:d},function(v,w,C){var S=v[0],x=v[2],V=Ou(v[1]);S===r.userId&&a.path.isEqual(V)?i=i.add(x):C.done()});o.push(m)}),De.waitFor(o).next(function(){return r.Wt(t,i)})},e.prototype.getAllMutationBatchesAffectingQuery=function(t,n){var r=this,i=n.path,o=i.length+1,a=Fi.prefixForPath(this.userId,i),c=IDBKeyRange.lowerBound(a),d=new zr(Yt);return tp(t).$t({range:c},function(m,v,w){var C=m[0],A=m[2],x=Ou(m[1]);C===r.userId&&i.isPrefixOf(x)?x.length===o&&(d=d.add(A)):w.done()}).next(function(){return r.Wt(t,d)})},e.prototype.Wt=function(t,n){var r=this,i=[],o=[];return n.forEach(function(a){o.push(Jc(t).get(a).next(function(c){if(null===c)throw Ze();vt(c.userId===r.userId),i.push(ep(r.R,c))}))}),De.waitFor(o).next(function(){return i})},e.prototype.removeMutationBatch=function(t,n){var r=this;return wB(t.Mt,this.userId,n).next(function(i){return t.addOnCommittedListener(function(){r.Gt(n.batchId)}),De.forEach(i,function(o){return r.referenceDelegate.markPotentiallyOrphaned(t,o)})})},e.prototype.Gt=function(t){delete this.Kt[t]},e.prototype.performConsistencyCheck=function(t){var n=this;return this.checkEmpty(t).next(function(r){if(!r)return De.resolve();var i=IDBKeyRange.lowerBound(Fi.prefixForUser(n.userId)),o=[];return tp(t).$t({range:i},function(a,c,d){if(a[0]===n.userId){var m=Ou(a[1]);o.push(m)}else d.done()}).next(function(){vt(0===o.length)})})},e.prototype.containsKey=function(t,n){return bB(t,this.userId,n)},e.prototype.zt=function(t){var n=this;return EB(t).get(this.userId).next(function(r){return r||new Xc(n.userId,-1,"")})},e}();function bB(e,t,n){var r=Fi.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return tp(e).$t({range:o,Ft:!0},function(c,d,m){c[0]===t&&c[1]===i&&(a=!0),m.done()}).next(function(){return a})}function Jc(e){return Ro(e,Ln.store)}function tp(e){return Ro(e,Fi.store)}function EB(e){return Ro(e,Xc.store)}var db=function(){function e(t){this.Ht=t}return e.prototype.next=function(){return this.Ht+=2,this.Ht},e.Jt=function(){return new e(0)},e.Yt=function(){return new e(-1)},e}(),_ne=function(){function e(t,n){this.referenceDelegate=t,this.R=n}return e.prototype.allocateTargetId=function(t){var n=this;return this.Xt(t).next(function(r){var i=new db(r.highestTargetId);return r.highestTargetId=i.next(),n.Zt(t,r).next(function(){return r.highestTargetId})})},e.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(n){return Ht.fromTimestamp(new Ao(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(n){return n.highestListenSequenceNumber})},e.prototype.setTargetsMetadata=function(t,n,r){var i=this;return this.Xt(t).next(function(o){return o.highestListenSequenceNumber=n,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),n>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=n),i.Zt(t,o)})},e.prototype.addTargetData=function(t,n){var r=this;return this.te(t,n).next(function(){return r.Xt(t).next(function(i){return i.targetCount+=1,r.ee(n,i),r.Zt(t,i)})})},e.prototype.updateTargetData=function(t,n){return this.te(t,n)},e.prototype.removeTargetData=function(t,n){var r=this;return this.removeMatchingKeysForTargetId(t,n.targetId).next(function(){return np(t).delete(n.targetId)}).next(function(){return r.Xt(t)}).next(function(i){return vt(i.targetCount>0),i.targetCount-=1,r.Zt(t,i)})},e.prototype.removeTargets=function(t,n,r){var i=this,o=0,a=[];return np(t).$t(function(c,d){var m=_v(d);m.sequenceNumber<=n&&null===r.get(m.targetId)&&(o++,a.push(i.removeTargetData(t,m)))}).next(function(){return De.waitFor(a)}).next(function(){return o})},e.prototype.forEachTarget=function(t,n){return np(t).$t(function(r,i){var o=_v(i);n(o)})},e.prototype.Xt=function(t){return CB(t).get(es.key).next(function(n){return vt(null!==n),n})},e.prototype.Zt=function(t,n){return CB(t).put(es.key,n)},e.prototype.te=function(t,n){return np(t).put(gB(this.R,n))},e.prototype.ee=function(t,n){var r=!1;return t.targetId>n.highestTargetId&&(n.highestTargetId=t.targetId,r=!0),t.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t.sequenceNumber,r=!0),r},e.prototype.getTargetCount=function(t){return this.Xt(t).next(function(n){return n.targetCount})},e.prototype.getTargetData=function(t,n){var r=uv(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return np(t).$t({range:i,index:Mo.queryTargetsIndexName},function(a,c,d){var m=_v(c);Zw(n,m.target)&&(o=m,d.done())}).next(function(){return o})},e.prototype.addMatchingKeys=function(t,n,r){var i=this,o=[],a=Zc(t);return n.forEach(function(c){var d=Ys(c.path);o.push(a.put(new _i(r,d))),o.push(i.referenceDelegate.addReference(t,r,c))}),De.waitFor(o)},e.prototype.removeMatchingKeys=function(t,n,r){var i=this,o=Zc(t);return De.forEach(n,function(a){var c=Ys(a.path);return De.waitFor([o.delete([r,c]),i.referenceDelegate.removeReference(t,r,a)])})},e.prototype.removeMatchingKeysForTargetId=function(t,n){var r=Zc(t),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)},e.prototype.getMatchingKeysForTargetId=function(t,n){var r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Zc(t),o=_n();return i.$t({range:r,Ft:!0},function(a,c,d){var m=Ou(a[1]),v=new nt(m);o=o.add(v)}).next(function(){return o})},e.prototype.containsKey=function(t,n){var r=Ys(n.path),i=IDBKeyRange.bound([r],[sj(r)],!1,!0),o=0;return Zc(t).$t({index:_i.documentTargetsIndex,Ft:!0,range:i},function(a,c,d){0!==a[0]&&(o++,d.done())}).next(function(){return o>0})},e.prototype.lt=function(t,n){return np(t).get(n).next(function(r){return r?_v(r):null})},e}();function np(e){return Ro(e,Mo.store)}function CB(e){return Ro(e,es.store)}function Zc(e){return Ro(e,_i.store)}function Af(e){return(0,D.__awaiter)(this,void 0,void 0,function(){return(0,D.__generator)(this,function(t){if(e.code!==X.FAILED_PRECONDITION||e.message!==aB)throw e;return Ae("LocalStore","Unexpectedly lost primary lease"),[2]})})}function DB(e,t){var r=e[1],o=t[1],a=Yt(e[0],t[0]);return 0===a?Yt(r,o):a}var wne=function(){function e(t){this.ne=t,this.buffer=new zr(DB),this.se=0}return e.prototype.ie=function(){return++this.se},e.prototype.re=function(t){var n=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(n);else{var r=this.buffer.last();DB(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),bne=function(){function e(t,n){this.garbageCollector=t,this.asyncQueue=n,this.oe=!1,this.ce=null}return e.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},e.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),e.prototype.ue=function(t){var n=this,r=this.oe?3e5:6e4;Ae("LruGarbageCollector","Garbage collection scheduled in "+r+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,function(){return(0,D.__awaiter)(n,void 0,void 0,function(){var i;return(0,D.__generator)(this,function(o){switch(o.label){case 0:this.ce=null,this.oe=!0,o.label=1;case 1:return o.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return o.sent(),[3,7];case 3:return Tf(i=o.sent())?(Ae("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i),[3,6]):[3,4];case 4:return[4,Af(i)];case 5:o.sent(),o.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return o.sent(),[2]}})})})},e}(),Ene=function(){function e(t,n){this.ae=t,this.params=n}return e.prototype.calculateTargetCount=function(t,n){return this.ae.he(t).next(function(r){return Math.floor(n/100*r)})},e.prototype.nthSequenceNumber=function(t,n){var r=this;if(0===n)return De.resolve(Yo.o);var i=new wne(n);return this.ae.forEachTarget(t,function(o){return i.re(o.sequenceNumber)}).next(function(){return r.ae.le(t,function(o){return i.re(o)})}).next(function(){return i.maxValue})},e.prototype.removeTargets=function(t,n,r){return this.ae.removeTargets(t,n,r)},e.prototype.removeOrphanedDocuments=function(t,n){return this.ae.removeOrphanedDocuments(t,n)},e.prototype.collect=function(t,n){var r=this;return-1===this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),De.resolve(_B)):this.getCacheSize(t).next(function(i){return i<r.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector","Garbage collection skipped; Cache size "+i+" is lower than threshold "+r.params.cacheSizeCollectionThreshold),_B):r.fe(t,n)})},e.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},e.prototype.fe=function(t,n){var r,i,o,a,c,d,m,v=this,w=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(C){return C>v.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+v.params.maximumSequenceNumbersToCollect+" from "+C),i=v.params.maximumSequenceNumbersToCollect):i=C,a=Date.now(),v.nthSequenceNumber(t,i)}).next(function(C){return r=C,c=Date.now(),v.removeTargets(t,r,n)}).next(function(C){return o=C,d=Date.now(),v.removeOrphanedDocuments(t,r)}).next(function(C){return m=Date.now(),y1()<=ro.LogLevel.DEBUG&&Ae("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-w)+"ms\n\tDetermined least recently used "+i+" in "+(c-a)+"ms\n\tRemoved "+o+" targets in "+(d-c)+"ms\n\tRemoved "+C+" documents in "+(m-d)+"ms\nTotal Duration: "+(m-w)+"ms"),De.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:C})})},e}(),Cne=function(){function e(t,n){this.db=t,this.garbageCollector=new Ene(this,n)}return e.prototype.he=function(t){var n=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(r){return n.next(function(i){return r+i})})},e.prototype.de=function(t){var n=0;return this.le(t,function(r){n++}).next(function(){return n})},e.prototype.forEachTarget=function(t,n){return this.db.getTargetCache().forEachTarget(t,n)},e.prototype.le=function(t,n){return this.we(t,function(r,i){return n(i)})},e.prototype.addReference=function(t,n,r){return pb(t,r)},e.prototype.removeReference=function(t,n,r){return pb(t,r)},e.prototype.removeTargets=function(t,n,r){return this.db.getTargetCache().removeTargets(t,n,r)},e.prototype.markPotentiallyOrphaned=function(t,n){return pb(t,n)},e.prototype._e=function(t,n){return i=n,o=!1,EB(r=t).Ot(function(a){return bB(r,a,i).next(function(c){return c&&(o=!0),De.resolve(!c)})}).next(function(){return o});var r,i,o},e.prototype.removeOrphanedDocuments=function(t,n){var r=this,i=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[],a=0;return this.we(t,function(c,d){if(d<=n){var m=r._e(t,c).next(function(v){if(!v)return a++,i.getEntry(t,c).next(function(){return i.removeEntry(c),Zc(t).delete([0,Ys(c.path)])})});o.push(m)}}).next(function(){return De.waitFor(o)}).next(function(){return i.apply(t)}).next(function(){return a})},e.prototype.removeTarget=function(t,n){var r=n.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)},e.prototype.updateLimboDocument=function(t,n){return pb(t,n)},e.prototype.we=function(t,n){var r,i=Zc(t),o=Yo.o;return i.$t({index:_i.documentTargetsIndex},function(a,c){var m=c.path,v=c.sequenceNumber;0===a[0]?(o!==Yo.o&&n(new nt(Ou(r)),o),o=v,r=m):o=Yo.o}).next(function(){o!==Yo.o&&n(new nt(Ou(r)),o)})},e.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},e}();function pb(e,t){return Zc(e).put((r=e.currentSequenceNumber,new _i(0,Ys(t.path),r)));var r}var rp=function(){function e(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return e.prototype.get=function(t){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r)for(var i=0,o=r;i<o.length;i++){var a=o[i],d=a[1];if(this.equalsFn(a[0],t))return d}},e.prototype.has=function(t){return void 0!==this.get(t)},e.prototype.set=function(t,n){var r=this.mapKeyFn(t),i=this.inner[r];if(void 0!==i){for(var o=0;o<i.length;o++)if(this.equalsFn(i[o][0],t))return void(i[o]=[t,n]);i.push([t,n])}else this.inner[r]=[[t,n]]},e.prototype.delete=function(t){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0===r)return!1;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return 1===r.length?delete this.inner[n]:r.splice(i,1),!0;return!1},e.prototype.forEach=function(t){wf(this.inner,function(n,r){for(var i=0,o=r;i<o.length;i++){var a=o[i];t(a[0],a[1])}})},e.prototype.isEmpty=function(){return uj(this.inner)},e}(),IB=function(){function e(){this.changes=new rp(function(t){return t.toString()},function(t,n){return t.isEqual(n)}),this.changesApplied=!1}return e.prototype.getReadTime=function(t){var n=this.changes.get(t);return n?n.readTime:Ht.min()},e.prototype.addEntry=function(t,n){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:n})},e.prototype.removeEntry=function(t,n){void 0===n&&(n=null),this.assertNotApplied(),this.changes.set(t,{document:yi.newInvalidDocument(t),readTime:n})},e.prototype.getEntry=function(t,n){this.assertNotApplied();var r=this.changes.get(n);return void 0!==r?De.resolve(r.document):this.getFromCache(t,n)},e.prototype.getEntries=function(t,n){return this.getAllFromCache(t,n)},e.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},e.prototype.assertNotApplied=function(){},e}(),Dne=function(){function e(t,n){this.R=t,this.Ut=n}return e.prototype.addEntry=function(t,n,r){return el(t).put(gb(n),r)},e.prototype.removeEntry=function(t,n){var r=el(t),i=gb(n);return r.delete(i)},e.prototype.updateMetadata=function(t,n){var r=this;return this.getMetadata(t).next(function(i){return i.byteSize+=n,r.me(t,i)})},e.prototype.getEntry=function(t,n){var r=this;return el(t).get(gb(n)).next(function(i){return r.ye(n,i)})},e.prototype.ge=function(t,n){var r=this;return el(t).get(gb(n)).next(function(i){return{document:r.ye(n,i),size:hb(i)}})},e.prototype.getEntries=function(t,n){var r=this,i=_s();return this.pe(t,n,function(o,a){var c=r.ye(o,a);i=i.insert(o,c)}).next(function(){return i})},e.prototype.Ee=function(t,n){var r=this,i=_s(),o=new Pi(nt.comparator);return this.pe(t,n,function(a,c){var d=r.ye(a,c);i=i.insert(a,d),o=o.insert(a,hb(c))}).next(function(){return{documents:i,Te:o}})},e.prototype.pe=function(t,n,r){if(n.isEmpty())return De.resolve();var i=IDBKeyRange.bound(n.first().path.toArray(),n.last().path.toArray()),o=n.getIterator(),a=o.getNext();return el(t).$t({range:i},function(c,d,m){for(var v=nt.fromSegments(c);a&&nt.comparator(a,v)<0;)r(a,null),a=o.getNext();a&&a.isEqual(v)&&(r(a,d),a=o.hasNext()?o.getNext():null),a?m.Ct(a.path.toArray()):m.done()}).next(function(){for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})},e.prototype.getDocumentsMatchingQuery=function(t,n,r){var i=this,o=_s(),a=n.path.length+1,c={};if(r.isEqual(Ht.min())){var d=n.path.toArray();c.range=IDBKeyRange.lowerBound(d)}else{var m=n.path.toArray(),v=U1(r);c.range=IDBKeyRange.lowerBound([m,v],!0),c.index=or.collectionReadTimeIndex}return el(t).$t(c,function(w,C,S){if(w.length===a){var A=V1(i.R,C);n.path.isPrefixOf(A.key.path)?fv(n,A)&&(o=o.insert(A.key,A)):S.done()}}).next(function(){return o})},e.prototype.newChangeBuffer=function(t){return new Ine(this,!!t&&t.trackRemovals)},e.prototype.getSize=function(t){return this.getMetadata(t).next(function(n){return n.byteSize})},e.prototype.getMetadata=function(t){return TB(t).get(La.key).next(function(n){return vt(!!n),n})},e.prototype.me=function(t,n){return TB(t).put(La.key,n)},e.prototype.ye=function(t,n){if(n){var r=V1(this.R,n);if(!r.isNoDocument()||!r.version.isEqual(Ht.min()))return r}return yi.newInvalidDocument(t)},e}(),Ine=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).Ie=n,i.trackRemovals=r,i.Ae=new rp(function(o){return o.toString()},function(o,a){return o.isEqual(a)}),i}return(0,D.__extends)(t,e),t.prototype.applyChanges=function(n){var r=this,i=[],o=0,a=new zr(function(c,d){return Yt(c.canonicalString(),d.canonicalString())});return this.changes.forEach(function(c,d){var m=r.Ae.get(c);if(d.document.isValidDocument()){var v=dB(r.Ie.R,d.document,r.getReadTime(c));a=a.add(c.path.popLast());var w=hb(v);o+=w-m,i.push(r.Ie.addEntry(n,c,v))}else if(o-=m,r.trackRemovals){var C=dB(r.Ie.R,yi.newNoDocument(c,Ht.min()),r.getReadTime(c));i.push(r.Ie.addEntry(n,c,C))}else i.push(r.Ie.removeEntry(n,c))}),a.forEach(function(c){i.push(r.Ie.Ut.addToCollectionParentIndex(n,c))}),i.push(this.Ie.updateMetadata(n,o)),De.waitFor(i)},t.prototype.getFromCache=function(n,r){var i=this;return this.Ie.ge(n,r).next(function(o){return i.Ae.set(r,o.size),o.document})},t.prototype.getAllFromCache=function(n,r){var i=this;return this.Ie.Ee(n,r).next(function(o){var a=o.documents;return o.Te.forEach(function(c,d){i.Ae.set(c,d)}),a})},t}(IB);function TB(e){return Ro(e,La.store)}function el(e){return Ro(e,or.store)}function gb(e){return e.path.toArray()}var Tne=function(){function e(t){this.R=t}return e.prototype.Rt=function(t,n,r,i){var o=this;vt(r<i&&r>=0&&i<=11);var d,a=new cB("createOrUpgrade",n);r<1&&i>=1&&(t.createObjectStore(Zo.store),(d=t).createObjectStore(Xc.store,{keyPath:Xc.keyPath}),d.createObjectStore(Ln.store,{keyPath:Ln.keyPath,autoIncrement:!0}).createIndex(Ln.userMutationsIndex,Ln.userMutationsKeyPath,{unique:!0}),d.createObjectStore(Fi.store),SB(t),function(d){d.createObjectStore(or.store)}(t));var c=De.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore(_i.store),d.deleteObjectStore(Mo.store),d.deleteObjectStore(es.store)}(t),SB(t)),c=c.next(function(){return function(d){var m=d.store(es.store),v=new es(0,0,Ht.min().toTimestamp(),0);return m.put(es.key,v)}(a)})),r<4&&i>=4&&(0!==r&&(c=c.next(function(){return function(d,m){return m.store(Ln.store).Nt().next(function(v){d.deleteObjectStore(Ln.store),d.createObjectStore(Ln.store,{keyPath:Ln.keyPath,autoIncrement:!0}).createIndex(Ln.userMutationsIndex,Ln.userMutationsKeyPath,{unique:!0});var w=m.store(Ln.store),C=v.map(function(S){return w.put(S)});return De.waitFor(C)})}(t,a)})),c=c.next(function(){!function(d){d.createObjectStore(Pu.store,{keyPath:Pu.keyPath})}(t)})),r<5&&i>=5&&(c=c.next(function(){return o.Re(a)})),r<6&&i>=6&&(c=c.next(function(){return function(d){d.createObjectStore(La.store)}(t),o.be(a)})),r<7&&i>=7&&(c=c.next(function(){return o.ve(a)})),r<8&&i>=8&&(c=c.next(function(){return o.Pe(t,a)})),r<9&&i>=9&&(c=c.next(function(){(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(t),function(d){var m=d.objectStore(or.store);m.createIndex(or.readTimeIndex,or.readTimeIndexPath,{unique:!1}),m.createIndex(or.collectionReadTimeIndex,or.collectionReadTimeIndexPath,{unique:!1})}(n)})),r<10&&i>=10&&(c=c.next(function(){return o.Ve(a)})),r<11&&i>=11&&(c=c.next(function(){(function(d){d.createObjectStore(Qd.store,{keyPath:Qd.keyPath})})(t),function(d){d.createObjectStore(Yd.store,{keyPath:Yd.keyPath})}(t)})),c},e.prototype.be=function(t){var n=0;return t.store(or.store).$t(function(r,i){n+=hb(i)}).next(function(){var r=new La(n);return t.store(La.store).put(La.key,r)})},e.prototype.Re=function(t){var n=this,r=t.store(Xc.store),i=t.store(Ln.store);return r.Nt().next(function(o){return De.forEach(o,function(a){var c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return i.Nt(Ln.userMutationsIndex,c).next(function(d){return De.forEach(d,function(m){vt(m.userId===a.userId);var v=ep(n.R,m);return wB(t,a.userId,v).next(function(){})})})})})},e.prototype.ve=function(t){var n=t.store(_i.store),r=t.store(or.store);return t.store(es.store).get(es.key).next(function(i){var o=[];return r.$t(function(a,c){var d=new cn(a),m=[0,Ys(d)];o.push(n.get(m).next(function(v){return v?De.resolve():n.put(new _i(0,Ys(d),i.highestListenSequenceNumber))}))}).next(function(){return De.waitFor(o)})})},e.prototype.Pe=function(t,n){t.createObjectStore(If.store,{keyPath:If.keyPath});var r=n.store(If.store),i=new B1,o=function(a){if(i.add(a)){var c=a.lastSegment(),d=a.popLast();return r.put({collectionId:c,parent:Ys(d)})}};return n.store(or.store).$t({Ft:!0},function(a,c){var d=new cn(a);return o(d.popLast())}).next(function(){return n.store(Fi.store).$t({Ft:!0},function(a,c){var m=Ou(a[1]);return o(m.popLast())})})},e.prototype.Ve=function(t){var n=this,r=t.store(Mo.store);return r.$t(function(i,o){var a=_v(o),c=gB(n.R,a);return r.put(c)})},e}();function SB(e){e.createObjectStore(_i.store,{keyPath:_i.keyPath}).createIndex(_i.documentTargetsIndex,_i.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Mo.store,{keyPath:Mo.keyPath}).createIndex(Mo.queryTargetsIndexName,Mo.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(es.store)}var H1="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Sne=function(){function e(t,n,r,i,o,a,c,d,m,v){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=c,this.De=m,this.Ce=v,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(w){return Promise.resolve()},!e.yt())throw new ve(X.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Cne(this,i),this.Le=n+"main",this.R=new hB(d),this.Be=new Xd(this.Le,11,new Tne(this.R)),this.qe=new _ne(this.referenceDelegate,this.R),this.Ut=new vne,this.Ue=new Dne(this.R,this.Ut),this.Ke=new gne,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===v&&Nr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new ve(X.FAILED_PRECONDITION,H1);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(n){return t.qe.getHighestSequenceNumber(n)})}).then(function(n){t.Ne=new Yo(n,t.De)}).then(function(){t.xe=!0}).catch(function(n){return t.Be&&t.Be.close(),Promise.reject(n)})},e.prototype.He=function(t){var n=this;return this.Me=function(r){return(0,D.__awaiter)(n,void 0,void 0,function(){return(0,D.__generator)(this,function(i){return this.started?[2,t(r)]:[2]})})},t(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(t){var n=this;this.Be.vt(function(r){return(0,D.__awaiter)(n,void 0,void 0,function(){return(0,D.__generator)(this,function(i){switch(i.label){case 0:return null===r.newVersion?[4,t()]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})})},e.prototype.setNetworkEnabled=function(t){var n=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,D.__awaiter)(n,void 0,void 0,function(){return(0,D.__generator)(this,function(r){switch(r.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})}))},e.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(n){return mb(n).put(new Pu(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(n).next(function(r){r||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(n)}).next(function(r){return t.isPrimary&&!r?t.Xe(n).next(function(){return!1}):!!r&&t.Ze(n).next(function(){return!0})})}).catch(function(n){if(Tf(n))return Ae("IndexedDbPersistence","Failed to extend owner lease: ",n),t.isPrimary;if(!t.allowTabSynchronization)throw n;return Ae("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(function(n){t.isPrimary!==n&&t.Se.enqueueRetryable(function(){return t.Me(n)}),t.isPrimary=n})},e.prototype.Je=function(t){var n=this;return wv(t).get(Zo.key).next(function(r){return De.resolve(n.tn(r))})},e.prototype.en=function(t){return mb(t).delete(this.clientId)},e.prototype.nn=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){var t,n,r,o=this;return(0,D.__generator)(this,function(a){switch(a.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(c){var d=Ro(c,Pu.store);return d.Nt().next(function(m){var v=o.rn(m,18e5),w=m.filter(function(C){return-1===v.indexOf(C)});return De.forEach(w,function(C){return d.delete(C.clientId)}).next(function(){return w})})}).catch(function(){return[]})]);case 1:if(t=a.sent(),this.Qe)for(n=0,r=t;n<r.length;n++)this.Qe.removeItem(this.on(r[n].clientId));a.label=2;case 2:return[2]}})})},e.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},e.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},e.prototype.Ye=function(t){var n=this;return this.Ce?De.resolve(!0):wv(t).get(Zo.key).next(function(r){if(null!==r&&n.sn(r.leaseTimestampMs,5e3)&&!n.cn(r.ownerId)){if(n.tn(r)&&n.networkEnabled)return!0;if(!n.tn(r)){if(!r.allowTabSynchronization)throw new ve(X.FAILED_PRECONDITION,H1);return!1}}return!(!n.networkEnabled||!n.inForeground)||mb(t).Nt().next(function(i){return void 0===n.rn(i,5e3).find(function(o){return!(n.clientId===o.clientId||!(!n.networkEnabled&&o.networkEnabled||!n.inForeground&&o.inForeground&&n.networkEnabled===o.networkEnabled))})})}).next(function(r){return n.isPrimary!==r&&Ae("IndexedDbPersistence","Client "+(r?"is":"is not")+" eligible for a primary lease."),r})},e.prototype.shutdown=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){var t=this;return(0,D.__generator)(this,function(n){switch(n.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Zo.store,Pu.store],function(r){var i=new fB(r,Yo.o);return t.Xe(i).next(function(){return t.en(i)})})];case 1:return n.sent(),this.Be.close(),this.ln(),[2]}})})},e.prototype.rn=function(t,n){var r=this;return t.filter(function(i){return r.sn(i.updateTimeMs,n)&&!r.cn(i.clientId)})},e.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(n){return mb(n).Nt().next(function(r){return t.rn(r,18e5).map(function(i){return i.clientId})})})},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.getMutationQueue=function(t){return yne.Qt(t,this.R,this.Ut,this.referenceDelegate)},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(t,n,r){var o,i=this;return Ae("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===n?"readonly":"readwrite",fne,function(c){return o=new fB(c,i.Ne?i.Ne.next():Yo.o),"readwrite-primary"===n?i.Je(o).next(function(d){return!!d||i.Ye(o)}).next(function(d){if(!d)throw Nr("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new ve(X.FAILED_PRECONDITION,aB);return r(o)}).next(function(d){return i.Ze(o).next(function(){return d})}):i.dn(o).next(function(){return r(o)})}).then(function(c){return o.raiseOnCommittedEvent(),c})},e.prototype.dn=function(t){var n=this;return wv(t).get(Zo.key).next(function(r){if(null!==r&&n.sn(r.leaseTimestampMs,5e3)&&!n.cn(r.ownerId)&&!n.tn(r)&&!(n.Ce||n.allowTabSynchronization&&r.allowTabSynchronization))throw new ve(X.FAILED_PRECONDITION,H1)})},e.prototype.Ze=function(t){var n=new Zo(this.clientId,this.allowTabSynchronization,Date.now());return wv(t).put(Zo.key,n)},e.yt=function(){return Xd.yt()},e.prototype.Xe=function(t){var n=this,r=wv(t);return r.get(Zo.key).next(function(i){return n.tn(i)?(Ae("IndexedDbPersistence","Releasing primary lease."),r.delete(Zo.key)):De.resolve()})},e.prototype.sn=function(t,n){var r=Date.now();return!(t<r-n||t>r&&(Nr("Detected an update time that is in the future: "+t+" > "+r),1))},e.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},e.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},e.prototype.Ge=function(){var t,n=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){n.un(),(0,ze.isSafari)()&&navigator.appVersion.match("Version/14")&&n.Se.enterRestrictedMode(!0),n.Se.enqueueAndForget(function(){return n.shutdown()})},this.window.addEventListener("pagehide",this.ke))},e.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},e.prototype.cn=function(t){var n;try{var r=null!==(null===(n=this.Qe)||void 0===n?void 0:n.getItem(this.on(t)));return Ae("IndexedDbPersistence","Client '"+t+"' "+(r?"is":"is not")+" zombied in LocalStorage"),r}catch(i){return Nr("IndexedDbPersistence","Failed to get zombied client id.",i),!1}},e.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Nr("Failed to set zombie client id.",t)}},e.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch{}},e.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},e}();function wv(e){return Ro(e,Zo.store)}function mb(e){return Ro(e,Pu.store)}function $1(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Ane=function(e,t){this.progress=e,this.wn=t},AB=function(){function e(t,n,r){this.Ue=t,this._n=n,this.Ut=r}return e.prototype.mn=function(t,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,n).next(function(i){return r.yn(t,n,i)})},e.prototype.yn=function(t,n,r){return this.Ue.getEntry(t,n).next(function(i){for(var o=0,a=r;o<a.length;o++)a[o].applyToLocalView(i);return i})},e.prototype.gn=function(t,n){t.forEach(function(r,i){for(var o=0,a=n;o<a.length;o++)a[o].applyToLocalView(i)})},e.prototype.pn=function(t,n){var r=this;return this.Ue.getEntries(t,n).next(function(i){return r.En(t,i).next(function(){return i})})},e.prototype.En=function(t,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,n).next(function(i){return r.gn(n,i)})},e.prototype.getDocumentsMatchingQuery=function(t,n,r){return nt.isDocumentKey((i=n).path)&&null===i.collectionGroup&&0===i.filters.length?this.Tn(t,n.path):S1(n)?this.In(t,n,r):this.An(t,n,r);var i},e.prototype.Tn=function(t,n){return this.mn(t,new nt(n)).next(function(r){var i=N1();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})},e.prototype.In=function(t,n,r){var i=this,o=n.collectionGroup,a=N1();return this.Ut.getCollectionParents(t,o).next(function(c){return De.forEach(c,function(d){var v,w,m=(v=n,w=d.child(o),new xu(w,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));return i.An(t,m,r).next(function(v){v.forEach(function(w,C){a=a.insert(w,C)})})}).next(function(){return a})})},e.prototype.An=function(t,n,r){var i,o,a=this;return this.Ue.getDocumentsMatchingQuery(t,n,r).next(function(c){return i=c,a._n.getAllMutationBatchesAffectingQuery(t,n)}).next(function(c){return a.Rn(t,o=c,i).next(function(d){i=d;for(var m=0,v=o;m<v.length;m++)for(var w=v[m],C=0,S=w.mutations;C<S.length;C++){var A=S[C],x=A.key,V=i.get(x);null==V&&(V=yi.newInvalidDocument(x),i=i.insert(x,V)),M1(A,V,w.localWriteTime),V.isFoundDocument()||(i=i.remove(x))}})}).next(function(){return i.forEach(function(c,d){fv(n,d)||(i=i.remove(c))}),i})},e.prototype.Rn=function(t,n,r){for(var i=_n(),o=0,a=n;o<a.length;o++)for(var c=0,d=a[o].mutations;c<d.length;c++){var m=d[c];m instanceof Qc&&null===r.get(m.key)&&(i=i.add(m.key))}var v=r;return this.Ue.getEntries(t,i).next(function(w){return w.forEach(function(C,S){S.isFoundDocument()&&(v=v.insert(C,S))}),v})},e}(),Mne=function(){function e(t,n,r,i){this.targetId=t,this.fromCache=n,this.bn=r,this.vn=i}return e.Pn=function(t,n){for(var r=_n(),i=_n(),o=0,a=n.docChanges;o<a.length;o++){var c=a[o];switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:i=i.add(c.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),MB=function(){function e(){}return e.prototype.Vn=function(t){this.Sn=t},e.prototype.getDocumentsMatchingQuery=function(t,n,r,i){var a,o=this;return 0===(a=n).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual(Ht.min())?this.Dn(t,n):this.Sn.pn(t,i).next(function(a){var c=o.Cn(n,a);return(nb(n)||rb(n))&&o.Nn(n.limitType,c,i,r)?o.Dn(t,n):(y1()<=ro.LogLevel.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),A1(n)),o.Sn.getDocumentsMatchingQuery(t,n,r).next(function(d){return c.forEach(function(m){d=d.insert(m.key,m)}),d}))})},e.prototype.Cn=function(t,n){var r=new zr(Cj(t));return n.forEach(function(i,o){fv(t,o)&&(r=r.add(o))}),r},e.prototype.Nn=function(t,n,r,i){if(r.size!==n.size)return!0;var o="F"===t?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)},e.prototype.Dn=function(t,n){return y1()<=ro.LogLevel.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",A1(n)),this.Sn.getDocumentsMatchingQuery(t,n,Ht.min())},e}(),Rne=function(){function e(t,n,r,i){this.persistence=t,this.xn=n,this.R=i,this.kn=new Pi(Yt),this.Fn=new rp(function(o){return uv(o)},Zw),this.$n=Ht.min(),this._n=t.getMutationQueue(r),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new AB(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return e.prototype.collectGarbage=function(t){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(r){return t.collect(r,n.kn)})},e}();function RB(e,t,n,r){return new Rne(e,t,n,r)}function NB(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,D.__generator)(this,function(a){switch(a.label){case 0:return n=Ne(e),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(c){var d;return n._n.getAllMutationBatches(c).next(function(m){return d=m,r=n.persistence.getMutationQueue(t),i=new AB(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(c)}).next(function(m){for(var v=[],w=[],C=_n(),S=0,A=d;S<A.length;S++){var x=A[S];v.push(x.batchId);for(var V=0,H=x.mutations;V<H.length;V++)C=C.add(H[V].key)}for(var q=0,fe=m;q<fe.length;q++){var Se=fe[q];w.push(Se.batchId);for(var he=0,pn=Se.mutations;he<pn.length;he++)C=C.add(pn[he].key)}return i.pn(c,C).next(function(Je){return{Ln:Je,removedBatchIds:v,addedBatchIds:w}})})})];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function Nne(e,t){var n=Ne(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(r){var a,c,d,m,v,w,C,i=t.batch.keys(),o=n.On.newChangeBuffer({trackRemovals:!0});return(a=n,c=r,d=t,m=o,v=d.batch,w=v.keys(),C=De.resolve(),w.forEach(function(S){C=C.next(function(){return m.getEntry(c,S)}).next(function(A){var x=d.docVersions.get(S);vt(null!==x),A.version.compareTo(x)<0&&(v.applyToRemoteDocument(A,d),A.isValidDocument()&&m.addEntry(A,d.commitVersion))})}),C.next(function(){return a._n.removeMutationBatch(c,v)})).next(function(){return o.apply(r)}).next(function(){return n._n.performConsistencyCheck(r)}).next(function(){return n.Mn.pn(r,i)})})}function kB(e){var t=Ne(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(n){return t.qe.getLastRemoteSnapshotVersion(n)})}function kne(e,t){var n=Ne(e),r=t.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var a=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var c=[];t.targetChanges.forEach(function(v,w){var x,V,H,C=i.get(w);if(C){c.push(n.qe.removeMatchingKeys(o,v.removedDocuments,w).next(function(){return n.qe.addMatchingKeys(o,v.addedDocuments,w)}));var S=v.resumeToken;if(S.approximateByteSize()>0){var A=C.withResumeToken(S,r).withSequenceNumber(o.currentSequenceNumber);i=i.insert(w,A),x=C,H=v,vt((V=A).resumeToken.approximateByteSize()>0),(0===x.resumeToken.approximateByteSize()||V.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8||H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0)&&c.push(n.qe.updateTargetData(o,A))}}});var d=_s();if(t.documentUpdates.forEach(function(v,w){t.resolvedLimboDocuments.has(v)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,v))}),c.push(xB(o,a,t.documentUpdates,r,void 0).next(function(v){d=v})),!r.isEqual(Ht.min())){var m=n.qe.getLastRemoteSnapshotVersion(o).next(function(v){return n.qe.setTargetsMetadata(o,o.currentSequenceNumber,r)});c.push(m)}return De.waitFor(c).next(function(){return a.apply(o)}).next(function(){return n.Mn.En(o,d)}).next(function(){return d})}).then(function(o){return n.kn=i,o})}function xB(e,t,n,r,i){var o=_n();return n.forEach(function(a){return o=o.add(a)}),t.getEntries(e,o).next(function(a){var c=_s();return n.forEach(function(d,m){var v=a.get(d),w=i?.get(d)||r;m.isNoDocument()&&m.version.isEqual(Ht.min())?(t.removeEntry(d,w),c=c.insert(d,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||0===m.version.compareTo(v.version)&&v.hasPendingWrites?(t.addEntry(m,w),c=c.insert(d,m)):Ae("LocalStore","Ignoring outdated watch update for ",d,". Current version:",v.version," Watch version:",m.version)}),c})}function xne(e,t){var n=Ne(e);return n.persistence.runTransaction("Get next mutation batch","readonly",function(r){return void 0===t&&(t=-1),n._n.getNextMutationBatchAfterBatchId(r,t)})}function ip(e,t){var n=Ne(e);return n.persistence.runTransaction("Allocate target","readwrite",function(r){var i;return n.qe.getTargetData(r,t).next(function(o){return o?De.resolve(i=o):n.qe.allocateTargetId(r).next(function(a){return i=new fb(t,a,0,r.currentSequenceNumber),n.qe.addTargetData(r,i).next(function(){return i})})})}).then(function(r){var i=n.kn.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.kn=n.kn.insert(r.targetId,r),n.Fn.set(t,r.targetId)),r})}function op(e,t,n){return(0,D.__awaiter)(this,void 0,void 0,function(){var r,i,o,a;return(0,D.__generator)(this,function(c){switch(c.label){case 0:r=Ne(e),i=r.kn.get(t),o=n?"readwrite":"readwrite-primary",c.label=1;case 1:return c.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(d){return r.persistence.referenceDelegate.removeTarget(d,i)})];case 2:c.sent(),c.label=3;case 3:return[3,5];case 4:if(!Tf(a=c.sent()))throw a;return Ae("LocalStore","Failed to update sequence numbers for target "+t+": "+a),[3,5];case 5:return r.kn=r.kn.remove(t),r.Fn.delete(i.target),[2]}})})}function vb(e,t,n){var r=Ne(e),i=Ht.min(),o=_n();return r.persistence.runTransaction("Execute query","readonly",function(a){return(c=r,d=a,m=ys(t),v=Ne(c),w=v.Fn.get(m),void 0!==w?De.resolve(v.kn.get(w)):v.qe.getTargetData(d,m)).next(function(c){if(c)return i=c.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(a,c.targetId).next(function(d){o=d})}).next(function(){return r.xn.getDocumentsMatchingQuery(a,t,n?i:Ht.min(),n?o:_n())}).next(function(c){return{documents:c,Bn:o}});var c,d,m,v,w})}function OB(e,t){var n=Ne(e),r=Ne(n.qe),i=n.kn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(o){return r.lt(o,t).next(function(a){return a?a.target:null})})}function PB(e){var t=Ne(e);return t.persistence.runTransaction("Get new document changes","readonly",function(n){return i=n,o=t.$n,a=Ne(t.On),c=_s(),d=U1(o),m=el(i),v=IDBKeyRange.lowerBound(d,!0),m.$t({index:or.readTimeIndex,range:v},function(w,C){var S=V1(a.R,C);c=c.insert(S.key,S),d=C.readTime}).next(function(){return{wn:c,readTime:pB(d)}});var i,o,a,c,d,m,v}).then(function(n){var r=n.wn;return t.$n=n.readTime,r})}function One(e){return(0,D.__awaiter)(this,void 0,void 0,function(){var t;return(0,D.__generator)(this,function(n){return[2,(t=Ne(e)).persistence.runTransaction("Synchronize last document change read time","readonly",function(r){return o=el(r),a=Ht.min(),o.$t({index:or.readTimeIndex,reverse:!0},function(c,d,m){d.readTime&&(a=pB(d.readTime)),m.done()}).next(function(){return a});var o,a}).then(function(r){t.$n=r})]})})}function Pne(e,t,n,r){return(0,D.__awaiter)(this,void 0,void 0,function(){var i,o,a,c,d,m,v,w,C,S;return(0,D.__generator)(this,function(A){switch(A.label){case 0:for(i=Ne(e),o=_n(),a=_s(),c=jj(),d=0,m=n;d<m.length;d++)w=t.qn((v=m[d]).metadata.name),v.document&&(o=o.add(w)),a=a.insert(w,t.Un(v)),c=c.insert(w,t.Kn(v.metadata.readTime));return C=i.On.newChangeBuffer({trackRemovals:!0}),[4,ip(i,(x=r,ys($d(cn.fromString("__bundle__/docs/"+x)))))];case 1:return S=A.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(x){return xB(x,C,a,Ht.min(),c).next(function(V){return C.apply(x),V}).next(function(V){return i.qe.removeMatchingKeysForTargetId(x,S.targetId).next(function(){return i.qe.addMatchingKeys(x,o,S.targetId)}).next(function(){return i.Mn.En(x,V)}).next(function(){return V})})})]}var x})})}function Fne(e,t,n){return void 0===n&&(n=_n()),(0,D.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,D.__generator)(this,function(o){switch(o.label){case 0:return[4,ip(e,ys(j1(t.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Ne(e)).persistence.runTransaction("Save named query","readwrite",function(a){var c=oi(t.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ke.saveNamedQuery(a,t);var d=r.withResumeToken(ao.EMPTY_BYTE_STRING,c);return i.kn=i.kn.insert(d.targetId,d),i.qe.updateTargetData(a,d).next(function(){return i.qe.removeMatchingKeysForTargetId(a,r.targetId)}).next(function(){return i.qe.addMatchingKeys(a,n,r.targetId)}).next(function(){return i.Ke.saveNamedQuery(a,t)})})]}})})}var Lne=function(){function e(t){this.R=t,this.Qn=new Map,this.jn=new Map}return e.prototype.getBundleMetadata=function(t,n){return De.resolve(this.Qn.get(n))},e.prototype.saveBundleMetadata=function(t,n){var r;return this.Qn.set(n.id,{id:(r=n).id,version:r.version,createTime:oi(r.createTime)}),De.resolve()},e.prototype.getNamedQuery=function(t,n){return De.resolve(this.jn.get(n))},e.prototype.saveNamedQuery=function(t,n){return this.jn.set(n.name,{name:(r=n).name,query:j1(r.bundledQuery),readTime:oi(r.readTime)}),De.resolve();var r},e}(),q1=function(){function e(){this.Wn=new zr(si.Gn),this.zn=new zr(si.Hn)}return e.prototype.isEmpty=function(){return this.Wn.isEmpty()},e.prototype.addReference=function(t,n){var r=new si(t,n);this.Wn=this.Wn.add(r),this.zn=this.zn.add(r)},e.prototype.Jn=function(t,n){var r=this;t.forEach(function(i){return r.addReference(i,n)})},e.prototype.removeReference=function(t,n){this.Yn(new si(t,n))},e.prototype.Xn=function(t,n){var r=this;t.forEach(function(i){return r.removeReference(i,n)})},e.prototype.Zn=function(t){var n=this,r=new nt(new cn([])),i=new si(r,t),o=new si(r,t+1),a=[];return this.zn.forEachInRange([i,o],function(c){n.Yn(c),a.push(c.key)}),a},e.prototype.ts=function(){var t=this;this.Wn.forEach(function(n){return t.Yn(n)})},e.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},e.prototype.es=function(t){var n=new nt(new cn([])),r=new si(n,t),i=new si(n,t+1),o=_n();return this.zn.forEachInRange([r,i],function(a){o=o.add(a.key)}),o},e.prototype.containsKey=function(t){var n=new si(t,0),r=this.Wn.firstAfterOrEqual(n);return null!==r&&t.isEqual(r.key)},e}(),si=function(){function e(t,n){this.key=t,this.ns=n}return e.Gn=function(t,n){return nt.comparator(t.key,n.key)||Yt(t.ns,n.ns)},e.Hn=function(t,n){return Yt(t.ns,n.ns)||nt.comparator(t.key,n.key)},e}(),Vne=function(){function e(t,n){this.Ut=t,this.referenceDelegate=n,this._n=[],this.ss=1,this.rs=new zr(si.Gn)}return e.prototype.checkEmpty=function(t){return De.resolve(0===this._n.length)},e.prototype.addMutationBatch=function(t,n,r,i){var o=this.ss;this.ss++;var a=new L1(o,n,r,i);this._n.push(a);for(var c=0,d=i;c<d.length;c++){var m=d[c];this.rs=this.rs.add(new si(m.key,o)),this.Ut.addToCollectionParentIndex(t,m.key.path.popLast())}return De.resolve(a)},e.prototype.lookupMutationBatch=function(t,n){return De.resolve(this.os(n))},e.prototype.getNextMutationBatchAfterBatchId=function(t,n){var i=this.cs(n+1),o=i<0?0:i;return De.resolve(this._n.length>o?this._n[o]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return De.resolve(0===this._n.length?-1:this.ss-1)},e.prototype.getAllMutationBatches=function(t){return De.resolve(this._n.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,n){var r=this,i=new si(n,0),o=new si(n,Number.POSITIVE_INFINITY),a=[];return this.rs.forEachInRange([i,o],function(c){var d=r.os(c.ns);a.push(d)}),De.resolve(a)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,n){var r=this,i=new zr(Yt);return n.forEach(function(o){var a=new si(o,0),c=new si(o,Number.POSITIVE_INFINITY);r.rs.forEachInRange([a,c],function(d){i=i.add(d.ns)})}),De.resolve(this.us(i))},e.prototype.getAllMutationBatchesAffectingQuery=function(t,n){var r=n.path,i=r.length+1,o=r;nt.isDocumentKey(o)||(o=o.child(""));var a=new si(new nt(o),0),c=new zr(Yt);return this.rs.forEachWhile(function(d){var m=d.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(c=c.add(d.ns)),!0)},a),De.resolve(this.us(c))},e.prototype.us=function(t){var n=this,r=[];return t.forEach(function(i){var o=n.os(i);null!==o&&r.push(o)}),r},e.prototype.removeMutationBatch=function(t,n){var r=this;vt(0===this.hs(n.batchId,"removed")),this._n.shift();var i=this.rs;return De.forEach(n.mutations,function(o){var a=new si(o.key,n.batchId);return i=i.delete(a),r.referenceDelegate.markPotentiallyOrphaned(t,o.key)}).next(function(){r.rs=i})},e.prototype.Gt=function(t){},e.prototype.containsKey=function(t,n){var r=new si(n,0),i=this.rs.firstAfterOrEqual(r);return De.resolve(n.isEqual(i&&i.key))},e.prototype.performConsistencyCheck=function(t){return De.resolve()},e.prototype.hs=function(t,n){return this.cs(t)},e.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},e.prototype.os=function(t){var n=this.cs(t);return n<0||n>=this._n.length?null:this._n[n]},e}(),Une=function(){function e(t,n){this.Ut=t,this.ls=n,this.docs=new Pi(nt.comparator),this.size=0}return e.prototype.addEntry=function(t,n,r){var i=n.key,o=this.docs.get(i),a=o?o.size:0,c=this.ls(n);return this.docs=this.docs.insert(i,{document:n.clone(),size:c,readTime:r}),this.size+=c-a,this.Ut.addToCollectionParentIndex(t,i.path.popLast())},e.prototype.removeEntry=function(t){var n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)},e.prototype.getEntry=function(t,n){var r=this.docs.get(n);return De.resolve(r?r.document.clone():yi.newInvalidDocument(n))},e.prototype.getEntries=function(t,n){var r=this,i=_s();return n.forEach(function(o){var a=r.docs.get(o);i=i.insert(o,a?a.document.clone():yi.newInvalidDocument(o))}),De.resolve(i)},e.prototype.getDocumentsMatchingQuery=function(t,n,r){for(var i=_s(),o=new nt(n.path.child("")),a=this.docs.getIteratorFrom(o);a.hasNext();){var c=a.getNext(),m=c.value,v=m.document,w=m.readTime;if(!n.path.isPrefixOf(c.key.path))break;w.compareTo(r)<=0||fv(n,v)&&(i=i.insert(v.key,v.clone()))}return De.resolve(i)},e.prototype.fs=function(t,n){return De.forEach(this.docs,function(r){return n(r)})},e.prototype.newChangeBuffer=function(t){return new jne(this)},e.prototype.getSize=function(t){return De.resolve(this.size)},e}(),jne=function(e){function t(n){var r=this;return(r=e.call(this)||this).Ie=n,r}return(0,D.__extends)(t,e),t.prototype.applyChanges=function(n){var r=this,i=[];return this.changes.forEach(function(o,a){a.document.isValidDocument()?i.push(r.Ie.addEntry(n,a.document,r.getReadTime(o))):r.Ie.removeEntry(o)}),De.waitFor(i)},t.prototype.getFromCache=function(n,r){return this.Ie.getEntry(n,r)},t.prototype.getAllFromCache=function(n,r){return this.Ie.getEntries(n,r)},t}(IB),Bne=function(){function e(t){this.persistence=t,this.ds=new rp(function(n){return uv(n)},Zw),this.lastRemoteSnapshotVersion=Ht.min(),this.highestTargetId=0,this.ws=0,this._s=new q1,this.targetCount=0,this.ys=db.Jt()}return e.prototype.forEachTarget=function(t,n){return this.ds.forEach(function(r,i){return n(i)}),De.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(t){return De.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(t){return De.resolve(this.ws)},e.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),De.resolve(this.highestTargetId)},e.prototype.setTargetsMetadata=function(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ws&&(this.ws=n),De.resolve()},e.prototype.te=function(t){this.ds.set(t.target,t);var n=t.targetId;n>this.highestTargetId&&(this.ys=new db(n),this.highestTargetId=n),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},e.prototype.addTargetData=function(t,n){return this.te(n),this.targetCount+=1,De.resolve()},e.prototype.updateTargetData=function(t,n){return this.te(n),De.resolve()},e.prototype.removeTargetData=function(t,n){return this.ds.delete(n.target),this._s.Zn(n.targetId),this.targetCount-=1,De.resolve()},e.prototype.removeTargets=function(t,n,r){var i=this,o=0,a=[];return this.ds.forEach(function(c,d){d.sequenceNumber<=n&&null===r.get(d.targetId)&&(i.ds.delete(c),a.push(i.removeMatchingKeysForTargetId(t,d.targetId)),o++)}),De.waitFor(a).next(function(){return o})},e.prototype.getTargetCount=function(t){return De.resolve(this.targetCount)},e.prototype.getTargetData=function(t,n){var r=this.ds.get(n)||null;return De.resolve(r)},e.prototype.addMatchingKeys=function(t,n,r){return this._s.Jn(n,r),De.resolve()},e.prototype.removeMatchingKeys=function(t,n,r){this._s.Xn(n,r);var i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(function(a){o.push(i.markPotentiallyOrphaned(t,a))}),De.waitFor(o)},e.prototype.removeMatchingKeysForTargetId=function(t,n){return this._s.Zn(n),De.resolve()},e.prototype.getMatchingKeysForTargetId=function(t,n){var r=this._s.es(n);return De.resolve(r)},e.prototype.containsKey=function(t,n){return De.resolve(this._s.containsKey(n))},e}(),Hne=function(){function e(t,n){var r=this;this.gs={},this.Ne=new Yo(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Bne(this),this.Ut=new mne,this.Ue=new Une(this.Ut,function(a){return r.referenceDelegate.ps(a)}),this.R=new hB(n),this.Ke=new Lne(this.R)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(){},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getMutationQueue=function(t){var n=this.gs[t.toKey()];return n||(n=new Vne(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=n),n},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(t,n,r){var i=this;Ae("MemoryPersistence","Starting transaction:",t);var o=new $ne(this.Ne.next());return this.referenceDelegate.Es(),r(o).next(function(a){return i.referenceDelegate.Ts(o).next(function(){return a})}).toPromise().then(function(a){return o.raiseOnCommittedEvent(),a})},e.prototype.Is=function(t,n){return De.or(Object.values(this.gs).map(function(r){return function(){return r.containsKey(t,n)}}))},e}(),$ne=function(e){function t(n){var r=this;return(r=e.call(this)||this).currentSequenceNumber=n,r}return(0,D.__extends)(t,e),t}(uB),qne=function(){function e(t){this.persistence=t,this.As=new q1,this.Rs=null}return e.bs=function(t){return new e(t)},Object.defineProperty(e.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Ze()},enumerable:!1,configurable:!0}),e.prototype.addReference=function(t,n,r){return this.As.addReference(r,n),this.vs.delete(r.toString()),De.resolve()},e.prototype.removeReference=function(t,n,r){return this.As.removeReference(r,n),this.vs.add(r.toString()),De.resolve()},e.prototype.markPotentiallyOrphaned=function(t,n){return this.vs.add(n.toString()),De.resolve()},e.prototype.removeTarget=function(t,n){var r=this;this.As.Zn(n.targetId).forEach(function(o){return r.vs.add(o.toString())});var i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(function(o){o.forEach(function(a){return r.vs.add(a.toString())})}).next(function(){return i.removeTargetData(t,n)})},e.prototype.Es=function(){this.Rs=new Set},e.prototype.Ts=function(t){var n=this,r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return De.forEach(this.vs,function(i){var o=nt.fromPath(i);return n.Ps(t,o).next(function(a){a||r.removeEntry(o)})}).next(function(){return n.Rs=null,r.apply(t)})},e.prototype.updateLimboDocument=function(t,n){var r=this;return this.Ps(t,n).next(function(i){i?r.vs.delete(n.toString()):r.vs.add(n.toString())})},e.prototype.ps=function(t){return 0},e.prototype.Ps=function(t,n){var r=this;return De.or([function(){return De.resolve(r.As.containsKey(n))},function(){return r.persistence.getTargetCache().containsKey(t,n)},function(){return r.persistence.Is(t,n)}])},e}(),wi=function(){function e(t){this.uid=t}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(t){return t.uid===this.uid},e}();function FB(e,t){return"firestore_clients_"+e+"_"+t}function LB(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function G1(e,t){return"firestore_targets_"+e+"_"+t}wi.UNAUTHENTICATED=new wi(null),wi.GOOGLE_CREDENTIALS=new wi("google-credentials-uid"),wi.FIRST_PARTY=new wi("first-party-uid"),wi.MOCK_USER=new wi("mock-user");var VB=function(){function e(t,n,r,i){this.user=t,this.batchId=n,this.state=r,this.error=i}return e.Vs=function(t,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new ve(o.error.code,o.error.message)),a?new e(t,n,o.state,i):(Nr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},e}(),z1=function(){function e(t,n,r){this.targetId=t,this.state=n,this.error=r}return e.Vs=function(t,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new ve(i.error.code,i.error.message)),o?new e(t,i.state,r):(Nr("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},e}(),UB=function(){function e(t,n){this.clientId=t,this.activeTargetIds=n}return e.Vs=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ub(),a=0;i&&a<r.activeTargetIds.length;++a)i=fj(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(Nr("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),Gne=function(){function e(t,n){this.clientId=t,this.onlineState=n}return e.Vs=function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Nr("SharedClientState","Failed to parse online state: "+t),null)},e}(),W1=function(){function e(){this.activeTargetIds=ub()}return e.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},e.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},e.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},e}(),K1=function(){function e(t,n,r,i,o){this.window=t,this.Se=n,this.persistenceKey=r,this.Ns=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Pi(Yt),this.started=!1,this.$s=[];var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Os=FB(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.Fs=this.Fs.insert(this.Ns,new W1),this.Ls=new RegExp("^firestore_clients_"+a+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+a+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+a+"_(\\d+)$"),this.Us="firestore_online_state_"+this.persistenceKey,this.Ks=function(c){return"firestore_bundle_loaded_"+c}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return e.yt=function(t){return!(!t||!t.localStorage)},e.prototype.start=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o,a,c,d,m,v,C=this;return(0,D.__generator)(this,function(S){switch(S.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=S.sent(),n=0,r=t;n<r.length;n++)(i=r[n])!==this.Ns&&(o=this.getItem(FB(this.persistenceKey,i)))&&(a=UB.Vs(i,o))&&(this.Fs=this.Fs.insert(a.clientId,a));for(this.Qs(),(c=this.storage.getItem(this.Us))&&(d=this.js(c))&&this.Ws(d),m=0,v=this.$s;m<v.length;m++)this.ks(v[m]);return this.$s=[],this.window.addEventListener("pagehide",function(){return C.shutdown()}),this.started=!0,[2]}})})},e.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},e.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},e.prototype.isActiveQueryTarget=function(t){var n=!1;return this.Fs.forEach(function(r,i){i.activeTargetIds.has(t)&&(n=!0)}),n},e.prototype.addPendingMutation=function(t){this.zs(t,"pending")},e.prototype.updateMutationState=function(t,n,r){this.zs(t,n,r),this.Hs(t)},e.prototype.addLocalQueryTarget=function(t){var n="not-current";if(this.isActiveQueryTarget(t)){var r=this.storage.getItem(G1(this.persistenceKey,t));if(r){var i=z1.Vs(t,r);i&&(n=i.state)}}return this.Js.Ds(t),this.Qs(),n},e.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},e.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},e.prototype.clearQueryState=function(t){this.removeItem(G1(this.persistenceKey,t))},e.prototype.updateQueryState=function(t,n,r){this.Ys(t,n,r)},e.prototype.handleUserChange=function(t,n,r){var i=this;n.forEach(function(o){i.Hs(o)}),this.currentUser=t,r.forEach(function(o){i.addPendingMutation(o)})},e.prototype.setOnlineState=function(t){this.Xs(t)},e.prototype.notifyBundleLoaded=function(){this.Zs()},e.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},e.prototype.getItem=function(t){var n=this.storage.getItem(t);return Ae("SharedClientState","READ",t,n),n},e.prototype.setItem=function(t,n){Ae("SharedClientState","SET",t,n),this.storage.setItem(t,n)},e.prototype.removeItem=function(t){Ae("SharedClientState","REMOVE",t),this.storage.removeItem(t)},e.prototype.ks=function(t){var n=this,r=t;if(r.storageArea===this.storage){if(Ae("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Os)return void Nr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,D.__awaiter)(n,void 0,void 0,function(){var i,o,a,c,d,m;return(0,D.__generator)(this,function(v){if(this.started){if(null!==r.key)if(this.Ls.test(r.key)){if(null==r.newValue)return i=this.ti(r.key),[2,this.ei(i,null)];if(o=this.ni(r.key,r.newValue))return[2,this.ei(o.clientId,o)]}else if(this.Bs.test(r.key)){if(null!==r.newValue&&(a=this.si(r.key,r.newValue)))return[2,this.ii(a)]}else if(this.qs.test(r.key)){if(null!==r.newValue&&(c=this.ri(r.key,r.newValue)))return[2,this.oi(c)]}else if(r.key===this.Us){if(null!==r.newValue&&(d=this.js(r.newValue)))return[2,this.Ws(d)]}else if(r.key===this.Ms)(m=function(w){var C=Yo.o;if(null!=w)try{var S=JSON.parse(w);vt("number"==typeof S),C=S}catch(A){Nr("SharedClientState","Failed to read sequence number from WebStorage",A)}return C}(r.newValue))!==Yo.o&&this.sequenceNumberHandler(m);else if(r.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(r);return[2]})})})}},Object.defineProperty(e.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),e.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},e.prototype.zs=function(t,n,r){var i=new VB(this.currentUser,t,n,r),o=LB(this.persistenceKey,this.currentUser,t);this.setItem(o,i.Ss())},e.prototype.Hs=function(t){var n=LB(this.persistenceKey,this.currentUser,t);this.removeItem(n)},e.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},e.prototype.Ys=function(t,n,r){var i=G1(this.persistenceKey,t),o=new z1(t,n,r);this.setItem(i,o.Ss())},e.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},e.prototype.ti=function(t){var n=this.Ls.exec(t);return n?n[1]:null},e.prototype.ni=function(t,n){var r=this.ti(t);return UB.Vs(r,n)},e.prototype.si=function(t,n){var r=this.Bs.exec(t),i=Number(r[1]);return VB.Vs(new wi(void 0!==r[2]?r[2]:null),i,n)},e.prototype.ri=function(t,n){var r=this.qs.exec(t),i=Number(r[1]);return z1.Vs(i,n)},e.prototype.js=function(t){return Gne.Vs(t)},e.prototype.ii=function(t){return(0,D.__awaiter)(this,void 0,void 0,function(){return(0,D.__generator)(this,function(n){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Ae("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},e.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},e.prototype.ei=function(t,n){var r=this,i=n?this.Fs.insert(t,n):this.Fs.remove(t),o=this.Gs(this.Fs),a=this.Gs(i),c=[],d=[];return a.forEach(function(m){o.has(m)||c.push(m)}),o.forEach(function(m){a.has(m)||d.push(m)}),this.syncEngine.hi(c,d).then(function(){r.Fs=i})},e.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},e.prototype.Gs=function(t){var n=ub();return t.forEach(function(r,i){n=n.unionWith(i.activeTargetIds)}),n},e}(),jB=function(){function e(){this.li=new W1,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(t){},e.prototype.updateMutationState=function(t,n,r){},e.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},e.prototype.updateQueryState=function(t,n,r){this.fi[t]=n},e.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},e.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},e.prototype.clearQueryState=function(t){delete this.fi[t]},e.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},e.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},e.prototype.start=function(){return this.li=new W1,Promise.resolve()},e.prototype.handleUserChange=function(t,n,r){},e.prototype.setOnlineState=function(t){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(t){},e.prototype.notifyBundleLoaded=function(){},e}(),zne=function(){function e(){}return e.prototype.di=function(t){},e.prototype.shutdown=function(){},e}(),BB=function(){function e(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return e.prototype.di=function(t){this.gi.push(t)},e.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},e.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},e.prototype._i=function(){Ae("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,n=this.gi;t<n.length;t++)(0,n[t])(0)},e.prototype.yi=function(){Ae("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,n=this.gi;t<n.length;t++)(0,n[t])(1)},e.yt=function(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),Wne={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Kne=function(){function e(t){this.Ei=t.Ei,this.Ti=t.Ti}return e.prototype.Ii=function(t){this.Ai=t},e.prototype.Ri=function(t){this.bi=t},e.prototype.onMessage=function(t){this.vi=t},e.prototype.close=function(){this.Ti()},e.prototype.send=function(t){this.Ei(t)},e.prototype.Pi=function(){this.Ai()},e.prototype.Vi=function(t){this.bi(t)},e.prototype.Si=function(t){this.vi(t)},e}(),Qne=function(e){function t(n){var r=this;return(r=e.call(this,n)||this).forceLongPolling=n.forceLongPolling,r.autoDetectLongPolling=n.autoDetectLongPolling,r.useFetchStreams=n.useFetchStreams,r}return(0,D.__extends)(t,e),t.prototype.Fi=function(n,r,i,o){return new Promise(function(a,c){var d=new ij;d.listenOnce(tj.COMPLETE,function(){try{switch(d.getLastErrorCode()){case Qw.NO_ERROR:var v=d.getResponseJson();Ae("Connection","XHR received:",JSON.stringify(v)),a(v);break;case Qw.TIMEOUT:Ae("Connection",'RPC "'+n+'" timed out'),c(new ve(X.DEADLINE_EXCEEDED,"Request time out"));break;case Qw.HTTP_ERROR:var w=d.getStatus();if(Ae("Connection",'RPC "'+n+'" failed with status:',w,"response text:",d.getResponseText()),w>0){var C=d.getResponseJson().error;if(C&&C.status&&C.message){var S=(x=C.status.toLowerCase().replace(/_/g,"-"),Object.values(X).indexOf(x)>=0?x:X.UNKNOWN);c(new ve(S,C.message))}else c(new ve(X.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new ve(X.UNAVAILABLE,"Connection failed."));break;default:Ze()}}finally{Ae("Connection",'RPC "'+n+'" completed.')}var x});var m=JSON.stringify(o);d.send(r,"POST",m,i,15)})},t.prototype.Oi=function(n,r){var i=[this.Di,"/","google.firestore.v1.Firestore","/",n,"/channel"],o=new Kw,a=xw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(c.xmlHttpFactory=new rj({})),this.ki(c.initMessageHeaders,r),(0,ze.isMobileCordova)()||(0,ze.isReactNative)()||(0,ze.isElectron)()||(0,ze.isIE)()||(0,ze.isUWP)()||(0,ze.isBrowserExtension)()||(c.httpHeadersOverwriteParam="$httpHeaders");var d=i.join("");Ae("Connection","Creating WebChannel: "+d,c);var m=o.createWebChannel(d,c),v=!1,w=!1,C=new Kne({Ei:function(A){w?Ae("Connection","Not sending because WebChannel is closed:",A):(v||(Ae("Connection","Opening WebChannel transport."),m.open(),v=!0),Ae("Connection","WebChannel sending:",A),m.send(A))},Ti:function(){return m.close()}}),S=function(A,x,V){A.listen(x,function(H){try{V(H)}catch(K){setTimeout(function(){throw K},0)}})};return S(m,rv.EventType.OPEN,function(){w||Ae("Connection","WebChannel transport opened.")}),S(m,rv.EventType.CLOSE,function(){w||(w=!0,Ae("Connection","WebChannel transport closed"),C.Vi())}),S(m,rv.EventType.ERROR,function(A){w||(w=!0,iv("Connection","WebChannel transport errored:",A),C.Vi(new ve(X.UNAVAILABLE,"The operation could not be completed")))}),S(m,rv.EventType.MESSAGE,function(A){var x;if(!w){var V=A.data[0];vt(!!V);var K=V.error||(null===(x=V[0])||void 0===x?void 0:x.error);if(K){Ae("Connection","WebChannel received error:",K);var q=K.status,fe=function(he){var pn=xr[he];if(void 0!==pn)return Vj(pn)}(q),Se=K.message;void 0===fe&&(fe=X.INTERNAL,Se="Unknown error status: "+q+" with message "+K.message),w=!0,C.Vi(new ve(fe,Se)),m.close()}else Ae("Connection","WebChannel received:",V),C.Si(V)}}),S(a,nj.STAT_EVENT,function(A){A.stat===v1_PROXY?Ae("Connection","Detected buffering proxy"):A.stat===v1_NOPROXY&&Ae("Connection","Detected no buffering proxy")}),setTimeout(function(){C.Pi()},0),C},t}(function(){function e(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e.prototype.Ni=function(t,n,r,i){var o=this.xi(t,n);Ae("RestConnection","Sending: ",o,r);var a={};return this.ki(a,i),this.Fi(t,o,a,r).then(function(c){return Ae("RestConnection","Received: ",c),c},function(c){throw iv("RestConnection",t+" failed with error: ",c,"url: ",o,"request:",r),c})},e.prototype.$i=function(t,n,r,i){return this.Ni(t,n,r,i)},e.prototype.ki=function(t,n){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n)for(var r in n.authHeaders)n.authHeaders.hasOwnProperty(r)&&(t[r]=n.authHeaders[r])},e.prototype.xi=function(t,n){return this.Di+"/v1/"+n+":"+Wne[t]},e}());function HB(){return typeof window<"u"?window:null}function yb(){return typeof document<"u"?document:null}function bv(e){return new ene(e,!0)}var Q1=function(){function e(t,n,r,i,o){void 0===r&&(r=1e3),void 0===i&&(i=1.5),void 0===o&&(o=6e4),this.Se=t,this.timerId=n,this.Mi=r,this.Li=i,this.Bi=o,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return e.prototype.reset=function(){this.qi=0},e.prototype.Qi=function(){this.qi=this.Bi},e.prototype.ji=function(t){var n=this;this.cancel();var r=Math.floor(this.qi+this.Wi()),i=Math.max(0,Date.now()-this.Ki),o=Math.max(0,r-i);o>0&&Ae("ExponentialBackoff","Backing off for "+o+" ms (base delay: "+this.qi+" ms, delay with jitter: "+r+" ms, last attempt: "+i+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,o,function(){return n.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},e.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},e.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},e.prototype.Wi=function(){return(Math.random()-.5)*this.qi},e}(),$B=function(){function e(t,n,r,i,o,a){this.Se=t,this.zi=r,this.Hi=i,this.Ji=o,this.listener=a,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Q1(t,n)}return e.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},e.prototype.er=function(){return 2===this.state},e.prototype.start=function(){3!==this.state?this.auth():this.nr()},e.prototype.stop=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){return(0,D.__generator)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.sr=function(){this.state=0,this.Zi.reset()},e.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},e.prototype.cr=function(t){this.ur(),this.stream.send(t)},e.prototype.rr=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){return(0,D.__generator)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},e.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},e.prototype.close=function(t,n){return(0,D.__awaiter)(this,void 0,void 0,function(){return(0,D.__generator)(this,function(r){switch(r.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(Nr(n.toString()),Nr("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):n&&n.code===X.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(n)];case 1:return r.sent(),[2]}})})},e.prototype.ar=function(){},e.prototype.auth=function(){var t=this;this.state=1;var n=this.hr(this.Yi),r=this.Yi;this.Ji.getToken().then(function(i){t.Yi===r&&t.lr(i)},function(i){n(function(){var o=new ve(X.UNKNOWN,"Fetching auth token failed: "+i.message);return t.dr(o)})})},e.prototype.lr=function(t){var n=this,r=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){r(function(){return n.state=2,n.listener.Ii()})}),this.stream.Ri(function(i){r(function(){return n.dr(i)})}),this.stream.onMessage(function(i){r(function(){return n.onMessage(i)})})},e.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,D.__awaiter)(t,void 0,void 0,function(){return(0,D.__generator)(this,function(n){return this.state=0,this.start(),[2]})})})},e.prototype.dr=function(t){return Ae("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},e.prototype.hr=function(t){var n=this;return function(r){n.Se.enqueueAndForget(function(){return n.Yi===t?r():(Ae("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e}(),Yne=function(e){function t(n,r,i,o,a){var c=this;return(c=e.call(this,n,"listen_stream_connection_backoff","listen_stream_idle",r,i,a)||this).R=o,c}return(0,D.__extends)(t,e),t.prototype.wr=function(n){return this.Hi.Oi("Listen",n)},t.prototype.onMessage=function(n){this.Zi.reset();var r=function(o,a){var c,V;if("targetChange"in a){var d="NO_CHANGE"===(V=a.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===V?1:"REMOVE"===V?2:"CURRENT"===V?3:"RESET"===V?4:Ze(),m=a.targetChange.targetIds||[],v=function(V,H){return V.I?(vt(void 0===H||"string"==typeof H),ao.fromBase64String(H||"")):(vt(void 0===H||H instanceof Uint8Array),ao.fromUint8Array(H||new Uint8Array))}(o,a.targetChange.resumeToken),w=(C=a.targetChange.cause)&&function(V){var H=void 0===V.code?X.UNKNOWN:Vj(V.code);return new ve(H,V.message||"")}(C);c=new Hj(d,m,v,w||null)}else if("documentChange"in a){m=Fa(o,(d=a.documentChange).document.name),v=oi(d.document.updateTime);var C=new Xo({mapValue:{fields:d.document.fields}}),S=(w=yi.newFoundDocument(m,v,C),d.targetIds||[]);c=new cb(S,d.removedTargetIds||[],w.key,w)}else if("documentDelete"in a)m=Fa(o,(d=a.documentDelete).document),v=d.readTime?oi(d.readTime):Ht.min(),C=yi.newNoDocument(m,v),c=new cb([],w=d.removedTargetIds||[],C.key,C);else if("documentRemove"in a)m=Fa(o,(d=a.documentRemove).document),c=new cb([],v=d.removedTargetIds||[],m,null);else{if(!("filter"in a))return Ze();var x=a.filter;m=new Gte(d=x.count||0),c=new Bj(v=x.targetId,m)}return c}(this.R,n),i=function(o){if(!("targetChange"in o))return Ht.min();var a=o.targetChange;return a.targetIds&&a.targetIds.length?Ht.min():a.readTime?oi(a.readTime):Ht.min()}(n);return this.listener._r(r,i)},t.prototype.mr=function(n){var o,a,c,d,r={};r.database=vv(this.R),r.addTarget=(o=this.R,(c=eb(d=(a=n).target)?{documents:Zj(o,d)}:{query:eB(o,d)}).targetId=a.targetId,a.resumeToken.approximateByteSize()>0?c.resumeToken=zj(o,a.resumeToken):a.snapshotVersion.compareTo(Ht.min())>0&&(c.readTime=gv(o,a.snapshotVersion.toTimestamp())),c);var i=function(o,a){var c=function(d,m){switch(m){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ze()}}(0,a.purpose);return null==c?null:{"goog-listen-tags":c}}(0,n);i&&(r.labels=i),this.cr(r)},t.prototype.yr=function(n){var r={};r.database=vv(this.R),r.removeTarget=n,this.cr(r)},t}($B),Xne=function(e){function t(n,r,i,o,a){var c=this;return(c=e.call(this,n,"write_stream_connection_backoff","write_stream_idle",r,i,a)||this).R=o,c.gr=!1,c}return(0,D.__extends)(t,e),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(n){return this.Hi.Oi("Write",n)},t.prototype.onMessage=function(n){if(vt(!!n.streamToken),this.lastStreamToken=n.streamToken,this.gr){this.Zi.reset();var r=(a=n.commitTime,(o=n.writeResults)&&o.length>0?(vt(void 0!==a),o.map(function(c){return m=a,(v=oi((d=c).updateTime?d.updateTime:m)).isEqual(Ht.min())&&(v=oi(m)),new Hte(v,d.transformResults||[]);var d,m,v})):[]),i=oi(n.commitTime);return this.listener.Tr(i,r)}var o,a;return vt(!n.writeResults||0===n.writeResults.length),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var n={};n.database=vv(this.R),this.cr(n)},t.prototype.Er=function(n){var r=this,i={streamToken:this.lastStreamToken,writes:n.map(function(o){return lb(r.R,o)})};this.cr(i)},t}($B),Jne=function(e){function t(n,r,i){var o=this;return(o=e.call(this)||this).credentials=n,o.Hi=r,o.R=i,o.Rr=!1,o}return(0,D.__extends)(t,e),t.prototype.br=function(){if(this.Rr)throw new ve(X.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(n,r,i){var o=this;return this.br(),this.credentials.getToken().then(function(a){return o.Hi.Ni(n,r,i,a)}).catch(function(a){throw"FirebaseError"===a.name?(a.code===X.UNAUTHENTICATED&&o.credentials.invalidateToken(),a):new ve(X.UNKNOWN,a.toString())})},t.prototype.$i=function(n,r,i){var o=this;return this.br(),this.credentials.getToken().then(function(a){return o.Hi.$i(n,r,i,a)}).catch(function(a){throw"FirebaseError"===a.name?(a.code===X.UNAUTHENTICATED&&o.credentials.invalidateToken(),a):new ve(X.UNKNOWN,a.toString())})},t.prototype.terminate=function(){this.Rr=!0},t}(function(){}),Zne=function(){function e(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return e.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},e.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},e.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},e.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},e.prototype.Cr=function(t){var n="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Nr(n),this.Vr=!1):Ae("OnlineStateTracker",n)},e.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},e}(),ere=function(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(a){n.enqueueAndForget(function(){return(0,D.__awaiter)(o,void 0,void 0,function(){return(0,D.__generator)(this,function(c){switch(c.label){case 0:return tl(this)?(Ae("RemoteStore","Restarting streams for network reachability change."),[4,function(d){return(0,D.__awaiter)(this,void 0,void 0,function(){var m;return(0,D.__generator)(this,function(v){switch(v.label){case 0:return(m=Ne(d)).Or.add(4),[4,sp(m)];case 1:return v.sent(),m.Br.set("Unknown"),m.Or.delete(4),[4,Ev(m)];case 2:return v.sent(),[2]}})})}(this)]):[3,2];case 1:c.sent(),c.label=2;case 2:return[2]}})})})}),this.Br=new Zne(n,r)};function Ev(e){return(0,D.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,D.__generator)(this,function(r){switch(r.label){case 0:if(!tl(e))return[3,4];t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function sp(e){return(0,D.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,D.__generator)(this,function(r){switch(r.label){case 0:t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function _b(e,t){var n=Ne(e);n.$r.has(t.targetId)||(n.$r.set(t.targetId,t),J1(n)?X1(n):up(n).er()&&Y1(n,t))}function Cv(e,t){var n=Ne(e),r=up(n);n.$r.delete(t),r.er()&&qB(n,t),0===n.$r.size&&(r.er()?r.ir():tl(n)&&n.Br.set("Unknown"))}function Y1(e,t){e.qr.U(t.targetId),up(e).mr(t)}function qB(e,t){e.qr.U(t),up(e).yr(t)}function X1(e){e.qr=new Xte({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.$r.get(t)||null}}),up(e).start(),e.Br.Sr()}function J1(e){return tl(e)&&!up(e).tr()&&e.$r.size>0}function tl(e){return 0===Ne(e).Or.size}function GB(e){e.qr=void 0}function tre(e){return(0,D.__awaiter)(this,void 0,void 0,function(){return(0,D.__generator)(this,function(t){return e.$r.forEach(function(n,r){Y1(e,n)}),[2]})})}function nre(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){return(0,D.__generator)(this,function(n){return GB(e),J1(e)?(e.Br.Nr(t),X1(e)):e.Br.set("Unknown"),[2]})})}function rre(e,t,n){return(0,D.__awaiter)(this,void 0,void 0,function(){var r,i,o;return(0,D.__generator)(this,function(a){switch(a.label){case 0:if(e.Br.set("Online"),!(t instanceof Hj&&2===t.state&&t.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(c,d){return(0,D.__awaiter)(this,void 0,void 0,function(){var m,v,w,C;return(0,D.__generator)(this,function(S){switch(S.label){case 0:m=d.cause,v=0,w=d.targetIds,S.label=1;case 1:return v<w.length?c.$r.has(C=w[v])?[4,c.remoteSyncer.rejectListen(C,m)]:[3,3]:[3,5];case 2:S.sent(),c.$r.delete(C),c.qr.removeTarget(C),S.label=3;case 3:S.label=4;case 4:return v++,[3,1];case 5:return[2]}})})}(e,t)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),Ae("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,wb(e,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof cb?e.qr.X(t):t instanceof Bj?e.qr.rt(t):e.qr.et(t),n.isEqual(Ht.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,kB(e.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,(c=e,d=n,m=c.qr.ut(d),m.targetChanges.forEach(function(v,w){if(v.resumeToken.approximateByteSize()>0){var C=c.$r.get(w);C&&c.$r.set(w,C.withResumeToken(v.resumeToken,d))}}),m.targetMismatches.forEach(function(v){var w=c.$r.get(v);if(w){c.$r.set(v,w.withResumeToken(ao.EMPTY_BYTE_STRING,w.snapshotVersion)),qB(c,v);var C=new fb(w.target,v,1,w.sequenceNumber);Y1(c,C)}}),c.remoteSyncer.applyRemoteEvent(m))]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return Ae("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,wb(e,o)];case 12:return a.sent(),[3,13];case 13:return[2]}var c,d,m})})}function wb(e,t,n){return(0,D.__awaiter)(this,void 0,void 0,function(){var r=this;return(0,D.__generator)(this,function(i){switch(i.label){case 0:if(!Tf(t))throw t;return e.Or.add(1),[4,sp(e)];case 1:return i.sent(),e.Br.set("Offline"),n||(n=function(){return kB(e.localStore)}),e.asyncQueue.enqueueRetryable(function(){return(0,D.__awaiter)(r,void 0,void 0,function(){return(0,D.__generator)(this,function(o){switch(o.label){case 0:return Ae("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return o.sent(),e.Or.delete(1),[4,Ev(e)];case 2:return o.sent(),[2]}})})}),[2]}})})}function zB(e,t){return t().catch(function(n){return wb(e,n,t)})}function ap(e){return(0,D.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o;return(0,D.__generator)(this,function(a){switch(a.label){case 0:t=Ne(e),n=nl(t),r=t.Fr.length>0?t.Fr[t.Fr.length-1].batchId:-1,a.label=1;case 1:if(!(tl(c=t)&&c.Fr.length<10))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,xne(t.localStore,r)];case 3:return null===(i=a.sent())?(0===t.Fr.length&&n.ir(),[3,7]):(r=i.batchId,function(c,d){c.Fr.push(d);var m=nl(c);m.er()&&m.pr&&m.Er(d.mutations)}(t,i),[3,6]);case 4:return o=a.sent(),[4,wb(t,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return WB(t)&&KB(t),[2]}var c})})}function WB(e){return tl(e)&&!nl(e).tr()&&e.Fr.length>0}function KB(e){nl(e).start()}function ire(e){return(0,D.__awaiter)(this,void 0,void 0,function(){return(0,D.__generator)(this,function(t){return nl(e).Ar(),[2]})})}function ore(e){return(0,D.__awaiter)(this,void 0,void 0,function(){var t,n,r;return(0,D.__generator)(this,function(o){for(t=nl(e),n=0,r=e.Fr;n<r.length;n++)t.Er(r[n].mutations);return[2]})})}function sre(e,t,n){return(0,D.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,D.__generator)(this,function(o){switch(o.label){case 0:return r=e.Fr.shift(),i=pne.from(r,t,n),[4,zB(e,function(){return e.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,ap(e)];case 2:return o.sent(),[2]}})})}function are(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){return(0,D.__generator)(this,function(n){switch(n.label){case 0:return t&&nl(e).pr?[4,function(r,i){return(0,D.__awaiter)(this,void 0,void 0,function(){var o,a;return(0,D.__generator)(this,function(c){switch(c.label){case 0:return Lj(a=i.code)&&a!==X.ABORTED?(o=r.Fr.shift(),nl(r).sr(),[4,zB(r,function(){return r.remoteSyncer.rejectFailedWrite(o.batchId,i)})]):[3,3];case 1:return c.sent(),[4,ap(r)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return WB(e)&&KB(e),[2]}})})}function Z1(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n;return(0,D.__generator)(this,function(r){switch(r.label){case 0:return n=Ne(e),t?(n.Or.delete(2),[4,Ev(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Or.add(2),[4,sp(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function up(e){var n,r,i,o,t=this;return e.Ur||(e.Ur=(n=e.datastore,r=e.asyncQueue,i={Ii:tre.bind(null,e),Ri:nre.bind(null,e),_r:rre.bind(null,e)},(o=Ne(n)).br(),new Yne(r,o.Hi,o.credentials,o.R,i)),e.Mr.push(function(n){return(0,D.__awaiter)(t,void 0,void 0,function(){return(0,D.__generator)(this,function(r){switch(r.label){case 0:return n?(e.Ur.sr(),J1(e)?X1(e):e.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Ur.stop()];case 2:r.sent(),GB(e),r.label=3;case 3:return[2]}})})})),e.Ur}function nl(e){var n,r,i,o,t=this;return e.Kr||(e.Kr=(n=e.datastore,r=e.asyncQueue,i={Ii:ire.bind(null,e),Ri:are.bind(null,e),Ir:ore.bind(null,e),Tr:sre.bind(null,e)},(o=Ne(n)).br(),new Xne(r,o.Hi,o.credentials,o.R,i)),e.Mr.push(function(n){return(0,D.__awaiter)(t,void 0,void 0,function(){return(0,D.__generator)(this,function(r){switch(r.label){case 0:return n?(e.Kr.sr(),[4,ap(e)]):[3,2];case 1:return r.sent(),[3,4];case 2:return[4,e.Kr.stop()];case 3:r.sent(),e.Fr.length>0&&(Ae("RemoteStore","Stopping write stream with "+e.Fr.length+" pending writes"),e.Fr=[]),r.label=4;case 4:return[2]}})})})),e.Kr}var ure=function(){function e(t,n,r,i,o){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Li,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(a){})}return e.createAndSchedule=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(t){var n=this;this.timerHandle=setTimeout(function(){return n.handleDelayElapsed()},t)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ve(X.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},e.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(n){return t.deferred.resolve(n)})):Promise.resolve()})},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}();function cp(e,t){if(Nr("AsyncQueue",t+": "+e),Tf(e))return new ve(X.UNAVAILABLE,t+": "+e);throw e}var QB=function(){function e(t){this.comparator=t?function(n,r){return t(n,r)||nt.comparator(n.key,r.key)}:function(n,r){return nt.comparator(n.key,r.key)},this.keyedMap=N1(),this.sortedSet=new Pi(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(t){return null!=this.keyedMap.get(t)},e.prototype.get=function(t){return this.keyedMap.get(t)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(t){var n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(n,r){return t(n),!1})},e.prototype.add=function(t){var n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))},e.prototype.delete=function(t){var n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var t=[];return this.forEach(function(n){t.push(n.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),YB=function(){function e(){this.Qr=new Pi(nt.comparator)}return e.prototype.track=function(t){var n=t.doc.key,r=this.Qr.get(n);r?0!==t.type&&3===r.type?this.Qr=this.Qr.insert(n,t):3===t.type&&1!==r.type?this.Qr=this.Qr.insert(n,{type:r.type,doc:t.doc}):2===t.type&&2===r.type?this.Qr=this.Qr.insert(n,{type:2,doc:t.doc}):2===t.type&&0===r.type?this.Qr=this.Qr.insert(n,{type:0,doc:t.doc}):1===t.type&&0===r.type?this.Qr=this.Qr.remove(n):1===t.type&&2===r.type?this.Qr=this.Qr.insert(n,{type:1,doc:r.doc}):0===t.type&&1===r.type?this.Qr=this.Qr.insert(n,{type:2,doc:t.doc}):Ze():this.Qr=this.Qr.insert(n,t)},e.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(n,r){t.push(r)}),t},e}(),bb=function(){function e(t,n,r,i,o,a,c,d){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=d}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach(function(a){o.push({type:0,doc:a})}),new e(t,n,QB.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&lv(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0},e}(),cre=function(){this.Wr=void 0,this.listeners=[]},lre=function(){this.queries=new rp(function(e){return Ej(e)},lv),this.onlineState="Unknown",this.Gr=new Set};function eA(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,a,c,d;return(0,D.__generator)(this,function(m){switch(m.label){case 0:if(n=Ne(e),i=!1,(o=n.queries.get(r=t.query))||(i=!0,o=new cre),!i)return[3,4];m.label=1;case 1:return m.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=m.sent(),[3,4];case 3:return c=m.sent(),d=cp(c,"Initialization of query '"+A1(t.query)+"' failed"),[2,void t.onError(d)];case 4:return n.queries.set(r,o),o.listeners.push(t),t.zr(n.onlineState),o.Wr&&t.Hr(o.Wr)&&nA(n),[2]}})})}function tA(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,a;return(0,D.__generator)(this,function(c){return n=Ne(e),i=!1,(o=n.queries.get(r=t.query))&&(a=o.listeners.indexOf(t))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function fre(e,t){for(var n=Ne(e),r=!1,i=0,o=t;i<o.length;i++){var a=o[i],d=n.queries.get(a.query);if(d){for(var m=0,v=d.listeners;m<v.length;m++)v[m].Hr(a)&&(r=!0);d.Wr=a}}r&&nA(n)}function hre(e,t,n){var r=Ne(e),i=r.queries.get(t);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(t)}function nA(e){e.Gr.forEach(function(t){t.next()})}var rA=function(){function e(t,n,r){this.query=t,this.Jr=n,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=r||{}}return e.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var n=[],r=0,i=t.docChanges;r<i.length;r++){var o=i[r];3!==o.type&&n.push(o)}t=new bb(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var a=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),a=!0):this.eo(t,this.onlineState)&&(this.no(t),a=!0),this.Xr=t,a},e.prototype.onError=function(t){this.Jr.error(t)},e.prototype.zr=function(t){this.onlineState=t;var n=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),n=!0),n},e.prototype.eo=function(t,n){return!t.fromCache||!(this.options.so&&"Offline"!==n||t.docs.isEmpty()&&"Offline"!==n)},e.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},e.prototype.no=function(t){t=bb.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},e}(),dre=function(){function e(t,n){this.payload=t,this.byteLength=n}return e.prototype.io=function(){return"metadata"in this.payload},e}(),XB=function(){function e(t){this.R=t}return e.prototype.qn=function(t){return Fa(this.R,t)},e.prototype.Un=function(t){return t.metadata.exists?Xj(this.R,t.document,!1):yi.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},e.prototype.Kn=function(t){return oi(t)},e}(),pre=function(){function e(t,n,r){this.ro=t,this.localStore=n,this.R=r,this.queries=[],this.documents=[],this.progress=JB(t)}return e.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var n=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++n):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++n),n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null},e.prototype.co=function(t){for(var n=new Map,r=new XB(this.R),i=0,o=t;i<o.length;i++){var a=o[i];if(a.metadata.queries)for(var c=r.qn(a.metadata.name),d=0,m=a.metadata.queries;d<m.length;d++){var v=m[d],w=(n.get(v)||_n()).add(c);n.set(v,w)}}return n},e.prototype.complete=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o;return(0,D.__generator)(this,function(a){switch(a.label){case 0:return[4,Pne(this.localStore,new XB(this.R),this.documents,this.ro.id)];case 1:t=a.sent(),n=this.co(this.documents),r=0,i=this.queries,a.label=2;case 2:return r<i.length?[4,Fne(this.localStore,o=i[r],n.get(o.name))]:[3,5];case 3:a.sent(),a.label=4;case 4:return r++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Ane(Object.assign({},this.progress),t))]}})})},e}();function JB(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var ZB=function(e){this.key=e},e3=function(e){this.key=e},t3=function(){function e(t,n){this.query=t,this.uo=n,this.ao=null,this.current=!1,this.ho=_n(),this.mutatedKeys=_n(),this.lo=Cj(t),this.fo=new QB(this.lo)}return Object.defineProperty(e.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),e.prototype._o=function(t,n){var r=this,i=n?n.mo:new YB,o=n?n.fo:this.fo,a=n?n.mutatedKeys:this.mutatedKeys,c=o,d=!1,m=nb(this.query)&&o.size===this.query.limit?o.last():null,v=rb(this.query)&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(function(C,S){var A=o.get(C),x=fv(r.query,S)?S:null,V=!!A&&r.mutatedKeys.has(A.key),H=!!x&&(x.hasLocalMutations||r.mutatedKeys.has(x.key)&&x.hasCommittedMutations),K=!1;A&&x?A.data.isEqual(x.data)?V!==H&&(i.track({type:3,doc:x}),K=!0):r.yo(A,x)||(i.track({type:2,doc:x}),K=!0,(m&&r.lo(x,m)>0||v&&r.lo(x,v)<0)&&(d=!0)):!A&&x?(i.track({type:0,doc:x}),K=!0):A&&!x&&(i.track({type:1,doc:A}),K=!0,(m||v)&&(d=!0)),K&&(x?(c=c.add(x),a=H?a.add(C):a.delete(C)):(c=c.delete(C),a=a.delete(C)))}),nb(this.query)||rb(this.query))for(;c.size>this.query.limit;){var w=nb(this.query)?c.last():c.first();c=c.delete(w.key),a=a.delete(w.key),i.track({type:1,doc:w})}return{fo:c,mo:i,Nn:d,mutatedKeys:a}},e.prototype.yo=function(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations},e.prototype.applyChanges=function(t,n,r){var i=this,o=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var a=t.mo.jr();a.sort(function(v,w){return S=w.type,(A=function(x){switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ze()}})(v.type)-A(S)||i.lo(v.doc,w.doc);var S,A}),this.po(r);var c=n?this.Eo():[],d=0===this.ho.size&&this.current?1:0,m=d!==this.ao;return this.ao=d,0!==a.length||m?{snapshot:new bb(this.query,t.fo,o,a,t.mutatedKeys,0===d,m,!1),To:c}:{To:c}},e.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new YB,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},e.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},e.prototype.po=function(t){var n=this;t&&(t.addedDocuments.forEach(function(r){return n.uo=n.uo.add(r)}),t.modifiedDocuments.forEach(function(r){}),t.removedDocuments.forEach(function(r){return n.uo=n.uo.delete(r)}),this.current=t.current)},e.prototype.Eo=function(){var t=this;if(!this.current)return[];var n=this.ho;this.ho=_n(),this.fo.forEach(function(i){t.Io(i.key)&&(t.ho=t.ho.add(i.key))});var r=[];return n.forEach(function(i){t.ho.has(i)||r.push(new e3(i))}),this.ho.forEach(function(i){n.has(i)||r.push(new ZB(i))}),r},e.prototype.Ao=function(t){this.uo=t.Bn,this.ho=_n();var n=this._o(t.documents);return this.applyChanges(n,!0)},e.prototype.Ro=function(){return bb.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},e}(),gre=function(e,t,n){this.query=e,this.targetId=t,this.view=n},mre=function(e){this.key=e,this.bo=!1},vre=function(){function e(t,n,r,i,o,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.vo={},this.Po=new rp(function(c){return Ej(c)},lv),this.Vo=new Map,this.So=new Set,this.Do=new Pi(nt.comparator),this.Co=new Map,this.No=new q1,this.xo={},this.ko=new Map,this.Fo=db.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),e}();function yre(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,i,o,a,c;return(0,D.__generator)(this,function(d){switch(d.label){case 0:return n=cA(e),(o=n.Po.get(t))?(n.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,ip(n.localStore,ys(t))];case 2:return a=d.sent(),c=n.sharedClientState.addLocalQueryTarget(a.targetId),[4,iA(n,t,a.targetId,"current"===c)];case 3:i=d.sent(),n.isPrimaryClient&&_b(n.remoteStore,a),d.label=4;case 4:return[2,i]}})})}function iA(e,t,n,r){return(0,D.__awaiter)(this,void 0,void 0,function(){var i,o,a,c,d,m;return(0,D.__generator)(this,function(v){switch(v.label){case 0:return e.Oo=function(w,C,S){return function(A,x,V,H){return(0,D.__awaiter)(this,void 0,void 0,function(){var K,q,fe;return(0,D.__generator)(this,function(Se){switch(Se.label){case 0:return(K=x.view._o(V)).Nn?[4,vb(A.localStore,x.query,!1).then(function(he){return x.view._o(he.documents,K)})]:[3,2];case 1:K=Se.sent(),Se.label=2;case 2:return q=H&&H.targetChanges.get(x.targetId),fe=x.view.applyChanges(K,A.isPrimaryClient,q),[2,(aA(A,x.targetId,fe.To),fe.snapshot)]}})})}(e,w,C,S)},[4,vb(e.localStore,t,!0)];case 1:return i=v.sent(),o=new t3(t,i.Bn),a=o._o(i.documents),c=x1.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),d=o.applyChanges(a,e.isPrimaryClient,c),aA(e,n,d.To),m=new gre(t,n,o),[2,(e.Po.set(t,m),e.Vo.has(n)?e.Vo.get(n).push(t):e.Vo.set(n,[t]),d.snapshot)]}})})}function _re(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,D.__generator)(this,function(o){switch(o.label){case 0:return n=Ne(e),r=n.Po.get(t),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(a){return!lv(a,t)})),void n.Po.delete(t))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,op(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Cv(n.remoteStore,r.targetId),lp(n,r.targetId)}).catch(Af)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return lp(n,r.targetId),[4,op(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function wre(e,t,n){return(0,D.__awaiter)(this,void 0,void 0,function(){var r,i,o,a;return(0,D.__generator)(this,function(c){switch(c.label){case 0:r=lA(e),c.label=1;case 1:return c.trys.push([1,5,,6]),[4,(d=r.localStore,m=t,w=Ne(d),C=Ao.now(),S=m.reduce(function(A,x){return A.add(x.key)},_n()),w.persistence.runTransaction("Locally write mutations","readwrite",function(A){return w.Mn.pn(A,S).next(function(x){v=x;for(var V=[],H=0,K=m;H<K.length;H++){var q=K[H],fe=qte(q,v.get(q.key));null!=fe&&V.push(new Qc(q.key,fe,gj(fe.value.mapValue),Oi.exists(!0)))}return w._n.addMutationBatch(A,C,V,m)})}).then(function(A){return A.applyToLocalDocumentSet(v),{batchId:A.batchId,changes:v}}))];case 2:return i=c.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(d,m,v){var w=d.xo[d.currentUser.toKey()];w||(w=new Pi(Yt)),w=w.insert(m,v),d.xo[d.currentUser.toKey()]=w}(r,i.batchId,n),[4,Fu(r,i.changes)];case 3:return c.sent(),[4,ap(r.remoteStore)];case 4:return c.sent(),[3,6];case 5:return o=c.sent(),a=cp(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}var d,m,v,w,C,S})})}function n3(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,D.__generator)(this,function(i){switch(i.label){case 0:n=Ne(e),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,kne(n.localStore,t)];case 2:return r=i.sent(),t.targetChanges.forEach(function(o,a){var c=n.Co.get(a);c&&(vt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.bo=!0:o.modifiedDocuments.size>0?vt(c.bo):o.removedDocuments.size>0&&(vt(c.bo),c.bo=!1))}),[4,Fu(n,r,t)];case 3:return i.sent(),[3,6];case 4:return[4,Af(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function r3(e,t,n){var r=Ne(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(o,a){var c=a.view.zr(t);c.snapshot&&i.push(c.snapshot)}),function(o,a){var c=Ne(o);c.onlineState=a;var d=!1;c.queries.forEach(function(m,v){for(var w=0,C=v.listeners;w<C.length;w++)C[w].zr(a)&&(d=!0)}),d&&nA(c)}(r.eventManager,t),i.length&&r.vo._r(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function bre(e,t,n){return(0,D.__awaiter)(this,void 0,void 0,function(){var r,i,o,a,c,d;return(0,D.__generator)(this,function(m){switch(m.label){case 0:return(r=Ne(e)).sharedClientState.updateQueryState(t,"rejected",n),i=r.Co.get(t),(o=i&&i.key)?(a=(a=new Pi(nt.comparator)).insert(o,yi.newNoDocument(o,Ht.min())),c=_n().add(o),d=new k1(Ht.min(),new Map,new zr(Yt),a,c),[4,n3(r,d)]):[3,2];case 1:return m.sent(),r.Do=r.Do.remove(o),r.Co.delete(t),uA(r),[3,4];case 2:return[4,op(r.localStore,t,!1).then(function(){return lp(r,t,n)}).catch(Af)];case 3:m.sent(),m.label=4;case 4:return[2]}})})}function Ere(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,D.__generator)(this,function(o){switch(o.label){case 0:n=Ne(e),r=t.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Nne(n.localStore,t)];case 2:return i=o.sent(),sA(n,r,null),oA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Fu(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Af(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Cre(e,t,n){return(0,D.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,D.__generator)(this,function(o){switch(o.label){case 0:r=Ne(e),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(a=r.localStore,c=t,d=Ne(a),d.persistence.runTransaction("Reject batch","readwrite-primary",function(m){var v;return d._n.lookupMutationBatch(m,c).next(function(w){return vt(null!==w),v=w.keys(),d._n.removeMutationBatch(m,w)}).next(function(){return d._n.performConsistencyCheck(m)}).next(function(){return d.Mn.pn(m,v)})}))];case 2:return i=o.sent(),sA(r,t,n),oA(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),[4,Fu(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Af(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}var a,c,d})})}function Dre(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,a;return(0,D.__generator)(this,function(c){switch(c.label){case 0:tl((n=Ne(e)).remoteStore)||Ae("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,(d=n.localStore,m=Ne(d),m.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(v){return m._n.getHighestUnacknowledgedBatchId(v)}))];case 2:return-1===(r=c.sent())?[2,void t.resolve()]:((i=n.ko.get(r)||[]).push(t),n.ko.set(r,i),[3,4]);case 3:return o=c.sent(),a=cp(o,"Initialization of waitForPendingWrites() operation failed"),t.reject(a),[3,4];case 4:return[2]}var d,m})})}function oA(e,t){(e.ko.get(t)||[]).forEach(function(n){n.resolve()}),e.ko.delete(t)}function sA(e,t,n){var r=Ne(e),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.xo[r.currentUser.toKey()]=i}}function lp(e,t,n){void 0===n&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.Vo.get(t);r<i.length;r++){var o=i[r];e.Po.delete(o),n&&e.vo.Mo(o,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach(function(a){e.No.containsKey(a)||i3(e,a)})}function i3(e,t){e.So.delete(t.path.canonicalString());var n=e.Do.get(t);null!==n&&(Cv(e.remoteStore,n),e.Do=e.Do.remove(t),e.Co.delete(n),uA(e))}function aA(e,t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof ZB?(e.No.addReference(o.key,t),Ire(e,o)):o instanceof e3?(Ae("SyncEngine","Document no longer in limbo: "+o.key),e.No.removeReference(o.key,t),e.No.containsKey(o.key)||i3(e,o.key)):Ze()}}function Ire(e,t){var n=t.key,r=n.path.canonicalString();e.Do.get(n)||e.So.has(r)||(Ae("SyncEngine","New document in limbo: "+n),e.So.add(r),uA(e))}function uA(e){for(;e.So.size>0&&e.Do.size<e.maxConcurrentLimboResolutions;){var t=e.So.values().next().value;e.So.delete(t);var n=new nt(cn.fromString(t)),r=e.Fo.next();e.Co.set(r,new mre(n)),e.Do=e.Do.insert(n,r),_b(e.remoteStore,new fb(ys($d(n.path)),r,2,Yo.o))}}function Fu(e,t,n){return(0,D.__awaiter)(this,void 0,void 0,function(){var r,i,o,a;return(0,D.__generator)(this,function(c){switch(c.label){case 0:return r=Ne(e),i=[],o=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(d,m){a.push(r.Oo(m,t,n).then(function(v){if(v){r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,v.fromCache?"not-current":"current"),i.push(v);var w=Mne.Pn(m.targetId,v);o.push(w)}}))}),[4,Promise.all(a)]);case 1:return c.sent(),r.vo._r(i),[4,function(d,m){return(0,D.__awaiter)(this,void 0,void 0,function(){var v,w,C,S,A,x,V,K;return(0,D.__generator)(this,function(q){switch(q.label){case 0:v=Ne(d),q.label=1;case 1:return q.trys.push([1,3,,4]),[4,v.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(fe){return De.forEach(m,function(Se){return De.forEach(Se.bn,function(he){return v.persistence.referenceDelegate.addReference(fe,Se.targetId,he)}).next(function(){return De.forEach(Se.vn,function(he){return v.persistence.referenceDelegate.removeReference(fe,Se.targetId,he)})})})})];case 2:return q.sent(),[3,4];case 3:if(!Tf(w=q.sent()))throw w;return Ae("LocalStore","Failed to update sequence numbers: "+w),[3,4];case 4:for(C=0,S=m;C<S.length;C++)x=(A=S[C]).targetId,A.fromCache||(V=v.kn.get(x),K=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion),v.kn=v.kn.insert(x,K));return[2]}})})}(r.localStore,o)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}function Tre(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,D.__generator)(this,function(i){switch(i.label){case 0:return(n=Ne(e)).currentUser.isEqual(t)?[3,3]:(Ae("SyncEngine","User change. New user:",t.toKey()),[4,NB(n.localStore,t)]);case 1:return r=i.sent(),n.currentUser=t,(o=n).ko.forEach(function(c){c.forEach(function(d){d.reject(new ve(X.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ko.clear(),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),[4,Fu(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}var o})})}function Sre(e,t){var n=Ne(e),r=n.Co.get(t);if(r&&r.bo)return _n().add(r.key);var i=_n(),o=n.Vo.get(t);if(!o)return i;for(var a=0,c=o;a<c.length;a++){var m=n.Po.get(c[a]);i=i.unionWith(m.view.wo)}return i}function Are(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,D.__generator)(this,function(o){switch(o.label){case 0:return[4,vb((n=Ne(e)).localStore,t.query,!0)];case 1:return r=o.sent(),i=t.view.Ao(r),[2,(n.isPrimaryClient&&aA(n,t.targetId,i.To),i)]}})})}function Mre(e){return(0,D.__awaiter)(this,void 0,void 0,function(){var t;return(0,D.__generator)(this,function(n){return[2,PB((t=Ne(e)).localStore).then(function(r){return Fu(t,r)})]})})}function Rre(e,t,n,r){return(0,D.__awaiter)(this,void 0,void 0,function(){var i,o;return(0,D.__generator)(this,function(a){switch(a.label){case 0:return[4,(c=(i=Ne(e)).localStore,d=t,m=Ne(c),v=Ne(m._n),m.persistence.runTransaction("Lookup mutation documents","readonly",function(w){return v.jt(w,d).next(function(C){return C?m.Mn.pn(w,C):De.resolve(null)})}))];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,ap(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(sA(i,t,r||null),oA(i,t),function(c,d){Ne(Ne(c)._n).Gt(d)}(i.localStore,t)):Ze(),a.label=4;case 4:return[4,Fu(i,o)];case 5:return a.sent(),[3,7];case 6:Ae("SyncEngine","Cannot apply mutation batch with id: "+t),a.label=7;case 7:return[2]}var c,d,m,v})})}function Nre(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,a,d,m;return(0,D.__generator)(this,function(v){switch(v.label){case 0:return cA(n=Ne(e)),lA(n),!0!==t||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,o3(n,r.toArray())]);case 1:return i=v.sent(),n.$o=!0,[4,Z1(n.remoteStore,!0)];case 2:for(v.sent(),o=0,a=i;o<a.length;o++)_b(n.remoteStore,a[o]);return[3,7];case 3:return!1!==t||!1===n.$o?[3,7]:(d=[],m=Promise.resolve(),n.Vo.forEach(function(w,C){n.sharedClientState.isLocalQueryTarget(C)?d.push(C):m=m.then(function(){return lp(n,C),op(n.localStore,C,!0)}),Cv(n.remoteStore,C)}),[4,m]);case 4:return v.sent(),[4,o3(n,d)];case 5:return v.sent(),(C=Ne(n)).Co.forEach(function(S,A){Cv(C.remoteStore,A)}),C.No.ts(),C.Co=new Map,C.Do=new Pi(nt.comparator),n.$o=!1,[4,Z1(n.remoteStore,!1)];case 6:v.sent(),v.label=7;case 7:return[2]}var C})})}function o3(e,t,n){return(0,D.__awaiter)(this,void 0,void 0,function(){var r,i,o,a,c,d,m,v,w,C,A,x,V;return(0,D.__generator)(this,function(H){switch(H.label){case 0:r=Ne(e),i=[],o=[],a=0,c=t,H.label=1;case 1:return a<c.length?(m=void 0,(v=r.Vo.get(d=c[a]))&&0!==v.length?[4,ip(r.localStore,ys(v[0]))]:[3,7]):[3,13];case 2:m=H.sent(),w=0,C=v,H.label=3;case 3:return w<C.length?(A=r.Po.get(C[w]),[4,Are(r,A)]):[3,6];case 4:(x=H.sent()).snapshot&&o.push(x.snapshot),H.label=5;case 5:return w++,[3,3];case 6:return[3,11];case 7:return[4,OB(r.localStore,d)];case 8:return V=H.sent(),[4,ip(r.localStore,V)];case 9:return m=H.sent(),[4,iA(r,s3(V),d,!1)];case 10:H.sent(),H.label=11;case 11:i.push(m),H.label=12;case 12:return a++,[3,1];case 13:return[2,(r.vo._r(o),i)]}})})}function s3(e){return wj(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function kre(e){var t=Ne(e);return Ne(Ne(t.localStore).persistence).fn()}function xre(e,t,n,r){return(0,D.__awaiter)(this,void 0,void 0,function(){var i,o,a;return(0,D.__generator)(this,function(c){switch(c.label){case 0:return(i=Ne(e)).$o?(Ae("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,PB(i.localStore)];case 3:return o=c.sent(),a=k1.createSynthesizedRemoteEventForCurrentChange(t,"current"===n),[4,Fu(i,o,a)];case 4:return c.sent(),[3,8];case 5:return[4,op(i.localStore,t,!0)];case 6:return c.sent(),lp(i,t,r),[3,8];case 7:Ze(),c.label=8;case 8:return[2]}})})}function Ore(e,t,n){return(0,D.__awaiter)(this,void 0,void 0,function(){var r,i,o,a,c,d,m,v,w;return(0,D.__generator)(this,function(S){switch(S.label){case 0:if(!(r=cA(e)).$o)return[3,10];i=0,o=t,S.label=1;case 1:return i<o.length?r.Vo.has(a=o[i])?(Ae("SyncEngine","Adding an already active target "+a),[3,5]):[4,OB(r.localStore,a)]:[3,6];case 2:return c=S.sent(),[4,ip(r.localStore,c)];case 3:return d=S.sent(),[4,iA(r,s3(c),d.targetId,!1)];case 4:S.sent(),_b(r.remoteStore,d),S.label=5;case 5:return i++,[3,1];case 6:m=function(A){return(0,D.__generator)(this,function(x){switch(x.label){case 0:return r.Vo.has(A)?[4,op(r.localStore,A,!1).then(function(){Cv(r.remoteStore,A),lp(r,A)}).catch(Af)]:[3,2];case 1:x.sent(),x.label=2;case 2:return[2]}})},v=0,w=n,S.label=7;case 7:return v<w.length?[5,m(w[v])]:[3,10];case 8:S.sent(),S.label=9;case 9:return v++,[3,7];case 10:return[2]}})})}function cA(e){var t=Ne(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=n3.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Sre.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=bre.bind(null,t),t.vo._r=fre.bind(null,t.eventManager),t.vo.Mo=hre.bind(null,t.eventManager),t}function lA(e){var t=Ne(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ere.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Cre.bind(null,t),t}function Pre(e,t,n){var r=Ne(e);(function(i,o,a){return(0,D.__awaiter)(this,void 0,void 0,function(){var c,d,m,v,w,C;return(0,D.__generator)(this,function(S){switch(S.label){case 0:return S.trys.push([0,14,,15]),[4,o.getMetadata()];case 1:return c=S.sent(),[4,(A=i.localStore,x=c,V=Ne(A),H=oi(x.createTime),V.persistence.runTransaction("hasNewerBundle","readonly",function(K){return V.Ke.getBundleMetadata(K,x.id)}).then(function(K){return!!K&&K.createTime.compareTo(H)>=0}))];case 2:return S.sent()?[4,o.close()]:[3,4];case 3:return[2,(S.sent(),void a._completeWith(function(A){return{taskState:"Success",documentsLoaded:A.totalDocuments,bytesLoaded:A.totalBytes,totalDocuments:A.totalDocuments,totalBytes:A.totalBytes}}(c)))];case 4:return a._updateProgress(JB(c)),d=new pre(c,i.localStore,o.R),[4,o.Lo()];case 5:m=S.sent(),S.label=6;case 6:return m?[4,d.oo(m)]:[3,10];case 7:return(v=S.sent())&&a._updateProgress(v),[4,o.Lo()];case 8:m=S.sent(),S.label=9;case 9:return[3,6];case 10:return[4,d.complete()];case 11:return w=S.sent(),[4,Fu(i,w.wn,void 0)];case 12:return S.sent(),[4,function(A,x){var V=Ne(A);return V.persistence.runTransaction("Save bundle","readwrite",function(H){return V.Ke.saveBundleMetadata(H,x)})}(i.localStore,c)];case 13:return S.sent(),a._completeWith(w.progress),[3,15];case 14:return iv("SyncEngine","Loading bundle failed with "+(C=S.sent())),a._failWith(C),[3,15];case 15:return[2]}var A,x,V,H})})})(r,t,n).then(function(){r.sharedClientState.notifyBundleLoaded()})}var a3=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(t){return(0,D.__awaiter)(this,void 0,void 0,function(){return(0,D.__generator)(this,function(n){switch(n.label){case 0:return this.R=bv(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return n.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},e.prototype.Uo=function(t){return null},e.prototype.Ko=function(t){return RB(this.persistence,new MB,t.initialUser,this.R)},e.prototype.qo=function(t){return new Hne(qne.bs,this.R)},e.prototype.Bo=function(t){return new jB},e.prototype.terminate=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){return(0,D.__generator)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},e}(),u3=function(e){function t(n,r,i){var o=this;return(o=e.call(this)||this).Qo=n,o.cacheSizeBytes=r,o.forceOwnership=i,o.synchronizeTabs=!1,o}return(0,D.__extends)(t,e),t.prototype.initialize=function(n){return(0,D.__awaiter)(this,void 0,void 0,function(){var r=this;return(0,D.__generator)(this,function(i){switch(i.label){case 0:return[4,e.prototype.initialize.call(this,n)];case 1:return i.sent(),[4,One(this.localStore)];case 2:return i.sent(),[4,this.Qo.initialize(this,n)];case 3:return i.sent(),[4,lA(this.Qo.syncEngine)];case 4:return i.sent(),[4,ap(this.Qo.remoteStore)];case 5:return i.sent(),[4,this.persistence.He(function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()})];case 6:return i.sent(),[2]}})})},t.prototype.Ko=function(n){return RB(this.persistence,new MB,n.initialUser,this.R)},t.prototype.Uo=function(n){return new bne(this.persistence.referenceDelegate.garbageCollector,n.asyncQueue)},t.prototype.qo=function(n){var r=$1(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Va.withCacheSize(this.cacheSizeBytes):Va.DEFAULT;return new Sne(this.synchronizeTabs,r,n.clientId,i,n.asyncQueue,HB(),yb(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(n){return new jB},t}(a3),Fre=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r,!1)||this).Qo=n,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return(0,D.__extends)(t,e),t.prototype.initialize=function(n){return(0,D.__awaiter)(this,void 0,void 0,function(){var r,i=this;return(0,D.__generator)(this,function(o){switch(o.label){case 0:return[4,e.prototype.initialize.call(this,n)];case 1:return o.sent(),r=this.Qo.syncEngine,this.sharedClientState instanceof K1?(this.sharedClientState.syncEngine={ui:Rre.bind(null,r),ai:xre.bind(null,r),hi:Ore.bind(null,r),fn:kre.bind(null,r),ci:Mre.bind(null,r)},[4,this.sharedClientState.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.He(function(a){return(0,D.__awaiter)(i,void 0,void 0,function(){return(0,D.__generator)(this,function(c){switch(c.label){case 0:return[4,Nre(this.Qo.syncEngine,a)];case 1:return c.sent(),this.gcScheduler&&(a&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):a||this.gcScheduler.stop()),[2]}})})})];case 4:return o.sent(),[2]}})})},t.prototype.Bo=function(n){var r=HB();if(!K1.yt(r))throw new ve(X.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var i=$1(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey);return new K1(r,n.asyncQueue,i,n.clientId,n.initialUser)},t}(u3),fA=function(){function e(){}return e.prototype.initialize=function(t,n){return(0,D.__awaiter)(this,void 0,void 0,function(){var r=this;return(0,D.__generator)(this,function(i){switch(i.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(o){return r3(r.syncEngine,o,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Tre.bind(null,this.syncEngine),[4,Z1(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.createEventManager=function(t){return new lre},e.prototype.createDatastore=function(t){var r=bv(t.databaseInfo.databaseId),i=new Qne(t.databaseInfo);return new Jne(t.credentials,i,r)},e.prototype.createRemoteStore=function(t){var n,r,i,o,a,c=this;return n=this.localStore,r=this.datastore,i=t.asyncQueue,o=function(d){return r3(c.syncEngine,d,0)},a=BB.yt()?new BB:new zne,new ere(n,r,i,o,a)},e.prototype.createSyncEngine=function(t,n){return m=n,v=new vre(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions),m&&(v.$o=!0),v;var m,v},e.prototype.terminate=function(){return function(t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n;return(0,D.__generator)(this,function(r){switch(r.label){case 0:return n=Ne(t),Ae("RemoteStore","RemoteStore shutting down."),n.Or.add(5),[4,sp(n)];case 1:return r.sent(),n.Lr.shutdown(),n.Br.set("Unknown"),[2]}})})}(this.remoteStore)},e}();function c3(e,t){void 0===t&&(t=10240);var n=0;return{read:function(){return(0,D.__awaiter)(this,void 0,void 0,function(){var r;return(0,D.__generator)(this,function(i){return n<e.byteLength?(r={value:e.slice(n,n+t),done:!1},[2,(n+=t,r)]):[2,{done:!0}]})})},cancel:function(){return(0,D.__awaiter)(this,void 0,void 0,function(){return(0,D.__generator)(this,function(r){return[2]})})},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Eb=function(){function e(t){this.observer=t,this.muted=!1}return e.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},e.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},e.prototype.Wo=function(){this.muted=!0},e.prototype.jo=function(t,n){var r=this;this.muted||setTimeout(function(){r.muted||t(n)},0)},e}(),Lre=function(){function e(t,n){var r=this;this.Go=t,this.R=n,this.metadata=new Li,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(i){i&&i.io()?r.metadata.resolve(i.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(i?.payload)))},function(i){return r.metadata.reject(i)})}return e.prototype.close=function(){return this.Go.cancel()},e.prototype.getMetadata=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){return(0,D.__generator)(this,function(t){return[2,this.metadata.promise]})})},e.prototype.Lo=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){return(0,D.__generator)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},e.prototype.Ho=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){var t,n,r,i;return(0,D.__generator)(this,function(o){switch(o.label){case 0:return[4,this.Jo()];case 1:return null===(t=o.sent())?[2,null]:(n=this.zo.decode(t),r=Number(n),isNaN(r)&&this.Yo("length string ("+n+") is not valid number"),[4,this.Xo(r)]);case 2:return i=o.sent(),[2,new dre(JSON.parse(i),t.length+r)]}})})},e.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},e.prototype.Jo=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,D.__generator)(this,function(r){switch(r.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(r.sent())return[3,3];r.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),n)])}})})},e.prototype.Xo=function(t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n;return(0,D.__generator)(this,function(r){switch(r.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:r.sent()&&this.Yo("Reached the end of bundle when more is expected."),r.label=2;case 2:return[3,0];case 3:return n=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),n)]}})})},e.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},e.prototype.tc=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,D.__generator)(this,function(r){switch(r.label){case 0:return[4,this.Go.read()];case 1:return(t=r.sent()).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),[2,t.done]}})})},e}(),Vre=function(){function e(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r=this;return(0,D.__generator)(this,function(i){switch(i.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new ve(X.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(o,a){return(0,D.__awaiter)(this,void 0,void 0,function(){var c,d,m,v,w,C;return(0,D.__generator)(this,function(S){switch(S.label){case 0:return c=Ne(o),d=vv(c.R)+"/documents",m={documents:a.map(function(A){return mv(c.R,A)})},[4,c.$i("BatchGetDocuments",d,m)];case 1:return v=S.sent(),w=new Map,v.forEach(function(A){var V,H,x=(V=c.R,"found"in(H=A)?function(K,q){vt(!!q.found);var fe=Fa(K,q.found.name),Se=oi(q.found.updateTime),he=new Xo({mapValue:{fields:q.found.fields}});return yi.newFoundDocument(fe,Se,he)}(V,H):"missing"in H?function(K,q){vt(!!q.missing),vt(!!q.readTime);var fe=Fa(K,q.missing),Se=oi(q.readTime);return yi.newNoDocument(fe,Se)}(V,H):Ze());w.set(x.key.toString(),x)}),C=[],[2,(a.forEach(function(A){var x=w.get(A.toString());vt(!!x),C.push(x)}),C)]}})})}(this.datastore,t)];case 1:return[2,((n=i.sent()).forEach(function(o){return r.recordVersion(o)}),n)]}})})},e.prototype.set=function(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},e.prototype.update=function(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(t.toString())},e.prototype.delete=function(t){this.write(new pv(t,this.precondition(t))),this.writtenDocs.add(t.toString())},e.prototype.commit=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){var t,n=this;return(0,D.__generator)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(i){t.delete(i.key.toString())}),t.forEach(function(i,o){var a=nt.fromPath(o);n.mutations.push(new R1(a,n.precondition(a)))}),[4,function(i,o){return(0,D.__awaiter)(this,void 0,void 0,function(){var a,c,d;return(0,D.__generator)(this,function(m){switch(m.label){case 0:return a=Ne(i),c=vv(a.R)+"/documents",d={writes:o.map(function(v){return lb(a.R,v)})},[4,a.Ni("Commit",c,d)];case 1:return m.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return r.sent(),this.committed=!0,[2]}})})},e.prototype.recordVersion=function(t){var n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw Ze();n=Ht.min()}var r=this.readVersions.get(t.key.toString());if(r){if(!n.isEqual(r))throw new ve(X.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)},e.prototype.precondition=function(t){var n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?Oi.updateTime(n):Oi.none()},e.prototype.preconditionForUpdate=function(t){var n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(Ht.min()))throw new ve(X.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Oi.updateTime(n)}return Oi.exists(!0)},e.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},e.prototype.ensureCommitNotCalled=function(){},e}(),Ure=function(){function e(t,n,r,i){this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.ec=5,this.Zi=new Q1(this.asyncQueue,"transaction_retry")}return e.prototype.run=function(){this.ec-=1,this.nc()},e.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,D.__awaiter)(t,void 0,void 0,function(){var n,r,i=this;return(0,D.__generator)(this,function(o){return n=new Vre(this.datastore),(r=this.sc(n))&&r.then(function(a){i.asyncQueue.enqueueAndForget(function(){return n.commit().then(function(){i.deferred.resolve(a)}).catch(function(c){i.ic(c)})})}).catch(function(a){i.ic(a)}),[2]})})})},e.prototype.sc=function(t){try{var n=this.updateFunction(t);return!bf(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}},e.prototype.ic=function(t){var n=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return n.nc(),Promise.resolve()})):this.deferred.reject(t)},e.prototype.rc=function(t){if("FirebaseError"===t.name){var n=t.code;return"aborted"===n||"failed-precondition"===n||!Lj(n)}return!1},e}(),jre=function(){function e(t,n,r){var i=this;this.credentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=wi.UNAUTHENTICATED,this.clientId=oj.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(n,function(o){return(0,D.__awaiter)(i,void 0,void 0,function(){return(0,D.__generator)(this,function(a){switch(a.label){case 0:return Ae("FirestoreClient","Received user=",o.uid),[4,this.credentialListener(o)];case 1:return a.sent(),this.user=o,[2]}})})})}return e.prototype.getConfiguration=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){return(0,D.__generator)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},e.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new ve(X.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var n=new Li;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,D.__awaiter)(t,void 0,void 0,function(){var r,i;return(0,D.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:o.sent(),o.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:o.sent(),o.label=4;case 4:return this.credentials.removeChangeListener(),n.resolve(),[3,6];case 5:return r=o.sent(),i=cp(r,"Failed to shutdown persistence"),n.reject(i),[3,6];case 6:return[2]}})})}),n.promise},e}();function l3(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r,i=this;return(0,D.__generator)(this,function(o){switch(o.label){case 0:return e.asyncQueue.verifyOperationInProgress(),Ae("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=o.sent(),[4,t.initialize(n)];case 2:return o.sent(),r=n.initialUser,e.setCredentialChangeListener(function(a){return(0,D.__awaiter)(i,void 0,void 0,function(){return(0,D.__generator)(this,function(c){switch(c.label){case 0:return r.isEqual(a)?[3,2]:[4,NB(t.localStore,a)];case 1:c.sent(),r=a,c.label=2;case 2:return[2]}})})}),t.persistence.setDatabaseDeletedListener(function(){return e.terminate()}),e.offlineComponents=t,[2]}})})}function f3(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,D.__generator)(this,function(i){switch(i.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,hA(e)];case 1:return n=i.sent(),Ae("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return r=i.sent(),[4,t.initialize(n,r)];case 3:return i.sent(),e.setCredentialChangeListener(function(o){return function(a,c){return(0,D.__awaiter)(this,void 0,void 0,function(){var d,m;return(0,D.__generator)(this,function(v){switch(v.label){case 0:return(d=Ne(a)).asyncQueue.verifyOperationInProgress(),Ae("RemoteStore","RemoteStore received new credentials"),m=tl(d),d.Or.add(3),[4,sp(d)];case 1:return v.sent(),m&&d.Br.set("Unknown"),[4,d.remoteSyncer.handleCredentialChange(c)];case 2:return v.sent(),d.Or.delete(3),[4,Ev(d)];case 3:return v.sent(),[2]}})})}(t.remoteStore,o)}),e.onlineComponents=t,[2]}})})}function hA(e){return(0,D.__awaiter)(this,void 0,void 0,function(){return(0,D.__generator)(this,function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(Ae("FirestoreClient","Using default OfflineComponentProvider"),[4,l3(e,new a3)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}})})}function Cb(e){return(0,D.__awaiter)(this,void 0,void 0,function(){return(0,D.__generator)(this,function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(Ae("FirestoreClient","Using default OnlineComponentProvider"),[4,f3(e,new fA)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}})})}function h3(e){return hA(e).then(function(t){return t.persistence})}function dA(e){return hA(e).then(function(t){return t.localStore})}function d3(e){return Cb(e).then(function(t){return t.remoteStore})}function pA(e){return Cb(e).then(function(t){return t.syncEngine})}function fp(e){return(0,D.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,D.__generator)(this,function(r){switch(r.label){case 0:return[4,Cb(e)];case 1:return t=r.sent(),[2,((n=t.eventManager).onListen=yre.bind(null,t.syncEngine),n.onUnlisten=_re.bind(null,t.syncEngine),n)]}})})}function p3(e,t,n){var r=this;void 0===n&&(n={});var i=new Li;return e.asyncQueue.enqueueAndForget(function(){return(0,D.__awaiter)(r,void 0,void 0,function(){var o;return(0,D.__generator)(this,function(a){switch(a.label){case 0:return o=function(c,d,m,v,w){var C=new Eb({next:function(A){d.enqueueAndForget(function(){return tA(c,S)});var x=A.docs.has(m);!x&&A.fromCache?w.reject(new ve(X.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&A.fromCache&&v&&"server"===v.source?w.reject(new ve(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(A)},error:function(A){return w.reject(A)}}),S=new rA($d(m.path),C,{includeMetadataChanges:!0,so:!0});return eA(c,S)},[4,fp(e)];case 1:return[2,o.apply(void 0,[a.sent(),e.asyncQueue,t,n,i])]}})})}),i.promise}function g3(e,t,n){var r=this;void 0===n&&(n={});var i=new Li;return e.asyncQueue.enqueueAndForget(function(){return(0,D.__awaiter)(r,void 0,void 0,function(){var o;return(0,D.__generator)(this,function(a){switch(a.label){case 0:return o=function(c,d,m,v,w){var C=new Eb({next:function(A){d.enqueueAndForget(function(){return tA(c,S)}),A.fromCache&&"server"===v.source?w.reject(new ve(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(A)},error:function(A){return w.reject(A)}}),S=new rA(m,C,{includeMetadataChanges:!0,so:!0});return eA(c,S)},[4,fp(e)];case 1:return[2,o.apply(void 0,[a.sent(),e.asyncQueue,t,n,i])]}})})}),i.promise}var Bre=function(e,t,n,r,i,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=c},Db=function(){function e(t,n){this.projectId=t,this.database=n||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),m3=new Map,v3=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},y3=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(t,n){this.changeListener=n,t.enqueueRetryable(function(){return n(wi.UNAUTHENTICATED)})},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),Hre=function(){function e(t){this.token=t,this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(this.token)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(t,n){var r=this;this.changeListener=n,t.enqueueRetryable(function(){return n(r.token.user)})},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),$re=function(){function e(t){var n=this;this.currentUser=wi.UNAUTHENTICATED,this.oc=new Li,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){n.cc++,n.currentUser=n.ac(),n.oc.resolve(),n.changeListener&&n.asyncQueue.enqueueRetryable(function(){return n.changeListener(n.currentUser)})};var r=function(i){Ae("FirebaseCredentialsProvider","Auth detected"),n.auth=i,n.auth.addAuthTokenListener(n.uc)};t.onInit(function(i){return r(i)}),setTimeout(function(){if(!n.auth){var i=t.getImmediate({optional:!0});i?r(i):(Ae("FirebaseCredentialsProvider","Auth not yet detected"),n.oc.resolve())}},0)}return e.prototype.getToken=function(){var t=this,n=this.cc,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(function(i){return t.cc!==n?(Ae("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):i?(vt("string"==typeof i.accessToken),new v3(i.accessToken,t.currentUser)):null}):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(t,n){var r=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return(0,D.__awaiter)(r,void 0,void 0,function(){return(0,D.__generator)(this,function(i){switch(i.label){case 0:return[4,this.oc.promise];case 1:return i.sent(),[4,n(this.currentUser)];case 2:return i.sent(),this.changeListener=n,[2]}})})})},e.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},e.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return vt(null===t||"string"==typeof t),new wi(t)},e}(),qre=function(){function e(t,n,r){this.hc=t,this.lc=n,this.fc=r,this.type="FirstParty",this.user=wi.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},n=this.hc.auth.getAuthHeaderValueForFirstParty([]);return n&&(t.Authorization=n),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),e}(),Gre=function(){function e(t,n,r){this.hc=t,this.lc=n,this.fc=r}return e.prototype.getToken=function(){return Promise.resolve(new qre(this.hc,this.lc,this.fc))},e.prototype.setChangeListener=function(t,n){t.enqueueRetryable(function(){return n(wi.FIRST_PARTY)})},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();function gA(e,t,n){if(!n)throw new ve(X.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function mA(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new ve(X.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function _3(e,t,n,r){if(!0===t&&!0===r)throw new ve(X.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function w3(e){if(!nt.isDocumentKey(e))throw new ve(X.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function b3(e){if(nt.isDocumentKey(e))throw new ve(X.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function Ib(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(n){if(n.constructor){var r=/function\s+([^\s(]+)\s*\(/.exec(n.constructor.toString());if(r&&r.length>1)return r[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":Ze()}function ln(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ve(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Ib(e);throw new ve(X.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function E3(e,t){if(t<=0)throw new ve(X.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}var C3=function(){function e(t){var n;if(void 0===t.host){if(void 0!==t.ssl)throw new ve(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ve(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,_3("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},e}(),Dv=function(){function e(t,n){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new C3({}),this._settingsFrozen=!1,t instanceof Db?(this._databaseId=t,this._credentials=new y3):(this._app=t,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new ve(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Db(r.options.projectId)}(t),this._credentials=new $re(n))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this._app)throw new ve(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),e.prototype._setSettings=function(t){if(this._settingsFrozen)throw new ve(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new C3(t),void 0!==t.credentials&&(this._credentials=function(n){if(!n)return new y3;switch(n.type){case"gapi":var r=n.client;return vt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Gre(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new ve(X.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},e.prototype._getSettings=function(){return this._settings},e.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},e.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},e.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},e.prototype._terminate=function(){return(n=m3.get(this))&&(Ae("ComponentProvider","Removing Datastore"),m3.delete(this),n.terminate()),Promise.resolve();var n},e}(),Yn=function(){function e(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}return Object.defineProperty(e.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new rl(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._key)},e}(),No=function(){function e(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this._query)},e}(),rl=function(e){function t(n,r,i){var o=this;return(o=e.call(this,n,r,$d(i))||this)._path=i,o.type="collection",o}return(0,D.__extends)(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var n=this._path.popLast();return n.isEmpty()?null:new Yn(this.firestore,null,new nt(n))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(n){return new t(this.firestore,n,this._path)},t}(No);function D3(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=(0,ze.getModularInstance)(e),gA("collection","path",t),e instanceof Dv)return b3(n=cn.fromString.apply(cn,(0,D.__spreadArray)([t],r))),new rl(e,null,n);if(!(e instanceof Yn||e instanceof rl))throw new ve(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return b3(n=cn.fromString.apply(cn,(0,D.__spreadArray)([e.path],r)).child(cn.fromString(t))),new rl(e.firestore,null,n)}function Tb(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=(0,ze.getModularInstance)(e),1===arguments.length&&(t=oj.u()),gA("doc","path",t),e instanceof Dv)return w3(n=cn.fromString.apply(cn,(0,D.__spreadArray)([t],r))),new Yn(e,null,new nt(n));if(!(e instanceof Yn||e instanceof rl))throw new ve(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return w3(n=e._path.child(cn.fromString.apply(cn,(0,D.__spreadArray)([t],r)))),new Yn(e.firestore,e instanceof rl?e.converter:null,new nt(n))}function I3(e,t){return e=(0,ze.getModularInstance)(e),t=(0,ze.getModularInstance)(t),(e instanceof Yn||e instanceof rl)&&(t instanceof Yn||t instanceof rl)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function T3(e,t){return e=(0,ze.getModularInstance)(e),t=(0,ze.getModularInstance)(t),e instanceof No&&t instanceof No&&e.firestore===t.firestore&&lv(e._query,t._query)&&e.converter===t.converter}var zre=function(){function e(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Q1(this,"async_queue_retry"),this.Ic=function(){var r=yb();r&&Ae("AsyncQueue","Visibility state changed to "+r.visibilityState),t.Zi.Gi()};var n=yb();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),e.prototype.enqueueAndForget=function(t){this.enqueue(t)},e.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},e.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var n=yb();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Ic)}},e.prototype.enqueue=function(t){var n=this;if(this.Ac(),this._c)return new Promise(function(){});var r=new Li;return this.Rc(function(){return n._c&&n.Ec?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)}).then(function(){return r.promise})},e.prototype.enqueueRetryable=function(t){var n=this;this.enqueueAndForget(function(){return n.wc.push(t),n.bc()})},e.prototype.bc=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){var t,n=this;return(0,D.__generator)(this,function(r){switch(r.label){case 0:if(0===this.wc.length)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return r.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Tf(t=r.sent()))throw t;return Ae("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return n.bc()}),r.label=5;case 5:return[2]}})})},e.prototype.Rc=function(t){var n=this,r=this.dc.then(function(){return n.gc=!0,t().catch(function(i){throw n.yc=i,n.gc=!1,Nr("INTERNAL UNHANDLED ERROR: ",(a=(o=i).message||"",o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a)),i;var o,a}).then(function(i){return n.gc=!1,i})});return this.dc=r,r},e.prototype.enqueueAfterDelay=function(t,n,r){var i=this;this.Ac(),this.Tc.indexOf(t)>-1&&(n=0);var o=ure.createAndSchedule(this,t,n,r,function(a){return i.vc(a)});return this.mc.push(o),o},e.prototype.Ac=function(){this.yc&&Ze()},e.prototype.verifyOperationInProgress=function(){},e.prototype.Pc=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){var t;return(0,D.__generator)(this,function(n){switch(n.label){case 0:return[4,t=this.dc];case 1:n.sent(),n.label=2;case 2:if(t!==this.dc)return[3,0];n.label=3;case 3:return[2]}})})},e.prototype.Vc=function(t){for(var n=0,r=this.mc;n<r.length;n++)if(r[n].timerId===t)return!0;return!1},e.prototype.Sc=function(t){var n=this;return this.Pc().then(function(){n.mc.sort(function(a,c){return a.targetTimeMs-c.targetTimeMs});for(var r=0,i=n.mc;r<i.length;r++){var o=i[r];if(o.skipDelay(),"all"!==t&&o.timerId===t)break}return n.Pc()})},e.prototype.Dc=function(t){this.Tc.push(t)},e.prototype.vc=function(t){var n=this.mc.indexOf(t);this.mc.splice(n,1)},e}();function hp(e){return function(t,n){if("object"!=typeof t||null===t)return!1;for(var r=t,i=0,o=["next","error","complete"];i<o.length;i++){var a=o[i];if(a in r&&"function"==typeof r[a])return!0}return!1}(e)}var Wre=function(){function e(){this._progressObserver={},this._taskCompletionResolver=new Li,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return e.prototype.onProgress=function(t,n,r){this._progressObserver={next:t,error:n,complete:r}},e.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},e.prototype.then=function(t,n){return this._taskCompletionResolver.promise.then(t,n)},e.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},e.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},e.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},e}(),_r=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this).type="firestore",i._queue=new zre,i._persistenceKey="name"in n?n.name:"[DEFAULT]",i}return(0,D.__extends)(t,e),t.prototype._terminate=function(){return this._firestoreClient||S3(this),this._firestoreClient.terminate()},t}(Dv);function ai(e){return e._firestoreClient||S3(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function S3(e){var t,o,c,n=e._freezeSettings(),r=(o=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",new Bre(e._databaseId,o,e._persistenceKey,(c=n).host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,c.useFetchStreams));e._firestoreClient=new jre(e._credentials,e._queue,r)}function A3(e,t,n){var r=this,i=new Li;return e.asyncQueue.enqueue(function(){return(0,D.__awaiter)(r,void 0,void 0,function(){var o;return(0,D.__generator)(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,l3(e,n)];case 1:return a.sent(),[4,f3(e,t)];case 2:return a.sent(),i.resolve(),[3,4];case 3:if(!("FirebaseError"===(c=o=a.sent()).name?c.code===X.FAILED_PRECONDITION||c.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw o;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),i.reject(o),[3,4];case 4:return[2]}var c})})}).then(function(){return i.promise})}function M3(e){if(e._initialized||e._terminated)throw new ve(X.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Ua=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0;r<t.length;++r)if(0===t[r].length)throw new ve(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qs(t)}return e.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},e}(),Mf=function(){function e(t){this._byteString=t}return e.fromBase64String=function(t){try{return new e(ao.fromBase64String(t))}catch(n){throw new ve(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},e.fromUint8Array=function(t){return new e(ao.fromUint8Array(t))},e.prototype.toBase64=function(){return this._byteString.toBase64()},e.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},e}(),Rf=function(e){this._methodName=e},Sb=function(){function e(t,n){if(!isFinite(t)||t<-90||t>90)throw new ve(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ve(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},e.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},e.prototype._compareTo=function(t){return Yt(this._lat,t._lat)||Yt(this._long,t._long)},e}(),Qre=/^__.*__$/,Yre=function(){function e(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}return e.prototype.toMutation=function(t,n){return null!==this.fieldMask?new Qc(t,this.data,this.fieldMask,n,this.fieldTransforms):new dv(t,this.data,n,this.fieldTransforms)},e}(),R3=function(){function e(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}return e.prototype.toMutation=function(t,n){return new Qc(t,this.data,this.fieldMask,n,this.fieldTransforms)},e}();function N3(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ze()}}var k3=function(){function e(t,n,r,i,o,a){this.settings=t,this.databaseId=n,this.R=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Cc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),e.prototype.xc=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},e.prototype.kc=function(t){var n,r=null===(n=this.path)||void 0===n?void 0:n.child(t),i=this.xc({path:r,Fc:!1});return i.$c(t),i},e.prototype.Oc=function(t){var n,r=null===(n=this.path)||void 0===n?void 0:n.child(t),i=this.xc({path:r,Fc:!1});return i.Cc(),i},e.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},e.prototype.Lc=function(t){return Mb(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},e.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(n){return t.isPrefixOf(n)})||void 0!==this.fieldTransforms.find(function(n){return t.isPrefixOf(n.field)})},e.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},e.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(N3(this.Nc)&&Qre.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},e}(),Xre=function(){function e(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.R=r||bv(t)}return e.prototype.Uc=function(t,n,r,i){return void 0===i&&(i=!1),new k3({Nc:t,methodName:n,qc:r,path:Qs.emptyPath(),Fc:!1,Bc:i},this.databaseId,this.R,this.ignoreUndefinedProperties)},e}();function Nf(e){var t=e._freezeSettings(),n=bv(e._databaseId);return new Xre(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ab(e,t,n,r,i,o){void 0===o&&(o={});var a=e.Uc(o.merge||o.mergeFields?2:0,t,n,i);wA("Data must be an object, but it was:",a,r);var c,d,m=P3(r,a);if(o.merge)c=new Ud(a.fieldMask),d=a.fieldTransforms;else if(o.mergeFields){for(var v=[],w=0,C=o.mergeFields;w<C.length;w++){var S=bA(t,C[w],n);if(!a.contains(S))throw new ve(X.INVALID_ARGUMENT,"Field '"+S+"' is specified in your field mask but missing from your input data.");L3(v,S)||v.push(S)}c=new Ud(v),d=a.fieldTransforms.filter(function(A){return c.covers(A.field)})}else c=null,d=a.fieldTransforms;return new Yre(new Xo(m),c,d)}var vA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,D.__extends)(t,e),t.prototype._toFieldTransform=function(n){if(2!==n.Nc)throw n.Lc(1===n.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return n.fieldMask.push(n.path),null},t.prototype.isEqual=function(n){return n instanceof t},t}(Rf);function x3(e,t,n){return new k3({Nc:3,qc:t.settings.qc,methodName:e._methodName,Fc:n},t.databaseId,t.R,t.ignoreUndefinedProperties)}var Jre=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,D.__extends)(t,e),t.prototype._toFieldTransform=function(n){return new hv(n.path,new Gd)},t.prototype.isEqual=function(n){return n instanceof t},t}(Rf),Zre=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).Kc=r,i}return(0,D.__extends)(t,e),t.prototype._toFieldTransform=function(n){var r=x3(this,n,!0),i=this.Kc.map(function(a){return kf(a,r)}),o=new Cf(i);return new hv(n.path,o)},t.prototype.isEqual=function(n){return this===n},t}(Rf),eie=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).Kc=r,i}return(0,D.__extends)(t,e),t.prototype._toFieldTransform=function(n){var r=x3(this,n,!0),i=this.Kc.map(function(a){return kf(a,r)}),o=new Df(i);return new hv(n.path,o)},t.prototype.isEqual=function(n){return this===n},t}(Rf),tie=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).Qc=r,i}return(0,D.__extends)(t,e),t.prototype._toFieldTransform=function(n){var r=new zd(n.R,Tj(n.R,this.Qc));return new hv(n.path,r)},t.prototype.isEqual=function(n){return this===n},t}(Rf);function yA(e,t,n,r){var i=e.Uc(1,t,n);wA("Data must be an object, but it was:",i,r);var o=[],a=Xo.empty();wf(r,function(d,m){var v=EA(t,d,n);m=(0,ze.getModularInstance)(m);var w=i.Oc(v);if(m instanceof vA)o.push(v);else{var C=kf(m,w);null!=C&&(o.push(v),a.set(v,C))}});var c=new Ud(o);return new R3(a,c,i.fieldTransforms)}function _A(e,t,n,r,i,o){var a=e.Uc(1,t,n),c=[bA(t,r,n)],d=[i];if(o.length%2!=0)throw new ve(X.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var m=0;m<o.length;m+=2)c.push(bA(t,o[m])),d.push(o[m+1]);for(var v=[],w=Xo.empty(),C=c.length-1;C>=0;--C)if(!L3(v,c[C])){var S=c[C],A=d[C];A=(0,ze.getModularInstance)(A);var x=a.Oc(S);if(A instanceof vA)v.push(S);else{var V=kf(A,x);null!=V&&(v.push(S),w.set(S,V))}}var H=new Ud(v);return new R3(w,H,a.fieldTransforms)}function O3(e,t,n,r){return void 0===r&&(r=!1),kf(n,e.Uc(r?4:3,t))}function kf(e,t){if(F3(e=(0,ze.getModularInstance)(e)))return wA("Unsupported field value:",t,e),P3(e,t);if(e instanceof Rf)return function(n,r){if(!N3(r.Nc))throw r.Lc(n._methodName+"() can only be used with update() and set()");if(!r.path)throw r.Lc(n._methodName+"() is not currently supported inside arrays");var i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&4!==t.Nc)throw t.Lc("Nested arrays are not supported");return function(n,r){for(var i=[],o=0,a=0,c=n;a<c.length;a++){var d=kf(c[a],r.Mc(o));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),o++}return{arrayValue:{values:i}}}(e,t)}return function(n,r){if(null===(n=(0,ze.getModularInstance)(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return Tj(r.R,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){var i=Ao.fromDate(n);return{timestampValue:gv(r.R,i)}}if(n instanceof Ao)return i=new Ao(n.seconds,1e3*Math.floor(n.nanoseconds/1e3)),{timestampValue:gv(r.R,i)};if(n instanceof Sb)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Mf)return{bytesValue:zj(r.R,n._byteString)};if(n instanceof Yn){var o=n.firestore._databaseId;if(!o.isEqual(i=r.databaseId))throw r.Lc("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:O1(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Lc("Unsupported field value: "+Ib(n))}(e,t)}function P3(e,t){var n={};return uj(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):wf(e,function(r,i){var o=kf(i,t.kc(r));null!=o&&(n[r]=o)}),{mapValue:{fields:n}}}function F3(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ao||e instanceof Sb||e instanceof Mf||e instanceof Yn||e instanceof Rf)}function wA(e,t,n){if(!F3(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){var r=Ib(n);throw t.Lc("an object"===r?e+" a custom object":e+" "+r)}var i}function bA(e,t,n){if((t=(0,ze.getModularInstance)(t))instanceof Ua)return t._internalPath;if("string"==typeof t)return EA(e,t);throw Mb("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var nie=new RegExp("[~\\*/\\[\\]]");function EA(e,t,n){if(t.search(nie)>=0)throw Mb("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return(new(Ua.bind.apply(Ua,(0,D.__spreadArray)([void 0],t.split(".")))))._internalPath}catch{throw Mb("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function Mb(e,t,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,c="Function "+t+"() called with invalid data";n&&(c+=" (via `toFirestore()`)");var d="";return(o||a)&&(d+=" (found",o&&(d+=" in field "+r),a&&(d+=" in document "+i),d+=")"),new ve(X.INVALID_ARGUMENT,(c+=". ")+e+d)}function L3(e,t){return e.some(function(n){return n.isEqual(t)})}var Iv=function(){function e(t,n,r,i,o){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Yn(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return null!==this._document},e.prototype.data=function(){if(this._document){if(this._converter){var t=new rie(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},e.prototype.get=function(t){if(this._document){var n=this._document.data.field(Rb("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n)}},e}(),rie=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,D.__extends)(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(Iv);function Rb(e,t){return"string"==typeof t?EA(e,t):t instanceof Ua?t._internalPath:t._delegate._internalPath}var xf=function(){function e(t,n){this.hasPendingWrites=t,this.fromCache=n}return e.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},e}(),Lu=function(e){function t(n,r,i,o,a,c){var d=this;return(d=e.call(this,n,r,i,o,c)||this)._firestore=n,d._firestoreImpl=n,d.metadata=a,d}return(0,D.__extends)(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(n){if(void 0===n&&(n={}),this._document){if(this._converter){var r=new Tv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}},t.prototype.get=function(n,r){if(void 0===r&&(r={}),this._document){var i=this._document.data.field(Rb("DocumentSnapshot.get",n));if(null!==i)return this._userDataWriter.convertValue(i,r.serverTimestamps)}},t}(Iv),Tv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,D.__extends)(t,e),t.prototype.data=function(n){return void 0===n&&(n={}),e.prototype.data.call(this,n)},t}(Lu),il=function(){function e(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new xf(i.hasPendingWrites,i.fromCache),this.query=r}return Object.defineProperty(e.prototype,"docs",{get:function(){var t=[];return this.forEach(function(n){return t.push(n)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t,n){var r=this;this._snapshot.docs.forEach(function(i){t.call(n,new Tv(r._firestore,r._userDataWriter,i.key,i,new xf(r._snapshot.mutatedKeys.has(i.key),r._snapshot.fromCache),r.query.converter))})},e.prototype.docChanges=function(t){void 0===t&&(t={});var n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ve(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){var o=0;return r._snapshot.docChanges.map(function(c){return{type:"added",doc:new Tv(r._firestore,r._userDataWriter,c.doc.key,c.doc,new xf(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}})}var a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(function(c){return i||3!==c.type}).map(function(c){var d=new Tv(r._firestore,r._userDataWriter,c.doc.key,c.doc,new xf(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),m=-1,v=-1;return 0!==c.type&&(m=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(v=(a=a.add(c.doc)).indexOf(c.doc.key)),{type:iie(c.type),doc:d,oldIndex:m,newIndex:v}})}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges},e}();function iie(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ze()}}function V3(e,t){return e instanceof Lu&&t instanceof Lu?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof il&&t instanceof il&&e._firestore===t._firestore&&T3(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function U3(e){if(rb(e)&&0===e.explicitOrderBy.length)throw new ve(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Sv=function(){};function ol(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++)e=i[r]._apply(e);return e}var oie=function(e){function t(n,r,i){var o=this;return(o=e.call(this)||this).jc=n,o.Wc=r,o.Gc=i,o.type="where",o}return(0,D.__extends)(t,e),t.prototype._apply=function(n){var o,c,r=Nf(n.firestore),i=function(o,a,c,d,m,v,w){var C;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new ve(X.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+v+"' queries on FieldPath.documentId().");if("in"===v||"not-in"===v){G3(w,v);for(var S=[],A=0,x=w;A<x.length;A++)S.push(q3(d,o,x[A]));C={arrayValue:{values:S}}}else C=q3(d,o,w)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||G3(w,v),C=O3(c,"where",w,"in"===v||"not-in"===v);var H=Jo.create(m,v,C);return function(K,q){if(q.g()){var fe=T1(K);if(null!==fe&&!fe.isEqual(q.field))throw new ve(X.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+fe.toString()+"' and '"+q.field.toString()+"'");var Se=I1(K);null!==Se&&z3(0,q.field,Se)}var he=function(pn,ko){for(var Je=0,wp=pn.filters;Je<wp.length;Je++){var z=wp[Je];if(ko.indexOf(z.op)>=0)return z.op}return null}(K,function(pn){switch(pn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(q.op));if(null!==he)throw new ve(X.INVALID_ARGUMENT,he===q.op?"Invalid query. You cannot use more than one '"+q.op.toString()+"' filter.":"Invalid query. You cannot use '"+q.op.toString()+"' filters with '"+he.toString()+"' filters.")}(o,H),H}(n._query,0,r,n.firestore._databaseId,this.jc,this.Wc,this.Gc);return new No(n.firestore,n.converter,(c=(o=n._query).filters.concat([i]),new xu(o.path,o.collectionGroup,o.explicitOrderBy.slice(),c,o.limit,o.limitType,o.startAt,o.endAt)))},t}(Sv),sie=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).jc=n,i.zc=r,i.type="orderBy",i}return(0,D.__extends)(t,e),t.prototype._apply=function(n){var i,a,r=function(i,o,a){if(null!==i.startAt)throw new ve(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new ve(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var c=new Hd(o,a);return function(d,m){if(null===I1(d)){var v=T1(d);null!==v&&z3(0,v,m.field)}}(i,c),c}(n._query,this.jc,this.zc);return new No(n.firestore,n.converter,(a=(i=n._query).explicitOrderBy.concat([r]),new xu(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)))},t}(Sv),j3=function(e){function t(n,r,i){var o=this;return(o=e.call(this)||this).type=n,o.Hc=r,o.Jc=i,o}return(0,D.__extends)(t,e),t.prototype._apply=function(n){return new No(n.firestore,n.converter,bj(n._query,this.Hc,this.Jc))},t}(Sv),B3=function(e){function t(n,r,i){var o=this;return(o=e.call(this)||this).type=n,o.Yc=r,o.Xc=i,o}return(0,D.__extends)(t,e),t.prototype._apply=function(n){var i,o,r=$3(n,this.type,this.Yc,this.Xc);return new No(n.firestore,n.converter,(o=r,new xu((i=n._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)))},t}(Sv),H3=function(e){function t(n,r,i){var o=this;return(o=e.call(this)||this).type=n,o.Yc=r,o.Xc=i,o}return(0,D.__extends)(t,e),t.prototype._apply=function(n){var i,o,r=$3(n,this.type,this.Yc,this.Xc);return new No(n.firestore,n.converter,(o=r,new xu((i=n._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)))},t}(Sv);function $3(e,t,n,r){if(n[0]=(0,ze.getModularInstance)(n[0]),n[0]instanceof Iv)return function(o,a,c,d,m){if(!d)throw new ve(X.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var v=[],w=0,C=qd(o);w<C.length;w++){var S=C[w];if(S.field.isKeyField())v.push(Xw(a,d.key));else{var A=d.data.field(S.field);if(w1(A))throw new ve(X.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){var x=S.field.canonicalString();throw new ve(X.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+x+"' (used as the orderBy) does not exist.")}v.push(A)}}return new cv(v,m)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Nf(e.firestore);return function(o,a,c,d,m,v){var w=o.explicitOrderBy;if(m.length>w.length)throw new ve(X.INVALID_ARGUMENT,"Too many arguments provided to "+d+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var C=[],S=0;S<m.length;S++){var A=m[S];if(w[S].field.isKeyField()){if("string"!=typeof A)throw new ve(X.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+d+"(), but got a "+typeof A);if(!S1(o)&&-1!==A.indexOf("/"))throw new ve(X.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+d+"() must be a plain document ID, but '"+A+"' contains a slash.");var x=o.path.child(cn.fromString(A));if(!nt.isDocumentKey(x))throw new ve(X.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+d+"() must result in a valid document path, but '"+x+"' is not because it contains an odd number of segments.");var V=new nt(x);C.push(Xw(a,V))}else{var H=O3(c,d,A);C.push(H)}}return new cv(C,v)}(e._query,e.firestore._databaseId,i,t,n,r)}function q3(e,t,n){if("string"==typeof(n=(0,ze.getModularInstance)(n))){if(""===n)throw new ve(X.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!S1(t)&&-1!==n.indexOf("/"))throw new ve(X.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(cn.fromString(n));if(!nt.isDocumentKey(r))throw new ve(X.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Xw(e,new nt(r))}if(n instanceof Yn)return Xw(e,n._key);throw new ve(X.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Ib(n)+".")}function G3(e,t){if(!Array.isArray(e)||0===e.length)throw new ve(X.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new ve(X.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function z3(e,t,n){if(!n.isEqual(t))throw new ve(X.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var CA=function(){function e(){}return e.prototype.convertValue=function(t,n){switch(void 0===n&&(n="none"),Ef(t)){case 0:return null;case 1:return t.booleanValue;case 2:return kr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(jd(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw Ze()}},e.prototype.convertObject=function(t,n){var r=this,i={};return wf(t.fields,function(o,a){i[o]=r.convertValue(a,n)}),i},e.prototype.convertGeoPoint=function(t){return new Sb(kr(t.latitude),kr(t.longitude))},e.prototype.convertArray=function(t,n){var r=this;return(t.values||[]).map(function(i){return r.convertValue(i,n)})},e.prototype.convertServerTimestamp=function(t,n){switch(n){case"previous":var r=lj(t);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ov(t));default:return null}},e.prototype.convertTimestamp=function(t){var n=Kc(t);return new Ao(n.seconds,n.nanos)},e.prototype.convertDocumentKey=function(t,n){var r=cn.fromString(t);vt(oB(r));var i=new Db(r.get(1),r.get(3)),o=new nt(r.popFirst(5));return i.isEqual(n)||Nr("Document "+o+" contains a document reference within a different database ("+i.projectId+"/"+i.database+") which is not supported. It will be treated as a reference in the current database ("+n.projectId+"/"+n.database+") instead."),o},e}();function Nb(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var aie=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return(0,D.__extends)(t,e),t.prototype.convertBytes=function(n){return new Mf(n)},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return new Yn(this.firestore,null,r)},t}(CA),uie=function(){function e(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Nf(t)}return e.prototype.set=function(t,n,r){this._verifyNotCommitted();var i=sl(t,this._firestore),o=Nb(i.converter,n,r),a=Ab(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(a.toMutation(i._key,Oi.none())),this},e.prototype.update=function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];this._verifyNotCommitted();var a,c=sl(t,this._firestore);return a="string"==typeof(n=(0,ze.getModularInstance)(n))||n instanceof Ua?_A(this._dataReader,"WriteBatch.update",c._key,n,r,i):yA(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(a.toMutation(c._key,Oi.exists(!0))),this},e.prototype.delete=function(t){this._verifyNotCommitted();var n=sl(t,this._firestore);return this._mutations=this._mutations.concat(new pv(n._key,Oi.none())),this},e.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},e.prototype._verifyNotCommitted=function(){if(this._committed)throw new ve(X.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();function sl(e,t){if((e=(0,ze.getModularInstance)(e)).firestore!==t)throw new ve(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Of=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return(0,D.__extends)(t,e),t.prototype.convertBytes=function(n){return new Mf(n)},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return new Yn(this.firestore,null,r)},t}(CA);function W3(e,t,n){e=ln(e,Yn);var r=ln(e.firestore,_r),i=Nb(e.converter,t,n);return Av(r,[Ab(Nf(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Oi.none())])}function K3(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e=ln(e,Yn);var o=ln(e.firestore,_r),a=Nf(o);return Av(o,[("string"==typeof(t=(0,ze.getModularInstance)(t))||t instanceof Ua?_A(a,"updateDoc",e._key,t,n,r):yA(a,"updateDoc",e._key,t)).toMutation(e._key,Oi.exists(!0))])}function Q3(e){for(var t,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];e=(0,ze.getModularInstance)(e);var a={includeMetadataChanges:!1},c=0;"object"!=typeof i[c]||hp(i[c])||(a=i[c],c++);var d,m,v,w={includeMetadataChanges:a.includeMetadataChanges};if(hp(i[c])){var C=i[c];i[c]=null===(t=C.next)||void 0===t?void 0:t.bind(C),i[c+1]=null===(n=C.error)||void 0===n?void 0:n.bind(C),i[c+2]=null===(r=C.complete)||void 0===r?void 0:r.bind(C)}if(e instanceof Yn)m=ln(e.firestore,_r),v=$d(e._key.path),d={next:function(x){i[c]&&i[c](DA(m,e,x))},error:i[c+1],complete:i[c+2]};else{var S=ln(e,No);m=ln(S.firestore,_r),v=S._query;var A=new Of(m);d={next:function(x){i[c]&&i[c](new il(m,A,S,x))},error:i[c+1],complete:i[c+2]},U3(e._query)}return function(x,V,H,K){var q=this,fe=new Eb(K),Se=new rA(V,fe,H);return x.asyncQueue.enqueueAndForget(function(){return(0,D.__awaiter)(q,void 0,void 0,function(){var he;return(0,D.__generator)(this,function(pn){switch(pn.label){case 0:return he=eA,[4,fp(x)];case 1:return[2,he.apply(void 0,[pn.sent(),Se])]}})})}),function(){fe.Wo(),x.asyncQueue.enqueueAndForget(function(){return(0,D.__awaiter)(q,void 0,void 0,function(){var he;return(0,D.__generator)(this,function(pn){switch(pn.label){case 0:return he=tA,[4,fp(x)];case 1:return[2,he.apply(void 0,[pn.sent(),Se])]}})})})}}(ai(m),v,w,d)}function Av(e,t){return function(n,r){var i=this,o=new Li;return n.asyncQueue.enqueueAndForget(function(){return(0,D.__awaiter)(i,void 0,void 0,function(){var a;return(0,D.__generator)(this,function(c){switch(c.label){case 0:return a=wre,[4,pA(n)];case 1:return[2,a.apply(void 0,[c.sent(),r,o])]}})})}),o.promise}(ai(e),t)}function DA(e,t,n){var r=n.docs.get(t._key),i=new Of(e);return new Lu(e,i,t._key,r,new xf(n.hasPendingWrites,n.fromCache),t.converter)}var cie=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this)._firestore=n,i}return(0,D.__extends)(t,e),t.prototype.get=function(n){var r=this,i=sl(n,this._firestore),o=new Of(this._firestore);return e.prototype.get.call(this,n).then(function(a){return new Lu(r._firestore,o,i._key,a._document,new xf(!1,!1),i.converter)})},t}(function(){function e(t,n){this._firestore=t,this._transaction=n,this._dataReader=Nf(t)}return e.prototype.get=function(t){var n=this,r=sl(t,this._firestore),i=new aie(this._firestore);return this._transaction.lookup([r._key]).then(function(o){if(!o||1!==o.length)return Ze();var a=o[0];if(a.isFoundDocument())return new Iv(n._firestore,i,a.key,a,r.converter);if(a.isNoDocument())return new Iv(n._firestore,i,r._key,null,r.converter);throw Ze()})},e.prototype.set=function(t,n,r){var i=sl(t,this._firestore),o=Nb(i.converter,n,r),a=Ab(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,a),this},e.prototype.update=function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a,c=sl(t,this._firestore);return a="string"==typeof(n=(0,ze.getModularInstance)(n))||n instanceof Ua?_A(this._dataReader,"Transaction.update",c._key,n,r,i):yA(this._dataReader,"Transaction.update",c._key,n),this._transaction.update(c._key,a),this},e.prototype.delete=function(t){var n=sl(t,this._firestore);return this._transaction.delete(n._key),this},e}());function Y3(){if(typeof Uint8Array>"u")throw new ve(X.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function X3(){if(typeof atob>"u")throw new ve(X.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var J3=function(){function e(t){this._delegate=t}return e.fromBase64String=function(t){return X3(),new e(Mf.fromBase64String(t))},e.fromUint8Array=function(t){return Y3(),new e(Mf.fromUint8Array(t))},e.prototype.toBase64=function(){return X3(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return Y3(),this._delegate.toUint8Array()},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(),lie=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(t,n){return function(r,i){M3(r=ln(r,_r));var o=ai(r),a=r._freezeSettings(),c=new fA;return A3(o,c,new u3(c,a.cacheSizeBytes,i?.forceOwnership))}(t._delegate,{forceOwnership:n})},e.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(n){M3(n=ln(n,_r));var r=ai(n),i=n._freezeSettings(),o=new fA;return A3(r,o,new Fre(o,i.cacheSizeBytes))}(t._delegate)},e.prototype.clearIndexedDbPersistence=function(t){return function(n){var r=this;if(n._initialized&&!n._terminated)throw new ve(X.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var i=new Li;return n._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,D.__awaiter)(r,void 0,void 0,function(){var o;return(0,D.__generator)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,function(c){return(0,D.__awaiter)(this,void 0,void 0,function(){return(0,D.__generator)(this,function(m){switch(m.label){case 0:return Xd.yt()?[4,Xd.delete(c+"main")]:[2,Promise.resolve()];case 1:return m.sent(),[2]}})})}($1(n._databaseId,n._persistenceKey))];case 1:return a.sent(),i.resolve(),[3,3];case 2:return o=a.sent(),i.reject(o),[3,3];case 3:return[2]}})})}),i.promise}(t._delegate)},e}(),IA=function(){function e(t,n,r){var i=this;this._delegate=n,this.Zc=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Db||(this.tu=t)}return Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){var n=this._delegate._getSettings();t.merge||n.host===t.host||iv("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},n),t)).merge,this._delegate._setSettings(t)},e.prototype.useEmulator=function(t,n,r){void 0===r&&(r={}),function(i,o,a,c){var d;void 0===c&&(c={});var m=(i=ln(i,Dv))._getSettings();if("firestore.googleapis.com"!==m.host&&m.host!==o&&iv("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},m),{host:o+":"+a,ssl:!1})),c.mockUserToken){var v,w;if("string"==typeof c.mockUserToken)v=c.mockUserToken,w=wi.MOCK_USER;else{v=(0,ze.createMockUserToken)(c.mockUserToken,null===(d=i._app)||void 0===d?void 0:d.options.projectId);var C=c.mockUserToken.sub||c.mockUserToken.user_id;if(!C)throw new ve(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new wi(C)}i._credentials=new Hre(new v3(v,w))}}(this._delegate,t,n,r)},e.prototype.enableNetwork=function(){return function(t){var n=this;return t.asyncQueue.enqueue(function(){return(0,D.__awaiter)(n,void 0,void 0,function(){var r,i;return(0,D.__generator)(this,function(o){switch(o.label){case 0:return[4,h3(t)];case 1:return r=o.sent(),[4,d3(t)];case 2:return i=o.sent(),[2,(r.setNetworkEnabled(!0),a=i,c=Ne(a),c.Or.delete(0),Ev(c))]}var a,c})})})}(ai(ln(this._delegate,_r)))},e.prototype.disableNetwork=function(){return function(t){var n=this;return t.asyncQueue.enqueue(function(){return(0,D.__awaiter)(n,void 0,void 0,function(){var r,i;return(0,D.__generator)(this,function(o){switch(o.label){case 0:return[4,h3(t)];case 1:return r=o.sent(),[4,d3(t)];case 2:return i=o.sent(),[2,(r.setNetworkEnabled(!1),function(a){return(0,D.__awaiter)(this,void 0,void 0,function(){var c;return(0,D.__generator)(this,function(d){switch(d.label){case 0:return(c=Ne(a)).Or.add(0),[4,sp(c)];case 1:return d.sent(),c.Br.set("Offline"),[2]}})})}(i))]}})})})}(ai(ln(this._delegate,_r)))},e.prototype.enablePersistence=function(t){var n=!1,r=!1;return t&&_3("synchronizeTabs",n=!!t.synchronizeTabs,"experimentalForceOwningTab",r=!!t.experimentalForceOwningTab),n?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,r)},e.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var n=this,r=new Li;return t.asyncQueue.enqueueAndForget(function(){return(0,D.__awaiter)(n,void 0,void 0,function(){var i;return(0,D.__generator)(this,function(o){switch(o.label){case 0:return i=Dre,[4,pA(t)];case 1:return[2,i.apply(void 0,[o.sent(),r])]}})})}),r.promise}(ai(ln(this._delegate,_r)))},e.prototype.onSnapshotsInSync=function(t){return r=t,function(i,o){var a=this,c=new Eb(o);return i.asyncQueue.enqueueAndForget(function(){return(0,D.__awaiter)(a,void 0,void 0,function(){var d;return(0,D.__generator)(this,function(m){switch(m.label){case 0:return d=function(v,w){Ne(v).Gr.add(w),w.next()},[4,fp(i)];case 1:return[2,d.apply(void 0,[m.sent(),c])]}})})}),function(){c.Wo(),i.asyncQueue.enqueueAndForget(function(){return(0,D.__awaiter)(a,void 0,void 0,function(){var d;return(0,D.__generator)(this,function(m){switch(m.label){case 0:return d=function(v,w){Ne(v).Gr.delete(w)},[4,fp(i)];case 1:return[2,d.apply(void 0,[m.sent(),c])]}})})})}}(ai(ln(this._delegate,_r)),hp(r)?r:{next:r});var r},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.tu)throw new ve(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Ob(this,D3(this._delegate,t))}catch(n){throw uo(n,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new Pf(this,Tb(this._delegate,t))}catch(n){throw uo(n,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Nv(this,function(n,r){if(n=ln(n,Dv),gA("collectionGroup","collection id",r),r.indexOf("/")>=0)throw new ve(X.INVALID_ARGUMENT,"Invalid collection ID '"+r+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new No(n,null,(i=r,new xu(cn.emptyPath(),i)));var i}(this._delegate,t))}catch(n){throw uo(n,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var r,n=this;return function(o,a){var c=this,d=new Li;return o.asyncQueue.enqueueAndForget(function(){return(0,D.__awaiter)(c,void 0,void 0,function(){var m;return(0,D.__generator)(this,function(v){switch(v.label){case 0:return[4,(w=o,Cb(w).then(function(C){return C.datastore}))];case 1:return m=v.sent(),new Ure(o.asyncQueue,m,a,d).run(),[2]}var w})})}),d.promise}(ai(r=this._delegate),function(o){return function(r){return t(new Z3(n,r))}(new cie(r,o))})},e.prototype.batch=function(){var t=this;return ai(this._delegate),new e4(new uie(this._delegate,function(n){return Av(t._delegate,n)}))},e.prototype.loadBundle=function(t){throw new ve(X.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new ve(X.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(),kb=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return(0,D.__extends)(t,e),t.prototype.convertBytes=function(n){return new J3(new Mf(n))},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return Pf.eu(r,this.firestore,null)},t}(CA),Z3=function(){function e(t,n){this._firestore=t,this._delegate=n,this._userDataWriter=new kb(t)}return e.prototype.get=function(t){var n=this,r=Ff(t);return this._delegate.get(r).then(function(i){return new Mv(n._firestore,new Lu(n._firestore._delegate,n._userDataWriter,i._key,i._document,i.metadata,r.converter))})},e.prototype.set=function(t,n,r){var i=Ff(t);return r?(mA("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this},e.prototype.update=function(t,n,r){for(var i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];var c=Ff(t);return 2===arguments.length?this._delegate.update(c,n):(i=this._delegate).update.apply(i,(0,D.__spreadArray)([c,n,r],o)),this},e.prototype.delete=function(t){var n=Ff(t);return this._delegate.delete(n),this},e}(),e4=function(){function e(t){this._delegate=t}return e.prototype.set=function(t,n,r){var i=Ff(t);return r?(mA("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this},e.prototype.update=function(t,n,r){for(var i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];var c=Ff(t);return 2===arguments.length?this._delegate.update(c,n):(i=this._delegate).update.apply(i,(0,D.__spreadArray)([c,n,r],o)),this},e.prototype.delete=function(t){var n=Ff(t);return this._delegate.delete(n),this},e.prototype.commit=function(){return this._delegate.commit()},e}(),xb=function(){function e(t,n,r){this._firestore=t,this._userDataWriter=n,this._delegate=r}return e.prototype.fromFirestore=function(t,n){var r=new Tv(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Rv(this._firestore,r),n??{})},e.prototype.toFirestore=function(t,n){return n?this._delegate.toFirestore(t,n):this._delegate.toFirestore(t)},e.nu=function(t,n){var r=e.su,i=r.get(t);i||r.set(t,i=new WeakMap);var o=i.get(n);return o||(o=new e(t,new kb(t),n),i.set(n,o)),o},e}();xb.su=new WeakMap;var Pf=function(){function e(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new kb(t)}return e.iu=function(t,n,r){if(t.length%2!=0)throw new ve(X.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new Yn(n._delegate,r,new nt(t)))},e.eu=function(t,n,r){return new e(n,new Yn(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Ob(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Ob(this.firestore,D3(this._delegate,t))}catch(n){throw uo(n,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return(t=(0,ze.getModularInstance)(t))instanceof Yn&&I3(this._delegate,t)},e.prototype.set=function(t,n){n=mA("DocumentReference.set",n);try{return n?W3(this._delegate,t,n):W3(this._delegate,t)}catch(r){throw uo(r,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];try{return 1===arguments.length?K3(this._delegate,t):K3.apply(void 0,(0,D.__spreadArray)([this._delegate,t,n],r))}catch(o){throw uo(o,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Av(ln((t=this._delegate).firestore,_r),[new pv(t._key,Oi.none())]);var t},e.prototype.onSnapshot=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t4(n),o=n4(n,function(a){return new Mv(t.firestore,new Lu(t.firestore._delegate,t._userDataWriter,a._key,a._document,a.metadata,t._delegate.converter))});return Q3(this._delegate,i,o)},e.prototype.get=function(t){var n=this;return("cache"===t?.source?function(r){r=ln(r,Yn);var i=ln(r.firestore,_r),o=ai(i),a=new Of(i);return function(c,d){var m=this,v=new Li;return c.asyncQueue.enqueueAndForget(function(){return(0,D.__awaiter)(m,void 0,void 0,function(){var w;return(0,D.__generator)(this,function(C){switch(C.label){case 0:return w=function(S,A,x){return(0,D.__awaiter)(this,void 0,void 0,function(){var V,H;return(0,D.__generator)(this,function(K){switch(K.label){case 0:return K.trys.push([0,2,,3]),[4,(q=S,fe=A,Se=Ne(q),Se.persistence.runTransaction("read document","readonly",function(he){return Se.Mn.mn(he,fe)}))];case 1:return(H=K.sent()).isFoundDocument()?x.resolve(H):H.isNoDocument()?x.resolve(null):x.reject(new ve(X.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return V=K.sent(),H=cp(V,"Failed to get document '"+A+" from cache"),x.reject(H),[3,3];case 3:return[2]}var q,fe,Se})})},[4,dA(c)];case 1:return[2,w.apply(void 0,[C.sent(),d,v])]}})})}),v.promise}(o,r._key).then(function(c){return new Lu(i,a,r._key,c,new xf(null!==c&&c.hasLocalMutations,!0),r.converter)})}(this._delegate):"server"===t?.source?function(r){r=ln(r,Yn);var i=ln(r.firestore,_r);return p3(ai(i),r._key,{source:"server"}).then(function(o){return DA(i,r,o)})}(this._delegate):function(r){r=ln(r,Yn);var i=ln(r.firestore,_r);return p3(ai(i),r._key).then(function(o){return DA(i,r,o)})}(this._delegate)).then(function(r){return new Mv(n.firestore,new Lu(n.firestore._delegate,n._userDataWriter,r._key,r._document,r.metadata,n._delegate.converter))})},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?xb.nu(this.firestore,t):null))},e}();function uo(e,t,n){return e.message=e.message.replace(t,n),e}function t4(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if("object"==typeof r&&!hp(r))return r}return{}}function n4(e,t){var n,r,i;return{next:function(o){i.next&&i.next(t(o))},error:null===(n=(i=hp(e[0])?e[0]:hp(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Mv=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"ref",{get:function(){return new Pf(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._delegate.data(t)},e.prototype.get=function(t,n){return this._delegate.get(t,n)},e.prototype.isEqual=function(t){return V3(this._delegate,t._delegate)},e}(),Rv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,D.__extends)(t,e),t.prototype.data=function(n){return this._delegate.data(n)},t}(Mv),Nv=function(){function e(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new kb(t)}return e.prototype.where=function(t,n,r){try{return new e(this.firestore,ol(this._delegate,(a=r,c=n,d=Rb("where",i=t),new oie(d,c,a))))}catch(i){throw uo(i,/(orderBy|where)\(\)/,"Query.$1()")}var i,a,c,d},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,ol(this._delegate,function(r,i){void 0===i&&(i="asc");var o=i,a=Rb("orderBy",r);return new sie(a,o)}(t,n)))}catch(r){throw uo(r,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,ol(this._delegate,(E3("limit",n=t),new j3("limit",n,"F"))))}catch(n){throw uo(n,"limit()","Query.limit()")}var n},e.prototype.limitToLast=function(t){try{return new e(this.firestore,ol(this._delegate,(E3("limitToLast",n=t),new j3("limitToLast",n,"L"))))}catch(n){throw uo(n,"limitToLast()","Query.limitToLast()")}var n},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,ol(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new B3("startAt",r,!0)}.apply(void 0,t)))}catch(r){throw uo(r,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,ol(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new B3("startAfter",r,!1)}.apply(void 0,t)))}catch(r){throw uo(r,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,ol(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new H3("endBefore",r,!0)}.apply(void 0,t)))}catch(r){throw uo(r,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,ol(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new H3("endAt",r,!1)}.apply(void 0,t)))}catch(r){throw uo(r,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return T3(this._delegate,t._delegate)},e.prototype.get=function(t){var n=this;return("cache"===t?.source?function(r){r=ln(r,No);var i=ln(r.firestore,_r),o=ai(i),a=new Of(i);return function(c,d){var m=this,v=new Li;return c.asyncQueue.enqueueAndForget(function(){return(0,D.__awaiter)(m,void 0,void 0,function(){var w;return(0,D.__generator)(this,function(C){switch(C.label){case 0:return w=function(S,A,x){return(0,D.__awaiter)(this,void 0,void 0,function(){var V,H,K,q,fe;return(0,D.__generator)(this,function(Se){switch(Se.label){case 0:return Se.trys.push([0,2,,3]),[4,vb(S,A,!0)];case 1:return fe=Se.sent(),V=new t3(A,fe.Bn),H=V._o(fe.documents),K=V.applyChanges(H,!1),x.resolve(K.snapshot),[3,3];case 2:return q=Se.sent(),fe=cp(q,"Failed to execute query '"+A+" against cache"),x.reject(fe),[3,3];case 3:return[2]}})})},[4,dA(c)];case 1:return[2,w.apply(void 0,[C.sent(),d,v])]}})})}),v.promise}(o,r._query).then(function(c){return new il(i,a,r,c)})}(this._delegate):"server"===t?.source?function(r){r=ln(r,No);var i=ln(r.firestore,_r),o=ai(i),a=new Of(i);return g3(o,r._query,{source:"server"}).then(function(c){return new il(i,a,r,c)})}(this._delegate):function(r){r=ln(r,No);var i=ln(r.firestore,_r),o=ai(i),a=new Of(i);return U3(r._query),g3(o,r._query).then(function(c){return new il(i,a,r,c)})}(this._delegate)).then(function(r){return new TA(n.firestore,new il(n.firestore._delegate,n._userDataWriter,n._delegate,r._snapshot))})},e.prototype.onSnapshot=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t4(n),o=n4(n,function(a){return new TA(t.firestore,new il(t.firestore._delegate,t._userDataWriter,t._delegate,a._snapshot))});return Q3(this._delegate,i,o)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?xb.nu(this.firestore,t):null))},e}(),hie=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Rv(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(),TA=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"query",{get:function(){return new Nv(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(n){return new Rv(t._firestore,n)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var n=this;return this._delegate.docChanges(t).map(function(r){return new hie(n._firestore,r)})},e.prototype.forEach=function(t,n){var r=this;this._delegate.forEach(function(i){t.call(n,new Rv(r._firestore,i))})},e.prototype.isEqual=function(t){return V3(this._delegate,t._delegate)},e}(),Ob=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this).firestore=n,i._delegate=r,i}return(0,D.__extends)(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var n=this._delegate.parent;return n?new Pf(this.firestore,n):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(n){try{return new Pf(this.firestore,void 0===n?Tb(this._delegate):Tb(this._delegate,n))}catch(r){throw uo(r,"doc()","CollectionReference.doc()")}},t.prototype.add=function(n){var i,o,a,c,d,r=this;return(i=this._delegate,o=n,a=ln(i.firestore,_r),c=Tb(i),d=Nb(i.converter,o),Av(a,[Ab(Nf(i.firestore),"addDoc",c._key,d,null!==i.converter,{}).toMutation(c._key,Oi.exists(!1))]).then(function(){return c})).then(function(i){return new Pf(r.firestore,i)})},t.prototype.isEqual=function(n){return I3(this._delegate,n._delegate)},t.prototype.withConverter=function(n){return new t(this.firestore,this._delegate.withConverter(n?xb.nu(this.firestore,n):null))},t}(Nv);function Ff(e){return ln(e,Yn)}var die=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._delegate=new(Ua.bind.apply(Ua,(0,D.__spreadArray)([void 0],t)))}return e.documentId=function(){return new e(Qs.keyField().canonicalString())},e.prototype.isEqual=function(t){return(t=(0,ze.getModularInstance)(t))instanceof Ua&&this._delegate._internalPath.isEqual(t._internalPath)},e}(),pie=function(){function e(t){this._delegate=t}return e.serverTimestamp=function(){var t=new Jre("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new vA("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return new Zre("arrayUnion",i)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return new eie("arrayRemove",i)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=new tie("increment",t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e}();function gie(e){return n=e,r=ai(t=ln(t=this._delegate,_r)),i=new Wre,function(o,a,c,d){var w,C,S,m=this,v=(w=c,C=bv(a),S=function(S,A){if(S instanceof Uint8Array)return c3(S,A);if(S instanceof ArrayBuffer)return c3(new Uint8Array(S),A);if(S instanceof ReadableStream)return S.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof w?(new TextEncoder).encode(w):w),new Lre(S,C));o.asyncQueue.enqueueAndForget(function(){return(0,D.__awaiter)(m,void 0,void 0,function(){var w;return(0,D.__generator)(this,function(C){switch(C.label){case 0:return w=Pre,[4,pA(o)];case 1:return w.apply(void 0,[C.sent(),v,d]),[2]}})})})}(r,t._databaseId,n,i),i;var t,n,r,i}function mie(e){var t,n,r=this;return(t=this._delegate,n=e,function(i,o){var a=this;return i.asyncQueue.enqueue(function(){return(0,D.__awaiter)(a,void 0,void 0,function(){var c;return(0,D.__generator)(this,function(d){switch(d.label){case 0:return c=function(m,v){var w=Ne(m);return w.persistence.runTransaction("Get named query","readonly",function(C){return w.Ke.getNamedQuery(C,v)})},[4,dA(i)];case 1:return[2,c.apply(void 0,[d.sent(),o])]}})})})}(ai(t=ln(t,_r)),n).then(function(i){return i?new No(t,null,i.query):null})).then(function(i){return i?new Nv(r,i):null})}var Vu=gt(461),vie={Firestore:IA,GeoPoint:Sb,Timestamp:Ao,Blob:J3,Transaction:Z3,WriteBatch:e4,DocumentReference:Pf,DocumentSnapshot:Mv,Query:Nv,QueryDocumentSnapshot:Rv,QuerySnapshot:TA,CollectionReference:Ob,FieldPath:die,FieldValue:pie,setLogLevel:function fie(e){Ks.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};!function yie(e){e.INTERNAL.registerComponent(new Vu.Component("firestore",function(r){return t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),new IA(t,new _r(t,n),new lie);var t,n},"PUBLIC").setServiceProps(Object.assign({},vie))),e.registerVersion("@firebase/firestore","2.4.1")}(Xe.default),function _ie(e){e.prototype.loadBundle=gie,e.prototype.namedQuery=mie}(IA);var r4={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},dp=function(e){function t(n,r,i){var o=e.call(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o.code=n,o.details=i,o}return(0,D.__extends)(t,e),t}(Error),Eie=function(){function e(t,n){var r=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then(function(i){return r.auth=i},function(){}),this.messaging||n.get().then(function(i){return r.messaging=i},function(){})}return e.prototype.getAuthToken=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){var t;return(0,D.__generator)(this,function(n){switch(n.label){case 0:if(!this.auth)return[2,void 0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=n.sent())?[2,t.accessToken]:[2,void 0];case 3:return n.sent(),[2,void 0];case 4:return[2]}})})},e.prototype.getInstanceIdToken=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){return(0,D.__generator)(this,function(t){switch(t.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},e.prototype.getContext=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,D.__generator)(this,function(r){switch(r.label){case 0:return[4,this.getAuthToken()];case 1:return t=r.sent(),[4,this.getInstanceIdToken()];case 2:return n=r.sent(),[2,{authToken:t,instanceIdToken:n}]}})})},e}();function i4(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var Iie=function(){function e(){}return e.prototype.encode=function(t){var n=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t)||!0===t||!1===t||"[object String]"===Object.prototype.toString.call(t))return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(function(r){return n.encode(r)});if("function"==typeof t||"object"==typeof t)return i4(t,function(r){return n.encode(r)});throw new Error("Data cannot be encoded in JSON: "+t)},e.prototype.decode=function(t){var n=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var r=Number(t.value);if(isNaN(r))throw new Error("Data cannot be decoded from JSON: "+t);return r;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(i){return n.decode(i)}):"function"==typeof t||"object"==typeof t?i4(t,function(i){return n.decode(i)}):t},e}(),o4=function(){function e(t,n,r,i,o,a){var c=this;void 0===o&&(o="us-central1"),this.app_=t,this.appCheckProvider=i,this.fetchImpl=a,this.serializer=new Iie,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(c.deleteService())}},this.contextProvider=new Eie(n,r),this.cancelAllRequests=new Promise(function(m){c.deleteService=function(){return m()}});try{var d=new URL(o);this.customDomain=d.origin,this.region="us-central1"}catch{this.customDomain=null,this.region=o}}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),e.prototype._url=function(t){var n=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+n+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+n+".cloudfunctions.net/"+t},e.prototype.useEmulator=function(t,n){this.emulatorOrigin="http://"+t+":"+n},e.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},e.prototype.httpsCallable=function(t,n){var r=this;return function(i){return r.call(t,i,n||{})}},e.prototype.postJSON=function(t,n,r){return(0,D.__awaiter)(this,void 0,void 0,function(){var i,o,a;return(0,D.__generator)(this,function(c){switch(c.label){case 0:return r["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(i=c.sent())&&(r["X-Firebase-AppCheck"]=i),c.label=2;case 2:return c.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(n),headers:r})];case 3:return o=c.sent(),[3,5];case 4:return c.sent(),[2,{status:0,json:null}];case 5:a=null,c.label=6;case 6:return c.trys.push([6,8,,9]),[4,o.json()];case 7:return a=c.sent(),[3,9];case 8:return c.sent(),[3,9];case 9:return[2,{status:o.status,json:a}]}})})},e.prototype.getAppCheckToken=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){var t;return(0,D.__generator)(this,function(r){switch(r.label){case 0:return(t=this.appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,r.sent().token];case 2:return[2,null]}})})},e.prototype.call=function(t,n,r){return(0,D.__awaiter)(this,void 0,void 0,function(){var i,o,a,c,m,v,w,C,S,A;return(0,D.__generator)(this,function(V){switch(V.label){case 0:return i=this._url(t),n=this.serializer.encode(n),o={data:n},a={},[4,this.contextProvider.getContext()];case 1:return(c=V.sent()).authToken&&(a.Authorization="Bearer "+c.authToken),c.instanceIdToken&&(a["Firebase-Instance-ID-Token"]=c.instanceIdToken),m=function Tie(e){var t,n=new Promise(function(r,i){t=setTimeout(function(){i(new dp("deadline-exceeded","deadline-exceeded"))},e)});return{timer:t,promise:n}}(r.timeout||7e4),v=m.timer,w=m.promise,[4,Promise.race([s4(v,this.postJSON(i,o,a)),w,s4(v,this.cancelAllRequests)])];case 2:if(!(C=V.sent()))throw new dp("cancelled","Firebase Functions instance was deleted.");if(S=function bie(e,t,n){var r=function wie(e){if(e>=200&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r,o=void 0;try{var a=t&&t.error;if(a){var c=a.status;if("string"==typeof c){if(!r4[c])return new dp("internal","internal");r=r4[c],i=c}var d=a.message;"string"==typeof d&&(i=d),void 0!==(o=a.details)&&(o=n.decode(o))}}catch{}return"ok"===r?null:new dp(r,i,o)}(C.status,C.json,this.serializer),S)throw S;if(!C.json)throw new dp("internal","Response is not valid JSON object.");if(typeof(A=C.json.data)>"u"&&(A=C.json.result),typeof A>"u")throw new dp("internal","Response is missing data field.");return[2,{data:this.serializer.decode(A)}]}})})},e}();function s4(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n;return(0,D.__generator)(this,function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),clearTimeout(e),[2,n]}})})}(function Aie(e,t){var n={Functions:o4};e.INTERNAL.registerComponent(new Vu.Component("functions",function r(i,o){var a=o.instanceIdentifier,c=i.getProvider("app").getImmediate(),d=i.getProvider("auth-internal"),m=i.getProvider("app-check-internal"),v=i.getProvider("messaging");return new o4(c,d,v,m,a,t)},"PUBLIC").setServiceProps(n).setMultipleInstances(!0))})(Xe.default,fetch.bind(self)),Xe.default.registerVersion("@firebase/functions","0.6.16");var al,pp=gt(940),u4=1e4,c4="w:0.4.32",l4="FIS_v2",kie="https://firebaseinstallations.googleapis.com/v1",xie=36e5,Fie=((al={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',al["not-registered"]="Firebase Installation is not registered.",al["installation-not-found"]="Firebase Installation not found.",al["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',al["app-offline"]="Could not process request. Application offline.",al["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",al),Uu=new ze.ErrorFactory("installations","Installations",Fie);function f4(e){return e instanceof ze.FirebaseError&&e.code.includes("request-failed")}function SA(e){return kie+"/projects/"+e.projectId+"/installations"}function h4(e){return{token:e.token,requestStatus:2,expiresIn:Lie(e.expiresIn),creationTime:Date.now()}}function AA(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,D.__generator)(this,function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),[2,Uu.create("request-failed",{requestName:e,serverCode:(r=n.error).code,serverMessage:r.message,serverStatus:r.status})]}})})}function d4(e){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey})}function p4(e,t){var n=t.refreshToken,r=d4(e);return r.append("Authorization",function Vie(e){return l4+" "+e}(n)),r}function MA(e){return(0,D.__awaiter)(this,void 0,void 0,function(){var t;return(0,D.__generator)(this,function(n){switch(n.label){case 0:return[4,e()];case 1:return(t=n.sent()).status>=500&&t.status<600?[2,e()]:[2,t]}})})}function Lie(e){return Number(e.replace("s","000"))}function Uie(e,t){var n=t.fid;return(0,D.__awaiter)(this,void 0,void 0,function(){var r,i,a,c,d;return(0,D.__generator)(this,function(v){switch(v.label){case 0:return r=SA(e),i=d4(e),a={method:"POST",headers:i,body:JSON.stringify({fid:n,authVersion:l4,appId:e.appId,sdkVersion:c4})},[4,MA(function(){return fetch(r,a)})];case 1:return(c=v.sent()).ok?[4,c.json()]:[3,3];case 2:return[2,{fid:(d=v.sent()).fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:h4(d.authToken)}];case 3:return[4,AA("Create Installation",c)];case 4:throw v.sent()}})})}function g4(e){return new Promise(function(t){setTimeout(t,e)})}var Bie=/^[cdef][\w-]{21}$/,RA="";function Hie(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var n=function $ie(e){var t=function jie(e){return btoa(String.fromCharCode.apply(String,(0,D.__spreadArray)([],(0,D.__read)(e)))).replace(/\+/g,"-").replace(/\//g,"_")}(e);return t.substr(0,22)}(e);return Bie.test(n)?n:RA}catch{return RA}}function gp(e){return e.appName+"!"+e.appId}var mp=new Map;function m4(e,t){var n=gp(e);v4(n,t),function zie(e,t){var n=y4();n&&n.postMessage({key:e,fid:t}),_4()}(n,t)}function v4(e,t){var n,r,i=mp.get(e);if(i)try{for(var o=(0,D.__values)(i),a=o.next();!a.done;a=o.next())(0,a.value)(t)}catch(d){n={error:d}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var Lf=null;function y4(){return!Lf&&"BroadcastChannel"in self&&((Lf=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){v4(e.data.key,e.data.fid)}),Lf}function _4(){0===mp.size&&Lf&&(Lf.close(),Lf=null)}var Wie="firebase-installations-database",Kie=1,Vf="firebase-installations-store",NA=null;function kA(){return NA||(NA=(0,pp.openDb)(Wie,Kie,function(e){0===e.oldVersion&&e.createObjectStore(Vf)})),NA}function Pb(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,a;return(0,D.__generator)(this,function(c){switch(c.label){case 0:return n=gp(e),[4,kA()];case 1:return r=c.sent(),i=r.transaction(Vf,"readwrite"),[4,(o=i.objectStore(Vf)).get(n)];case 2:return a=c.sent(),[4,o.put(t,n)];case 3:return c.sent(),[4,i.complete];case 4:return c.sent(),(!a||a.fid!==t.fid)&&m4(e,t.fid),[2,t]}})})}function xA(e){return(0,D.__awaiter)(this,void 0,void 0,function(){var t,n,r;return(0,D.__generator)(this,function(i){switch(i.label){case 0:return t=gp(e),[4,kA()];case 1:return n=i.sent(),[4,(r=n.transaction(Vf,"readwrite")).objectStore(Vf).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function kv(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,a,c;return(0,D.__generator)(this,function(d){switch(d.label){case 0:return n=gp(e),[4,kA()];case 1:return r=d.sent(),i=r.transaction(Vf,"readwrite"),[4,(o=i.objectStore(Vf)).get(n)];case 2:return a=d.sent(),void 0!==(c=t(a))?[3,4]:[4,o.delete(n)];case 3:return d.sent(),[3,6];case 4:return[4,o.put(c,n)];case 5:d.sent(),d.label=6;case 6:return[4,i.complete];case 7:return d.sent(),c&&(!a||a.fid!==c.fid)&&m4(e,c.fid),[2,c]}})})}function OA(e){return(0,D.__awaiter)(this,void 0,void 0,function(){var t,n,r;return(0,D.__generator)(this,function(i){switch(i.label){case 0:return[4,kv(e,function(o){var a=function Qie(e){return b4(e||{fid:Hie(),registrationStatus:0})}(o),c=function Yie(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Uu.create("app-offline"))};var r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=function Xie(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,D.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,Uie(e,t)];case 1:return n=i.sent(),[2,Pb(e,n)];case 2:return f4(r=i.sent())&&409===r.customData.serverCode?[4,xA(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,Pb(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}(e,r);return{installationEntry:r,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Jie(e)}:{installationEntry:t}}(e,a);return t=c.registrationPromise,c.installationEntry})];case 1:return(n=i.sent()).fid!==RA?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}})})}function Jie(e){return(0,D.__awaiter)(this,void 0,void 0,function(){var t,n,r,i;return(0,D.__generator)(this,function(o){switch(o.label){case 0:return[4,w4(e)];case 1:t=o.sent(),o.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,g4(100)];case 3:return o.sent(),[4,w4(e)];case 4:return t=o.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,OA(e)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,t]}})})}function w4(e){return kv(e,function(t){if(!t)throw Uu.create("installation-not-found");return b4(t)})}function b4(e){return function Zie(e){return 1===e.registrationStatus&&e.registrationTime+u4<Date.now()}(e)?{fid:e.fid,registrationStatus:0}:e}function eoe(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return(0,D.__awaiter)(this,void 0,void 0,function(){var i,o,a,d,m;return(0,D.__generator)(this,function(C){switch(C.label){case 0:return i=function toe(e,t){var n=t.fid;return SA(e)+"/"+n+"/authTokens:generate"}(n,t),o=p4(n,t),(a=r.getImmediate({optional:!0}))&&o.append("x-firebase-client",a.getPlatformInfoString()),d={method:"POST",headers:o,body:JSON.stringify({installation:{sdkVersion:c4}})},[4,MA(function(){return fetch(i,d)})];case 1:return(m=C.sent()).ok?[4,m.json()]:[3,3];case 2:return[2,h4(C.sent())];case 3:return[4,AA("Generate Auth Token",m)];case 4:throw C.sent()}})})}function PA(e,t){return void 0===t&&(t=!1),(0,D.__awaiter)(this,void 0,void 0,function(){var n,r,o;return(0,D.__generator)(this,function(a){switch(a.label){case 0:return[4,kv(e.appConfig,function(c){if(!C4(c))throw Uu.create("not-registered");var d=c.authToken;if(!t&&function ioe(e){return 2===e.requestStatus&&!function ooe(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+xie}(e)}(d))return c;if(1===d.requestStatus)return n=function noe(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,D.__generator)(this,function(i){switch(i.label){case 0:return[4,E4(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,g4(100)];case 3:return i.sent(),[4,E4(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,PA(e,t)]:[2,r]}})})}(e,t),c;if(!navigator.onLine)throw Uu.create("app-offline");var m=function soe(e){var t={requestStatus:1,requestTime:Date.now()};return(0,D.__assign)((0,D.__assign)({},e),{authToken:t})}(c);return n=function roe(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,D.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,eoe(e,t)];case 1:return n=o.sent(),i=(0,D.__assign)((0,D.__assign)({},t),{authToken:n}),[4,Pb(e.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!f4(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,xA(e.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=(0,D.__assign)((0,D.__assign)({},t),{authToken:{requestStatus:0}}),[4,Pb(e.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}})})}(e,m),m})];case 1:return r=a.sent(),n?[4,n]:[3,3];case 2:return o=a.sent(),[3,4];case 3:o=r.authToken,a.label=4;case 4:return[2,o]}})})}function E4(e){return kv(e,function(t){if(!C4(t))throw Uu.create("not-registered");return function aoe(e){return 1===e.requestStatus&&e.requestTime+u4<Date.now()}(t.authToken)?(0,D.__assign)((0,D.__assign)({},t),{authToken:{requestStatus:0}}):t})}function C4(e){return void 0!==e&&2===e.registrationStatus}function loe(e){return(0,D.__awaiter)(this,void 0,void 0,function(){var t;return(0,D.__generator)(this,function(n){switch(n.label){case 0:return[4,OA(e)];case 1:return(t=n.sent().registrationPromise)?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}function foe(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,D.__generator)(this,function(a){switch(a.label){case 0:return n=function hoe(e,t){var n=t.fid;return SA(e)+"/"+n}(e,t),r=p4(e,t),i={method:"DELETE",headers:r},[4,MA(function(){return fetch(n,i)})];case 1:return(o=a.sent()).ok?[3,3]:[4,AA("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}})})}function FA(e){return Uu.create("missing-app-config-values",{valueName:e})}!function moe(e){e.INTERNAL.registerComponent(new Vu.Component("installations",function(n){var r=n.getProvider("app").getImmediate(),i=function goe(e){var t,n;if(!e||!e.options)throw FA("App Configuration");if(!e.name)throw FA("App Name");try{for(var i=(0,D.__values)(["projectId","apiKey","appId"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!e.options[a])throw FA(a)}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(r),a={appConfig:i,platformLoggerProvider:n.getProvider("platform-logger")},c={app:r,getId:function(){return function uoe(e){return(0,D.__awaiter)(this,void 0,void 0,function(){var t,n,r;return(0,D.__generator)(this,function(i){switch(i.label){case 0:return[4,OA(e.appConfig)];case 1:return t=i.sent(),n=t.installationEntry,(r=t.registrationPromise)?r.catch(console.error):PA(e).catch(console.error),[2,n.fid]}})})}(a)},getToken:function(d){return function coe(e,t){return void 0===t&&(t=!1),(0,D.__awaiter)(this,void 0,void 0,function(){return(0,D.__generator)(this,function(r){switch(r.label){case 0:return[4,loe(e.appConfig)];case 1:return r.sent(),[4,PA(e,t)];case 2:return[2,r.sent().token]}})})}(a,d)},delete:function(){return function doe(e){return(0,D.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,D.__generator)(this,function(r){switch(r.label){case 0:return[4,kv(t=e.appConfig,function(i){if(!i||0!==i.registrationStatus)return i})];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw Uu.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw Uu.create("app-offline");case 3:return[4,foe(t,n)];case 4:return r.sent(),[4,xA(t)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}(a)},onIdChange:function(d){return function poe(e,t){var n=e.appConfig;return function qie(e,t){y4();var n=gp(e),r=mp.get(n);r||mp.set(n,r=new Set),r.add(t)}(n,t),function(){!function Gie(e,t){var n=gp(e),r=mp.get(n);r&&(r.delete(t),0===r.size&&mp.delete(n),_4())}(n,t)}}(a,d)}};return c},"PUBLIC")),e.registerVersion("@firebase/installations","0.4.32")}(Xe.default);var Wr,voe=((Wr={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Wr["only-available-in-window"]="This method is available in a Window context.",Wr["only-available-in-sw"]="This method is available in a service worker context.",Wr["permission-default"]="The notification permission was not granted and dismissed instead.",Wr["permission-blocked"]="The notification permission was not granted and blocked instead.",Wr["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",Wr["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",Wr["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",Wr["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",Wr["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",Wr["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",Wr["token-update-no-token"]="FCM returned no token when updating the user to push.",Wr["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",Wr["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",Wr["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",Wr["invalid-vapid-key"]="The public VAPID key must be a string.",Wr["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",Wr),wn=new ze.ErrorFactory("messaging","Messaging",voe),Fb="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",woe="https://fcmregistrations.googleapis.com/v1",D4="FCM_MSG",I4="google.c.a.c_id",ul=(()=>(function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(ul||(ul={})),ul))();function ju(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,(0,D.__spreadArray)([],(0,D.__read)(t)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Soe(e){for(var n=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}var LA="fcm_token_details_db",Aoe=5,T4="fcm_token_object_Store";function Moe(e){return(0,D.__awaiter)(this,void 0,void 0,function(){var r,o=this;return(0,D.__generator)(this,function(a){switch(a.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!a.sent().map(function(c){return c.name}).includes(LA))return[2,null];a.label=2;case 2:return r=null,[4,(0,pp.openDb)(LA,Aoe,function(c){return(0,D.__awaiter)(o,void 0,void 0,function(){var d,m,v,w;return(0,D.__generator)(this,function(C){switch(C.label){case 0:return c.oldVersion<2?[2]:c.objectStoreNames.contains(T4)?[4,(d=c.transaction.objectStore(T4)).index("fcmSenderId").get(e)]:[2];case 1:return m=C.sent(),[4,d.clear()];case 2:if(C.sent(),!m)return[2];if(2===c.oldVersion){if(!(v=m).auth||!v.p256dh||!v.endpoint)return[2];r={token:v.fcmToken,createTime:null!==(w=v.createTime)&&void 0!==w?w:Date.now(),subscriptionOptions:{auth:v.auth,p256dh:v.p256dh,endpoint:v.endpoint,swScope:v.swScope,vapidKey:"string"==typeof v.vapidKey?v.vapidKey:ju(v.vapidKey)}}}else(3===c.oldVersion||4===c.oldVersion)&&(r={token:(v=m).fcmToken,createTime:v.createTime,subscriptionOptions:{auth:ju(v.auth),p256dh:ju(v.p256dh),endpoint:v.endpoint,swScope:v.swScope,vapidKey:ju(v.vapidKey)}});return[2]}})})})];case 3:return a.sent().close(),[4,(0,pp.deleteDb)(LA)];case 4:return a.sent(),[4,(0,pp.deleteDb)("fcm_vapid_details_db")];case 5:return a.sent(),[4,(0,pp.deleteDb)("undefined")];case 6:return a.sent(),[2,Roe(r)?r:null]}})})}function Roe(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}var Noe="firebase-messaging-database",koe=1,Uf="firebase-messaging-store",VA=null;function UA(){return VA||(VA=(0,pp.openDb)(Noe,koe,function(e){0===e.oldVersion&&e.createObjectStore(Uf)})),VA}function Lb(e){return(0,D.__awaiter)(this,void 0,void 0,function(){var t,r,i;return(0,D.__generator)(this,function(o){switch(o.label){case 0:return t=BA(e),[4,UA()];case 1:return[4,o.sent().transaction(Uf).objectStore(Uf).get(t)];case 2:return(r=o.sent())?[2,r]:[3,3];case 3:return[4,Moe(e.appConfig.senderId)];case 4:return(i=o.sent())?[4,jA(e,i)]:[3,6];case 5:return o.sent(),[2,i];case 6:return[2]}})})}function jA(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,D.__generator)(this,function(o){switch(o.label){case 0:return n=BA(e),[4,UA()];case 1:return r=o.sent(),[4,(i=r.transaction(Uf,"readwrite")).objectStore(Uf).put(t,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,t]}})})}function xoe(e){return(0,D.__awaiter)(this,void 0,void 0,function(){var t,n,r;return(0,D.__generator)(this,function(i){switch(i.label){case 0:return t=BA(e),[4,UA()];case 1:return n=i.sent(),[4,(r=n.transaction(Uf,"readwrite")).objectStore(Uf).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function BA(e){return e.appConfig.appId}function Ooe(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,c;return(0,D.__generator)(this,function(m){switch(m.label){case 0:return[4,$A(e)];case 1:n=m.sent(),r=A4(t),i={method:"POST",headers:n,body:JSON.stringify(r)},m.label=2;case 2:return m.trys.push([2,5,,6]),[4,fetch(HA(e.appConfig),i)];case 3:return[4,m.sent().json()];case 4:return o=m.sent(),[3,6];case 5:throw c=m.sent(),wn.create("token-subscribe-failed",{errorInfo:c});case 6:if(o.error)throw wn.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw wn.create("token-subscribe-no-token");return[2,o.token]}})})}function Poe(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,c;return(0,D.__generator)(this,function(m){switch(m.label){case 0:return[4,$A(e)];case 1:n=m.sent(),r=A4(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},m.label=2;case 2:return m.trys.push([2,5,,6]),[4,fetch(HA(e.appConfig)+"/"+t.token,i)];case 3:return[4,m.sent().json()];case 4:return o=m.sent(),[3,6];case 5:throw c=m.sent(),wn.create("token-update-failed",{errorInfo:c});case 6:if(o.error)throw wn.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw wn.create("token-update-no-token");return[2,o.token]}})})}function S4(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r,o,c;return(0,D.__generator)(this,function(d){switch(d.label){case 0:return[4,$A(e)];case 1:n=d.sent(),r={method:"DELETE",headers:n},d.label=2;case 2:return d.trys.push([2,5,,6]),[4,fetch(HA(e.appConfig)+"/"+t,r)];case 3:return[4,d.sent().json()];case 4:if((o=d.sent()).error)throw wn.create("token-unsubscribe-failed",{errorInfo:o.error.message});return[3,6];case 5:throw c=d.sent(),wn.create("token-unsubscribe-failed",{errorInfo:c});case 6:return[2]}})})}function HA(e){return woe+"/projects/"+e.projectId+"/registrations"}function $A(e){var t=e.appConfig,n=e.installations;return(0,D.__awaiter)(this,void 0,void 0,function(){var r;return(0,D.__generator)(this,function(i){switch(i.label){case 0:return[4,n.getToken()];case 1:return r=i.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS "+r})]}})})}function A4(e){var i=e.vapidKey,o={web:{endpoint:e.endpoint,auth:e.auth,p256dh:e.p256dh}};return i!==Fb&&(o.web.applicationPubKey=i),o}var Foe=6048e5;function qA(e,t,n){return(0,D.__awaiter)(this,void 0,void 0,function(){var r,i,o,a;return(0,D.__generator)(this,function(c){switch(c.label){case 0:if("granted"!==Notification.permission)throw wn.create("permission-blocked");return[4,Voe(t,n)];case 1:return r=c.sent(),[4,Lb(e)];case 2:return i=c.sent(),o={vapidKey:n,swScope:t.scope,endpoint:r.endpoint,auth:ju(r.getKey("auth")),p256dh:ju(r.getKey("p256dh"))},i?[3,3]:[2,M4(e,o)];case 3:if(function Uoe(e,t){return t.vapidKey===e.vapidKey&&t.endpoint===e.endpoint&&t.auth===e.auth&&t.p256dh===e.p256dh}(i.subscriptionOptions,o))return[3,8];c.label=4;case 4:return c.trys.push([4,6,,7]),[4,S4(e,i.token)];case 5:return c.sent(),[3,7];case 6:return a=c.sent(),console.warn(a),[3,7];case 7:return[2,M4(e,o)];case 8:return Date.now()>=i.createTime+Foe?[2,Loe({token:i.token,createTime:Date.now(),subscriptionOptions:o},e,t)]:[2,i.token];case 9:return[2]}})})}function xv(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,D.__generator)(this,function(i){switch(i.label){case 0:return[4,Lb(e)];case 1:return(n=i.sent())?[4,S4(e,n.token)]:[3,4];case 2:return i.sent(),[4,xoe(e)];case 3:i.sent(),i.label=4;case 4:return[4,t.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}})})}function Loe(e,t,n){return(0,D.__awaiter)(this,void 0,void 0,function(){var r,i,o;return(0,D.__generator)(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,Poe(t,e)];case 1:return r=a.sent(),i=(0,D.__assign)((0,D.__assign)({},e),{token:r,createTime:Date.now()}),[4,jA(t,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,xv(t,n)];case 4:throw a.sent(),o;case 5:return[2]}})})}function M4(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,D.__generator)(this,function(i){switch(i.label){case 0:return[4,Ooe(e,t)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:t},[4,jA(e,r)];case 2:return i.sent(),[2,r.token]}})})}function Voe(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n;return(0,D.__generator)(this,function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Soe(t)})]}})})}function R4(e){return"object"==typeof e&&!!e&&I4 in e}function N4(e){return new Promise(function(t){setTimeout(t,e)})}var qoe=function(){function e(t){var n=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(r){r.waitUntil(n.onPush(r))}),self.addEventListener("pushsubscriptionchange",function(r){r.waitUntil(n.onSubChange(r))}),self.addEventListener("notificationclick",function(r){r.waitUntil(n.onNotificationClick(r))})}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw wn.create("invalid-bg-handler");this.bgMessageHandler=t},e.prototype.onBackgroundMessage=function(t){var n=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){n.bgMessageHandler=null}},e.prototype.getToken=function(){var t,n;return(0,D.__awaiter)(this,void 0,void 0,function(){var r;return(0,D.__generator)(this,function(i){switch(i.label){case 0:return this.vapidKey?[3,2]:[4,Lb(this.firebaseDependencies)];case 1:r=i.sent(),this.vapidKey=null!==(n=null===(t=r?.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==n?n:Fb,i.label=2;case 2:return[2,qA(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},e.prototype.deleteToken=function(){return xv(this.firebaseDependencies,self.registration)},e.prototype.requestPermission=function(){throw wn.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw wn.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw wn.create("invalid-vapid-key");this.vapidKey=t},e.prototype.useServiceWorker=function(){throw wn.create("only-available-in-window")},e.prototype.onMessage=function(){throw wn.create("only-available-in-window")},e.prototype.onTokenRefresh=function(){throw wn.create("only-available-in-window")},e.prototype.onPush=function(t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,D.__generator)(this,function(a){switch(a.label){case 0:return n=function zoe(e){var t=e.data;if(!t)return null;try{return t.json()}catch{return null}}(t),n?[4,k4()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function Koe(e){return e.some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})}(r=a.sent())?[2,Qoe(r,n)]:(i=!1,n.notification?[4,Yoe(Goe(n))]:[3,3]);case 2:a.sent(),i=!0,a.label=3;case 3:return!0===i&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(o=function joe(e){var t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcm_message_id};return function Boe(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}(t,e),function Hoe(e,t){t.data&&(e.data=t.data)}(t,e),function $oe(e,t){if(t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}(t,e),t}(n),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(o):this.bgMessageHandler.next(o)),[4,N4(1e3)]);case 4:return a.sent(),[2]}})})},e.prototype.onSubChange=function(t){var n,r;return(0,D.__awaiter)(this,void 0,void 0,function(){var o;return(0,D.__generator)(this,function(a){switch(a.label){case 0:return t.newSubscription?[3,2]:[4,xv(this.firebaseDependencies,self.registration)];case 1:case 5:return a.sent(),[2];case 2:return[4,Lb(this.firebaseDependencies)];case 3:return o=a.sent(),[4,xv(this.firebaseDependencies,self.registration)];case 4:return a.sent(),[4,qA(this.firebaseDependencies,self.registration,null!==(r=null===(n=o?.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==r?r:Fb)]}})})},e.prototype.onNotificationClick=function(t){var n,r;return(0,D.__awaiter)(this,void 0,void 0,function(){var i,o,a,c,d;return(0,D.__generator)(this,function(m){switch(m.label){case 0:return(i=null===(r=null===(n=t.notification)||void 0===n?void 0:n.data)||void 0===r?void 0:r[D4])?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),o=function Xoe(e){var t,n,r;return(null!==(n=null===(t=e.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==n?n:null===(r=e.notification)||void 0===r?void 0:r.click_action)||(R4(e.data)?self.location.origin:null)}(i),o?(a=new URL(o,self.location.href),c=new URL(self.location.origin),a.host!==c.host?[2]:[4,Woe(a)]):[2]):[2];case 1:return(d=m.sent())?[3,4]:[4,self.clients.openWindow(o)];case 2:return d=m.sent(),[4,N4(3e3)];case 3:return m.sent(),[3,6];case 4:return[4,d.focus()];case 5:d=m.sent(),m.label=6;case 6:return d?(i.messageType=ul.NOTIFICATION_CLICKED,i.isFirebaseMessaging=!0,[2,d.postMessage(i)]):[2]}})})},e}();function Goe(e){var t,n=(0,D.__assign)({},e.notification);return n.data=((t={})[D4]=e,t),n}function Woe(e){return(0,D.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o,a,c;return(0,D.__generator)(this,function(d){switch(d.label){case 0:return[4,k4()];case 1:t=d.sent();try{for(n=(0,D.__values)(t),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),e.host===o.host)return[2,i]}catch(m){a={error:m}}finally{try{r&&!r.done&&(c=n.return)&&c.call(n)}finally{if(a)throw a.error}}return[2,null]}})})}function Qoe(e,t){var n,r;t.isFirebaseMessaging=!0,t.messageType=ul.PUSH_RECEIVED;try{for(var i=(0,D.__values)(e),o=i.next();!o.done;o=i.next())o.value.postMessage(t)}catch(c){n={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function k4(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Yoe(e){var t,n=e.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(t=e.title)&&void 0!==t?t:"",e)}var Joe=function(){function e(t){var n=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(r){return n.messageEventListener(r)})}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.messageEventListener=function(t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,D.__generator)(this,function(i){switch(i.label){case 0:return(n=t.data).isFirebaseMessaging?(this.onMessageCallback&&n.messageType===ul.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function ese(e){return delete e.messageType,delete e.isFirebaseMessaging,e}(Object.assign({},n))):this.onMessageCallback.next(Object.assign({},n))),R4(r=n.data)&&"1"===r["google.c.a.e"]?[4,this.logEvent(n.messageType,r)]:[3,2]):[2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.getVapidKey=function(){return this.vapidKey},e.prototype.getSwReg=function(){return this.swRegistration},e.prototype.getToken=function(t){return(0,D.__awaiter)(this,void 0,void 0,function(){return(0,D.__generator)(this,function(n){switch(n.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:n.sent(),n.label=2;case 2:if("granted"!==Notification.permission)throw wn.create("permission-blocked");return[4,this.updateVapidKey(t?.vapidKey)];case 3:return n.sent(),[4,this.updateSwReg(t?.serviceWorkerRegistration)];case 4:return n.sent(),[2,qA(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},e.prototype.updateVapidKey=function(t){return(0,D.__awaiter)(this,void 0,void 0,function(){return(0,D.__generator)(this,function(n){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=Fb),[2]})})},e.prototype.updateSwReg=function(t){return(0,D.__awaiter)(this,void 0,void 0,function(){return(0,D.__generator)(this,function(n){switch(n.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:n.sent(),n.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw wn.create("invalid-sw-registration");return this.swRegistration=t,[2]}})})},e.prototype.registerDefaultSw=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,D.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=r.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw n=r.sent(),wn.create("failed-service-worker-registration",{browserErrorMessage:n.message});case 3:return[2]}})})},e.prototype.deleteToken=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){return(0,D.__generator)(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,xv(this.firebaseDependencies,this.swRegistration)]}})})},e.prototype.requestPermission=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){var t;return(0,D.__generator)(this,function(n){switch(n.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=n.sent()))return[2];throw wn.create("denied"===t?"permission-blocked":"permission-default")}})})},e.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw wn.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw wn.create("invalid-vapid-key");this.vapidKey=t},e.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw wn.create("invalid-sw-registration");if(this.swRegistration)throw wn.create("use-sw-after-get-token");this.swRegistration=t},e.prototype.onMessage=function(t){var n=this;return this.onMessageCallback=t,function(){n.onMessageCallback=null}},e.prototype.setBackgroundMessageHandler=function(){throw wn.create("only-available-in-sw")},e.prototype.onBackgroundMessage=function(){throw wn.create("only-available-in-sw")},e.prototype.onTokenRefresh=function(){return function(){}},e.prototype.logEvent=function(t,n){return(0,D.__awaiter)(this,void 0,void 0,function(){var r;return(0,D.__generator)(this,function(o){switch(o.label){case 0:return r=function Zoe(e){switch(e){case ul.NOTIFICATION_CLICKED:return"notification_open";case ul.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return o.sent().logEvent(r,{message_id:n[I4],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},e}();function GA(e){return wn.create("missing-app-config-values",{valueName:e})}var ise={isSupported:x4};function x4(){return self&&"ServiceWorkerGlobalScope"in self?function sse(){return"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}():function ose(){return"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}()}Xe.default.INTERNAL.registerComponent(new Vu.Component("messaging",function rse(e){var t=e.getProvider("app").getImmediate(),n=function tse(e){var t,n;if(!e||!e.options)throw GA("App Configuration Object");if(!e.name)throw GA("App Name");var i=e.options;try{for(var o=(0,D.__values)(["projectId","apiKey","appId","messagingSenderId"]),a=o.next();!a.done;a=o.next()){var c=a.value;if(!i[c])throw GA(c)}}catch(d){t={error:d}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return{appName:e.name,projectId:i.projectId,apiKey:i.apiKey,appId:i.appId,senderId:i.messagingSenderId}}(t),o={app:t,appConfig:n,installations:e.getProvider("installations").getImmediate(),analyticsProvider:e.getProvider("analytics-internal")};if(!x4())throw wn.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new qoe(o):new Joe(o)},"PUBLIC").setServiceProps(ise));var O4="firebasestorage.googleapis.com",P4="storageBucket",ase=12e4,use=6e5,Or=function(e){function t(n,r){var i=e.call(this,zA(n),"Firebase Storage: "+r+" ("+zA(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,t.prototype),i}return(0,D.__extends)(t,e),t.prototype._codeEquals=function(n){return zA(n)===this.code},Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(n){this.customData.serverResponse=n,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),t}(ze.FirebaseError);function zA(e){return"storage/"+e}function WA(){return new Or("unknown","An unknown error occurred, please check the error payload for server response.")}function F4(){return new Or("canceled","User canceled the upload/download.")}function L4(){return new Or("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function vp(e){return new Or("invalid-argument",e)}function V4(){return new Or("app-deleted","The Firebase app was deleted.")}function U4(e){return new Or("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ov(e,t){return new Or("invalid-format","String does not match format '"+e+"': "+t)}function Vb(e){throw new Or("internal-error","Internal error: "+e)}var ws={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},KA=function e(t,n){this.data=t,this.contentType=n||null};function j4(e,t){switch(e){case ws.RAW:return new KA(B4(t));case ws.BASE64:case ws.BASE64URL:return new KA(H4(e,t));case ws.DATA_URL:return new KA(function Ese(e){var t=new $4(e);return t.base64?H4(ws.BASE64,t.rest):function bse(e){var t;try{t=decodeURIComponent(e)}catch{throw Ov(ws.DATA_URL,"Malformed data URL.")}return B4(t)}(t.rest)}(t),function Cse(e){return new $4(e).contentType}(t))}throw WA()}function B4(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<e.length-1&&56320==(64512&e.charCodeAt(n+1))){var o=r,a=e.charCodeAt(++n);t.push(240|(r=65536|(1023&o)<<10|1023&a)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189);else 56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function H4(e,t){switch(e){case ws.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw Ov(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case ws.BASE64URL:var o=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(o||a)throw Ov(e,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var c;try{c=function wse(e){return atob(e)}(t)}catch{throw Ov(e,"Invalid character found")}for(var d=new Uint8Array(c.length),m=0;m<c.length;m++)d[m]=c.charCodeAt(m);return d}var $4=function e(t){this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw Ov(ws.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function Dse(e,t){return!!(e.length>=t.length)&&e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)},Ise={STATE_CHANGED:"state_changed"},co={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function QA(e){switch(e){case"running":case"pausing":case"canceling":return co.RUNNING;case"paused":return co.PAUSED;case"success":return co.SUCCESS;case"canceled":return co.CANCELED;default:return co.ERROR}}var cl=(()=>(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(cl||(cl={})),cl))(),Tse=function(){function e(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=cl.NO_ERROR,this.sendPromise_=new Promise(function(n){t.xhr_.addEventListener("abort",function(){t.errorCode_=cl.ABORT,n()}),t.xhr_.addEventListener("error",function(){t.errorCode_=cl.NETWORK_ERROR,n()}),t.xhr_.addEventListener("load",function(){n()})})}return e.prototype.send=function(t,n,r,i){if(this.sent_)throw Vb("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),void 0!==i)for(var o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw Vb("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw Vb("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw Vb("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},e.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},e.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},e}(),Ase=function(){function e(){}return e.prototype.createConnection=function(){return function Sse(){return new Tse}()},e}(),bs=function(){function e(t,n){this.bucket=t,this.path_=n}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},e.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},e.makeFromBucketSpec=function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch{return new e(t,"")}if(""===r.path)return r;throw function mse(e){return new Or("invalid-default-bucket","Invalid default bucket '"+e+"'.")}(t)},e.makeFromUrl=function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)",c=new RegExp("^gs://"+i+"(/(.*))?$","i");function m(Je){Je.path_=decodeURIComponent(Je.path)}for(var w=n.replace(/[.]/g,"\\."),q=[{regex:c,indices:{bucket:1,path:3},postModify:function o(Je){"/"===Je.path.charAt(Je.path.length-1)&&(Je.path_=Je.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+w+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:m},{regex:new RegExp("^https?://"+(n===O4?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:m}],fe=0;fe<q.length;fe++){var Se=q[fe],he=Se.regex.exec(t);if(he){var ko=he[Se.indices.path];ko||(ko=""),r=new e(he[Se.indices.bucket],ko),Se.postModify(r);break}}if(null==r)throw function gse(e){return new Or("invalid-url","Invalid URL '"+e+"'.")}(t);return r},e}(),Mse=function(){function e(t){this.promise_=Promise.reject(t)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(t){},e}();function Ub(e){return"string"==typeof e||e instanceof String}function q4(e){return YA()&&e instanceof Blob}function YA(){return typeof Blob<"u"}function XA(e,t,n,r){if(r<t)throw vp("Invalid value for '"+e+"'. Expected "+t+" or greater.");if(r>n)throw vp("Invalid value for '"+e+"'. Expected "+n+" or less.")}function ll(e,t){var r=t.match(/^(\w+):\/\/.+/)?.[1],i=t;return null==r&&(i="https://"+t),i+"/v0"+e}function G4(e){var t=encodeURIComponent,n="?";for(var r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n.slice(0,-1)}var Pse=function(){function e(t,n,r,i,o,a,c,d,m,v,w){var C=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o.slice(),this.additionalRetryCodes_=a.slice(),this.callback_=c,this.errorCallback_=d,this.progressCallback_=v,this.timeout_=m,this.pool_=w,this.promise_=new Promise(function(S,A){C.resolve_=S,C.reject_=A,C.start_()})}return e.prototype.start_=function(){var t=this;function r(i,o){var a=t.resolve_,c=t.reject_,d=o.connection;if(o.wasSuccessCode)try{var m=t.callback_(d,d.getResponseText());!function kse(e){return void 0!==e}(m)?a():a(m)}catch(w){c(w)}else if(null!==d)(v=WA()).serverResponse=d.getResponseText(),c(t.errorCallback_?t.errorCallback_(d,v):v);else if(o.canceled)c(v=t.appDelete_?V4():F4());else{var v;c(v=function pse(){return new Or("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())}}this.canceled_?r(0,new jb(!1,null,!0)):this.backoffId_=function Rse(e,t,n){var r=1,i=null,o=!1,a=0;function c(){return 2===a}var d=!1;function m(){for(var A=[],x=0;x<arguments.length;x++)A[x]=arguments[x];d||(d=!0,t.apply(null,A))}function v(A){i=setTimeout(function(){i=null,e(w,c())},A)}function w(A){for(var x=[],V=1;V<arguments.length;V++)x[V-1]=arguments[V];if(!d){if(A)return void m.call.apply(m,(0,D.__spreadArray)([null,A],x));var K;if(c()||o)return void m.call.apply(m,(0,D.__spreadArray)([null,A],x));r<64&&(r*=2),1===a?(a=2,K=0):K=1e3*(r+Math.random()),v(K)}}var C=!1;function S(A){C||(C=!0,!d&&(null!==i?(A||(a=2),clearTimeout(i),v(0)):A||(a=1)))}return v(0),setTimeout(function(){o=!0,S(!0)},n),S}(function n(i,o){if(o)i(!1,new jb(!1,null,!0));else{var a=t.pool_.createConnection();t.pendingConnection_=a,null!==t.progressCallback_&&a.addUploadProgressListener(c),a.send(t.url_,t.method_,t.body_,t.headers_).then(function(){null!==t.progressCallback_&&a.removeUploadProgressListener(c),t.pendingConnection_=null;var d=a.getErrorCode()===cl.NO_ERROR,m=a.getStatus();if(d&&!t.isRetryStatusCode_(m)){var w=-1!==t.successCodes_.indexOf(m);i(!0,new jb(w,a))}else{var v=a.getErrorCode()===cl.ABORT;i(!1,new jb(!1,null,v))}})}function c(d){null!==t.progressCallback_&&t.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)}},r,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function Nse(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},e.prototype.isRetryStatusCode_=function(t){var n=t>=500&&t<600,i=-1!==[408,429].indexOf(t),o=-1!==this.additionalRetryCodes_.indexOf(t);return n||i||o},e}(),jb=function e(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r};function Hse(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=function Bse(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(YA())return new Blob(e);throw new Or("unsupported-environment","This browser doesn't seem to support creating Blobs")}var JA=function(){function e(t,n){var r=0,i="";q4(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(q4(this.data_)){var i=function $se(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===i?null:new e(i)}return new e(new Uint8Array(this.data_.buffer,t,n-t),!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(YA()){var r=t.map(function(d){return d instanceof e?d.data_:d});return new e(Hse.apply(null,r))}var i=t.map(function(d){return Ub(d)?j4(ws.RAW,d).data:d.data_}),o=0;i.forEach(function(d){o+=d.byteLength});var a=new Uint8Array(o),c=0;return i.forEach(function(d){for(var m=0;m<d.length;m++)a[c++]=d[m]}),new e(a,!0)},e.prototype.uploadData=function(){return this.data_},e}();function ZA(e){var t;try{t=JSON.parse(e)}catch{return null}return function Ose(e){return"object"==typeof e&&!Array.isArray(e)}(t)?t:null}function z4(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function zse(e,t){return t}var lo=function e(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||zse},Bb=null;function Hb(){if(Bb)return Bb;var e=[];e.push(new lo("bucket")),e.push(new lo("generation")),e.push(new lo("metageneration")),e.push(new lo("name","fullPath",!0));var n=new lo("name");n.xform=function t(o,a){return function Wse(e){return!Ub(e)||e.length<2?e:z4(e)}(a)},e.push(n);var i=new lo("size");return i.xform=function r(o,a){return void 0!==a?Number(a):a},e.push(i),e.push(new lo("timeCreated")),e.push(new lo("updated")),e.push(new lo("md5Hash",null,!0)),e.push(new lo("cacheControl",null,!0)),e.push(new lo("contentDisposition",null,!0)),e.push(new lo("contentEncoding",null,!0)),e.push(new lo("contentLanguage",null,!0)),e.push(new lo("contentType",null,!0)),e.push(new lo("metadata","customMetadata",!0)),Bb=e}function W4(e,t,n){var r=ZA(t);return null===r?null:function Qse(e,t,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,t[a.server])}return function Kse(e,t){Object.defineProperty(e,"ref",{get:function n(){var o=new bs(e.bucket,e.fullPath);return t._makeStorageReference(o)}})}(r,e),r}(e,r,n)}function eM(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}var K4="prefixes",Q4="items";var Bu=function e(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function ja(e){if(!e)throw WA()}function $b(e,t){return function n(r,i){var o=W4(e,i,t);return ja(null!==o),o}}function yp(e){return function t(n,r){var i;return i=401===n.getStatus()?n.getResponseText().includes("Firebase App Check token is invalid")?function hse(){return new Or("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function fse(){return new Or("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===n.getStatus()?function lse(e){return new Or("quota-exceeded","Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(e.bucket):403===n.getStatus()?function dse(e){return new Or("unauthorized","User does not have permission to access '"+e+"'.")}(e.path):r,i.serverResponse=r.serverResponse,i}}function qb(e){var t=yp(e);return function n(r,i){var o=t(r,i);return 404===r.getStatus()&&(o=function cse(e){return new Or("object-not-found","Object '"+e+"' does not exist.")}(e.path)),o.serverResponse=i.serverResponse,o}}function Y4(e,t,n){var i=ll(t.fullServerUrl(),e.host),a=e.maxOperationRetryTime,c=new Bu(i,"GET",$b(e,n),a);return c.errorHandler=qb(t),c}function tae(e,t,n,r,i){var o={};o.prefix=t.isRoot?"":t.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var c=ll(t.bucketOnlyServerUrl(),e.host),m=e.maxOperationRetryTime,v=new Bu(c,"GET",function Zse(e,t){return function n(r,i){var o=function Jse(e,t,n){var r=ZA(n);return null===r?null:function Xse(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[K4])for(var i=0,o=n[K4];i<o.length;i++){var c=o[i].replace(/\/$/,""),d=e._makeStorageReference(new bs(t,c));r.prefixes.push(d)}if(n[Q4])for(var m=0,v=n[Q4];m<v.length;m++)d=e._makeStorageReference(new bs(t,v[m].name)),r.items.push(d);return r}(e,t,r)}(e,t,i);return ja(null!==o),o}}(e,t.bucket),m);return v.urlParams=o,v.errorHandler=yp(t),v}function X4(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function oae(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}var Gb=function e(t,n,r,i){this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null};function tM(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch{ja(!1)}return ja(!!n&&-1!==(t||["active"]).indexOf(n)),n}var lae=function e(t,n,r){var i=function xse(e){return"function"==typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=n,this.complete=r;else{var o=t;this.next=o.next,this.error=o.error,this.complete=o.complete}};function _p(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then(function(){return e.apply(void 0,t)})}}var Z4=function(){function e(t,n,r){var i=this;void 0===r&&(r=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=r,this._mappings=Hb(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(o){i._request=void 0,i._chunkMultiplier=1,o._codeEquals("canceled")?(i._needToFetchStatus=!0,i.completeTransitions_()):(i._error=o,i._transition("error"))},this._metadataErrorHandler=function(o){i._request=void 0,o._codeEquals("canceled")?i.completeTransitions_():(i._error=o,i._transition("error"))},this._promise=new Promise(function(o,a){i._resolve=o,i._reject=a,i._start()}),this._promise.then(null,function(){})}return e.prototype._makeProgressCallback=function(){var t=this,n=this._transferred;return function(r){return t._updateProgress(n+r)}},e.prototype._shouldDoResumable=function(t){return t.size()>262144},e.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},e.prototype._resolveToken=function(t){var n=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(r){var i=r[0],o=r[1];switch(n._state){case"running":t(i,o);break;case"canceling":n._transition("canceled");break;case"pausing":n._transition("paused")}})},e.prototype._createResumable=function(){var t=this;this._resolveToken(function(n,r){var i=function aae(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a=X4(t,r,i),c={name:a.fullPath},d=ll(o,e.host),v={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},w=eM(a,n),A=new Bu(d,"POST",function S(x){var V;tM(x);try{V=x.getResponseHeader("X-Goog-Upload-URL")}catch{ja(!1)}return ja(Ub(V)),V},e.maxUploadRetryTime);return A.urlParams=c,A.headers=v,A.body=w,A.errorHandler=yp(t),A}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then(function(a){t._request=void 0,t._uploadUrl=a,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},e.prototype._fetchStatus=function(){var t=this,n=this._uploadUrl;this._resolveToken(function(r,i){var o=function uae(e,t,n,r){var d=new Bu(n,"POST",function o(m){var v=tM(m,["active","final"]),w=null;try{w=m.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ja(!1)}w||ja(!1);var C=Number(w);return ja(!isNaN(C)),new Gb(C,r.size(),"final"===v)},e.maxUploadRetryTime);return d.headers={"X-Goog-Upload-Command":"query"},d.errorHandler=yp(t),d}(t._ref.storage,t._ref._location,n,t._blob),a=t._ref.storage._makeRequest(o,r,i);t._request=a,a.getPromise().then(function(c){t._request=void 0,t._updateProgress(c.current),t._needToFetchStatus=!1,c.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},e.prototype._continueUpload=function(){var t=this,n=262144*this._chunkMultiplier,r=new Gb(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken(function(o,a){var c;try{c=function cae(e,t,n,r,i,o,a,c){var d=new Gb(0,0);if(a?(d.current=a.current,d.total=a.total):(d.current=0,d.total=r.size()),r.size()!==d.total)throw function yse(){return new Or("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();var m=d.total-d.current,v=m;i>0&&(v=Math.min(v,i));var w=d.current,A={"X-Goog-Upload-Command":v===m?"upload, finalize":"upload","X-Goog-Upload-Offset":""+d.current},x=r.slice(w,w+v);if(null===x)throw L4();var q=new Bu(n,"POST",function V(fe,Se){var Je,he=tM(fe,["active","final"]),pn=d.current+v,ko=r.size();return Je="final"===he?$b(t,o)(fe,Se):null,new Gb(pn,ko,"final"===he,Je)},t.maxUploadRetryTime);return q.headers=A,q.body=x.uploadData(),q.progressCallback=c||null,q.errorHandler=yp(e),q}(t._ref._location,t._ref.storage,i,t._blob,n,t._mappings,r,t._makeProgressCallback())}catch(m){return t._error=m,void t._transition("error")}var d=t._ref.storage._makeRequest(c,o,a);t._request=d,d.getPromise().then(function(m){t._increaseMultiplier(),t._request=void 0,t._updateProgress(m.current),m.finalized?(t._metadata=m.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},e.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},e.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(n,r){var i=Y4(t._ref.storage,t._ref._location,t._mappings),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then(function(a){t._request=void 0,t._metadata=a,t._transition("success")},t._metadataErrorHandler)})},e.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(n,r){var i=function sae(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},d=function c(){for(var q="",fe=0;fe<2;fe++)q+=Math.random().toString().slice(2);return q}();a["Content-Type"]="multipart/related; boundary="+d;var m=X4(t,r,i),v=eM(m,n),S=JA.getBlob("--"+d+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+v+"\r\n--"+d+"\r\nContent-Type: "+m.contentType+"\r\n\r\n",r,"\r\n--"+d+"--");if(null===S)throw L4();var A={name:m.fullPath},x=ll(o,e.host),H=e.maxUploadRetryTime,K=new Bu(x,"POST",$b(e,n),H);return K.urlParams=A,K.headers=a,K.body=S.uploadData(),K.errorHandler=yp(t),K}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then(function(a){t._request=void 0,t._metadata=a,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},e.prototype._updateProgress=function(t){var n=this._transferred;this._transferred=t,this._transferred!==n&&this._notifyObservers()},e.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var n="paused"===this._state;this._state=t,n&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=F4(),this._state=t,this._notifyObservers()}},e.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var t=QA(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),e.prototype.on=function(t,n,r,i){var o=this,a=new lae(n,r,i);return this._addObserver(a),function(){o._removeObserver(a)}},e.prototype.then=function(t,n){return this._promise.then(t,n)},e.prototype.catch=function(t){return this.then(null,t)},e.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},e.prototype._removeObserver=function(t){var n=this._observers.indexOf(t);-1!==n&&this._observers.splice(n,1)},e.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(r){t._notifyObserver(r)})},e.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(QA(this._state)){case co.SUCCESS:_p(this._resolve.bind(null,this.snapshot))();break;case co.CANCELED:case co.ERROR:_p(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},e.prototype._notifyObserver=function(t){switch(QA(this._state)){case co.RUNNING:case co.PAUSED:t.next&&_p(t.next.bind(t,this.snapshot))();break;case co.SUCCESS:t.complete&&_p(t.complete.bind(t))();break;default:t.error&&_p(t.error.bind(t,this._error))()}},e.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},e.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},e.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},e}(),zb=function(){function e(t,n){this._service=t,this._location=n instanceof bs?n:bs.makeFromUrl(n,t.host)}return e.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},e.prototype._newRef=function(t,n){return new e(t,n)},Object.defineProperty(e.prototype,"root",{get:function(){var t=new bs(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return z4(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=function qse(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new bs(this._location.bucket,t);return new e(this._service,n)},enumerable:!1,configurable:!0}),e.prototype._throwIfRoot=function(t){if(""===this._location.path)throw U4(t)},e}();function hae(e){var t={prefixes:[],items:[]};return eH(e,t).then(function(){return t})}function eH(e,t,n){return(0,D.__awaiter)(this,void 0,void 0,function(){var i,o,a;return(0,D.__generator)(this,function(c){switch(c.label){case 0:return[4,tH(e,{pageToken:n})];case 1:return i=c.sent(),(o=t.prefixes).push.apply(o,i.prefixes),(a=t.items).push.apply(a,i.items),null==i.nextPageToken?[3,3]:[4,eH(e,t,i.nextPageToken)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}function tH(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,D.__generator)(this,function(i){switch(i.label){case 0:return null!=t&&"number"==typeof t.maxResults&&XA("options.maxResults",1,1e3,t.maxResults),r=tae(e.storage,e._location,"/",(n=t||{}).pageToken,n.maxResults),[4,e.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function gae(e){return(0,D.__awaiter)(this,void 0,void 0,function(){var t;return(0,D.__generator)(this,function(n){switch(n.label){case 0:return e._throwIfRoot("getDownloadURL"),t=function nae(e,t,n){var i=ll(t.fullServerUrl(),e.host),a=e.maxOperationRetryTime,c=new Bu(i,"GET",function eae(e,t){return function n(r,i){var o=W4(e,i,t);return ja(null!==o),function Yse(e,t,n){var r=ZA(t);if(null===r||!Ub(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map(function(d){var v=e.fullPath;return ll("/b/"+o(e.bucket)+"/o/"+o(v),n)+G4({alt:"media",token:d})})[0]}(o,i,e.host)}}(e,n),a);return c.errorHandler=qb(t),c}(e.storage,e._location,Hb()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise().then(function(r){if(null===r)throw function _se(){return new Or("no-download-url","The given file does not have any download URLs.")}();return r})]}})})}function nH(e,t){var n=function Gse(e,t){var n=t.split("/").filter(function(r){return r.length>0}).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new bs(e._location.bucket,n);return new zb(e.storage,r)}function nM(e){return/^[A-Za-z]+:\/\//.test(e)}function rH(e,t){if(e instanceof Wb){var n=e;if(null==n._bucket)throw function vse(){return new Or("no-default-bucket","No default bucket found. Did you set the '"+P4+"' property when initializing the app?")}();var r=new zb(n,n._bucket);return null!=t?rH(r,t):r}return void 0!==t?nH(e,t):e}function yae(e,t){if(t&&nM(t)){if(e instanceof Wb)return function vae(e,t){return new zb(e,t)}(e,t);throw vp("To use ref(service, url), the first argument must be a Storage instance.")}return rH(e,t)}function iH(e,t){var n=t?.[P4];return null==n?null:bs.makeFromBucketSpec(n,e)}var Wb=function(){function e(t,n,r,i,o,a){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._pool=i,this._url=o,this._firebaseVersion=a,this._bucket=null,this._host=O4,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ase,this._maxUploadRetryTime=use,this._requests=new Set,this._bucket=null!=o?bs.makeFromBucketSpec(o,this._host):iH(this._host,this.app.options)}return Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._bucket=null!=this._url?bs.makeFromBucketSpec(this._url,t):iH(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){XA("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){XA("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),e.prototype._getAuthToken=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,D.__generator)(this,function(r){switch(r.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(n=r.sent()))return[2,n.accessToken];r.label=2;case 2:return[2,null]}})})},e.prototype._getAppCheckToken=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){var t;return(0,D.__generator)(this,function(r){switch(r.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,r.sent().token];case 2:return[2,null]}})})},e.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear()),Promise.resolve()},e.prototype._makeStorageReference=function(t){return new zb(this,t)},e.prototype._makeRequest=function(t,n,r){var i=this;if(this._deleted)return new Mse(V4());var o=function jse(e,t,n,r,i,o){var a=G4(e.urlParams),c=e.url+a,d=Object.assign({},e.headers);return function Vse(e,t){t&&(e["X-Firebase-GMPID"]=t)}(d,t),function Fse(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(d,n),function Lse(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(d,o),function Use(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(d,r),new Pse(c,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(t,this._appId,n,r,this._pool,this._firebaseVersion);return this._requests.add(o),o.getPromise().then(function(){return i._requests.delete(o)},function(){return i._requests.delete(o)}),o},e.prototype.makeRequestWithTokens=function(t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n;return(0,D.__generator)(this,function(o){switch(o.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return n=o.sent(),[2,this._makeRequest(t,n[0],n[1])]}})})},e}();function oH(e,t){return yae(e=(0,ze.getModularInstance)(e),t)}var Kb=function(){function e(t,n,r){this._delegate=t,this.task=n,this.ref=r}return Object.defineProperty(e.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),e}(),sH=function(){function e(t,n){this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(e.prototype,"snapshot",{get:function(){return new Kb(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),e.prototype.then=function(t,n){var r=this;return this._delegate.then(function(i){if(t)return t(new Kb(i,r,r._ref))},n)},e.prototype.on=function(t,n,r,i){var o=this,a=void 0;return n&&(a="function"==typeof n?function(c){return n(new Kb(c,o,o._ref))}:{next:n.next?function(c){return n.next(new Kb(c,o,o._ref))}:void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(t,a,r||void 0,i||void 0)},e}(),aH=function(){function e(t,n){this._delegate=t,this._service=n}return Object.defineProperty(e.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(n){return new Pv(n,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(n){return new Pv(n,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),e}(),Pv=function(){function e(t,n){this._delegate=t,this.storage=n}return Object.defineProperty(e.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._delegate.toString()},e.prototype.child=function(t){var n=function Sae(e,t){return nH(e,t)}(this._delegate,t);return new e(n,this.storage)},Object.defineProperty(e.prototype,"root",{get:function(){return new e(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)},enumerable:!1,configurable:!0}),e.prototype.put=function(t,n){return this._throwIfRoot("put"),new sH(function wae(e,t,n){return function fae(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new Z4(e,new JA(t),n)}(e=(0,ze.getModularInstance)(e),t,n)}(this._delegate,t,n),this)},e.prototype.putString=function(t,n,r){void 0===n&&(n=ws.RAW),this._throwIfRoot("putString");var i=j4(n,t),o=(0,D.__assign)({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new sH(new Z4(this._delegate,new JA(i.data,!0),o),this)},e.prototype.listAll=function(){var t=this;return function Dae(e){return hae(e=(0,ze.getModularInstance)(e))}(this._delegate).then(function(n){return new aH(n,t.storage)})},e.prototype.list=function(t){var n=this;return function Cae(e,t){return tH(e=(0,ze.getModularInstance)(e),t)}(this._delegate,t||void 0).then(function(r){return new aH(r,n.storage)})},e.prototype.getMetadata=function(){return function bae(e){return function dae(e){return(0,D.__awaiter)(this,void 0,void 0,function(){var t;return(0,D.__generator)(this,function(n){switch(n.label){case 0:return e._throwIfRoot("getMetadata"),t=Y4(e.storage,e._location,Hb()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}})})}(e=(0,ze.getModularInstance)(e))}(this._delegate)},e.prototype.updateMetadata=function(t){return function Eae(e,t){return function pae(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n;return(0,D.__generator)(this,function(r){switch(r.label){case 0:return e._throwIfRoot("updateMetadata"),n=function rae(e,t,n,r){var o=ll(t.fullServerUrl(),e.host),c=eM(n,r),m=e.maxOperationRetryTime,v=new Bu(o,"PATCH",$b(e,r),m);return v.headers={"Content-Type":"application/json; charset=utf-8"},v.body=c,v.errorHandler=qb(t),v}(e.storage,e._location,t,Hb()),[4,e.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}})})}(e=(0,ze.getModularInstance)(e),t)}(this._delegate,t)},e.prototype.getDownloadURL=function(){return function Iae(e){return gae(e=(0,ze.getModularInstance)(e))}(this._delegate)},e.prototype.delete=function(){return this._throwIfRoot("delete"),function Tae(e){return function mae(e){return(0,D.__awaiter)(this,void 0,void 0,function(){var t;return(0,D.__generator)(this,function(n){switch(n.label){case 0:return e._throwIfRoot("deleteObject"),t=function iae(e,t){var r=ll(t.fullServerUrl(),e.host),c=new Bu(r,"DELETE",function a(d,m){},e.maxOperationRetryTime);return c.successCodes=[200,204],c.errorHandler=qb(t),c}(e.storage,e._location),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}})})}(e=(0,ze.getModularInstance)(e))}(this._delegate)},e.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw U4(t)},e}(),Mae=function(){function e(t,n){this.app=t,this._delegate=n}return Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),e.prototype.ref=function(t){if(nM(t))throw vp("ref() expected a child path but got a URL, use refFromURL instead.");return new Pv(oH(this._delegate,t),this)},e.prototype.refFromURL=function(t){if(!nM(t))throw vp("refFromURL() expected a full URL but got a child path, use ref() instead.");try{bs.makeFromUrl(t,this._delegate.host)}catch{throw vp("refFromUrl() expected a valid full URL but got an invalid one.")}return new Pv(oH(this._delegate,t),this)},e.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},e.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},e.prototype.useEmulator=function(t,n,r){void 0===r&&(r={}),function Aae(e,t,n,r){void 0===r&&(r={}),function _ae(e,t,n,r){void 0===r&&(r={}),e.host="http://"+t+":"+n;var i=r.mockUserToken;i&&(e._overrideAuthToken="string"==typeof i?i:(0,ze.createMockUserToken)(i,e.app.options.projectId))}(e,t,n,r)}(this._delegate,t,n,r)},e}();function xae(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new Mae(r,new Wb(r,i,o,new Ase,n,Xe.default.SDK_VERSION))}!function Oae(e){var t={TaskState:co,TaskEvent:Ise,StringFormat:ws,Storage:Wb,Reference:Pv};e.INTERNAL.registerComponent(new Vu.Component("storage",xae,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage","0.7.1")}(Xe.default);var bi,cH="0.4.18",Fae="FB-PERF-TRACE-START",Lae="FB-PERF-TRACE-STOP",rM="FB-PERF-TRACE-MEASURE",pH="@firebase/performance/config",gH="@firebase/performance/configexpire",mH="Performance",Uae=((bi={})["trace started"]="Trace {$traceName} was started before.",bi["trace stopped"]="Trace {$traceName} is not running.",bi["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",bi["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",bi["no window"]="Window is not available.",bi["no app id"]="App id is not available.",bi["no project id"]="Project id is not available.",bi["no api key"]="Api key is not available.",bi["invalid cc log"]="Attempted to queue invalid cc event",bi["FB not default"]="Performance can only start when Firebase app instance is the default one.",bi["RC response not ok"]="RC response is not ok",bi["invalid attribute name"]="Attribute name {$attributeName} is invalid.",bi["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",bi["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",bi["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",bi),Vi=new ze.ErrorFactory("performance",mH,Uae),Hu=new ro.Logger(mH);Hu.logLevel=ro.LogLevel.INFO;var iM,vH,Ui=function(){function e(t){if(this.window=t,!t)throw Vi.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return e.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},e.prototype.mark=function(t){!this.performance||!this.performance.mark||this.performance.mark(t)},e.prototype.measure=function(t,n,r){!this.performance||!this.performance.measure||this.performance.measure(t,n,r)},e.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},e.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},e.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},e.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!(0,ze.isIndexedDBAvailable)()||(Hu.info("IndexedDB is not supported by current browswer"),!1):(Hu.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},e.prototype.setupObserver=function(t,n){this.PerformanceObserver&&new this.PerformanceObserver(function(i){for(var o=0,a=i.getEntries();o<a.length;o++)n(a[o])}).observe({entryTypes:[t]})},e.getInstance=function(){return void 0===iM&&(iM=new e(vH)),iM},e}();function yH(e,t){var n=e.length-t.length;if(n<0||n>1)throw Vi.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}var oM,_H,Kr=function(){function e(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=yH("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=yH("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return e.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw Vi.create("no app id");return t},e.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw Vi.create("no project id");return t},e.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw Vi.create("no api key");return t},e.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},e.getInstance=function(){return void 0===oM&&(oM=new e),oM},e}();function sM(){return _H}var jf=(()=>(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VISIBLE=1]="VISIBLE",e[e.HIDDEN=2]="HIDDEN"}(jf||(jf={})),jf))(),$ae=["firebase_","google_","ga_"],qae=new RegExp("^[a-zA-Z]\\w*$");function Wae(){var e=Ui.getInstance().navigator;return"serviceWorker"in e?e.serviceWorker.controller?2:3:1}function wH(){switch(Ui.getInstance().document.visibilityState){case"visible":return jf.VISIBLE;case"hidden":return jf.HIDDEN;default:return jf.UNKNOWN}}function Kae(){var t=Ui.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}var Xae="0.0.1",Jae={loggingEnabled:!0},Zae="FIREBASE_INSTALLATIONS_AUTH";var rue="Could not fetch config, will use default configs";function bH(e){if(!e)return e;var t=Kr.getInstance(),n=e.entries||{};return t.loggingEnabled=void 0!==n.fpr_enabled?"true"===String(n.fpr_enabled):Jae.loggingEnabled,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=EH(t.tracesSamplingRate),t.logNetworkAfterSampling=EH(t.networkRequestsSamplingRate),e}function EH(e){return Math.random()<=e}var uM,aM=1;function CH(){return aM=2,uM=uM||function aue(){return function uue(){var e=Ui.getInstance().document;return new Promise(function(t){if(e&&"complete"!==e.readyState){var n=function(){"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()})}().then(function(){return function Bae(){var e=Kr.getInstance().installationsService.getId();return e.then(function(t){_H=t}),e}()}).then(function(e){return function eue(e){var t=function tue(){var e=Ui.getInstance().localStorage;if(e){var t=e.getItem(gH);if(t&&function oue(e){return Number(e)>Date.now()}(t)){var n=e.getItem(pH);if(n)try{return JSON.parse(n)}catch{return}}}}();return t?(bH(t),Promise.resolve()):function iue(e){return function Hae(){var e=Kr.getInstance().installationsService.getToken();return e.then(function(t){}),e}().then(function(t){var r="https://firebaseremoteconfig.googleapis.com/v1/projects/"+Kr.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+Kr.getInstance().getApiKey(),i=new Request(r,{method:"POST",headers:{Authorization:Zae+" "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:Kr.getInstance().getAppId(),app_version:cH,sdk_version:Xae})});return fetch(i).then(function(o){if(o.ok)return o.json();throw Vi.create("RC response not ok")})}).catch(function(){Hu.info(rue)})}(e).then(bH).then(function(n){return function nue(e){var t=Ui.getInstance().localStorage;!e||!t||(t.setItem(pH,JSON.stringify(e)),t.setItem(gH,String(Date.now()+60*Kr.getInstance().configTimeToLive*60*1e3)))}(n)},function(){})}(e)}).then(function(){return DH()},function(){return DH()})}(),uM}function DH(){aM=3}var lM,cM=1e4,cue=5500,IH=3,lue=1e3,Qb=IH,fl=[],TH=!1;function Yb(e){setTimeout(function(){if(0!==Qb){if(!fl.length)return Yb(cM);!function hue(){var e=fl.splice(0,lue),t=e.map(function(r){return{source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)}});(function due(e,t){return function pue(e){var t=Kr.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}(e).then(function(n){return n.ok||Hu.info("Call to Firebase backend failed."),n.json()}).then(function(n){var r=Number(n.nextRequestWaitMillis),i=cM;isNaN(r)||(i=Math.max(r,i));var o=n.logResponseDetails;Array.isArray(o)&&o.length>0&&"RETRY_REQUEST_LATER"===o[0].responseAction&&(fl=(0,D.__spreadArray)((0,D.__spreadArray)([],t),fl),Hu.info("Retry transport request later.")),Qb=IH,Yb(i)})})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Kr.getInstance().logSource,log_event:t},e).catch(function(){fl=(0,D.__spreadArray)((0,D.__spreadArray)([],e),fl),Qb--,Hu.info("Tries left: "+Qb+"."),Yb(cM)})}()}},e)}function SH(e,t){lM||(lM=function mue(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];!function gue(e){if(!e.eventTime||!e.message)throw Vi.create("invalid cc log");fl=(0,D.__spreadArray)((0,D.__spreadArray)([],fl),[e])}({message:e.apply(void 0,t),eventTime:Date.now()})}}(yue)),lM(e,t)}function Xb(e){var t=Kr.getInstance();!t.instrumentationEnabled&&e.isAuto||!t.dataCollectionEnabled&&!e.isAuto||Ui.getInstance().requiredApisAvailable()&&(e.isAuto&&wH()!==jf.VISIBLE||(function sue(){return 3===aM}()?fM(e):CH().then(function(){return fM(e)},function(){return fM(e)})))}function fM(e){if(sM()){var t=Kr.getInstance();!t.loggingEnabled||!t.logTraceAfterSampling||setTimeout(function(){return SH(e,1)},0)}}function yue(e,t){return 0===t?function _ue(e){var t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:AH(),network_request_metric:t};return JSON.stringify(n)}(e):function wue(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=e.counters);var n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=n);var r={application_info:AH(),trace_metric:t};return JSON.stringify(r)}(e)}function AH(){return{google_app_id:Kr.getInstance().getAppId(),app_instance_id:sM(),web_app_info:{sdk_version:cH,page_url:Ui.getInstance().getUrl(),service_worker_status:Wae(),visibility_state:wH(),effective_connection_type:Kae()},application_process_state:0}}var Cue=["_fp","_fcp","_fid"],Fv=function(){function e(t,n,r){void 0===n&&(n=!1),this.name=t,this.isAuto=n,this.state=1,this.customAttributes={},this.counters={},this.api=Ui.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=Fae+"-"+this.randomId+"-"+this.name,this.traceStopMark=Lae+"-"+this.randomId+"-"+this.name,this.traceMeasure=r||rM+"-"+this.randomId+"-"+this.name,r&&this.calculateTraceMetrics())}return e.prototype.start=function(){if(1!==this.state)throw Vi.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},e.prototype.stop=function(){if(2!==this.state)throw Vi.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Xb(this)},e.prototype.record=function(t,n,r){if(t<=0)throw Vi.create("nonpositive trace startTime",{traceName:this.name});if(n<=0)throw Vi.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*n),this.startTimeUs=Math.floor(1e3*t),r&&r.attributes&&(this.customAttributes=(0,D.__assign)({},r.attributes)),r&&r.metrics)for(var i=0,o=Object.keys(r.metrics);i<o.length;i++){var a=o[i];isNaN(Number(r.metrics[a]))||(this.counters[a]=Number(Math.floor(r.metrics[a])))}Xb(this)},e.prototype.incrementMetric=function(t,n){void 0===n&&(n=1),this.putMetric(t,void 0===this.counters[t]?n:this.counters[t]+n)},e.prototype.putMetric=function(t,n){if(!function Due(e,t){return!(0===e.length||e.length>100)&&(t&&t.startsWith("_wt_")&&Cue.indexOf(e)>-1||!e.startsWith("_"))}(t,this.name))throw Vi.create("invalid custom metric name",{customMetricName:t});this.counters[t]=function Iue(e){var t=Math.floor(e);return t<e&&Hu.info("Metric value should be an Integer, setting the value as : "+t+"."),t}(n)},e.prototype.getMetric=function(t){return this.counters[t]||0},e.prototype.putAttribute=function(t,n){var r=function Qae(e){return!(0===e.length||e.length>40||$ae.some(function(n){return e.startsWith(n)})||!e.match(qae))}(t),i=function Yae(e){return 0!==e.length&&e.length<=100}(n);if(r&&i)this.customAttributes[t]=n;else{if(!r)throw Vi.create("invalid attribute name",{attributeName:t});if(!i)throw Vi.create("invalid attribute value",{attributeValue:n})}},e.prototype.getAttribute=function(t){return this.customAttributes[t]},e.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},e.prototype.getAttributes=function(){return(0,D.__assign)({},this.customAttributes)},e.prototype.setStartTime=function(t){this.startTimeUs=t},e.prototype.setDuration=function(t){this.durationUs=t},e.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),n=t&&t[0];n&&(this.durationUs=Math.floor(1e3*n.duration),this.startTimeUs=Math.floor(1e3*(n.startTime+this.api.getTimeOrigin())))},e.createOobTrace=function(t,n,r){var i=Ui.getInstance().getUrl();if(i){var o=new e("_wt_"+i,!0),a=Math.floor(1e3*Ui.getInstance().getTimeOrigin());if(o.setStartTime(a),t&&t[0]&&(o.setDuration(Math.floor(1e3*t[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),n){var m=n.find(function(w){return"first-paint"===w.name});m&&m.startTime&&o.putMetric("_fp",Math.floor(1e3*m.startTime));var v=n.find(function(w){return"first-contentful-paint"===w.name});v&&v.startTime&&o.putMetric("_fcp",Math.floor(1e3*v.startTime)),r&&o.putMetric("_fid",Math.floor(1e3*r))}Xb(o)}},e.createUserTimingTrace=function(t){Xb(new e(t,!1,t))},e}();function MH(e){var t=e;if(t&&void 0!==t.responseStart){var n=Ui.getInstance().getTimeOrigin(),r=Math.floor(1e3*(t.startTime+n)),i=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,o=Math.floor(1e3*(t.responseEnd-t.startTime));!function vue(e){var t=Kr.getInstance();if(t.instrumentationEnabled){var n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n===r||n===i||!t.loggingEnabled||!t.logNetworkAfterSampling||setTimeout(function(){return SH(e,0)},0)}}({url:t.name&&t.name.split("?")[0],responsePayloadBytes:t.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}var Tue=5e3;function RH(){sM()&&(setTimeout(function(){return function Aue(){var e=Ui.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var r=setTimeout(function(){Fv.createOobTrace(t,n),r=void 0},Tue);e.onFirstInputDelay(function(i){r&&(clearTimeout(r),Fv.createOobTrace(t,n,i))})}else Fv.createOobTrace(t,n)}()},0),setTimeout(function(){return function Sue(){for(var e=Ui.getInstance(),n=0,r=e.getEntriesByType("resource");n<r.length;n++)MH(r[n]);e.setupObserver("resource",MH)}()},0),setTimeout(function(){return function Mue(){for(var e=Ui.getInstance(),n=0,r=e.getEntriesByType("measure");n<r.length;n++)NH(r[n]);e.setupObserver("measure",NH)}()},0))}function NH(e){var t=e.name;t.substring(0,rM.length)!==rM&&Fv.createUserTimingTrace(t)}var Rue=function(){function e(t){this.app=t,Ui.getInstance().requiredApisAvailable()&&(0,ze.validateIndexedDBOpenable)().then(function(n){n&&(function fue(){TH||(Yb(cue),TH=!0)}(),CH().then(RH,RH))}).catch(function(n){Hu.info("Environment doesn't support IndexedDB: "+n)})}return e.prototype.trace=function(t){return new Fv(t)},Object.defineProperty(e.prototype,"instrumentationEnabled",{get:function(){return Kr.getInstance().instrumentationEnabled},set:function(t){Kr.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataCollectionEnabled",{get:function(){return Kr.getInstance().dataCollectionEnabled},set:function(t){Kr.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),e}();!function kue(e){e.INTERNAL.registerComponent(new Vu.Component("performance",function(n){return function(n,r){if("[DEFAULT]"!==n.name)throw Vi.create("FB not default");if(typeof window>"u")throw Vi.create("no window");return function jae(e){vH=e}(window),Kr.getInstance().firebaseAppInstance=n,Kr.getInstance().installationsService=r,new Rue(n)}(n.getProvider("app").getImmediate(),n.getProvider("installations").getImmediate())},"PUBLIC")),e.registerVersion("@firebase/performance","0.4.18")}(Xe.default);var xue="firebase_id",Oue="origin",Pue=6e4,Fue="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",kH="https://www.googletagmanager.com/gtag/js",Ei=(()=>(function(e){e.EVENT="event",e.SET="set",e.CONFIG="config"}(Ei||(Ei={})),Ei))(),Jb=(()=>(function(e){e.ADD_SHIPPING_INFO="add_shipping_info",e.ADD_PAYMENT_INFO="add_payment_info",e.ADD_TO_CART="add_to_cart",e.ADD_TO_WISHLIST="add_to_wishlist",e.BEGIN_CHECKOUT="begin_checkout",e.CHECKOUT_PROGRESS="checkout_progress",e.EXCEPTION="exception",e.GENERATE_LEAD="generate_lead",e.LOGIN="login",e.PAGE_VIEW="page_view",e.PURCHASE="purchase",e.REFUND="refund",e.REMOVE_FROM_CART="remove_from_cart",e.SCREEN_VIEW="screen_view",e.SEARCH="search",e.SELECT_CONTENT="select_content",e.SELECT_ITEM="select_item",e.SELECT_PROMOTION="select_promotion",e.SET_CHECKOUT_OPTION="set_checkout_option",e.SHARE="share",e.SIGN_UP="sign_up",e.TIMING_COMPLETE="timing_complete",e.VIEW_CART="view_cart",e.VIEW_ITEM="view_item",e.VIEW_ITEM_LIST="view_item_list",e.VIEW_PROMOTION="view_promotion",e.VIEW_SEARCH_RESULTS="view_search_results"}(Jb||(Jb={})),Jb))(),Ci=new ro.Logger("@firebase/analytics");function que(e,t,n,r,i,o){return(0,D.__awaiter)(this,void 0,void 0,function(){var a,c,d,m;return(0,D.__generator)(this,function(v){switch(v.label){case 0:a=r[i],v.label=1;case 1:return v.trys.push([1,7,,8]),a?[4,t[a]]:[3,3];case 2:return v.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return c=v.sent(),(d=c.find(function(w){return w.measurementId===i}))?[4,t[d.appId]]:[3,6];case 5:v.sent(),v.label=6;case 6:return[3,8];case 7:return m=v.sent(),Ci.error(m),[3,8];case 8:return e(Ei.CONFIG,i,o),[2]}})})}function Gue(e,t,n,r,i){return(0,D.__awaiter)(this,void 0,void 0,function(){var o,a,c,d,m,v,S;return(0,D.__generator)(this,function(A){switch(A.label){case 0:return A.trys.push([0,4,,5]),o=[],i&&i.send_to?(a=i.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(c=A.sent(),d=function(x){var V=c.find(function(K){return K.measurementId===x}),H=V&&t[V.appId];if(!H)return o=[],"break";o.push(H)},m=0,v=a;m<v.length&&"break"!==d(v[m]);m++);A.label=2;case 2:return 0===o.length&&(o=Object.values(t)),[4,Promise.all(o)];case 3:return A.sent(),e(Ei.EVENT,r,i||{}),[3,5];case 4:return S=A.sent(),Ci.error(S),[3,5];case 5:return[2]}})})}var Xs,Que=((Xs={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",Xs["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Xs["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",Xs["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Xs["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Xs["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",Xs["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",Xs["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',Xs["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',Xs),Es=new ze.ErrorFactory("analytics","Analytics",Que),Yue=30,Xue=1e3,Jue=function(){function e(t,n){void 0===t&&(t={}),void 0===n&&(n=Xue),this.throttleMetadata=t,this.intervalMillis=n}return e.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},e.prototype.setThrottleMetadata=function(t,n){this.throttleMetadata[t]=n},e.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},e}(),xH=new Jue;function Zue(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function ece(e){var t;return(0,D.__awaiter)(this,void 0,void 0,function(){var n,i,o,a,c,d;return(0,D.__generator)(this,function(m){switch(m.label){case 0:return n=e.appId,i={method:"GET",headers:Zue(e.apiKey)},o=Fue.replace("{app-id}",n),[4,fetch(o,i)];case 1:if(200===(a=m.sent()).status||304===a.status)return[3,6];c="",m.label=2;case 2:return m.trys.push([2,4,,5]),[4,a.json()];case 3:return d=m.sent(),!(null===(t=d.error)||void 0===t)&&t.message&&(c=d.error.message),[3,5];case 4:return m.sent(),[3,5];case 5:throw Es.create("config-fetch-failed",{httpStatus:a.status,responseMessage:c});case 6:return[2,a.json()]}})})}function OH(e,t,n,r){var i=t.throttleEndTimeMillis,o=t.backoffCount;return void 0===r&&(r=xH),(0,D.__awaiter)(this,void 0,void 0,function(){var a,c,d,m,v,w,C;return(0,D.__generator)(this,function(S){switch(S.label){case 0:a=e.appId,c=e.measurementId,S.label=1;case 1:return S.trys.push([1,3,,4]),[4,nce(n,i)];case 2:return S.sent(),[3,4];case 3:if(d=S.sent(),c)return Ci.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+c+' provided in the "measurementId" field in the local Firebase config. ['+d.message+"]"),[2,{appId:a,measurementId:c}];throw d;case 4:return S.trys.push([4,6,,7]),[4,ece(e)];case 5:return m=S.sent(),r.deleteThrottleMetadata(a),[2,m];case 6:if(!function rce(e){if(!(e instanceof ze.FirebaseError&&e.customData))return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(v=S.sent())){if(r.deleteThrottleMetadata(a),c)return Ci.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+c+' provided in the "measurementId" field in the local Firebase config. ['+v.message+"]"),[2,{appId:a,measurementId:c}];throw v}return w=503===Number(v.customData.httpStatus)?(0,ze.calculateBackoffMillis)(o,r.intervalMillis,Yue):(0,ze.calculateBackoffMillis)(o,r.intervalMillis),C={throttleEndTimeMillis:Date.now()+w,backoffCount:o+1},r.setThrottleMetadata(a,C),Ci.debug("Calling attemptFetch again in "+w+" millis"),[2,OH(e,C,n,r)];case 7:return[2]}})})}function nce(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener(function(){clearTimeout(o),r(Es.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}var ice=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(t){this.listeners.push(t)},e.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},e}();var FH,Vv,Js={},Zb=[],PH={},Lv="dataLayer",hM="gtag",eE=!1;function ace(e){if(eE)throw Es.create("already-initialized");e.dataLayerName&&(Lv=e.dataLayerName),e.gtagName&&(hM=e.gtagName)}function cce(e,t){!function uce(){var e=[];if((0,ze.isBrowserExtension)()&&e.push("This is a browser extension environment."),(0,ze.areCookiesEnabled)()||e.push("Cookies are not available."),e.length>0){var t=e.map(function(r,i){return"("+(i+1)+") "+r}).join(" "),n=Es.create("invalid-analytics-context",{errorInfo:t});Ci.warn(n.message)}}();var n=e.options.appId;if(!n)throw Es.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Es.create("no-api-key");Ci.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+e.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Js[n])throw Es.create("already-exists",{id:n});if(!eE){!function $ue(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Lv);var r=function Wue(e,t,n,r,i){var o=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function zue(e,t,n,r){return function i(o,a,c){return(0,D.__awaiter)(this,void 0,void 0,function(){var d;return(0,D.__generator)(this,function(m){switch(m.label){case 0:return m.trys.push([0,6,,7]),o!==Ei.EVENT?[3,2]:[4,Gue(e,t,n,a,c)];case 1:return m.sent(),[3,5];case 2:return o!==Ei.CONFIG?[3,4]:[4,que(e,t,n,r,a,c)];case 3:return m.sent(),[3,5];case 4:e(Ei.SET,a),m.label=5;case 5:return[3,7];case 6:return d=m.sent(),Ci.error(d),[3,7];case 7:return[2]}})})}}(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}(Js,Zb,PH,Lv,hM);Vv=r.wrappedGtag,FH=r.gtagCore,eE=!0}Js[n]=function sce(e,t,n,r,i,o){return(0,D.__awaiter)(this,void 0,void 0,function(){var a,c,d,m,v,w,C;return(0,D.__generator)(this,function(S){switch(S.label){case 0:return a=function tce(e,t,n){return void 0===t&&(t=xH),(0,D.__awaiter)(this,void 0,void 0,function(){var r,i,o,a,c,d,m=this;return(0,D.__generator)(this,function(v){if(o=(r=e.options).apiKey,a=r.measurementId,!(i=r.appId))throw Es.create("no-app-id");if(!o){if(a)return[2,{measurementId:a,appId:i}];throw Es.create("no-api-key")}return c=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new ice,setTimeout(function(){return(0,D.__awaiter)(m,void 0,void 0,function(){return(0,D.__generator)(this,function(w){return d.abort(),[2]})})},void 0!==n?n:Pue),[2,OH({appId:i,apiKey:o,measurementId:a},c,d,t)]})})}(e),a.then(function(A){n[A.measurementId]=A.appId,e.options.measurementId&&A.measurementId!==e.options.measurementId&&Ci.warn("The measurement ID in the local Firebase config ("+e.options.measurementId+") does not match the measurement ID fetched from the server ("+A.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(A){return Ci.error(A)}),t.push(a),c=function oce(){return(0,D.__awaiter)(this,void 0,void 0,function(){var e;return(0,D.__generator)(this,function(t){switch(t.label){case 0:return(0,ze.isIndexedDBAvailable)()?[3,1]:(Ci.warn(Es.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,(0,ze.validateIndexedDBOpenable)()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),Ci.warn(Es.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(A){if(A)return r.getId()}),[4,Promise.all([a,c])];case 1:return d=S.sent(),m=d[0],v=d[1],function Kue(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(kH))return r}return null}()||function Hue(e,t){var n=document.createElement("script");n.src=kH+"?l="+e+"&id="+t,n.async=!0,document.head.appendChild(n)}(o,m.measurementId),i("js",new Date),(C={})[Oue]="firebase",C.update=!0,w=C,null!=v&&(w[xue]=v),i(Ei.CONFIG,m.measurementId,w),[2,m.measurementId]}})})}(e,Zb,PH,t,FH,Lv);var a={app:e,logEvent:function(c,d,m){(function Lue(e,t,n,r,i){return(0,D.__awaiter)(this,void 0,void 0,function(){var o,a;return(0,D.__generator)(this,function(c){switch(c.label){case 0:return i&&i.global?(e(Ei.EVENT,n,r),[2]):[3,1];case 1:return[4,t];case 2:o=c.sent(),a=(0,D.__assign)((0,D.__assign)({},r),{send_to:o}),e(Ei.EVENT,n,a),c.label=3;case 3:return[2]}})})})(Vv,Js[n],c,d,m).catch(function(v){return Ci.error(v)})},setCurrentScreen:function(c,d){(function Vue(e,t,n,r){return(0,D.__awaiter)(this,void 0,void 0,function(){var i;return(0,D.__generator)(this,function(o){switch(o.label){case 0:return r&&r.global?(e(Ei.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=o.sent(),e(Ei.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}})})})(Vv,Js[n],c,d).catch(function(m){return Ci.error(m)})},setUserId:function(c,d){(function Uue(e,t,n,r){return(0,D.__awaiter)(this,void 0,void 0,function(){var i;return(0,D.__generator)(this,function(o){switch(o.label){case 0:return r&&r.global?(e(Ei.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=o.sent(),e(Ei.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}})})})(Vv,Js[n],c,d).catch(function(m){return Ci.error(m)})},setUserProperties:function(c,d){(function jue(e,t,n,r){return(0,D.__awaiter)(this,void 0,void 0,function(){var i,o,a,c,d;return(0,D.__generator)(this,function(m){switch(m.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,a=Object.keys(n);o<a.length;o++)i["user_properties."+(c=a[o])]=n[c];return e(Ei.SET,i),[2,Promise.resolve()];case 1:return[4,t];case 2:d=m.sent(),e(Ei.CONFIG,d,{update:!0,user_properties:n}),m.label=3;case 3:return[2]}})})})(Vv,Js[n],c,d).catch(function(m){return Ci.error(m)})},setAnalyticsCollectionEnabled:function(c){(function Bue(e,t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n;return(0,D.__generator)(this,function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),window["ga-disable-"+n]=!t,[2]}})})})(Js[n],c).catch(function(d){return Ci.error(d)})},INTERNAL:{delete:function(){return delete Js[n],Promise.resolve()}}};return a}var LH="analytics";function dce(){return(0,D.__awaiter)(this,void 0,void 0,function(){return(0,D.__generator)(this,function(t){switch(t.label){case 0:if((0,ze.isBrowserExtension)())return[2,!1];if(!(0,ze.areCookiesEnabled)())return[2,!1];if(!(0,ze.isIndexedDBAvailable)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(0,ze.validateIndexedDBOpenable)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}!function hce(e){e.INTERNAL.registerComponent(new Vu.Component(LH,function(n){return cce(n.getProvider("app").getImmediate(),n.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:ace,EventName:Jb,isSupported:dce})),e.INTERNAL.registerComponent(new Vu.Component("analytics-internal",function t(n){try{return{logEvent:n.getProvider(LH).getImmediate().logEvent}}catch(i){throw Es.create("interop-component-reg-failed",{reason:i})}},"PRIVATE")),e.registerVersion("@firebase/analytics","0.6.18")}(Xe.default);var fo,pce=function(){function e(t,n,r,i){this.client=t,this.storage=n,this.storageCache=r,this.logger=i}return e.prototype.isCachedDataFresh=function(t,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var r=Date.now()-n,i=r<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+r+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+i+"."),i},e.prototype.fetch=function(t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,a;return(0,D.__generator)(this,function(c){switch(c.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return n=c.sent(),r=n[0],(i=n[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,r)?[2,i]:(t.eTag=i&&i.eTag,[4,this.client.fetch(t)]);case 2:return o=c.sent(),a=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===o.status&&a.push(this.storage.setLastSuccessfulFetchResponse(o)),[4,Promise.all(a)];case 3:return c.sent(),[2,o]}})})},e}(),gce=((fo={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",fo["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",fo["registration-api-key"]="Undefined API key. Check Firebase app initialization.",fo["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",fo["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",fo["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",fo["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",fo["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",fo["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",fo["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',fo["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',fo["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",fo["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",fo),Cs=new ze.ErrorFactory("remoteconfig","Remote Config",gce);function vce(e){return void 0===e&&(e=navigator),e.languages&&e.languages[0]||e.language}var yce=function(){function e(t,n,r,i,o,a){this.firebaseInstallations=t,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=o,this.appId=a}return e.prototype.fetch=function(t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,o,a,c,d,m,v,w,C,S,A,x,V,H,K,q,fe;return(0,D.__generator)(this,function(Se){switch(Se.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:n=Se.sent(),o=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",a=o+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,c={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},d={sdk_version:this.sdkVersion,app_instance_id:n[0],app_instance_id_token:n[1],app_id:this.appId,language_code:vce()},m={method:"POST",headers:c,body:JSON.stringify(d)},v=fetch(a,m),w=new Promise(function(he,pn){t.signal.addEventListener(function(){var ko=new Error("The operation was aborted.");ko.name="AbortError",pn(ko)})}),Se.label=2;case 2:return Se.trys.push([2,5,,6]),[4,Promise.race([v,w])];case 3:return Se.sent(),[4,v];case 4:return C=Se.sent(),[3,6];case 5:throw S=Se.sent(),A="fetch-client-network","AbortError"===S.name&&(A="fetch-timeout"),Cs.create(A,{originalErrorMessage:S.message});case 6:if(x=C.status,V=C.headers.get("ETag")||void 0,200!==C.status)return[3,11];q=void 0,Se.label=7;case 7:return Se.trys.push([7,9,,10]),[4,C.json()];case 8:return q=Se.sent(),[3,10];case 9:throw fe=Se.sent(),Cs.create("fetch-client-parse",{originalErrorMessage:fe.message});case 10:H=q.entries,K=q.state,Se.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===K?x=500:"NO_CHANGE"===K?x=304:("NO_TEMPLATE"===K||"EMPTY_CONFIG"===K)&&(H={}),304!==x&&200!==x)throw Cs.create("fetch-status",{httpStatus:x});return[2,{status:x,eTag:V,config:H}]}})})},e}(),_ce=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(t){this.listeners.push(t)},e.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},e}(),bce="",Ece=["1","true","t","yes","y","on"],dM=function(){function e(t,n){void 0===n&&(n=bce),this._source=t,this._value=n}return e.prototype.asString=function(){return this._value},e.prototype.asBoolean=function(){return"static"!==this._source&&Ece.indexOf(this._value.toLowerCase())>=0},e.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},e.prototype.getSource=function(){return this._source},e}(),Cce=6e4,Dce=432e5,Ice=function(){function e(t,n,r,i,o){this.app=t,this._client=n,this._storageCache=r,this._storage=i,this._logger=o,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:Cce,minimumFetchIntervalMillis:Dce},this.defaultConfig={}}return e.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=ro.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=ro.LogLevel.SILENT;break;default:this._logger.logLevel=ro.LogLevel.ERROR}},Object.defineProperty(e.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),e.prototype.activate=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){var t,n,r;return(0,D.__generator)(this,function(i){switch(i.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=i.sent(),r=t[1],(n=t[0])&&n.config&&n.eTag&&n.eTag!==r?[4,Promise.all([this._storageCache.setActiveConfig(n.config),this._storage.setActiveConfigEtag(n.eTag)])]:[2,!1];case 2:return i.sent(),[2,!0]}})})},e.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},e.prototype.fetch=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){var t,n,r,i=this;return(0,D.__generator)(this,function(o){switch(o.label){case 0:t=new _ce,setTimeout(function(){return(0,D.__awaiter)(i,void 0,void 0,function(){return(0,D.__generator)(this,function(a){return t.abort(),[2]})})},this.settings.fetchTimeoutMillis),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return o.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return o.sent(),[3,6];case 4:return n=o.sent(),r=function mce(e,t){return e instanceof ze.FirebaseError&&-1!==e.code.indexOf(t)}(n,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(r)];case 5:throw o.sent(),n;case 6:return[2]}})})},e.prototype.fetchAndActivate=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){return(0,D.__generator)(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},e.prototype.getAll=function(){var t=this;return function Tce(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),Object.keys((0,D.__assign)((0,D.__assign)({},e),t))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(n,r){return n[r]=t.getValue(r),n},{})},e.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},e.prototype.getNumber=function(t){return this.getValue(t).asNumber()},e.prototype.getString=function(t){return this.getValue(t).asString()},e.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var n=this._storageCache.getActiveConfig();return n&&void 0!==n[t]?new dM("remote",n[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new dM("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new dM("static"))},e}();function tE(e,t){var n=e.target.error||void 0;return Cs.create(t,{originalErrorMessage:n&&n.message})}var Bf="app_namespace_store",Sce="firebase_remote_config",Ace=1,Rce=function(){function e(t,n,r,i){void 0===i&&(i=function Mce(){return new Promise(function(e,t){var n=indexedDB.open(Sce,Ace);n.onerror=function(r){t(tE(r,"storage-open"))},n.onsuccess=function(r){e(r.target.result)},n.onupgradeneeded=function(r){0===r.oldVersion&&r.target.result.createObjectStore(Bf,{keyPath:"compositeKey"})}})}()),this.appId=t,this.appName=n,this.namespace=r,this.openDbPromise=i}return e.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},e.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},e.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},e.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},e.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},e.prototype.getActiveConfig=function(){return this.get("active_config")},e.prototype.setActiveConfig=function(t){return this.set("active_config",t)},e.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},e.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},e.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},e.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},e.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},e.prototype.get=function(t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r=this;return(0,D.__generator)(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(o,a){var d=n.transaction([Bf],"readonly").objectStore(Bf),m=r.createCompositeKey(t);try{var v=d.get(m);v.onerror=function(w){a(tE(w,"storage-get"))},v.onsuccess=function(w){var C=w.target.result;o(C?C.value:void 0)}}catch(w){a(Cs.create("storage-get",{originalErrorMessage:w&&w.message}))}})]}})})},e.prototype.set=function(t,n){return(0,D.__awaiter)(this,void 0,void 0,function(){var r,i=this;return(0,D.__generator)(this,function(o){switch(o.label){case 0:return[4,this.openDbPromise];case 1:return r=o.sent(),[2,new Promise(function(a,c){var m=r.transaction([Bf],"readwrite").objectStore(Bf),v=i.createCompositeKey(t);try{var w=m.put({compositeKey:v,value:n});w.onerror=function(C){c(tE(C,"storage-set"))},w.onsuccess=function(){a()}}catch(C){c(Cs.create("storage-set",{originalErrorMessage:C&&C.message}))}})]}})})},e.prototype.delete=function(t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n,r=this;return(0,D.__generator)(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(o,a){var d=n.transaction([Bf],"readwrite").objectStore(Bf),m=r.createCompositeKey(t);try{var v=d.delete(m);v.onerror=function(w){a(tE(w,"storage-delete"))},v.onsuccess=function(){o()}}catch(w){a(Cs.create("storage-delete",{originalErrorMessage:w&&w.message}))}})]}})})},e.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},e}(),Nce=function(){function e(t){this.storage=t}return e.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},e.prototype.getActiveConfig=function(){return this.activeConfig},e.prototype.loadFromStorage=function(){return(0,D.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o,a;return(0,D.__generator)(this,function(c){switch(c.label){case 0:return t=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,t];case 1:return(i=c.sent())&&(this.lastFetchStatus=i),[4,n];case 2:return(o=c.sent())&&(this.lastSuccessfulFetchTimestampMillis=o),[4,r];case 3:return(a=c.sent())&&(this.activeConfig=a),[2]}})})},e.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},e.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},e.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},e}();function kce(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener(function(){clearTimeout(o),r(Cs.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}var Oce=function(){function e(t,n){this.client=t,this.storage=n}return e.prototype.fetch=function(t){return(0,D.__awaiter)(this,void 0,void 0,function(){var n;return(0,D.__generator)(this,function(r){switch(r.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return n=r.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,n)]}})})},e.prototype.attemptFetch=function(t,n){var r=n.throttleEndTimeMillis,i=n.backoffCount;return(0,D.__awaiter)(this,void 0,void 0,function(){var o,a,c;return(0,D.__generator)(this,function(d){switch(d.label){case 0:return[4,kce(t.signal,r)];case 1:d.sent(),d.label=2;case 2:return d.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return o=d.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return d.sent(),[2,o];case 5:if(!function xce(e){if(!(e instanceof ze.FirebaseError&&e.customData))return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(a=d.sent()))throw a;return c={throttleEndTimeMillis:Date.now()+(0,ze.calculateBackoffMillis)(i),backoffCount:i+1},[4,this.storage.setThrottleMetadata(c)];case 6:return d.sent(),[2,this.attemptFetch(t,c)];case 7:return[2]}})})},e}(),UH="@firebase/remote-config";!function Fce(e){e.INTERNAL.registerComponent(new Vu.Component("remoteConfig",function t(n,r){var i=r.instanceIdentifier,o=n.getProvider("app").getImmediate(),a=n.getProvider("installations").getImmediate();if(typeof window>"u")throw Cs.create("registration-window");var c=o.options,d=c.projectId,m=c.apiKey,v=c.appId;if(!d)throw Cs.create("registration-project-id");if(!m)throw Cs.create("registration-api-key");if(!v)throw Cs.create("registration-app-id");var w=new Rce(v,o.name,i=i||"firebase"),C=new Nce(w),S=new ro.Logger(UH);S.logLevel=ro.LogLevel.ERROR;var A=new yce(a,e.SDK_VERSION,i,d,m,v),x=new Oce(A,w),V=new pce(x,w,C,S),H=new Ice(o,V,C,w,S);return H.ensureInitialized(),H},"PUBLIC").setMultipleInstances(!0)),e.registerVersion(UH,"0.1.43")}(Xe.default),gt(106),Xe.default.registerVersion("firebase","8.10.1","app"),Xe.default.SDK_VERSION="8.10.1",console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),Xe.default.registerVersion("firebase","8.10.1");let $u=(()=>{class e{constructor(n){this.router=n,this.isAuthenticated=!1,this.passwordMatch=!0}register(n){if(n.password!==n.confirmpassword)return this.passwordMatch=!1,void alert("parolebi ar emtxveva");Xe.default.auth().createUserWithEmailAndPassword(n.email,n.password).then(()=>{this.isAuthenticated=!1,this.router.navigate(["/login"])}).catch(r=>{alert("ver daregistrirdi")})}Login(n){Xe.default.auth().signInWithEmailAndPassword(n.email,n.password).then(()=>{this.isAuthenticated=!0,this.router.navigate(["/main"])}).catch(r=>{this.isAuthenticated=!1,alert("ver shexvedi")})}logOut(){Xe.default.auth().signOut().then(()=>{this.isAuthenticated=!1}).catch(n=>{console.log(n)})}isAuth(){return this.isAuthenticated}}return e.\u0275fac=function(n){return new(n||e)(Ye(yr))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();Xe.default.registerVersion("firebase","8.10.1","app"),Xe.default.SDK_VERSION="8.10.1";let qu=(()=>{class e{getCardsArray(){return this.Cards}data(){throw new Error("Method not implemented.")}constructor(){this.Cards=[],this.db=Xe.default.firestore(),this.cardItems=[]}getCards(){return it(this.db.collection("yvelaferi").get())}addToCart(n){this.cardItems.push(n)}getCartItems(){return this.cardItems}removeFromCart(n){n>=0&&n<this.cardItems.length&&this.cardItems.splice(n,1)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Bce(e,t){if(1&e){const n=dr();J(0,"button",14),ft("click",function(i){return vn(n),mn($t(2).goToLogin(i))}),Ce(1,"\u10d9\u10d0\u10da\u10d0\u10d7\u10e8\u10d8 \u10d3\u10d0\u10db\u10d0\u10e2\u10d4\u10d1\u10d0"),te()}}function Hce(e,t){if(1&e){const n=dr();J(0,"button",14),ft("click",function(){vn(n);const i=$t().$implicit;return mn($t().addToCart(i))}),Ce(1,"\u10d9\u10d0\u10da\u10d0\u10d7\u10d0\u10e8\u10d8 \u10d3\u10d0\u10db\u10d0\u10e2\u10d4\u10d1\u10d0"),te()}}function $ce(e,t){if(1&e){const n=dr();J(0,"div",8),tn(1,"img",9),J(2,"div",10)(3,"h5",11),Ce(4),te(),J(5,"h4",12),Ce(6),te(),J(7,"h6",12),Ce(8),te(),J(9,"div",13)(10,"button",14),ft("click",function(){const o=vn(n).$implicit;return mn($t().showMore(o))}),Ce(11,"\u10db\u10d4\u10e2\u10d8\u10e1 \u10dc\u10d0\u10ee\u10d5\u10d0"),te(),jn(12,Bce,2,0,"button",15),jn(13,Hce,2,0,"button",15),te()()()}if(2&e){const n=t.$implicit,r=$t();ke(1),wt("src",n.img,ds),ke(3),Bs(n.name),ke(2),nr("",n.fasi,"\u20be"),ke(2),nr("",n.ganvadeba,"\u20be-\u10d3\u10d0\u10dc"),ke(4),wt("ngIf",!r.isAuthenticated()),ke(1),wt("ngIf",r.isAuthenticated())}}let qce=(()=>{class e{constructor(n,r,i){this.authservise=n,this.router=r,this.cardService=i,this.phoneCards=[],this.selectedSortOption="default"}ngOnInit(){this.cardService.getCards().subscribe(n=>{for(let r of n.docs){const i=r.data();"phone"===i.type&&this.phoneCards.push(i)}})}sortCards(){"asc"===this.selectedSortOption?this.phoneCards.sort((n,r)=>n.fasi-r.fasi):"desc"===this.selectedSortOption?this.phoneCards.sort((n,r)=>r.fasi-n.fasi):(this.phoneCards=[],this.cardService.getCards().subscribe(n=>{for(let r of n.docs){const i=r.data();"phone"===i.type&&this.phoneCards.push(i)}}))}isAuthenticated(){return this.authservise.isAuth()}goToLogin(n){n.preventDefault(),this.router.navigate(["/login"])}addToCart(n){this.cardService.addToCart(n)}showMore(n){this.router.navigate(["/ShowMore"],{state:{item:n}})}}return e.\u0275fac=function(n){return new(n||e)(ie($u),ie(yr),ie(qu))},e.\u0275cmp=Jr({type:e,selectors:[["app-cardphone"]],decls:12,vars:2,consts:[[1,"sort-container","sortdiv","d-flex","justify-content-center","align-content-center"],["for","sortSelect",1,"label1"],["id","sortSelect",1,"form-select","w-25","sel1",3,"ngModel","ngModelChange","change"],["value","default"],["value","asc"],["value","desc"],[1,"main"],["class","card mainn mt-5 mb-5",4,"ngFor","ngForOf"],[1,"card","mainn","mt-5","mb-5"],["alt","",1,"card-img-top","img",3,"src"],[1,"card-body"],[1,"card-title","dfjcac","ali","h51"],[1,"card-text","dfjcac","h52","mb-3"],[1,"d-flex","justify-content-evenly"],[1,"btn","btn-primary",3,"click"],["class","btn btn-primary",3,"click",4,"ngIf"]],template:function(n,r){1&n&&(J(0,"div",0)(1,"label",1),Ce(2,"\u10d3\u10d0\u10da\u10d0\u10d2\u10d4\u10d1\u10d0: "),te(),J(3,"select",2),ft("ngModelChange",function(o){return r.selectedSortOption=o})("change",function(){return r.sortCards()}),J(4,"option",3),Ce(5,"\u10dc\u10d0\u10d2\u10e3\u10da\u10d8\u10e1\u10ee\u10db\u10d4\u10d5\u10d8"),te(),J(6,"option",4),Ce(7,"\u10d6\u10e0\u10d3\u10d0\u10d3\u10dd\u10d1\u10d8\u10d7"),te(),J(8,"option",5),Ce(9,"\u10d9\u10da\u10d4\u10d1\u10d0\u10d3\u10dd\u10d1\u10d8\u10d7"),te()()(),J(10,"div",6),jn(11,$ce,14,6,"div",7),te()),2&n&&(ke(3),wt("ngModel",r.selectedSortOption),ke(8),wt("ngForOf",r.phoneCards))},dependencies:[Oc,Tu,uf,cf,Su,Na,zs],styles:[".img[_ngcontent-%COMP%]{width:350px;height:350px}.mainn[_ngcontent-%COMP%]{border:1px solid white;width:350px;background-color:#fff}.main[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-evenly;background-color:#f0f2f5;border:none}.h52[_ngcontent-%COMP%]{color:#fe5f55}.h51[_ngcontent-%COMP%]{height:50px}.dfjcac[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.label1[_ngcontent-%COMP%]{margin-top:8px;margin-right:20px}.sortdiv[_ngcontent-%COMP%]{height:70px;display:flex;justify-content:center;align-items:center}.sel1[_ngcontent-%COMP%]{background-color:#cbcad19f;border:1px solid #d1caca9f;height:40px}"]}),e})();function Gce(e,t){if(1&e){const n=dr();J(0,"button",14),ft("click",function(i){return vn(n),mn($t(2).goToLogin(i))}),Ce(1,"\u10d9\u10d0\u10da\u10d0\u10d7\u10e8\u10d8 \u10d3\u10d0\u10db\u10d0\u10e2\u10d4\u10d1\u10d0"),te()}}function zce(e,t){if(1&e){const n=dr();J(0,"button",14),ft("click",function(){vn(n);const i=$t().$implicit;return mn($t().addToCart(i))}),Ce(1,"\u10d9\u10d0\u10da\u10d0\u10d7\u10d0\u10e8\u10d8 \u10d3\u10d0\u10db\u10d0\u10e2\u10d4\u10d1\u10d0"),te()}}function Wce(e,t){if(1&e){const n=dr();J(0,"div",8),tn(1,"img",9),J(2,"div",10)(3,"h5",11),Ce(4),te(),J(5,"h4",12),Ce(6),te(),J(7,"h6",12),Ce(8),te(),J(9,"div",13)(10,"button",14),ft("click",function(){const o=vn(n).$implicit;return mn($t().showMore(o))}),Ce(11,"\u10db\u10d4\u10e2\u10d8\u10e1 \u10dc\u10d0\u10ee\u10d5\u10d0"),te(),jn(12,Gce,2,0,"button",15),jn(13,zce,2,0,"button",15),te()()()}if(2&e){const n=t.$implicit,r=$t();ke(1),wt("src",n.img,ds),ke(3),Bs(n.name),ke(2),nr("",n.fasi,"\u20be"),ke(2),nr("",n.ganvadeba,"\u20be-\u10d3\u10d0\u10dc"),ke(4),wt("ngIf",!r.isAuthenticated()),ke(1),wt("ngIf",r.isAuthenticated())}}let Kce=(()=>{class e{constructor(n,r,i){this.authservise=n,this.router=r,this.cardService=i,this.tvCards=[],this.selectedSortOption="default"}ngOnInit(){this.cardService.getCards().subscribe(n=>{for(let r of n.docs){const i=r.data();"tv"===i.type&&this.tvCards.push(i)}})}sortCards(){"asc"===this.selectedSortOption?this.tvCards.sort((n,r)=>n.fasi-r.fasi):"desc"===this.selectedSortOption?this.tvCards.sort((n,r)=>r.fasi-n.fasi):(this.tvCards=[],this.cardService.getCards().subscribe(n=>{for(let r of n.docs){const i=r.data();"tv"===i.type&&this.tvCards.push(i)}}))}isAuthenticated(){return this.authservise.isAuth()}goToLogin(n){n.preventDefault(),this.router.navigate(["/login"])}addToCart(n){this.cardService.addToCart(n)}showMore(n){this.router.navigate(["/ShowMore"],{state:{item:n}})}}return e.\u0275fac=function(n){return new(n||e)(ie($u),ie(yr),ie(qu))},e.\u0275cmp=Jr({type:e,selectors:[["app-cardtv"]],decls:12,vars:2,consts:[[1,"sort-container","sortdiv","d-flex","justify-content-center","align-content-center"],["for","sortSelect",1,"label1"],["id","sortSelect",1,"form-select","w-25","sel1",3,"ngModel","ngModelChange","change"],["value","default"],["value","asc"],["value","desc"],[1,"main"],["class","card mainn mt-5 mb-5",4,"ngFor","ngForOf"],[1,"card","mainn","mt-5","mb-5"],["alt","",1,"card-img-top","img",3,"src"],[1,"card-body"],[1,"card-title","dfjcac","ali","h51"],[1,"card-text","dfjcac","h52","mb-3"],[1,"d-flex","justify-content-evenly"],[1,"btn","btn-primary",3,"click"],["class","btn btn-primary",3,"click",4,"ngIf"]],template:function(n,r){1&n&&(J(0,"div",0)(1,"label",1),Ce(2,"\u10d3\u10d0\u10da\u10d0\u10d2\u10d4\u10d1\u10d0: "),te(),J(3,"select",2),ft("ngModelChange",function(o){return r.selectedSortOption=o})("change",function(){return r.sortCards()}),J(4,"option",3),Ce(5,"\u10dc\u10d0\u10d2\u10e3\u10da\u10d8\u10e1\u10ee\u10db\u10d4\u10d5\u10d8"),te(),J(6,"option",4),Ce(7,"\u10d6\u10e0\u10d3\u10d0\u10d3\u10dd\u10d1\u10d8\u10d7"),te(),J(8,"option",5),Ce(9,"\u10d9\u10da\u10d4\u10d1\u10d0\u10d3\u10dd\u10d1\u10d8\u10d7"),te()()(),J(10,"div",6),jn(11,Wce,14,6,"div",7),te()),2&n&&(ke(3),wt("ngModel",r.selectedSortOption),ke(8),wt("ngForOf",r.tvCards))},dependencies:[Oc,Tu,uf,cf,Su,Na,zs],styles:[".img[_ngcontent-%COMP%]{width:350px;height:350px}.mainn[_ngcontent-%COMP%]{border:1px solid white;width:350px;background-color:#fff}.main[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-evenly;background-color:#f0f2f5;border:none}.h52[_ngcontent-%COMP%]{color:#fe5f55}.h51[_ngcontent-%COMP%]{height:50px}.dfjcac[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.label1[_ngcontent-%COMP%]{margin-top:8px;margin-right:20px}.sortdiv[_ngcontent-%COMP%]{height:70px;display:flex;justify-content:center;align-items:center}.sel1[_ngcontent-%COMP%]{background-color:#cbcad19f;border:1px solid #d1caca9f;height:40px}"]}),e})();function Qce(e,t){1&e&&(J(0,"div")(1,"h2"),Ce(2,"Your cart is empty."),te()())}function Yce(e,t){if(1&e){const n=dr();J(0,"div",3)(1,"div",4)(2,"img",5),ft("click",function(){const o=vn(n).index;return mn($t().removeFromCart(o))}),te()(),tn(3,"img",6),J(4,"div",7)(5,"h5",8),Ce(6),te(),J(7,"h4",9),Ce(8),te(),J(9,"div",10)(10,"button",11),ft("click",function(){const o=vn(n).$implicit;return mn($t().showMore(o))}),Ce(11,"\u10db\u10d4\u10e2\u10d8\u10e1 \u10dc\u10d0\u10ee\u10d5\u10d0"),te()()()()}if(2&e){const n=t.$implicit;ke(3),wt("src",n.img,ds),ke(3),Bs(n.name),ke(2),nr("",n.fasi,"\u20be")}}let Xce=(()=>{class e{constructor(n,r){this.cardser=n,this.router=r,this.cartItems=[]}ngOnInit(){this.cartItems=this.cardser.getCartItems()}removeFromCart(n){this.cardser.removeFromCart(n),this.cartItems=this.cardser.getCartItems()}showMore(n){this.router.navigate(["/ShowMore"],{state:{item:n}})}}return e.\u0275fac=function(n){return new(n||e)(ie(qu),ie(yr))},e.\u0275cmp=Jr({type:e,selectors:[["app-kalata"]],decls:5,vars:2,consts:[[1,"main"],[4,"ngIf"],["class","card mainn mt-5 mb-5",4,"ngFor","ngForOf"],[1,"card","mainn","mt-5","mb-5"],[1,"d-flex","justify-content-end"],["src","https://cdn.icon-icons.com/icons2/2518/PNG/512/x_icon_150997.png",1,"ximg","cr",3,"click"],["alt","",1,"card-img-top","img",3,"src"],[1,"card-body"],[1,"card-title","dfjcac","ali","h51"],[1,"card-text","dfjcac","h52","mb-3"],[1,"d-flex","justify-content-center"],[1,"btn","btn-primary",3,"click"]],template:function(n,r){1&n&&(J(0,"div",0)(1,"h2"),Ce(2,"Shopping Cart"),te(),jn(3,Qce,3,0,"div",1),jn(4,Yce,12,3,"div",2),te()),2&n&&(ke(3),wt("ngIf",0===r.cartItems.length),ke(1),wt("ngForOf",r.cartItems))},dependencies:[Oc,Tu],styles:[".img[_ngcontent-%COMP%]{width:350px;height:350px}.mainn[_ngcontent-%COMP%]{border:1px solid white;width:350px;height:560px;background-color:#fff}.main[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-evenly;background-color:#f0f2f5;border:none}.h52[_ngcontent-%COMP%]{color:#fe5f55}.h51[_ngcontent-%COMP%]{height:50px}.dfjcac[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.ximg[_ngcontent-%COMP%]{width:40px}.cr[_ngcontent-%COMP%]{cursor:pointer}"]}),e})();function Jce(e,t){if(1&e){const n=dr();J(0,"button",14),ft("click",function(i){return vn(n),mn($t(2).goToLogin(i))}),Ce(1,"\u10d9\u10d0\u10da\u10d0\u10d7\u10e8\u10d8 \u10d3\u10d0\u10db\u10d0\u10e2\u10d4\u10d1\u10d0"),te()}}function Zce(e,t){if(1&e){const n=dr();J(0,"button",14),ft("click",function(){vn(n);const i=$t().$implicit;return mn($t().addToCart(i))}),Ce(1,"\u10d9\u10d0\u10da\u10d0\u10d7\u10d0\u10e8\u10d8 \u10d3\u10d0\u10db\u10d0\u10e2\u10d4\u10d1\u10d0"),te()}}function ele(e,t){if(1&e){const n=dr();J(0,"div",8),tn(1,"img",9),J(2,"div",10)(3,"h5",11),Ce(4),te(),J(5,"h4",12),Ce(6),te(),J(7,"h6",12),Ce(8),te(),J(9,"div",13)(10,"button",14),ft("click",function(){const o=vn(n).$implicit;return mn($t().showMore(o))}),Ce(11,"\u10db\u10d4\u10e2\u10d8\u10e1 \u10dc\u10d0\u10ee\u10d5\u10d0"),te(),jn(12,Jce,2,0,"button",15),jn(13,Zce,2,0,"button",15),te()()()}if(2&e){const n=t.$implicit,r=$t();ke(1),wt("src",n.img,ds),ke(3),Bs(n.name),ke(2),nr("",n.fasi,"\u20be"),ke(2),nr("",n.ganvadeba,"\u20be-\u10d3\u10d0\u10dc"),ke(4),wt("ngIf",!r.isAuthenticated()),ke(1),wt("ngIf",r.isAuthenticated())}}let tle=(()=>{class e{constructor(n,r,i){this.authservise=n,this.router=r,this.cardService=i,this.leptopCards=[],this.selectedSortOption="default"}ngOnInit(){this.cardService.getCards().subscribe(n=>{for(let r of n.docs){const i=r.data();"leptop"===i.type&&this.leptopCards.push(i)}})}sortCards(){"asc"===this.selectedSortOption?this.leptopCards.sort((n,r)=>n.fasi-r.fasi):"desc"===this.selectedSortOption?this.leptopCards.sort((n,r)=>r.fasi-n.fasi):(this.leptopCards=[],this.cardService.getCards().subscribe(n=>{for(let r of n.docs){const i=r.data();"leptop"===i.type&&this.leptopCards.push(i)}}))}isAuthenticated(){return this.authservise.isAuth()}goToLogin(n){n.preventDefault(),this.router.navigate(["/login"])}addToCart(n){this.cardService.addToCart(n)}showMore(n){this.router.navigate(["/ShowMore"],{state:{item:n}})}}return e.\u0275fac=function(n){return new(n||e)(ie($u),ie(yr),ie(qu))},e.\u0275cmp=Jr({type:e,selectors:[["app-leptops"]],decls:12,vars:2,consts:[[1,"sort-container","sortdiv","d-flex","justify-content-center","align-content-center"],["for","sortSelect",1,"label1"],["id","sortSelect",1,"form-select","w-25","sel1",3,"ngModel","ngModelChange","change"],["value","default"],["value","asc"],["value","desc"],[1,"main"],["class","card mainn mt-5 mb-5",4,"ngFor","ngForOf"],[1,"card","mainn","mt-5","mb-5"],["alt","",1,"card-img-top","img",3,"src"],[1,"card-body"],[1,"card-title","dfjcac","ali","h51"],[1,"card-text","dfjcac","h52","mb-3"],[1,"d-flex","justify-content-evenly"],[1,"btn","btn-primary",3,"click"],["class","btn btn-primary",3,"click",4,"ngIf"]],template:function(n,r){1&n&&(J(0,"div",0)(1,"label",1),Ce(2,"\u10d3\u10d0\u10da\u10d0\u10d2\u10d4\u10d1\u10d0: "),te(),J(3,"select",2),ft("ngModelChange",function(o){return r.selectedSortOption=o})("change",function(){return r.sortCards()}),J(4,"option",3),Ce(5,"\u10dc\u10d0\u10d2\u10e3\u10da\u10d8\u10e1\u10ee\u10db\u10d4\u10d5\u10d8"),te(),J(6,"option",4),Ce(7,"\u10e4\u10d0\u10e1\u10d8:\u10d6\u10e0\u10d3\u10d0\u10d3\u10dd\u10d1\u10d8\u10d7"),te(),J(8,"option",5),Ce(9,"\u10e4\u10d0\u10e1\u10d8: \u10d9\u10da\u10d4\u10d1\u10d0\u10d3\u10dd\u10d1\u10d8\u10d7"),te()()(),J(10,"div",6),jn(11,ele,14,6,"div",7),te()),2&n&&(ke(3),wt("ngModel",r.selectedSortOption),ke(8),wt("ngForOf",r.leptopCards))},dependencies:[Oc,Tu,uf,cf,Su,Na,zs],styles:[".img[_ngcontent-%COMP%]{width:350px;height:350px}.mainn[_ngcontent-%COMP%]{border:1px solid white;width:350px;background-color:#fff}.main[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-evenly;background-color:#f0f2f5;border:none}.h52[_ngcontent-%COMP%]{color:#fe5f55}.h51[_ngcontent-%COMP%]{height:50px}.dfjcac[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.label1[_ngcontent-%COMP%]{margin-top:8px;margin-right:20px}.sortdiv[_ngcontent-%COMP%]{height:70px;display:flex;justify-content:center;align-items:center}.sel1[_ngcontent-%COMP%]{background-color:#cbcad19f;border:1px solid #d1caca9f;height:40px}"]}),e})(),nle=(()=>{class e{constructor(n){this.authservise=n,this.form={email:"",password:""}}Submit(){this.authservise.Login(this.form)}}return e.\u0275fac=function(n){return new(n||e)(ie($u))},e.\u0275cmp=Jr({type:e,selectors:[["app-login"]],decls:15,vars:2,consts:[[1,"Register"],[1,"main"],[1,"d-flex","justify-content-center"],[3,"ngSubmit"],[1,"d-flex","justify-content-center","div2"],[1,"div1"],["name","email","type","email","placeholder","Email",1,"form-control","mt-4","w-100",3,"ngModel","ngModelChange"],["name","password","type","password","placeholder","Password",1,"form-control","mt-4","w-100",3,"ngModel","ngModelChange"],["routerLink","/register",1,"mt-2","cr","d-flex","justify-content-center"],[1,"d-flex","justify-content-center","mb-2"],["type","submit",1,"btn","btn-success","mt-2",3,"keyup.enter","click"]],template:function(n,r){1&n&&(J(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),Ce(4,"Login"),te()(),J(5,"form",3),ft("ngSubmit",function(){return r.Submit()}),J(6,"div",4)(7,"div",5)(8,"input",6),ft("ngModelChange",function(o){return r.form.email=o}),te(),J(9,"input",7),ft("ngModelChange",function(o){return r.form.password=o}),te(),J(10,"p",8),Ce(11,"Registration"),te()()(),J(12,"div",9)(13,"button",10),ft("keyup.enter",function(){return r.Submit()})("click",function(){return r.Submit()}),Ce(14,"submit"),te()()()()()),2&n&&(ke(8),wt("ngModel",r.form.email),ke(1),wt("ngModel",r.form.password))},dependencies:[pf,VT,yd,Na,ST,zs,wm],styles:[".main[_ngcontent-%COMP%]{border:2px solid black;border-radius:5px;width:500px;background-color:#fff}.Register[_ngcontent-%COMP%]{height:80vh;display:flex;justify-content:center;align-items:center;background-color:#f0f2f5}.div1[_ngcontent-%COMP%]{width:350px}.div2[_ngcontent-%COMP%]{height:160px}.cr[_ngcontent-%COMP%]{cursor:pointer}"]}),e})(),rle=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Jr({type:e,selectors:[["app-carousel"]],decls:26,vars:0,consts:[["id","carouselExampleIndicators","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-indicators"],["type","button","data-bs-target","#carouselExampleIndicators","data-bs-slide-to","0","aria-current","true","aria-label","Slide 1",1,"active"],["type","button","data-bs-target","#carouselExampleIndicators","data-bs-slide-to","1","aria-label","Slide 2"],["type","button","data-bs-target","#carouselExampleIndicators","data-bs-slide-to","2","aria-label","Slide 3"],["type","button","data-bs-target","#carouselExampleIndicators","data-bs-slide-to","3","aria-label","Slide 4"],["type","button","data-bs-target","#carouselExampleIndicators","data-bs-slide-to","4","aria-label","Slide 5"],[1,"carousel-inner"],[1,"carousel-item","active"],["src","https://img.zoommer.ge/zoommer-images/thumbs/0193564.png","alt","...",1,"d-block","w-100"],[1,"carousel-item"],["src","https://img.zoommer.ge/zoommer-images/thumbs/0192756.png","alt","...",1,"d-block","w-100"],["src","https://img.zoommer.ge/zoommer-images/thumbs/0193562.png","alt","...",1,"d-block","w-100"],["src","https://img.zoommer.ge/zoommer-images/thumbs/0194066.png","alt","...",1,"d-block","w-100"],["src","https://img.zoommer.ge/zoommer-images/thumbs/0194068.png","alt","...",1,"d-block","w-100"],["type","button","data-bs-target","#carouselExampleIndicators","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#carouselExampleIndicators","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"]],template:function(n,r){1&n&&(J(0,"div",0)(1,"div",1),tn(2,"button",2)(3,"button",3)(4,"button",4)(5,"button",5)(6,"button",6),te(),J(7,"div",7)(8,"div",8),tn(9,"img",9),te(),J(10,"div",10),tn(11,"img",11),te(),J(12,"div",10),tn(13,"img",12),te(),J(14,"div",10),tn(15,"img",13),te(),J(16,"div",10),tn(17,"img",14),te()(),J(18,"button",15),tn(19,"span",16),J(20,"span",17),Ce(21,"Previous"),te()(),J(22,"button",18),tn(23,"span",19),J(24,"span",17),Ce(25,"Next"),te()()())}}),e})();function ile(e,t){if(1&e){const n=dr();J(0,"button",16),ft("click",function(i){return vn(n),mn($t(2).goToLogin(i))}),Ce(1,"\u10d9\u10d0\u10da\u10d0\u10d7\u10e8\u10d8 \u10d3\u10d0\u10db\u10d0\u10e2\u10d4\u10d1\u10d0"),te()}}function ole(e,t){if(1&e){const n=dr();J(0,"button",16),ft("click",function(){vn(n);const i=$t().$implicit;return mn($t().addToCart(i))}),Ce(1,"\u10d9\u10d0\u10da\u10d0\u10d7\u10d0\u10e8\u10d8 \u10d3\u10d0\u10db\u10d0\u10e2\u10d4\u10d1\u10d0"),te()}}function sle(e,t){if(1&e){const n=dr();J(0,"div",10)(1,"img",11),ft("click",function(){const o=vn(n).$implicit;return mn($t().showMore(o))}),te(),J(2,"div",12)(3,"h5",13),ft("click",function(){const o=vn(n).$implicit;return mn($t().showMore(o))}),Ce(4),te(),J(5,"h4",14),ft("click",function(){const o=vn(n).$implicit;return mn($t().showMore(o))}),Ce(6),te(),J(7,"h6",14),ft("click",function(){const o=vn(n).$implicit;return mn($t().showMore(o))}),Ce(8),te(),J(9,"div",15)(10,"button",16),ft("click",function(){const o=vn(n).$implicit;return mn($t().showMore(o))}),Ce(11,"\u10db\u10d4\u10e2\u10d8\u10e1 \u10dc\u10d0\u10ee\u10d5\u10d0"),te(),jn(12,ile,2,0,"button",17),jn(13,ole,2,0,"button",17),te()()()}if(2&e){const n=t.$implicit,r=$t();ke(1),wt("src",n.img,ds),ke(3),Bs(n.name),ke(2),nr("",n.fasi,"\u20be"),ke(2),nr("",n.ganvadeba,"\u20be-\u10d3\u10d0\u10dc"),ke(4),wt("ngIf",!r.isAuthenticated()),ke(1),wt("ngIf",r.isAuthenticated())}}function ale(e,t){1&e&&(J(0,"div",18)(1,"h1"),Ce(2,"\u10d0\u10e0 \u10db\u10dd\u10d8\u10eb\u10d4\u10d1\u10dc\u10d0"),te()())}let ule=(()=>{class e{constructor(n,r,i){this.authservise=n,this.router=r,this.cardService=i,this.selectedSortOption="default"}get(){return this.cardService.getCardsArray()}ngOnInit(){}sortCards(){"asc"===this.selectedSortOption?this.cardService.Cards.sort((n,r)=>n.fasi-r.fasi):"desc"===this.selectedSortOption?this.cardService.Cards.sort((n,r)=>r.fasi-n.fasi):(this.cardService.Cards=[],this.cardService.getCards().subscribe(n=>{n.docs.map(r=>{const i=r.data();this.cardService.Cards.push(i)})}))}isAuthenticated(){return this.authservise.isAuth()}goToLogin(n){n.preventDefault(),this.router.navigate(["/login"])}addToCart(n){this.cardService.addToCart(n)}showMore(n){this.router.navigate(["/ShowMore"],{state:{item:n}})}}return e.\u0275fac=function(n){return new(n||e)(ie($u),ie(yr),ie(qu))},e.\u0275cmp=Jr({type:e,selectors:[["app-cards"]],decls:14,vars:3,consts:[[1,"mtavari"],[1,"sort-container","sortdiv","d-flex","justify-content-center","align-content-center"],["for","sortSelect",1,"label1"],["id","sortSelect",1,"form-select","w-25","sel1",3,"ngModel","ngModelChange","change"],["value","default"],["value","asc"],["value","desc"],[1,"main"],["class","card mainn mt-5 mb-5",4,"ngFor","ngForOf"],["class"," ss d-flex w-100 justify-content-center align-items-center ",4,"ngIf"],[1,"card","mainn","mt-5","mb-5"],["alt","",1,"cr","card-img-top","img",3,"src","click"],[1,"card-body"],[1,"cr","card-title","dfjcac","ali","h51",3,"click"],[1,"cr","card-text","dfjcac","h52","mb-3",3,"click"],[1,"d-flex","justify-content-evenly"],[1,"btn","btn-primary",3,"click"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"ss","d-flex","w-100","justify-content-center","align-items-center"]],template:function(n,r){1&n&&(J(0,"div",0)(1,"div",1)(2,"label",2),Ce(3,"\u10d3\u10d0\u10da\u10d0\u10d2\u10d4\u10d1\u10d0: "),te(),J(4,"select",3),ft("ngModelChange",function(o){return r.selectedSortOption=o})("change",function(){return r.sortCards()}),J(5,"option",4),Ce(6,"\u10dc\u10d0\u10d2\u10e3\u10da\u10d8\u10e1\u10ee\u10db\u10d4\u10d5\u10d8"),te(),J(7,"option",5),Ce(8,"\u10d6\u10e0\u10d3\u10d0\u10d3\u10dd\u10d1\u10d8\u10d7"),te(),J(9,"option",6),Ce(10,"\u10d9\u10da\u10d4\u10d1\u10d0\u10d3\u10dd\u10d1\u10d8\u10d7"),te()()(),J(11,"div",7),jn(12,sle,14,6,"div",8),te(),jn(13,ale,3,0,"div",9),te()),2&n&&(ke(4),wt("ngModel",r.selectedSortOption),ke(8),wt("ngForOf",r.get()),ke(1),wt("ngIf",0==r.get().length))},dependencies:[Oc,Tu,uf,cf,Su,Na,zs],styles:[".img[_ngcontent-%COMP%]{width:350px;height:350px}.mainn[_ngcontent-%COMP%]{border:1px solid white;width:350px;background-color:#fff}.main[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-evenly;background-color:#f0f2f5;border:none}.h52[_ngcontent-%COMP%]{color:#fe5f55}.h51[_ngcontent-%COMP%]{height:50px}.dfjcac[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.label1[_ngcontent-%COMP%]{margin-top:8px;margin-right:20px}.sortdiv[_ngcontent-%COMP%]{height:70px;display:flex;justify-content:center;align-items:center}.sel1[_ngcontent-%COMP%]{background-color:#cbcad19f;border:1px solid #d1caca9f;height:40px}.ss[_ngcontent-%COMP%]{height:200px}.ss[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:red;font-family:sans-serif}.cr[_ngcontent-%COMP%]{cursor:pointer}"]}),e})(),cle=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Jr({type:e,selectors:[["app-main"]],decls:2,vars:0,template:function(n,r){1&n&&tn(0,"app-carousel")(1,"app-cards")},dependencies:[rle,ule]}),e})(),lle=(()=>{class e{constructor(n){this.authService=n,this.form={email:"",password:"",confirmpassword:""}}Submit(){this.authService.register(this.form),this.resetForm()}resetForm(){this.form={email:"",password:"",confirmpassword:""}}}return e.\u0275fac=function(n){return new(n||e)(ie($u))},e.\u0275cmp=Jr({type:e,selectors:[["app-register"]],decls:17,vars:3,consts:[[1,"Register"],[1,"main"],[1,"d-flex","justify-content-center"],[1,"d-flex","justify-content-center","div2"],[1,"div1"],["name","email","type","email","placeholder","Email",1,"form-control","mt-4","w-100",3,"ngModel","ngModelChange"],["name","password","type","password","placeholder","Password",1,"form-control","mt-4","w-100",3,"ngModel","ngModelChange"],["name","password","type","password","placeholder","Confirm Password",1,"form-control","mt-4","w-100",3,"ngModel","ngModelChange"],["routerLink","/login",1,"d-flex","justify-content-center"],[1,"cr","bo"],[1,"d-flex","justify-content-center","mb-2"],["type","submit",1,"btn","btn-success","mt-2",3,"keyup.enter","click"]],template:function(n,r){1&n&&(J(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),Ce(4,"Registration"),te()(),J(5,"form")(6,"div",3)(7,"div",4)(8,"input",5),ft("ngModelChange",function(o){return r.form.email=o}),te(),J(9,"input",6),ft("ngModelChange",function(o){return r.form.password=o}),te(),J(10,"input",7),ft("ngModelChange",function(o){return r.form.confirmpassword=o}),te(),J(11,"div",8)(12,"p",9),Ce(13,"login"),te()()()(),J(14,"div",10)(15,"button",11),ft("keyup.enter",function(){return r.Submit()})("click",function(){return r.Submit()}),Ce(16,"submit"),te()()()()()),2&n&&(ke(8),wt("ngModel",r.form.email),ke(1),wt("ngModel",r.form.password),ke(1),wt("ngModel",r.form.confirmpassword))},dependencies:[pf,VT,yd,Na,ST,zs,wm],styles:[".main[_ngcontent-%COMP%]{border:2px solid black;border-radius:5px;width:500px;background-color:#fff}.Register[_ngcontent-%COMP%]{height:80vh;display:flex;justify-content:center;align-items:center;background-color:#f0f2f5}.div1[_ngcontent-%COMP%]{width:350px}.div2[_ngcontent-%COMP%]{height:230px}.cr[_ngcontent-%COMP%]{cursor:pointer}"]}),e})(),fle=(()=>{class e{constructor(){this.item=history.state.item}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Jr({type:e,selectors:[["app-show-more"]],decls:44,vars:10,consts:[[1,"didi"],[1,"cardzed"],[1,"tetr","mt-5"],[1,"main"],["id","carouselExampleIndicators","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-indicators"],["type","button","data-bs-target","#carouselExampleIndicators","data-bs-slide-to","0","aria-current","true","aria-label","Slide 1",1,"active"],["type","button","data-bs-target","#carouselExampleIndicators","data-bs-slide-to","1","aria-label","Slide 2"],["type","button","data-bs-target","#carouselExampleIndicators","data-bs-slide-to","2","aria-label","Slide 3"],[1,"carousel-inner"],[1,"carousel-item","active"],["alt","",1,"d-block",3,"src"],[1,"carousel-item"],["type","button","data-bs-target","#carouselExampleIndicators","data-bs-slide","prev",1,"carousel-control-prev","mains"],["aria-hidden","true",1,"carousel-control-prev-icon","mainn"],[1,"visually-hidden"],["type","button","data-bs-target","#carouselExampleIndicators","data-bs-slide","next",1,"carousel-control-next","mains2"],["aria-hidden","true",1,"carousel-control-next-icon","mainn"],[1,"info"],[1,""],[1,"infoo"],[1,"imgdiv","d-flex","justify-content-end"],["routerLink","/main","src","https://cdn.icon-icons.com/icons2/2518/PNG/512/x_icon_150997.png","alt","",1,"img","cr"]],template:function(n,r){1&n&&(J(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),tn(6,"button",6)(7,"button",7)(8,"button",8),te(),J(9,"div",9)(10,"div",10),tn(11,"img",11),te(),J(12,"div",12),tn(13,"img",11),te(),J(14,"div",12),tn(15,"img",11),te()(),J(16,"button",13),tn(17,"span",14),J(18,"span",15),Ce(19,"Previous"),te()(),J(20,"button",16),tn(21,"span",17),J(22,"span",15),Ce(23,"Next"),te()()()(),J(24,"div",18)(25,"div")(26,"h4",19),Ce(27),te(),tn(28,"hr"),J(29,"div",20)(30,"h6"),Ce(31),te(),J(32,"h6"),Ce(33),te(),J(34,"h6"),Ce(35),te(),J(36,"h6"),Ce(37),te(),J(38,"h6"),Ce(39),te(),J(40,"h6"),Ce(41),te()()()(),J(42,"div",21),tn(43,"img",22),te()()()()),2&n&&(ke(11),wt("src",r.item.img,ds),ke(2),wt("src",r.item.imgg,ds),ke(2),wt("src",r.item.imggg,ds),ke(12),Bs(r.item.name),ke(4),nr("\u10e2\u10d4\u10e5\u10dc\u10d8\u10d9\u10d0 ------- ",r.item.type,""),ke(2),nr("\u10e4\u10d0\u10e1\u10d8 ------- ",r.item.fasi,"\u20be"),ke(2),nr("\u10d2\u10d0\u10dc\u10d5\u10d0\u10d3\u10d4\u10d1\u10d0 ------- ",r.item.ganvadeba,"\u20be-\u10d3\u10d0\u10dc"),ke(2),nr("\u10de\u10e0\u10dd\u10ea\u10d4\u10e1\u10dd\u10e0\u10d8\u10e1 \u10e2\u10d8\u10de\u10d8 ------- ",r.item.proc,""),ke(2),nr("\u10dd\u10de\u10d4\u10e0\u10d0\u10e2\u10d8\u10e3\u10da\u10d8 \u10db\u10d4\u10ee\u10e1\u10d8\u10d4\u10e0\u10d4\u10d1\u10d0 ------- ",r.item.ram,""),ke(2),nr("\u10d2\u10d0\u10e4\u10d0\u10e0\u10d7\u10dd\u10d4\u10d1\u10d0 ------- ",r.item.gaf,""))},dependencies:[pf],styles:[".cardzed[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-around;align-items:center}.mainn[_ngcontent-%COMP%]{background-color:red}.main[_ngcontent-%COMP%]{background-color:#fff;width:600px}.info[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.caruselis[_ngcontent-%COMP%]{width:500px}.tetr[_ngcontent-%COMP%]{width:1500px;height:600px;display:flex;justify-content:space-around;background-color:#fff}.didi[_ngcontent-%COMP%]{height:100vh;background-color:#f0f2f5}.img[_ngcontent-%COMP%]{width:50px;height:50px}.cr[_ngcontent-%COMP%]{cursor:pointer}"]}),e})();function hle(e,t){if(1&e){const n=dr();J(0,"button",14),ft("click",function(i){return vn(n),mn($t(2).goToLogin(i))}),Ce(1,"\u10d9\u10d0\u10da\u10d0\u10d7\u10e8\u10d8 \u10d3\u10d0\u10db\u10d0\u10e2\u10d4\u10d1\u10d0"),te()}}function dle(e,t){if(1&e){const n=dr();J(0,"button",14),ft("click",function(){vn(n);const i=$t().$implicit;return mn($t().addToCart(i))}),Ce(1,"\u10d9\u10d0\u10da\u10d0\u10d7\u10d0\u10e8\u10d8 \u10d3\u10d0\u10db\u10d0\u10e2\u10d4\u10d1\u10d0"),te()}}function ple(e,t){if(1&e){const n=dr();J(0,"div",8),tn(1,"img",9),J(2,"div",10)(3,"h5",11),Ce(4),te(),J(5,"h4",12),Ce(6),te(),J(7,"h6",12),Ce(8),te(),J(9,"div",13)(10,"button",14),ft("click",function(){const o=vn(n).$implicit;return mn($t().showMore(o))}),Ce(11,"\u10db\u10d4\u10e2\u10d8\u10e1 \u10dc\u10d0\u10ee\u10d5\u10d0"),te(),jn(12,hle,2,0,"button",15),jn(13,dle,2,0,"button",15),te()()()}if(2&e){const n=t.$implicit,r=$t();ke(1),wt("src",n.img,ds),ke(3),Bs(n.name),ke(2),nr("",n.fasi,"\u20be"),ke(2),nr("",n.ganvadeba,"\u20be-\u10d3\u10d0\u10dc"),ke(4),wt("ngIf",!r.isAuthenticated()),ke(1),wt("ngIf",r.isAuthenticated())}}let gle=(()=>{class e{constructor(n,r,i){this.authservise=n,this.router=r,this.cardService=i,this.tabCards=[],this.selectedSortOption="default"}ngOnInit(){this.cardService.getCards().subscribe(n=>{for(let r of n.docs){const i=r.data();"tab"===i.type&&this.tabCards.push(i)}})}sortCards(){"asc"===this.selectedSortOption?this.tabCards.sort((n,r)=>n.fasi-r.fasi):"desc"===this.selectedSortOption?this.tabCards.sort((n,r)=>r.fasi-n.fasi):(this.tabCards=[],this.cardService.getCards().subscribe(n=>{for(let r of n.docs){const i=r.data();"tab"===i.type&&this.tabCards.push(i)}}))}isAuthenticated(){return this.authservise.isAuth()}goToLogin(n){n.preventDefault(),this.router.navigate(["/login"])}addToCart(n){this.cardService.addToCart(n)}showMore(n){this.router.navigate(["/ShowMore"],{state:{item:n}})}}return e.\u0275fac=function(n){return new(n||e)(ie($u),ie(yr),ie(qu))},e.\u0275cmp=Jr({type:e,selectors:[["app-tabs"]],decls:12,vars:2,consts:[[1,"sort-container","sortdiv","d-flex","justify-content-center","align-content-center"],["for","sortSelect",1,"label1"],["id","sortSelect",1,"form-select","w-25","sel1",3,"ngModel","ngModelChange","change"],["value","default"],["value","asc"],["value","desc"],[1,"main"],["class","card mainn mt-5 mb-5",4,"ngFor","ngForOf"],[1,"card","mainn","mt-5","mb-5"],["alt","",1,"card-img-top","img",3,"src"],[1,"card-body"],[1,"card-title","dfjcac","ali","h51"],[1,"card-text","dfjcac","h52","mb-3"],[1,"d-flex","justify-content-evenly"],[1,"btn","btn-primary",3,"click"],["class","btn btn-primary",3,"click",4,"ngIf"]],template:function(n,r){1&n&&(J(0,"div",0)(1,"label",1),Ce(2,"\u10d3\u10d0\u10da\u10d0\u10d2\u10d4\u10d1\u10d0: "),te(),J(3,"select",2),ft("ngModelChange",function(o){return r.selectedSortOption=o})("change",function(){return r.sortCards()}),J(4,"option",3),Ce(5,"\u10dc\u10d0\u10d2\u10e3\u10da\u10d8\u10e1\u10ee\u10db\u10d4\u10d5\u10d8"),te(),J(6,"option",4),Ce(7,"\u10d6\u10e0\u10d3\u10d0\u10d3\u10dd\u10d1\u10d8\u10d7"),te(),J(8,"option",5),Ce(9,"\u10d9\u10da\u10d4\u10d1\u10d0\u10d3\u10dd\u10d1\u10d8\u10d7"),te()()(),J(10,"div",6),jn(11,ple,14,6,"div",7),te()),2&n&&(ke(3),wt("ngModel",r.selectedSortOption),ke(8),wt("ngForOf",r.tabCards))},dependencies:[Oc,Tu,uf,cf,Su,Na,zs],styles:[".img[_ngcontent-%COMP%]{width:350px;height:350px}.mainn[_ngcontent-%COMP%]{border:1px solid white;width:350px;background-color:#fff}.main[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-evenly;background-color:#f0f2f5;border:none}.h52[_ngcontent-%COMP%]{color:#fe5f55}.h51[_ngcontent-%COMP%]{height:50px}.dfjcac[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.label1[_ngcontent-%COMP%]{margin-top:8px;margin-right:20px}.sortdiv[_ngcontent-%COMP%]{height:70px;display:flex;justify-content:center;align-items:center}.sel1[_ngcontent-%COMP%]{background-color:#cbcad19f;border:1px solid #d1caca9f;height:40px}"]}),e})();function mle(e,t){if(1&e){const n=dr();J(0,"button",14),ft("click",function(i){return vn(n),mn($t(2).goToLogin(i))}),Ce(1,"\u10d9\u10d0\u10da\u10d0\u10d7\u10e8\u10d8 \u10d3\u10d0\u10db\u10d0\u10e2\u10d4\u10d1\u10d0"),te()}}function vle(e,t){if(1&e){const n=dr();J(0,"button",14),ft("click",function(){vn(n);const i=$t().$implicit;return mn($t().addToCart(i))}),Ce(1,"\u10d9\u10d0\u10da\u10d0\u10d7\u10d0\u10e8\u10d8 \u10d3\u10d0\u10db\u10d0\u10e2\u10d4\u10d1\u10d0"),te()}}function yle(e,t){if(1&e){const n=dr();J(0,"div",8),tn(1,"img",9),J(2,"div",10)(3,"h5",11),Ce(4),te(),J(5,"h4",12),Ce(6),te(),J(7,"h6",12),Ce(8),te(),J(9,"div",13)(10,"button",14),ft("click",function(){const o=vn(n).$implicit;return mn($t().showMore(o))}),Ce(11,"\u10db\u10d4\u10e2\u10d8\u10e1 \u10dc\u10d0\u10ee\u10d5\u10d0"),te(),jn(12,mle,2,0,"button",15),jn(13,vle,2,0,"button",15),te()()()}if(2&e){const n=t.$implicit,r=$t();ke(1),wt("src",n.img,ds),ke(3),Bs(n.name),ke(2),nr("",n.fasi,"\u20be"),ke(2),nr("",n.ganvadeba,"\u20be-\u10d3\u10d0\u10dc"),ke(4),wt("ngIf",!r.isAuthenticated()),ke(1),wt("ngIf",r.isAuthenticated())}}const _le=[{path:"",redirectTo:"/main",pathMatch:"full"},{path:"main",component:cle},{path:"kalata",component:Xce},{path:"register",component:lle},{path:"login",component:nle},{path:"phone",component:qce},{path:"TV",component:Kce},{path:"leptop",component:tle},{path:"tab",component:gle},{path:"ShowMore",component:fle},{path:"watch",component:(()=>{class e{constructor(n,r,i){this.authservise=n,this.router=r,this.cardService=i,this.watchCards=[],this.selectedSortOption="default"}ngOnInit(){this.cardService.getCards().subscribe(n=>{for(let r of n.docs){const i=r.data();"watch"===i.type&&this.watchCards.push(i)}})}sortCards(){"asc"===this.selectedSortOption?this.watchCards.sort((n,r)=>n.fasi-r.fasi):"desc"===this.selectedSortOption?this.watchCards.sort((n,r)=>r.fasi-n.fasi):(this.watchCards=[],this.cardService.getCards().subscribe(n=>{for(let r of n.docs){const i=r.data();"watch"===i.type&&this.watchCards.push(i)}}))}isAuthenticated(){return this.authservise.isAuth()}goToLogin(n){n.preventDefault(),this.router.navigate(["/login"])}addToCart(n){this.cardService.addToCart(n)}showMore(n){this.router.navigate(["/ShowMore"],{state:{item:n}})}}return e.\u0275fac=function(n){return new(n||e)(ie($u),ie(yr),ie(qu))},e.\u0275cmp=Jr({type:e,selectors:[["app-cardwatch"]],decls:12,vars:2,consts:[[1,"sort-container","sortdiv","d-flex","justify-content-center","align-content-center"],["for","sortSelect",1,"label1"],["id","sortSelect",1,"form-select","w-25","sel1",3,"ngModel","ngModelChange","change"],["value","default"],["value","asc"],["value","desc"],[1,"main"],["class","card mainn mt-5 mb-5",4,"ngFor","ngForOf"],[1,"card","mainn","mt-5","mb-5"],["alt","",1,"card-img-top","img",3,"src"],[1,"card-body"],[1,"card-title","dfjcac","ali","h51"],[1,"card-text","dfjcac","h52","mb-3"],[1,"d-flex","justify-content-evenly"],[1,"btn","btn-primary",3,"click"],["class","btn btn-primary",3,"click",4,"ngIf"]],template:function(n,r){1&n&&(J(0,"div",0)(1,"label",1),Ce(2,"\u10d3\u10d0\u10da\u10d0\u10d2\u10d4\u10d1\u10d0: "),te(),J(3,"select",2),ft("ngModelChange",function(o){return r.selectedSortOption=o})("change",function(){return r.sortCards()}),J(4,"option",3),Ce(5,"\u10dc\u10d0\u10d2\u10e3\u10da\u10d8\u10e1\u10ee\u10db\u10d4\u10d5\u10d8"),te(),J(6,"option",4),Ce(7,"\u10d6\u10e0\u10d3\u10d0\u10d3\u10dd\u10d1\u10d8\u10d7"),te(),J(8,"option",5),Ce(9,"\u10d9\u10da\u10d4\u10d1\u10d0\u10d3\u10dd\u10d1\u10d8\u10d7"),te()()(),J(10,"div",6),jn(11,yle,14,6,"div",7),te()),2&n&&(ke(3),wt("ngModel",r.selectedSortOption),ke(8),wt("ngForOf",r.watchCards))},dependencies:[Oc,Tu,uf,cf,Su,Na,zs],styles:[".img[_ngcontent-%COMP%]{width:350px;height:350px}.mainn[_ngcontent-%COMP%]{border:1px solid white;width:350px;background-color:#fff}.main[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-evenly;background-color:#f0f2f5;border:none}.h52[_ngcontent-%COMP%]{color:#fe5f55}.h51[_ngcontent-%COMP%]{height:50px}.dfjcac[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.label1[_ngcontent-%COMP%]{margin-top:8px;margin-right:20px}.sortdiv[_ngcontent-%COMP%]{height:70px;display:flex;justify-content:center;align-items:center}.sel1[_ngcontent-%COMP%]{background-color:#cbcad19f;border:1px solid #d1caca9f;height:40px}"]}),e})()}];let wle=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Wi({type:e}),e.\u0275inj=mo({imports:[FV.forRoot(_le),FV]}),e})();function ble(e,t){1&e&&(Xg(0,16),J(1,"h6",17),Ce(2,"\u10e0\u10d4\u10d2\u10d8\u10e1\u10e2\u10e0\u10d0\u10ea\u10d8\u10d0"),te(),J(3,"h6",18),Ce(4,"\u10e8\u10d4\u10e1\u10d5\u10da\u10d0"),te(),Jg())}function Ele(e,t){if(1&e){const n=dr();Xg(0),J(1,"h6",19),ft("click",function(){return vn(n),mn($t().logOut())}),Ce(2,"\u10d2\u10d0\u10db\u10dd\u10e1\u10d5\u10da\u10d0"),te(),Jg()}}let Cle=(()=>{class e{constructor(n,r){this.authservise=n,this.cardService=r,this.cartItems=[]}ngOnInit(){this.cartItems=this.cardService.getCartItems()}isAuthenticated(){return this.authservise.isAuth()}logOut(){this.authservise.logOut()}search(){let n=[];this.cardService.getCards().subscribe(r=>{r.docs.map(i=>{const o=i.data();n.push(o),""!==this.inpValue&&(n=n.filter(a=>a.name.toLowerCase().startsWith(this.inpValue.toLowerCase()))),this.cardService.Cards=n})})}}return e.\u0275fac=function(n){return new(n||e)(ie($u),ie(qu))},e.\u0275cmp=Jr({type:e,selectors:[["app-navbar"]],decls:28,vars:4,consts:[[1,"main"],[1,"imgdiv"],["routerLink","/","src","https://zoommer.ge/themes/zoommer/assets/images/logoka.svg","alt","",1,"img1"],[1,"inp1div"],["type","text","placeholder","\u10eb\u10d8\u10d4\u10d1\u10d0...",1,"inp1","form-control",3,"ngModel","keyup","ngModelChange"],[1,"img2div","d-flex"],["routerLink","/kalata","src","https://www.iconpacks.net/icons/2/free-add-to-basket-icon-3042-thumb.png","alt","",1,"img2"],[1,"kalatisricxvi"],["class","div1 d-flex justify-content-evenly",4,"ngIf"],[4,"ngIf"],[1,"main2"],["routerLink","/phone",1,"p","cr"],["routerLink","/leptop",1,"p","cr"],["routerLink","/tab",1,"p","cr"],["routerLink","/TV",1,"p","cr"],["routerLink","/watch",1,"p","cr"],[1,"div1","d-flex","justify-content-evenly"],["routerLink","/register",1,"cr","mar"],["routerLink","/login",1,"cr","mar"],["routerLink","/login",1,"cr",3,"click"]],template:function(n,r){1&n&&(J(0,"nav")(1,"div",0)(2,"div",1),tn(3,"img",2),te(),J(4,"div",3)(5,"input",4),ft("keyup",function(){return r.search()})("ngModelChange",function(o){return r.inpValue=o}),te()(),J(6,"div",5),tn(7,"img",6),J(8,"div",7),Ce(9),te()(),jn(10,ble,5,0,"ng-container",8),jn(11,Ele,3,0,"ng-container",9),te()(),J(12,"div",10)(13,"h6",11),Ce(14,"\u10e2\u10d4\u10da\u10d4\u10e4\u10dd\u10dc\u10d4\u10d1\u10d8"),te(),tn(15,"hr"),J(16,"h6",12),Ce(17,"\u10da\u10d4\u10de\u10e2\u10dd\u10de\u10d4\u10d1\u10d8"),te(),tn(18,"hr"),J(19,"h6",13),Ce(20,"\u10e2\u10d0\u10d1\u10d4\u10d1\u10d8"),te(),tn(21,"hr"),J(22,"h6",14),Ce(23,"\u10e2\u10d4\u10da\u10d4\u10d5\u10d8\u10d6\u10dd\u10e0\u10d4\u10d1\u10d8 \u10d3\u10d0 \u10db\u10dd\u10dc\u10d8\u10e2\u10dd\u10e0\u10d4\u10d1\u10d8"),te(),tn(24,"hr"),J(25,"h6",15),Ce(26,"\u10e1\u10db\u10d0\u10e0\u10e2 \u10e1\u10d0\u10d0\u10d7\u10d4\u10d1\u10d8"),te(),tn(27,"hr"),te()),2&n&&(ke(5),wt("ngModel",r.inpValue),ke(4),Bs(r.cartItems.length),ke(1),wt("ngIf",!r.isAuthenticated()),ke(1),wt("ngIf",r.isAuthenticated()))},dependencies:[Tu,pf,yd,Na,zs],styles:[".img1[_ngcontent-%COMP%]{width:190px;height:100px;cursor:pointer}.cr[_ngcontent-%COMP%]{cursor:pointer}.img2[_ngcontent-%COMP%]{width:50px;cursor:pointer}.img3[_ngcontent-%COMP%]{width:40px;cursor:pointer}nav[_ngcontent-%COMP%]{display:flex;justify-content:center}.main[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;align-items:center;width:1000px}.inp1[_ngcontent-%COMP%]{height:50px;background-color:#d1caca9f;border:1px solid #d1caca9f}.inp1div[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:500px}.mar[_ngcontent-%COMP%]{margin-left:10px;margin-bottom:0}.div1[_ngcontent-%COMP%]{width:200px}.main2[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;align-items:center;background-color:#0a3251;height:60px}.dfjcac[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.kalatisricxvi[_ngcontent-%COMP%]{font-size:20px}.p[_ngcontent-%COMP%]{color:#fff;font-weight:400}.p1[_ngcontent-%COMP%]{background-color:#ff5000;padding:15px;margin-top:7px;display:flex;justify-content:center;align-items:center}"]}),e})(),Dle=(()=>{class e{constructor(n){this.cardservise=n,this.title="PROJECT2"}ngOnInit(){this.getInformation()}getInformation(){this.cardservise.getCards().subscribe(n=>{this.cardservise.Cards=n.docs.map(r=>{const i=r.data();return{id:r.id,...i}})})}}return e.\u0275fac=function(n){return new(n||e)(ie(qu))},e.\u0275cmp=Jr({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(n,r){1&n&&tn(0,"app-navbar")(1,"router-outlet")},dependencies:[dS,Cle],styles:["body[_ngcontent-%COMP%]{background-color:#000}"]}),e})();Xe.default.initializeApp({apiKey:"AIzaSyAxXo9dHB5GrG8lb_fWvWZEBu230ieiV5M",authDomain:"regisproj-d2ec8.firebaseapp.com",projectId:"regisproj-d2ec8",storageBucket:"regisproj-d2ec8.appspot.com",messagingSenderId:"143114734203",appId:"1:143114734203:web:93f03f29fff7462d5b30de",measurementId:"G-ZQYL68TV4L"});let Tle=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Wi({type:e,bootstrap:[Dle]}),e.\u0275inj=mo({imports:[pY,wle,SX,XX]}),e})();dY().bootstrapModule(Tle).catch(e=>console.error(e))},940:function(go,ar){!function(gt){"use strict";function Tt(Te){return new Promise(function(Oe,Ke){Te.onsuccess=function(){Oe(Te.result)},Te.onerror=function(){Ke(Te.error)}})}function N(Te,Oe,Ke){var at,rt=new Promise(function(He,on){Tt(at=Te[Oe].apply(Te,Ke)).then(He,on)});return rt.request=at,rt}function Ct(Te,Oe,Ke){Ke.forEach(function(at){Object.defineProperty(Te.prototype,at,{get:function(){return this[Oe][at]},set:function(rt){this[Oe][at]=rt}})})}function ur(Te,Oe,Ke,at){at.forEach(function(rt){rt in Ke.prototype&&(Te.prototype[rt]=function(){return N(this[Oe],rt,arguments)})})}function En(Te,Oe,Ke,at){at.forEach(function(rt){rt in Ke.prototype&&(Te.prototype[rt]=function(){return this[Oe][rt].apply(this[Oe],arguments)})})}function rn(Te,Oe,Ke,at){at.forEach(function(rt){rt in Ke.prototype&&(Te.prototype[rt]=function(){return function oe(Te,Oe,Ke){var at=N(Te,Oe,Ke);return at.then(function(rt){if(rt)return new ae(rt,at.request)})}(this[Oe],rt,arguments)})})}function Be(Te){this._index=Te}function ae(Te,Oe){this._cursor=Te,this._request=Oe}function xe(Te){this._store=Te}function Ie(Te){this._tx=Te,this.complete=new Promise(function(Oe,Ke){Te.oncomplete=function(){Oe()},Te.onerror=function(){Ke(Te.error)},Te.onabort=function(){Ke(Te.error)}})}function ge(Te,Oe,Ke){this._db=Te,this.oldVersion=Oe,this.transaction=new Ie(Ke)}function be(Te){this._db=Te}Ct(Be,"_index",["name","keyPath","multiEntry","unique"]),ur(Be,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),rn(Be,"_index",IDBIndex,["openCursor","openKeyCursor"]),Ct(ae,"_cursor",["direction","key","primaryKey","value"]),ur(ae,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(Te){Te in IDBCursor.prototype&&(ae.prototype[Te]=function(){var Oe=this,Ke=arguments;return Promise.resolve().then(function(){return Oe._cursor[Te].apply(Oe._cursor,Ke),Tt(Oe._request).then(function(at){if(at)return new ae(at,Oe._request)})})})}),xe.prototype.createIndex=function(){return new Be(this._store.createIndex.apply(this._store,arguments))},xe.prototype.index=function(){return new Be(this._store.index.apply(this._store,arguments))},Ct(xe,"_store",["name","keyPath","indexNames","autoIncrement"]),ur(xe,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),rn(xe,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),En(xe,"_store",IDBObjectStore,["deleteIndex"]),Ie.prototype.objectStore=function(){return new xe(this._tx.objectStore.apply(this._tx,arguments))},Ct(Ie,"_tx",["objectStoreNames","mode"]),En(Ie,"_tx",IDBTransaction,["abort"]),ge.prototype.createObjectStore=function(){return new xe(this._db.createObjectStore.apply(this._db,arguments))},Ct(ge,"_db",["name","version","objectStoreNames"]),En(ge,"_db",IDBDatabase,["deleteObjectStore","close"]),be.prototype.transaction=function(){return new Ie(this._db.transaction.apply(this._db,arguments))},Ct(be,"_db",["name","version","objectStoreNames"]),En(be,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(Te){[xe,Be].forEach(function(Oe){Te in Oe.prototype&&(Oe.prototype[Te.replace("open","iterate")]=function(){var Ke=function Ve(Te){return Array.prototype.slice.call(Te)}(arguments),at=Ke[Ke.length-1],rt=this._store||this._index,He=rt[Te].apply(rt,Ke.slice(0,-1));He.onsuccess=function(){at(He.result)}})})}),[Be,xe].forEach(function(Te){Te.prototype.getAll||(Te.prototype.getAll=function(Oe,Ke){var at=this,rt=[];return new Promise(function(He){at.iterateCursor(Oe,function(on){on?(rt.push(on.value),void 0===Ke||rt.length!=Ke?on.continue():He(rt)):He(rt)})})})}),gt.openDb=function et(Te,Oe,Ke){var at=N(indexedDB,"open",[Te,Oe]),rt=at.request;return rt&&(rt.onupgradeneeded=function(He){Ke&&Ke(new ge(rt.result,He.oldVersion,rt.transaction))}),at.then(function(He){return new be(He)})},gt.deleteDb=function St(Te){return N(indexedDB,"deleteDatabase",[Te])},Object.defineProperty(gt,"__esModule",{value:!0})}(ar)},582:(go,ar,gt)=>{"use strict";gt.r(ar),gt.d(ar,{__assign:()=>N,__asyncDelegator:()=>on,__asyncGenerator:()=>He,__asyncValues:()=>cr,__await:()=>rt,__awaiter:()=>Ie,__classPrivateFieldGet:()=>Hi,__classPrivateFieldIn:()=>lr,__classPrivateFieldSet:()=>Cn,__createBinding:()=>be,__decorate:()=>Ct,__esDecorate:()=>En,__exportStar:()=>et,__extends:()=>Tt,__generator:()=>ge,__importDefault:()=>Bi,__importStar:()=>ji,__makeTemplateObject:()=>Pt,__metadata:()=>xe,__param:()=>ur,__propKey:()=>Be,__read:()=>Te,__rest:()=>oe,__runInitializers:()=>rn,__setFunctionName:()=>ae,__spread:()=>Oe,__spreadArray:()=>at,__spreadArrays:()=>Ke,__values:()=>St,default:()=>Gn});var Ve=function(Y,Z){return(Ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(se,ce){se.__proto__=ce}||function(se,ce){for(var pe in ce)Object.prototype.hasOwnProperty.call(ce,pe)&&(se[pe]=ce[pe])})(Y,Z)};function Tt(Y,Z){if("function"!=typeof Z&&null!==Z)throw new TypeError("Class extends value "+String(Z)+" is not a constructor or null");function se(){this.constructor=Y}Ve(Y,Z),Y.prototype=null===Z?Object.create(Z):(se.prototype=Z.prototype,new se)}var N=function(){return N=Object.assign||function(Z){for(var se,ce=1,pe=arguments.length;ce<pe;ce++)for(var ee in se=arguments[ce])Object.prototype.hasOwnProperty.call(se,ee)&&(Z[ee]=se[ee]);return Z},N.apply(this,arguments)};function oe(Y,Z){var se={};for(var ce in Y)Object.prototype.hasOwnProperty.call(Y,ce)&&Z.indexOf(ce)<0&&(se[ce]=Y[ce]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var pe=0;for(ce=Object.getOwnPropertySymbols(Y);pe<ce.length;pe++)Z.indexOf(ce[pe])<0&&Object.prototype.propertyIsEnumerable.call(Y,ce[pe])&&(se[ce[pe]]=Y[ce[pe]])}return se}function Ct(Y,Z,se,ce){var ye,pe=arguments.length,ee=pe<3?Z:null===ce?ce=Object.getOwnPropertyDescriptor(Z,se):ce;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)ee=Reflect.decorate(Y,Z,se,ce);else for(var Le=Y.length-1;Le>=0;Le--)(ye=Y[Le])&&(ee=(pe<3?ye(ee):pe>3?ye(Z,se,ee):ye(Z,se))||ee);return pe>3&&ee&&Object.defineProperty(Z,se,ee),ee}function ur(Y,Z){return function(se,ce){Z(se,ce,Y)}}function En(Y,Z,se,ce,pe,ee){function ye(At){if(void 0!==At&&"function"!=typeof At)throw new TypeError("Function expected");return At}for(var Ue,Le=ce.kind,tt="getter"===Le?"get":"setter"===Le?"set":"value",Re=!Z&&Y?ce.static?Y:Y.prototype:null,jt=Z||(Re?Object.getOwnPropertyDescriptor(Re,ce.name):{}),D=!1,Mn=se.length-1;Mn>=0;Mn--){var Cr={};for(var Vn in ce)Cr[Vn]="access"===Vn?{}:ce[Vn];for(var Vn in ce.access)Cr.access[Vn]=ce.access[Vn];Cr.addInitializer=function(At){if(D)throw new TypeError("Cannot add initializers after decoration has completed");ee.push(ye(At||null))};var Xr=(0,se[Mn])("accessor"===Le?{get:jt.get,set:jt.set}:jt[tt],Cr);if("accessor"===Le){if(void 0===Xr)continue;if(null===Xr||"object"!=typeof Xr)throw new TypeError("Object expected");(Ue=ye(Xr.get))&&(jt.get=Ue),(Ue=ye(Xr.set))&&(jt.set=Ue),(Ue=ye(Xr.init))&&pe.unshift(Ue)}else(Ue=ye(Xr))&&("field"===Le?pe.unshift(Ue):jt[tt]=Ue)}Re&&Object.defineProperty(Re,ce.name,jt),D=!0}function rn(Y,Z,se){for(var ce=arguments.length>2,pe=0;pe<Z.length;pe++)se=ce?Z[pe].call(Y,se):Z[pe].call(Y);return ce?se:void 0}function Be(Y){return"symbol"==typeof Y?Y:"".concat(Y)}function ae(Y,Z,se){return"symbol"==typeof Z&&(Z=Z.description?"[".concat(Z.description,"]"):""),Object.defineProperty(Y,"name",{configurable:!0,value:se?"".concat(se," ",Z):Z})}function xe(Y,Z){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(Y,Z)}function Ie(Y,Z,se,ce){return new(se||(se=Promise))(function(ee,ye){function Le(jt){try{Re(ce.next(jt))}catch(Ue){ye(Ue)}}function tt(jt){try{Re(ce.throw(jt))}catch(Ue){ye(Ue)}}function Re(jt){jt.done?ee(jt.value):function pe(ee){return ee instanceof se?ee:new se(function(ye){ye(ee)})}(jt.value).then(Le,tt)}Re((ce=ce.apply(Y,Z||[])).next())})}function ge(Y,Z){var ce,pe,ee,ye,se={label:0,sent:function(){if(1&ee[0])throw ee[1];return ee[1]},trys:[],ops:[]};return ye={next:Le(0),throw:Le(1),return:Le(2)},"function"==typeof Symbol&&(ye[Symbol.iterator]=function(){return this}),ye;function Le(Re){return function(jt){return function tt(Re){if(ce)throw new TypeError("Generator is already executing.");for(;ye&&(ye=0,Re[0]&&(se=0)),se;)try{if(ce=1,pe&&(ee=2&Re[0]?pe.return:Re[0]?pe.throw||((ee=pe.return)&&ee.call(pe),0):pe.next)&&!(ee=ee.call(pe,Re[1])).done)return ee;switch(pe=0,ee&&(Re=[2&Re[0],ee.value]),Re[0]){case 0:case 1:ee=Re;break;case 4:return se.label++,{value:Re[1],done:!1};case 5:se.label++,pe=Re[1],Re=[0];continue;case 7:Re=se.ops.pop(),se.trys.pop();continue;default:if(!(ee=(ee=se.trys).length>0&&ee[ee.length-1])&&(6===Re[0]||2===Re[0])){se=0;continue}if(3===Re[0]&&(!ee||Re[1]>ee[0]&&Re[1]<ee[3])){se.label=Re[1];break}if(6===Re[0]&&se.label<ee[1]){se.label=ee[1],ee=Re;break}if(ee&&se.label<ee[2]){se.label=ee[2],se.ops.push(Re);break}ee[2]&&se.ops.pop(),se.trys.pop();continue}Re=Z.call(Y,se)}catch(jt){Re=[6,jt],pe=0}finally{ce=ee=0}if(5&Re[0])throw Re[1];return{value:Re[0]?Re[1]:void 0,done:!0}}([Re,jt])}}}var be=Object.create?function(Y,Z,se,ce){void 0===ce&&(ce=se);var pe=Object.getOwnPropertyDescriptor(Z,se);(!pe||("get"in pe?!Z.__esModule:pe.writable||pe.configurable))&&(pe={enumerable:!0,get:function(){return Z[se]}}),Object.defineProperty(Y,ce,pe)}:function(Y,Z,se,ce){void 0===ce&&(ce=se),Y[ce]=Z[se]};function et(Y,Z){for(var se in Y)"default"!==se&&!Object.prototype.hasOwnProperty.call(Z,se)&&be(Z,Y,se)}function St(Y){var Z="function"==typeof Symbol&&Symbol.iterator,se=Z&&Y[Z],ce=0;if(se)return se.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&ce>=Y.length&&(Y=void 0),{value:Y&&Y[ce++],done:!Y}}};throw new TypeError(Z?"Object is not iterable.":"Symbol.iterator is not defined.")}function Te(Y,Z){var se="function"==typeof Symbol&&Y[Symbol.iterator];if(!se)return Y;var pe,ye,ce=se.call(Y),ee=[];try{for(;(void 0===Z||Z-- >0)&&!(pe=ce.next()).done;)ee.push(pe.value)}catch(Le){ye={error:Le}}finally{try{pe&&!pe.done&&(se=ce.return)&&se.call(ce)}finally{if(ye)throw ye.error}}return ee}function Oe(){for(var Y=[],Z=0;Z<arguments.length;Z++)Y=Y.concat(Te(arguments[Z]));return Y}function Ke(){for(var Y=0,Z=0,se=arguments.length;Z<se;Z++)Y+=arguments[Z].length;var ce=Array(Y),pe=0;for(Z=0;Z<se;Z++)for(var ee=arguments[Z],ye=0,Le=ee.length;ye<Le;ye++,pe++)ce[pe]=ee[ye];return ce}function at(Y,Z,se){if(se||2===arguments.length)for(var ee,ce=0,pe=Z.length;ce<pe;ce++)(ee||!(ce in Z))&&(ee||(ee=Array.prototype.slice.call(Z,0,ce)),ee[ce]=Z[ce]);return Y.concat(ee||Array.prototype.slice.call(Z))}function rt(Y){return this instanceof rt?(this.v=Y,this):new rt(Y)}function He(Y,Z,se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,ce=se.apply(Y,Z||[]),ee=[];return pe={},ye("next"),ye("throw"),ye("return"),pe[Symbol.asyncIterator]=function(){return this},pe;function ye(D){ce[D]&&(pe[D]=function(Mn){return new Promise(function(Cr,Vn){ee.push([D,Mn,Cr,Vn])>1||Le(D,Mn)})})}function Le(D,Mn){try{!function tt(D){D.value instanceof rt?Promise.resolve(D.value.v).then(Re,jt):Ue(ee[0][2],D)}(ce[D](Mn))}catch(Cr){Ue(ee[0][3],Cr)}}function Re(D){Le("next",D)}function jt(D){Le("throw",D)}function Ue(D,Mn){D(Mn),ee.shift(),ee.length&&Le(ee[0][0],ee[0][1])}}function on(Y){var Z,se;return Z={},ce("next"),ce("throw",function(pe){throw pe}),ce("return"),Z[Symbol.iterator]=function(){return this},Z;function ce(pe,ee){Z[pe]=Y[pe]?function(ye){return(se=!se)?{value:rt(Y[pe](ye)),done:!1}:ee?ee(ye):ye}:ee}}function cr(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,Z=Y[Symbol.asyncIterator];return Z?Z.call(Y):(Y=St(Y),se={},ce("next"),ce("throw"),ce("return"),se[Symbol.asyncIterator]=function(){return this},se);function ce(ee){se[ee]=Y[ee]&&function(ye){return new Promise(function(Le,tt){!function pe(ee,ye,Le,tt){Promise.resolve(tt).then(function(Re){ee({value:Re,done:Le})},ye)}(Le,tt,(ye=Y[ee](ye)).done,ye.value)})}}}function Pt(Y,Z){return Object.defineProperty?Object.defineProperty(Y,"raw",{value:Z}):Y.raw=Z,Y}var hn=Object.create?function(Y,Z){Object.defineProperty(Y,"default",{enumerable:!0,value:Z})}:function(Y,Z){Y.default=Z};function ji(Y){if(Y&&Y.__esModule)return Y;var Z={};if(null!=Y)for(var se in Y)"default"!==se&&Object.prototype.hasOwnProperty.call(Y,se)&&be(Z,Y,se);return hn(Z,Y),Z}function Bi(Y){return Y&&Y.__esModule?Y:{default:Y}}function Hi(Y,Z,se,ce){if("a"===se&&!ce)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof Z?Y!==Z||!ce:!Z.has(Y))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===se?ce:"a"===se?ce.call(Y):ce?ce.value:Z.get(Y)}function Cn(Y,Z,se,ce,pe){if("m"===ce)throw new TypeError("Private method is not writable");if("a"===ce&&!pe)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof Z?Y!==Z||!pe:!Z.has(Y))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===ce?pe.call(Y,se):pe?pe.value=se:Z.set(Y,se),se}function lr(Y,Z){if(null===Z||"object"!=typeof Z&&"function"!=typeof Z)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof Y?Z===Y:Y.has(Z)}const Gn={__extends:Tt,__assign:N,__rest:oe,__decorate:Ct,__param:ur,__metadata:xe,__awaiter:Ie,__generator:ge,__createBinding:be,__exportStar:et,__values:St,__read:Te,__spread:Oe,__spreadArrays:Ke,__spreadArray:at,__await:rt,__asyncGenerator:He,__asyncDelegator:on,__asyncValues:cr,__makeTemplateObject:Pt,__importStar:ji,__importDefault:Bi,__classPrivateFieldGet:Hi,__classPrivateFieldSet:Cn,__classPrivateFieldIn:lr}}},go=>{go(go.s=571)}]);